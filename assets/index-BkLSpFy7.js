var ffe=Object.defineProperty;var pfe=(t,e,n)=>e in t?ffe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vt=(t,e,n)=>pfe(t,typeof e!="symbol"?e+"":e,n);function CK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var TK={exports:{}},uI={},IK={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_=Symbol.for("react.element"),mfe=Symbol.for("react.portal"),gfe=Symbol.for("react.fragment"),yfe=Symbol.for("react.strict_mode"),vfe=Symbol.for("react.profiler"),xfe=Symbol.for("react.provider"),bfe=Symbol.for("react.context"),wfe=Symbol.for("react.forward_ref"),_fe=Symbol.for("react.suspense"),kfe=Symbol.for("react.memo"),Sfe=Symbol.for("react.lazy"),O8=Symbol.iterator;function Nfe(t){return t===null||typeof t!="object"?null:(t=O8&&t[O8]||t["@@iterator"],typeof t=="function"?t:null)}var AK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EK=Object.assign,PK={};function Ex(t,e,n){this.props=t,this.context=e,this.refs=PK,this.updater=n||AK}Ex.prototype.isReactComponent={};Ex.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ex.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OK(){}OK.prototype=Ex.prototype;function rL(t,e,n){this.props=t,this.context=e,this.refs=PK,this.updater=n||AK}var sL=rL.prototype=new OK;sL.constructor=rL;EK(sL,Ex.prototype);sL.isPureReactComponent=!0;var j8=Array.isArray,jK=Object.prototype.hasOwnProperty,iL={current:null},$K={key:!0,ref:!0,__self:!0,__source:!0};function DK(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)jK.call(e,r)&&!$K.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:p_,type:t,key:i,ref:a,props:s,_owner:iL.current}}function Cfe(t,e){return{$$typeof:p_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aL(t){return typeof t=="object"&&t!==null&&t.$$typeof===p_}function Tfe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $8=/\/+/g;function pO(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Tfe(""+t.key):e.toString(36)}function dC(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case p_:case mfe:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+pO(a,0):r,j8(s)?(n="",t!=null&&(n=t.replace($8,"$&/")+"/"),dC(s,e,n,"",function(c){return c})):s!=null&&(aL(s)&&(s=Cfe(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace($8,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",j8(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+pO(i,o);a+=dC(i,e,n,l,s)}else if(l=Nfe(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+pO(i,o++),a+=dC(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function VS(t,e,n){if(t==null)return t;var r=[],s=0;return dC(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ife(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Co={current:null},hC={transition:null},Afe={ReactCurrentDispatcher:Co,ReactCurrentBatchConfig:hC,ReactCurrentOwner:iL};function LK(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:VS,forEach:function(t,e,n){VS(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return VS(t,function(){e++}),e},toArray:function(t){return VS(t,function(e){return e})||[]},only:function(t){if(!aL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$n.Component=Ex;$n.Fragment=gfe;$n.Profiler=vfe;$n.PureComponent=rL;$n.StrictMode=yfe;$n.Suspense=_fe;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Afe;$n.act=LK;$n.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=EK({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=iL.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)jK.call(e,l)&&!$K.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:p_,type:t.type,key:s,ref:i,props:r,_owner:a}};$n.createContext=function(t){return t={$$typeof:bfe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xfe,_context:t},t.Consumer=t};$n.createElement=DK;$n.createFactory=function(t){var e=DK.bind(null,t);return e.type=t,e};$n.createRef=function(){return{current:null}};$n.forwardRef=function(t){return{$$typeof:wfe,render:t}};$n.isValidElement=aL;$n.lazy=function(t){return{$$typeof:Sfe,_payload:{_status:-1,_result:t},_init:Ife}};$n.memo=function(t,e){return{$$typeof:kfe,type:t,compare:e===void 0?null:e}};$n.startTransition=function(t){var e=hC.transition;hC.transition={};try{t()}finally{hC.transition=e}};$n.unstable_act=LK;$n.useCallback=function(t,e){return Co.current.useCallback(t,e)};$n.useContext=function(t){return Co.current.useContext(t)};$n.useDebugValue=function(){};$n.useDeferredValue=function(t){return Co.current.useDeferredValue(t)};$n.useEffect=function(t,e){return Co.current.useEffect(t,e)};$n.useId=function(){return Co.current.useId()};$n.useImperativeHandle=function(t,e,n){return Co.current.useImperativeHandle(t,e,n)};$n.useInsertionEffect=function(t,e){return Co.current.useInsertionEffect(t,e)};$n.useLayoutEffect=function(t,e){return Co.current.useLayoutEffect(t,e)};$n.useMemo=function(t,e){return Co.current.useMemo(t,e)};$n.useReducer=function(t,e,n){return Co.current.useReducer(t,e,n)};$n.useRef=function(t){return Co.current.useRef(t)};$n.useState=function(t){return Co.current.useState(t)};$n.useSyncExternalStore=function(t,e,n){return Co.current.useSyncExternalStore(t,e,n)};$n.useTransition=function(){return Co.current.useTransition()};$n.version="18.3.1";IK.exports=$n;var R=IK.exports;const Os=Bc(R),RK=CK({__proto__:null,default:Os},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Efe=R,Pfe=Symbol.for("react.element"),Ofe=Symbol.for("react.fragment"),jfe=Object.prototype.hasOwnProperty,$fe=Efe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dfe={key:!0,ref:!0,__self:!0,__source:!0};function MK(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)jfe.call(e,r)&&!Dfe.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Pfe,type:t,key:i,ref:a,props:s,_owner:$fe.current}}uI.Fragment=Ofe;uI.jsx=MK;uI.jsxs=MK;TK.exports=uI;var p=TK.exports,f4={},FK={exports:{}},Wl={},zK={exports:{}},BK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var ee=U.length;U.push(K);e:for(;0<ee;){var oe=ee-1>>>1,W=U[oe];if(0<s(W,K))U[oe]=K,U[ee]=W,ee=oe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],ee=U.pop();if(ee!==K){U[0]=ee;e:for(var oe=0,W=U.length,Y=W>>>1;oe<Y;){var Q=2*(oe+1)-1,J=U[Q],te=Q+1,me=U[te];if(0>s(J,ee))te<W&&0>s(me,J)?(U[oe]=me,U[te]=ee,oe=te):(U[oe]=J,U[Q]=ee,oe=Q);else if(te<W&&0>s(me,ee))U[oe]=me,U[te]=ee,oe=te;else break e}}return K}function s(U,K){var ee=U.sortIndex-K.sortIndex;return ee!==0?ee:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=U)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function k(U){if(y=!1,_(U),!m)if(n(l)!==null)m=!0,V(N);else{var K=n(c);K!==null&&G(k,K.startTime-U)}}function N(U,K){m=!1,y&&(y=!1,x(C),C=-1),f=!0;var ee=h;try{for(_(K),d=n(l);d!==null&&(!(d.expirationTime>K)||U&&!j());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var W=oe(d.expirationTime<=K);K=t.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),_(K)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var Q=n(c);Q!==null&&G(k,Q.startTime-K),Y=!1}return Y}finally{d=null,h=ee,f=!1}}var A=!1,T=null,C=-1,P=5,$=-1;function j(){return!(t.unstable_now()-$<P)}function O(){if(T!==null){var U=t.unstable_now();$=U;var K=!0;try{K=T(!0,U)}finally{K?F():(A=!1,T=null)}}else A=!1}var F;if(typeof b=="function")F=function(){b(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=O,F=function(){Z.postMessage(null)}}else F=function(){v(O,0)};function V(U){T=U,A||(A=!0,F())}function G(U,K){C=v(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,V(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var ee=h;h=K;try{return U()}finally{h=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=h;h=U;try{return K()}finally{h=ee}},t.unstable_scheduleCallback=function(U,K,ee){var oe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ee+W,U={id:u++,callback:K,priorityLevel:U,startTime:ee,expirationTime:W,sortIndex:-1},ee>oe?(U.sortIndex=ee,e(c,U),n(l)===null&&U===n(c)&&(y?(x(C),C=-1):y=!0,G(k,ee-oe))):(U.sortIndex=W,e(l,U),m||f||(m=!0,V(N))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var K=h;return function(){var ee=h;h=K;try{return U.apply(this,arguments)}finally{h=ee}}}})(BK);zK.exports=BK;var Lfe=zK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rfe=R,Rl=Lfe;function mt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WK=new Set,Jw={};function U0(t,e){Hv(t,e),Hv(t+"Capture",e)}function Hv(t,e){for(Jw[t]=e,t=0;t<e.length;t++)WK.add(e[t])}var Gh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p4=Object.prototype.hasOwnProperty,Mfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D8={},L8={};function Ffe(t){return p4.call(L8,t)?!0:p4.call(D8,t)?!1:Mfe.test(t)?L8[t]=!0:(D8[t]=!0,!1)}function zfe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bfe(t,e,n,r){if(e===null||typeof e>"u"||zfe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function To(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fa[t]=new To(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fa[e]=new To(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fa[t]=new To(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fa[t]=new To(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fa[t]=new To(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fa[t]=new To(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fa[t]=new To(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fa[t]=new To(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fa[t]=new To(t,5,!1,t.toLowerCase(),null,!1,!1)});var oL=/[\-:]([a-z])/g;function lL(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oL,lL);fa[e]=new To(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oL,lL);fa[e]=new To(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oL,lL);fa[e]=new To(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fa[t]=new To(t,1,!1,t.toLowerCase(),null,!1,!1)});fa.xlinkHref=new To("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fa[t]=new To(t,1,!1,t.toLowerCase(),null,!0,!0)});function cL(t,e,n,r){var s=fa.hasOwnProperty(e)?fa[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bfe(e,n,s,r)&&(n=null),r||s===null?Ffe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var df=Rfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,HS=Symbol.for("react.element"),dv=Symbol.for("react.portal"),hv=Symbol.for("react.fragment"),uL=Symbol.for("react.strict_mode"),m4=Symbol.for("react.profiler"),UK=Symbol.for("react.provider"),VK=Symbol.for("react.context"),dL=Symbol.for("react.forward_ref"),g4=Symbol.for("react.suspense"),y4=Symbol.for("react.suspense_list"),hL=Symbol.for("react.memo"),ap=Symbol.for("react.lazy"),HK=Symbol.for("react.offscreen"),R8=Symbol.iterator;function N1(t){return t===null||typeof t!="object"?null:(t=R8&&t[R8]||t["@@iterator"],typeof t=="function"?t:null)}var ds=Object.assign,mO;function nw(t){if(mO===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mO=e&&e[1]||""}return`
`+mO+t}var gO=!1;function yO(t,e){if(!t||gO)return"";gO=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{gO=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nw(t):""}function Wfe(t){switch(t.tag){case 5:return nw(t.type);case 16:return nw("Lazy");case 13:return nw("Suspense");case 19:return nw("SuspenseList");case 0:case 2:case 15:return t=yO(t.type,!1),t;case 11:return t=yO(t.type.render,!1),t;case 1:return t=yO(t.type,!0),t;default:return""}}function v4(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hv:return"Fragment";case dv:return"Portal";case m4:return"Profiler";case uL:return"StrictMode";case g4:return"Suspense";case y4:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VK:return(t.displayName||"Context")+".Consumer";case UK:return(t._context.displayName||"Context")+".Provider";case dL:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hL:return e=t.displayName||null,e!==null?e:v4(t.type)||"Memo";case ap:e=t._payload,t=t._init;try{return v4(t(e))}catch{}}return null}function Ufe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v4(e);case 8:return e===uL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zp(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qK(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vfe(t){var e=qK(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qS(t){t._valueTracker||(t._valueTracker=Vfe(t))}function GK(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qK(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zC(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x4(t,e){var n=e.checked;return ds({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function M8(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zp(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KK(t,e){e=e.checked,e!=null&&cL(t,"checked",e,!1)}function b4(t,e){KK(t,e);var n=Zp(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w4(t,e.type,n):e.hasOwnProperty("defaultValue")&&w4(t,e.type,Zp(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F8(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w4(t,e,n){(e!=="number"||zC(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rw=Array.isArray;function Tv(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zp(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _4(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(mt(91));return ds({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z8(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(mt(92));if(rw(n)){if(1<n.length)throw Error(mt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zp(n)}}function XK(t,e){var n=Zp(e.value),r=Zp(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function B8(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YK(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k4(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YK(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var GS,ZK=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(GS=GS||document.createElement("div"),GS.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=GS.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qw(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kw={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hfe=["Webkit","ms","Moz","O"];Object.keys(kw).forEach(function(t){Hfe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kw[e]=kw[t]})});function JK(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kw.hasOwnProperty(t)&&kw[t]?(""+e).trim():e+"px"}function QK(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=JK(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qfe=ds({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function S4(t,e){if(e){if(qfe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(mt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(mt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(mt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(mt(62))}}function N4(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C4=null;function fL(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var T4=null,Iv=null,Av=null;function W8(t){if(t=y_(t)){if(typeof T4!="function")throw Error(mt(280));var e=t.stateNode;e&&(e=mI(e),T4(t.stateNode,t.type,e))}}function eX(t){Iv?Av?Av.push(t):Av=[t]:Iv=t}function tX(){if(Iv){var t=Iv,e=Av;if(Av=Iv=null,W8(t),e)for(t=0;t<e.length;t++)W8(e[t])}}function nX(t,e){return t(e)}function rX(){}var vO=!1;function sX(t,e,n){if(vO)return t(e,n);vO=!0;try{return nX(t,e,n)}finally{vO=!1,(Iv!==null||Av!==null)&&(rX(),tX())}}function e2(t,e){var n=t.stateNode;if(n===null)return null;var r=mI(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(mt(231,e,typeof n));return n}var I4=!1;if(Gh)try{var C1={};Object.defineProperty(C1,"passive",{get:function(){I4=!0}}),window.addEventListener("test",C1,C1),window.removeEventListener("test",C1,C1)}catch{I4=!1}function Gfe(t,e,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Sw=!1,BC=null,WC=!1,A4=null,Kfe={onError:function(t){Sw=!0,BC=t}};function Xfe(t,e,n,r,s,i,a,o,l){Sw=!1,BC=null,Gfe.apply(Kfe,arguments)}function Yfe(t,e,n,r,s,i,a,o,l){if(Xfe.apply(this,arguments),Sw){if(Sw){var c=BC;Sw=!1,BC=null}else throw Error(mt(198));WC||(WC=!0,A4=c)}}function V0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iX(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U8(t){if(V0(t)!==t)throw Error(mt(188))}function Zfe(t){var e=t.alternate;if(!e){if(e=V0(t),e===null)throw Error(mt(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return U8(s),t;if(i===r)return U8(s),e;i=i.sibling}throw Error(mt(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(mt(189))}}if(n.alternate!==r)throw Error(mt(190))}if(n.tag!==3)throw Error(mt(188));return n.stateNode.current===n?t:e}function aX(t){return t=Zfe(t),t!==null?oX(t):null}function oX(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oX(t);if(e!==null)return e;t=t.sibling}return null}var lX=Rl.unstable_scheduleCallback,V8=Rl.unstable_cancelCallback,Jfe=Rl.unstable_shouldYield,Qfe=Rl.unstable_requestPaint,$s=Rl.unstable_now,epe=Rl.unstable_getCurrentPriorityLevel,pL=Rl.unstable_ImmediatePriority,cX=Rl.unstable_UserBlockingPriority,UC=Rl.unstable_NormalPriority,tpe=Rl.unstable_LowPriority,uX=Rl.unstable_IdlePriority,dI=null,Ad=null;function npe(t){if(Ad&&typeof Ad.onCommitFiberRoot=="function")try{Ad.onCommitFiberRoot(dI,t,void 0,(t.current.flags&128)===128)}catch{}}var Iu=Math.clz32?Math.clz32:ipe,rpe=Math.log,spe=Math.LN2;function ipe(t){return t>>>=0,t===0?32:31-(rpe(t)/spe|0)|0}var KS=64,XS=4194304;function sw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function VC(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=sw(o):(i&=a,i!==0&&(r=sw(i)))}else a=n&~s,a!==0?r=sw(a):i!==0&&(r=sw(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Iu(e),s=1<<n,r|=t[n],e&=~s;return r}function ape(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ope(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Iu(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=ape(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function E4(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dX(){var t=KS;return KS<<=1,!(KS&4194240)&&(KS=64),t}function xO(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function m_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Iu(e),t[e]=n}function lpe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Iu(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function mL(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Iu(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pr=0;function hX(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fX,gL,pX,mX,gX,P4=!1,YS=[],jp=null,$p=null,Dp=null,t2=new Map,n2=new Map,fp=[],cpe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H8(t,e){switch(t){case"focusin":case"focusout":jp=null;break;case"dragenter":case"dragleave":$p=null;break;case"mouseover":case"mouseout":Dp=null;break;case"pointerover":case"pointerout":t2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":n2.delete(e.pointerId)}}function T1(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=y_(e),e!==null&&gL(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function upe(t,e,n,r,s){switch(e){case"focusin":return jp=T1(jp,t,e,n,r,s),!0;case"dragenter":return $p=T1($p,t,e,n,r,s),!0;case"mouseover":return Dp=T1(Dp,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return t2.set(i,T1(t2.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,n2.set(i,T1(n2.get(i)||null,t,e,n,r,s)),!0}return!1}function yX(t){var e=jg(t.target);if(e!==null){var n=V0(e);if(n!==null){if(e=n.tag,e===13){if(e=iX(n),e!==null){t.blockedOn=e,gX(t.priority,function(){pX(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fC(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=O4(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);C4=r,n.target.dispatchEvent(r),C4=null}else return e=y_(n),e!==null&&gL(e),t.blockedOn=n,!1;e.shift()}return!0}function q8(t,e,n){fC(t)&&n.delete(e)}function dpe(){P4=!1,jp!==null&&fC(jp)&&(jp=null),$p!==null&&fC($p)&&($p=null),Dp!==null&&fC(Dp)&&(Dp=null),t2.forEach(q8),n2.forEach(q8)}function I1(t,e){t.blockedOn===e&&(t.blockedOn=null,P4||(P4=!0,Rl.unstable_scheduleCallback(Rl.unstable_NormalPriority,dpe)))}function r2(t){function e(s){return I1(s,t)}if(0<YS.length){I1(YS[0],t);for(var n=1;n<YS.length;n++){var r=YS[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jp!==null&&I1(jp,t),$p!==null&&I1($p,t),Dp!==null&&I1(Dp,t),t2.forEach(e),n2.forEach(e),n=0;n<fp.length;n++)r=fp[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fp.length&&(n=fp[0],n.blockedOn===null);)yX(n),n.blockedOn===null&&fp.shift()}var Ev=df.ReactCurrentBatchConfig,HC=!0;function hpe(t,e,n,r){var s=pr,i=Ev.transition;Ev.transition=null;try{pr=1,yL(t,e,n,r)}finally{pr=s,Ev.transition=i}}function fpe(t,e,n,r){var s=pr,i=Ev.transition;Ev.transition=null;try{pr=4,yL(t,e,n,r)}finally{pr=s,Ev.transition=i}}function yL(t,e,n,r){if(HC){var s=O4(t,e,n,r);if(s===null)AO(t,e,r,qC,n),H8(t,r);else if(upe(s,t,e,n,r))r.stopPropagation();else if(H8(t,r),e&4&&-1<cpe.indexOf(t)){for(;s!==null;){var i=y_(s);if(i!==null&&fX(i),i=O4(t,e,n,r),i===null&&AO(t,e,r,qC,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else AO(t,e,r,null,n)}}var qC=null;function O4(t,e,n,r){if(qC=null,t=fL(r),t=jg(t),t!==null)if(e=V0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iX(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qC=t,null}function vX(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(epe()){case pL:return 1;case cX:return 4;case UC:case tpe:return 16;case uX:return 536870912;default:return 16}default:return 16}}var xp=null,vL=null,pC=null;function xX(){if(pC)return pC;var t,e=vL,n=e.length,r,s="value"in xp?xp.value:xp.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return pC=s.slice(t,1<r?1-r:void 0)}function mC(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ZS(){return!0}function G8(){return!1}function Ul(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ZS:G8,this.isPropagationStopped=G8,this}return ds(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ZS)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ZS)},persist:function(){},isPersistent:ZS}),e}var Px={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xL=Ul(Px),g_=ds({},Px,{view:0,detail:0}),ppe=Ul(g_),bO,wO,A1,hI=ds({},g_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==A1&&(A1&&t.type==="mousemove"?(bO=t.screenX-A1.screenX,wO=t.screenY-A1.screenY):wO=bO=0,A1=t),bO)},movementY:function(t){return"movementY"in t?t.movementY:wO}}),K8=Ul(hI),mpe=ds({},hI,{dataTransfer:0}),gpe=Ul(mpe),ype=ds({},g_,{relatedTarget:0}),_O=Ul(ype),vpe=ds({},Px,{animationName:0,elapsedTime:0,pseudoElement:0}),xpe=Ul(vpe),bpe=ds({},Px,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wpe=Ul(bpe),_pe=ds({},Px,{data:0}),X8=Ul(_pe),kpe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Spe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Npe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cpe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Npe[t])?!!e[t]:!1}function bL(){return Cpe}var Tpe=ds({},g_,{key:function(t){if(t.key){var e=kpe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mC(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Spe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bL,charCode:function(t){return t.type==="keypress"?mC(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mC(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ipe=Ul(Tpe),Ape=ds({},hI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y8=Ul(Ape),Epe=ds({},g_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bL}),Ppe=Ul(Epe),Ope=ds({},Px,{propertyName:0,elapsedTime:0,pseudoElement:0}),jpe=Ul(Ope),$pe=ds({},hI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dpe=Ul($pe),Lpe=[9,13,27,32],wL=Gh&&"CompositionEvent"in window,Nw=null;Gh&&"documentMode"in document&&(Nw=document.documentMode);var Rpe=Gh&&"TextEvent"in window&&!Nw,bX=Gh&&(!wL||Nw&&8<Nw&&11>=Nw),Z8=" ",J8=!1;function wX(t,e){switch(t){case"keyup":return Lpe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _X(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fv=!1;function Mpe(t,e){switch(t){case"compositionend":return _X(e);case"keypress":return e.which!==32?null:(J8=!0,Z8);case"textInput":return t=e.data,t===Z8&&J8?null:t;default:return null}}function Fpe(t,e){if(fv)return t==="compositionend"||!wL&&wX(t,e)?(t=xX(),pC=vL=xp=null,fv=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bX&&e.locale!=="ko"?null:e.data;default:return null}}var zpe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q8(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zpe[t.type]:e==="textarea"}function kX(t,e,n,r){eX(r),e=GC(e,"onChange"),0<e.length&&(n=new xL("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cw=null,s2=null;function Bpe(t){$X(t,0)}function fI(t){var e=gv(t);if(GK(e))return t}function Wpe(t,e){if(t==="change")return e}var SX=!1;if(Gh){var kO;if(Gh){var SO="oninput"in document;if(!SO){var eB=document.createElement("div");eB.setAttribute("oninput","return;"),SO=typeof eB.oninput=="function"}kO=SO}else kO=!1;SX=kO&&(!document.documentMode||9<document.documentMode)}function tB(){Cw&&(Cw.detachEvent("onpropertychange",NX),s2=Cw=null)}function NX(t){if(t.propertyName==="value"&&fI(s2)){var e=[];kX(e,s2,t,fL(t)),sX(Bpe,e)}}function Upe(t,e,n){t==="focusin"?(tB(),Cw=e,s2=n,Cw.attachEvent("onpropertychange",NX)):t==="focusout"&&tB()}function Vpe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fI(s2)}function Hpe(t,e){if(t==="click")return fI(e)}function qpe(t,e){if(t==="input"||t==="change")return fI(e)}function Gpe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $u=typeof Object.is=="function"?Object.is:Gpe;function i2(t,e){if($u(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!p4.call(e,s)||!$u(t[s],e[s]))return!1}return!0}function nB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rB(t,e){var n=nB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nB(n)}}function CX(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?CX(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TX(){for(var t=window,e=zC();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zC(t.document)}return e}function _L(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kpe(t){var e=TX(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&CX(n.ownerDocument.documentElement,n)){if(r!==null&&_L(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=rB(n,i);var a=rB(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xpe=Gh&&"documentMode"in document&&11>=document.documentMode,pv=null,j4=null,Tw=null,$4=!1;function sB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$4||pv==null||pv!==zC(r)||(r=pv,"selectionStart"in r&&_L(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tw&&i2(Tw,r)||(Tw=r,r=GC(j4,"onSelect"),0<r.length&&(e=new xL("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pv)))}function JS(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mv={animationend:JS("Animation","AnimationEnd"),animationiteration:JS("Animation","AnimationIteration"),animationstart:JS("Animation","AnimationStart"),transitionend:JS("Transition","TransitionEnd")},NO={},IX={};Gh&&(IX=document.createElement("div").style,"AnimationEvent"in window||(delete mv.animationend.animation,delete mv.animationiteration.animation,delete mv.animationstart.animation),"TransitionEvent"in window||delete mv.transitionend.transition);function pI(t){if(NO[t])return NO[t];if(!mv[t])return t;var e=mv[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IX)return NO[t]=e[n];return t}var AX=pI("animationend"),EX=pI("animationiteration"),PX=pI("animationstart"),OX=pI("transitionend"),jX=new Map,iB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ym(t,e){jX.set(t,e),U0(e,[t])}for(var CO=0;CO<iB.length;CO++){var TO=iB[CO],Ype=TO.toLowerCase(),Zpe=TO[0].toUpperCase()+TO.slice(1);ym(Ype,"on"+Zpe)}ym(AX,"onAnimationEnd");ym(EX,"onAnimationIteration");ym(PX,"onAnimationStart");ym("dblclick","onDoubleClick");ym("focusin","onFocus");ym("focusout","onBlur");ym(OX,"onTransitionEnd");Hv("onMouseEnter",["mouseout","mouseover"]);Hv("onMouseLeave",["mouseout","mouseover"]);Hv("onPointerEnter",["pointerout","pointerover"]);Hv("onPointerLeave",["pointerout","pointerover"]);U0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));U0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));U0("onBeforeInput",["compositionend","keypress","textInput","paste"]);U0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));U0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));U0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jpe=new Set("cancel close invalid load scroll toggle".split(" ").concat(iw));function aB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yfe(r,e,void 0,t),t.currentTarget=null}function $X(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;aB(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;aB(s,o,c),i=l}}}if(WC)throw t=A4,WC=!1,A4=null,t}function Fr(t,e){var n=e[F4];n===void 0&&(n=e[F4]=new Set);var r=t+"__bubble";n.has(r)||(DX(e,t,2,!1),n.add(r))}function IO(t,e,n){var r=0;e&&(r|=4),DX(n,t,r,e)}var QS="_reactListening"+Math.random().toString(36).slice(2);function a2(t){if(!t[QS]){t[QS]=!0,WK.forEach(function(n){n!=="selectionchange"&&(Jpe.has(n)||IO(n,!1,t),IO(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[QS]||(e[QS]=!0,IO("selectionchange",!1,e))}}function DX(t,e,n,r){switch(vX(e)){case 1:var s=hpe;break;case 4:s=fpe;break;default:s=yL}n=s.bind(null,e,n,t),s=void 0,!I4||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function AO(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=jg(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}sX(function(){var c=i,u=fL(n),d=[];e:{var h=jX.get(t);if(h!==void 0){var f=xL,m=t;switch(t){case"keypress":if(mC(n)===0)break e;case"keydown":case"keyup":f=Ipe;break;case"focusin":m="focus",f=_O;break;case"focusout":m="blur",f=_O;break;case"beforeblur":case"afterblur":f=_O;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=K8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=gpe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Ppe;break;case AX:case EX:case PX:f=xpe;break;case OX:f=jpe;break;case"scroll":f=ppe;break;case"wheel":f=Dpe;break;case"copy":case"cut":case"paste":f=wpe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Y8}var y=(e&4)!==0,v=!y&&t==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var b=c,_;b!==null;){_=b;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,x!==null&&(k=e2(b,x),k!=null&&y.push(o2(b,k,_)))),v)break;b=b.return}0<y.length&&(h=new f(h,m,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==C4&&(m=n.relatedTarget||n.fromElement)&&(jg(m)||m[Kh]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?jg(m):null,m!==null&&(v=V0(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(y=K8,k="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(y=Y8,k="onPointerLeave",x="onPointerEnter",b="pointer"),v=f==null?h:gv(f),_=m==null?h:gv(m),h=new y(k,b+"leave",f,n,u),h.target=v,h.relatedTarget=_,k=null,jg(u)===c&&(y=new y(x,b+"enter",m,n,u),y.target=_,y.relatedTarget=v,k=y),v=k,f&&m)t:{for(y=f,x=m,b=0,_=y;_;_=Ly(_))b++;for(_=0,k=x;k;k=Ly(k))_++;for(;0<b-_;)y=Ly(y),b--;for(;0<_-b;)x=Ly(x),_--;for(;b--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ly(y),x=Ly(x)}y=null}else y=null;f!==null&&oB(d,h,f,y,!1),m!==null&&v!==null&&oB(d,v,m,y,!0)}}e:{if(h=c?gv(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var N=Wpe;else if(Q8(h))if(SX)N=qpe;else{N=Vpe;var A=Upe}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=Hpe);if(N&&(N=N(t,c))){kX(d,N,n,u);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&w4(h,"number",h.value)}switch(A=c?gv(c):window,t){case"focusin":(Q8(A)||A.contentEditable==="true")&&(pv=A,j4=c,Tw=null);break;case"focusout":Tw=j4=pv=null;break;case"mousedown":$4=!0;break;case"contextmenu":case"mouseup":case"dragend":$4=!1,sB(d,n,u);break;case"selectionchange":if(Xpe)break;case"keydown":case"keyup":sB(d,n,u)}var T;if(wL)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else fv?wX(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(bX&&n.locale!=="ko"&&(fv||C!=="onCompositionStart"?C==="onCompositionEnd"&&fv&&(T=xX()):(xp=u,vL="value"in xp?xp.value:xp.textContent,fv=!0)),A=GC(c,C),0<A.length&&(C=new X8(C,t,null,n,u),d.push({event:C,listeners:A}),T?C.data=T:(T=_X(n),T!==null&&(C.data=T)))),(T=Rpe?Mpe(t,n):Fpe(t,n))&&(c=GC(c,"onBeforeInput"),0<c.length&&(u=new X8("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}$X(d,e)})}function o2(t,e,n){return{instance:t,listener:e,currentTarget:n}}function GC(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=e2(t,n),i!=null&&r.unshift(o2(t,i,s)),i=e2(t,e),i!=null&&r.push(o2(t,i,s))),t=t.return}return r}function Ly(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oB(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=e2(n,i),l!=null&&a.unshift(o2(n,l,o))):s||(l=e2(n,i),l!=null&&a.push(o2(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Qpe=/\r\n?/g,eme=/\u0000|\uFFFD/g;function lB(t){return(typeof t=="string"?t:""+t).replace(Qpe,`
`).replace(eme,"")}function eN(t,e,n){if(e=lB(e),lB(t)!==e&&n)throw Error(mt(425))}function KC(){}var D4=null,L4=null;function R4(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var M4=typeof setTimeout=="function"?setTimeout:void 0,tme=typeof clearTimeout=="function"?clearTimeout:void 0,cB=typeof Promise=="function"?Promise:void 0,nme=typeof queueMicrotask=="function"?queueMicrotask:typeof cB<"u"?function(t){return cB.resolve(null).then(t).catch(rme)}:M4;function rme(t){setTimeout(function(){throw t})}function EO(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),r2(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);r2(e)}function Lp(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ox=Math.random().toString(36).slice(2),Sd="__reactFiber$"+Ox,l2="__reactProps$"+Ox,Kh="__reactContainer$"+Ox,F4="__reactEvents$"+Ox,sme="__reactListeners$"+Ox,ime="__reactHandles$"+Ox;function jg(t){var e=t[Sd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kh]||n[Sd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uB(t);t!==null;){if(n=t[Sd])return n;t=uB(t)}return e}t=n,n=t.parentNode}return null}function y_(t){return t=t[Sd]||t[Kh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gv(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(mt(33))}function mI(t){return t[l2]||null}var z4=[],yv=-1;function vm(t){return{current:t}}function Wr(t){0>yv||(t.current=z4[yv],z4[yv]=null,yv--)}function jr(t,e){yv++,z4[yv]=t.current,t.current=e}var Jp={},Ua=vm(Jp),nl=vm(!1),c0=Jp;function qv(t,e){var n=t.type.contextTypes;if(!n)return Jp;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rl(t){return t=t.childContextTypes,t!=null}function XC(){Wr(nl),Wr(Ua)}function dB(t,e,n){if(Ua.current!==Jp)throw Error(mt(168));jr(Ua,e),jr(nl,n)}function LX(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(mt(108,Ufe(t)||"Unknown",s));return ds({},n,r)}function YC(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jp,c0=Ua.current,jr(Ua,t),jr(nl,nl.current),!0}function hB(t,e,n){var r=t.stateNode;if(!r)throw Error(mt(169));n?(t=LX(t,e,c0),r.__reactInternalMemoizedMergedChildContext=t,Wr(nl),Wr(Ua),jr(Ua,t)):Wr(nl),jr(nl,n)}var Th=null,gI=!1,PO=!1;function RX(t){Th===null?Th=[t]:Th.push(t)}function ame(t){gI=!0,RX(t)}function xm(){if(!PO&&Th!==null){PO=!0;var t=0,e=pr;try{var n=Th;for(pr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Th=null,gI=!1}catch(s){throw Th!==null&&(Th=Th.slice(t+1)),lX(pL,xm),s}finally{pr=e,PO=!1}}return null}var vv=[],xv=0,ZC=null,JC=0,yc=[],vc=0,u0=null,Dh=1,Lh="";function pg(t,e){vv[xv++]=JC,vv[xv++]=ZC,ZC=t,JC=e}function MX(t,e,n){yc[vc++]=Dh,yc[vc++]=Lh,yc[vc++]=u0,u0=t;var r=Dh;t=Lh;var s=32-Iu(r)-1;r&=~(1<<s),n+=1;var i=32-Iu(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Dh=1<<32-Iu(e)+s|n<<s|r,Lh=i+t}else Dh=1<<i|n<<s|r,Lh=t}function kL(t){t.return!==null&&(pg(t,1),MX(t,1,0))}function SL(t){for(;t===ZC;)ZC=vv[--xv],vv[xv]=null,JC=vv[--xv],vv[xv]=null;for(;t===u0;)u0=yc[--vc],yc[vc]=null,Lh=yc[--vc],yc[vc]=null,Dh=yc[--vc],yc[vc]=null}var $l=null,Al=null,Zr=!1,xu=null;function FX(t,e){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$l=t,Al=Lp(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$l=t,Al=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=u0!==null?{id:Dh,overflow:Lh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bc(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$l=t,Al=null,!0):!1;default:return!1}}function B4(t){return(t.mode&1)!==0&&(t.flags&128)===0}function W4(t){if(Zr){var e=Al;if(e){var n=e;if(!fB(t,e)){if(B4(t))throw Error(mt(418));e=Lp(n.nextSibling);var r=$l;e&&fB(t,e)?FX(r,n):(t.flags=t.flags&-4097|2,Zr=!1,$l=t)}}else{if(B4(t))throw Error(mt(418));t.flags=t.flags&-4097|2,Zr=!1,$l=t}}}function pB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$l=t}function tN(t){if(t!==$l)return!1;if(!Zr)return pB(t),Zr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!R4(t.type,t.memoizedProps)),e&&(e=Al)){if(B4(t))throw zX(),Error(mt(418));for(;e;)FX(t,e),e=Lp(e.nextSibling)}if(pB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(mt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Al=Lp(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Al=null}}else Al=$l?Lp(t.stateNode.nextSibling):null;return!0}function zX(){for(var t=Al;t;)t=Lp(t.nextSibling)}function Gv(){Al=$l=null,Zr=!1}function NL(t){xu===null?xu=[t]:xu.push(t)}var ome=df.ReactCurrentBatchConfig;function E1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(mt(309));var r=n.stateNode}if(!r)throw Error(mt(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(mt(284));if(!n._owner)throw Error(mt(290,t))}return t}function nN(t,e){throw t=Object.prototype.toString.call(e),Error(mt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mB(t){var e=t._init;return e(t._payload)}function BX(t){function e(x,b){if(t){var _=x.deletions;_===null?(x.deletions=[b],x.flags|=16):_.push(b)}}function n(x,b){if(!t)return null;for(;b!==null;)e(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=zp(x,b),x.index=0,x.sibling=null,x}function i(x,b,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<b?(x.flags|=2,b):_):(x.flags|=2,b)):(x.flags|=1048576,b)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,b,_,k){return b===null||b.tag!==6?(b=MO(_,x.mode,k),b.return=x,b):(b=s(b,_),b.return=x,b)}function l(x,b,_,k){var N=_.type;return N===hv?u(x,b,_.props.children,k,_.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ap&&mB(N)===b.type)?(k=s(b,_.props),k.ref=E1(x,b,_),k.return=x,k):(k=_C(_.type,_.key,_.props,null,x.mode,k),k.ref=E1(x,b,_),k.return=x,k)}function c(x,b,_,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=FO(_,x.mode,k),b.return=x,b):(b=s(b,_.children||[]),b.return=x,b)}function u(x,b,_,k,N){return b===null||b.tag!==7?(b=Kg(_,x.mode,k,N),b.return=x,b):(b=s(b,_),b.return=x,b)}function d(x,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=MO(""+b,x.mode,_),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case HS:return _=_C(b.type,b.key,b.props,null,x.mode,_),_.ref=E1(x,null,b),_.return=x,_;case dv:return b=FO(b,x.mode,_),b.return=x,b;case ap:var k=b._init;return d(x,k(b._payload),_)}if(rw(b)||N1(b))return b=Kg(b,x.mode,_,null),b.return=x,b;nN(x,b)}return null}function h(x,b,_,k){var N=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return N!==null?null:o(x,b,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case HS:return _.key===N?l(x,b,_,k):null;case dv:return _.key===N?c(x,b,_,k):null;case ap:return N=_._init,h(x,b,N(_._payload),k)}if(rw(_)||N1(_))return N!==null?null:u(x,b,_,k,null);nN(x,_)}return null}function f(x,b,_,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(_)||null,o(b,x,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case HS:return x=x.get(k.key===null?_:k.key)||null,l(b,x,k,N);case dv:return x=x.get(k.key===null?_:k.key)||null,c(b,x,k,N);case ap:var A=k._init;return f(x,b,_,A(k._payload),N)}if(rw(k)||N1(k))return x=x.get(_)||null,u(b,x,k,N,null);nN(b,k)}return null}function m(x,b,_,k){for(var N=null,A=null,T=b,C=b=0,P=null;T!==null&&C<_.length;C++){T.index>C?(P=T,T=null):P=T.sibling;var $=h(x,T,_[C],k);if($===null){T===null&&(T=P);break}t&&T&&$.alternate===null&&e(x,T),b=i($,b,C),A===null?N=$:A.sibling=$,A=$,T=P}if(C===_.length)return n(x,T),Zr&&pg(x,C),N;if(T===null){for(;C<_.length;C++)T=d(x,_[C],k),T!==null&&(b=i(T,b,C),A===null?N=T:A.sibling=T,A=T);return Zr&&pg(x,C),N}for(T=r(x,T);C<_.length;C++)P=f(T,x,C,_[C],k),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?C:P.key),b=i(P,b,C),A===null?N=P:A.sibling=P,A=P);return t&&T.forEach(function(j){return e(x,j)}),Zr&&pg(x,C),N}function y(x,b,_,k){var N=N1(_);if(typeof N!="function")throw Error(mt(150));if(_=N.call(_),_==null)throw Error(mt(151));for(var A=N=null,T=b,C=b=0,P=null,$=_.next();T!==null&&!$.done;C++,$=_.next()){T.index>C?(P=T,T=null):P=T.sibling;var j=h(x,T,$.value,k);if(j===null){T===null&&(T=P);break}t&&T&&j.alternate===null&&e(x,T),b=i(j,b,C),A===null?N=j:A.sibling=j,A=j,T=P}if($.done)return n(x,T),Zr&&pg(x,C),N;if(T===null){for(;!$.done;C++,$=_.next())$=d(x,$.value,k),$!==null&&(b=i($,b,C),A===null?N=$:A.sibling=$,A=$);return Zr&&pg(x,C),N}for(T=r(x,T);!$.done;C++,$=_.next())$=f(T,x,C,$.value,k),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?C:$.key),b=i($,b,C),A===null?N=$:A.sibling=$,A=$);return t&&T.forEach(function(O){return e(x,O)}),Zr&&pg(x,C),N}function v(x,b,_,k){if(typeof _=="object"&&_!==null&&_.type===hv&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case HS:e:{for(var N=_.key,A=b;A!==null;){if(A.key===N){if(N=_.type,N===hv){if(A.tag===7){n(x,A.sibling),b=s(A,_.props.children),b.return=x,x=b;break e}}else if(A.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ap&&mB(N)===A.type){n(x,A.sibling),b=s(A,_.props),b.ref=E1(x,A,_),b.return=x,x=b;break e}n(x,A);break}else e(x,A);A=A.sibling}_.type===hv?(b=Kg(_.props.children,x.mode,k,_.key),b.return=x,x=b):(k=_C(_.type,_.key,_.props,null,x.mode,k),k.ref=E1(x,b,_),k.return=x,x=k)}return a(x);case dv:e:{for(A=_.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(x,b.sibling),b=s(b,_.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else e(x,b);b=b.sibling}b=FO(_,x.mode,k),b.return=x,x=b}return a(x);case ap:return A=_._init,v(x,b,A(_._payload),k)}if(rw(_))return m(x,b,_,k);if(N1(_))return y(x,b,_,k);nN(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(x,b.sibling),b=s(b,_),b.return=x,x=b):(n(x,b),b=MO(_,x.mode,k),b.return=x,x=b),a(x)):n(x,b)}return v}var Kv=BX(!0),WX=BX(!1),QC=vm(null),e5=null,bv=null,CL=null;function TL(){CL=bv=e5=null}function IL(t){var e=QC.current;Wr(QC),t._currentValue=e}function U4(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pv(t,e){e5=t,CL=bv=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jo=!0),t.firstContext=null)}function jc(t){var e=t._currentValue;if(CL!==t)if(t={context:t,memoizedValue:e,next:null},bv===null){if(e5===null)throw Error(mt(308));bv=t,e5.dependencies={lanes:0,firstContext:t}}else bv=bv.next=t;return e}var $g=null;function AL(t){$g===null?$g=[t]:$g.push(t)}function UX(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,AL(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xh(t,r)}function Xh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var op=!1;function EL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VX(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rp(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xh(t,n)}return s=r.interleaved,s===null?(e.next=e,AL(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xh(t,n)}function gC(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mL(t,n)}}function gB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function t5(t,e,n,r){var s=t.updateQueue;op=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;a=0,u=c=l=null,o=i;do{var h=o.lane,f=o.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,y=o;switch(h=e,f=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=ds({},d,h);break e;case 2:op=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);h0|=a,t.lanes=a,t.memoizedState=d}}function yB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(mt(191,s));s.call(r)}}}var v_={},Ed=vm(v_),c2=vm(v_),u2=vm(v_);function Dg(t){if(t===v_)throw Error(mt(174));return t}function PL(t,e){switch(jr(u2,e),jr(c2,t),jr(Ed,v_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:k4(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=k4(e,t)}Wr(Ed),jr(Ed,e)}function Xv(){Wr(Ed),Wr(c2),Wr(u2)}function HX(t){Dg(u2.current);var e=Dg(Ed.current),n=k4(e,t.type);e!==n&&(jr(c2,t),jr(Ed,n))}function OL(t){c2.current===t&&(Wr(Ed),Wr(c2))}var cs=vm(0);function n5(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var OO=[];function jL(){for(var t=0;t<OO.length;t++)OO[t]._workInProgressVersionPrimary=null;OO.length=0}var yC=df.ReactCurrentDispatcher,jO=df.ReactCurrentBatchConfig,d0=0,us=null,fi=null,Li=null,r5=!1,Iw=!1,d2=0,lme=0;function Sa(){throw Error(mt(321))}function $L(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$u(t[n],e[n]))return!1;return!0}function DL(t,e,n,r,s,i){if(d0=i,us=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yC.current=t===null||t.memoizedState===null?hme:fme,t=n(r,s),Iw){i=0;do{if(Iw=!1,d2=0,25<=i)throw Error(mt(301));i+=1,Li=fi=null,e.updateQueue=null,yC.current=pme,t=n(r,s)}while(Iw)}if(yC.current=s5,e=fi!==null&&fi.next!==null,d0=0,Li=fi=us=null,r5=!1,e)throw Error(mt(300));return t}function LL(){var t=d2!==0;return d2=0,t}function yd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?us.memoizedState=Li=t:Li=Li.next=t,Li}function $c(){if(fi===null){var t=us.alternate;t=t!==null?t.memoizedState:null}else t=fi.next;var e=Li===null?us.memoizedState:Li.next;if(e!==null)Li=e,fi=t;else{if(t===null)throw Error(mt(310));fi=t,t={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Li===null?us.memoizedState=Li=t:Li=Li.next=t}return Li}function h2(t,e){return typeof e=="function"?e(t):e}function $O(t){var e=$c(),n=e.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=t;var r=fi,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var u=c.lane;if((d0&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,us.lanes|=u,h0|=u}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,$u(r,e.memoizedState)||(Jo=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,us.lanes|=i,h0|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function DO(t){var e=$c(),n=e.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);$u(i,e.memoizedState)||(Jo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qX(){}function GX(t,e){var n=us,r=$c(),s=e(),i=!$u(r.memoizedState,s);if(i&&(r.memoizedState=s,Jo=!0),r=r.queue,RL(YX.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Li!==null&&Li.memoizedState.tag&1){if(n.flags|=2048,f2(9,XX.bind(null,n,r,s,e),void 0,null),zi===null)throw Error(mt(349));d0&30||KX(n,e,s)}return s}function KX(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=us.updateQueue,e===null?(e={lastEffect:null,stores:null},us.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XX(t,e,n,r){e.value=n,e.getSnapshot=r,ZX(e)&&JX(t)}function YX(t,e,n){return n(function(){ZX(e)&&JX(t)})}function ZX(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$u(t,n)}catch{return!0}}function JX(t){var e=Xh(t,1);e!==null&&Au(e,t,1,-1)}function vB(t){var e=yd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h2,lastRenderedState:t},e.queue=t,t=t.dispatch=dme.bind(null,us,t),[e.memoizedState,t]}function f2(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=us.updateQueue,e===null?(e={lastEffect:null,stores:null},us.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function QX(){return $c().memoizedState}function vC(t,e,n,r){var s=yd();us.flags|=t,s.memoizedState=f2(1|e,n,void 0,r===void 0?null:r)}function yI(t,e,n,r){var s=$c();r=r===void 0?null:r;var i=void 0;if(fi!==null){var a=fi.memoizedState;if(i=a.destroy,r!==null&&$L(r,a.deps)){s.memoizedState=f2(e,n,i,r);return}}us.flags|=t,s.memoizedState=f2(1|e,n,i,r)}function xB(t,e){return vC(8390656,8,t,e)}function RL(t,e){return yI(2048,8,t,e)}function eY(t,e){return yI(4,2,t,e)}function tY(t,e){return yI(4,4,t,e)}function nY(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rY(t,e,n){return n=n!=null?n.concat([t]):null,yI(4,4,nY.bind(null,e,t),n)}function ML(){}function sY(t,e){var n=$c();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$L(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iY(t,e){var n=$c();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$L(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aY(t,e,n){return d0&21?($u(n,e)||(n=dX(),us.lanes|=n,h0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jo=!0),t.memoizedState=n)}function cme(t,e){var n=pr;pr=n!==0&&4>n?n:4,t(!0);var r=jO.transition;jO.transition={};try{t(!1),e()}finally{pr=n,jO.transition=r}}function oY(){return $c().memoizedState}function ume(t,e,n){var r=Fp(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lY(t))cY(e,n);else if(n=UX(t,e,n,r),n!==null){var s=go();Au(n,t,r,s),uY(n,e,r)}}function dme(t,e,n){var r=Fp(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lY(t))cY(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,$u(o,a)){var l=e.interleaved;l===null?(s.next=s,AL(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=UX(t,e,s,r),n!==null&&(s=go(),Au(n,t,r,s),uY(n,e,r))}}function lY(t){var e=t.alternate;return t===us||e!==null&&e===us}function cY(t,e){Iw=r5=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uY(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mL(t,n)}}var s5={readContext:jc,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},hme={readContext:jc,useCallback:function(t,e){return yd().memoizedState=[t,e===void 0?null:e],t},useContext:jc,useEffect:xB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vC(4194308,4,nY.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vC(4194308,4,t,e)},useInsertionEffect:function(t,e){return vC(4,2,t,e)},useMemo:function(t,e){var n=yd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ume.bind(null,us,t),[r.memoizedState,t]},useRef:function(t){var e=yd();return t={current:t},e.memoizedState=t},useState:vB,useDebugValue:ML,useDeferredValue:function(t){return yd().memoizedState=t},useTransition:function(){var t=vB(!1),e=t[0];return t=cme.bind(null,t[1]),yd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=us,s=yd();if(Zr){if(n===void 0)throw Error(mt(407));n=n()}else{if(n=e(),zi===null)throw Error(mt(349));d0&30||KX(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,xB(YX.bind(null,r,i,t),[t]),r.flags|=2048,f2(9,XX.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yd(),e=zi.identifierPrefix;if(Zr){var n=Lh,r=Dh;n=(r&~(1<<32-Iu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=d2++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lme++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fme={readContext:jc,useCallback:sY,useContext:jc,useEffect:RL,useImperativeHandle:rY,useInsertionEffect:eY,useLayoutEffect:tY,useMemo:iY,useReducer:$O,useRef:QX,useState:function(){return $O(h2)},useDebugValue:ML,useDeferredValue:function(t){var e=$c();return aY(e,fi.memoizedState,t)},useTransition:function(){var t=$O(h2)[0],e=$c().memoizedState;return[t,e]},useMutableSource:qX,useSyncExternalStore:GX,useId:oY,unstable_isNewReconciler:!1},pme={readContext:jc,useCallback:sY,useContext:jc,useEffect:RL,useImperativeHandle:rY,useInsertionEffect:eY,useLayoutEffect:tY,useMemo:iY,useReducer:DO,useRef:QX,useState:function(){return DO(h2)},useDebugValue:ML,useDeferredValue:function(t){var e=$c();return fi===null?e.memoizedState=t:aY(e,fi.memoizedState,t)},useTransition:function(){var t=DO(h2)[0],e=$c().memoizedState;return[t,e]},useMutableSource:qX,useSyncExternalStore:GX,useId:oY,unstable_isNewReconciler:!1};function fu(t,e){if(t&&t.defaultProps){e=ds({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function V4(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ds({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vI={isMounted:function(t){return(t=t._reactInternals)?V0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=go(),s=Fp(t),i=Wh(r,s);i.payload=e,n!=null&&(i.callback=n),e=Rp(t,i,s),e!==null&&(Au(e,t,s,r),gC(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=go(),s=Fp(t),i=Wh(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Rp(t,i,s),e!==null&&(Au(e,t,s,r),gC(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=go(),r=Fp(t),s=Wh(n,r);s.tag=2,e!=null&&(s.callback=e),e=Rp(t,s,r),e!==null&&(Au(e,t,r,n),gC(e,t,r))}};function bB(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!i2(n,r)||!i2(s,i):!0}function dY(t,e,n){var r=!1,s=Jp,i=e.contextType;return typeof i=="object"&&i!==null?i=jc(i):(s=rl(e)?c0:Ua.current,r=e.contextTypes,i=(r=r!=null)?qv(t,s):Jp),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vI,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function wB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vI.enqueueReplaceState(e,e.state,null)}function H4(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},EL(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jc(i):(i=rl(e)?c0:Ua.current,s.context=qv(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(V4(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vI.enqueueReplaceState(s,s.state,null),t5(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yv(t,e){try{var n="",r=e;do n+=Wfe(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function LO(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function q4(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mme=typeof WeakMap=="function"?WeakMap:Map;function hY(t,e,n){n=Wh(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){a5||(a5=!0,nj=r),q4(t,e)},n}function fY(t,e,n){n=Wh(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){q4(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){q4(t,e),typeof r!="function"&&(Mp===null?Mp=new Set([this]):Mp.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function _B(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mme;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ame.bind(null,t,e,n),e.then(t,t))}function kB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function SB(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wh(-1,1),e.tag=2,Rp(n,e,1))),n.lanes|=1),t)}var gme=df.ReactCurrentOwner,Jo=!1;function uo(t,e,n,r){e.child=t===null?WX(e,null,n,r):Kv(e,t.child,n,r)}function NB(t,e,n,r,s){n=n.render;var i=e.ref;return Pv(e,s),r=DL(t,e,n,r,i,s),n=LL(),t!==null&&!Jo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yh(t,e,s)):(Zr&&n&&kL(e),e.flags|=1,uo(t,e,r,s),e.child)}function CB(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pY(t,e,i,r,s)):(t=_C(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:i2,n(a,r)&&t.ref===e.ref)return Yh(t,e,s)}return e.flags|=1,t=zp(i,r),t.ref=e.ref,t.return=e,e.child=t}function pY(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(i2(i,r)&&t.ref===e.ref)if(Jo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Jo=!0);else return e.lanes=t.lanes,Yh(t,e,s)}return G4(t,e,n,r,s)}function mY(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(_v,kl),kl|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jr(_v,kl),kl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,jr(_v,kl),kl|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,jr(_v,kl),kl|=r;return uo(t,e,s,n),e.child}function gY(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G4(t,e,n,r,s){var i=rl(n)?c0:Ua.current;return i=qv(e,i),Pv(e,s),n=DL(t,e,n,r,i,s),r=LL(),t!==null&&!Jo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yh(t,e,s)):(Zr&&r&&kL(e),e.flags|=1,uo(t,e,n,s),e.child)}function TB(t,e,n,r,s){if(rl(n)){var i=!0;YC(e)}else i=!1;if(Pv(e,s),e.stateNode===null)xC(t,e),dY(e,n,r),H4(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=jc(c):(c=rl(n)?c0:Ua.current,c=qv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&wB(e,a,r,c),op=!1;var h=e.memoizedState;a.state=h,t5(e,r,a,s),l=e.memoizedState,o!==r||h!==l||nl.current||op?(typeof u=="function"&&(V4(e,n,u,r),l=e.memoizedState),(o=op||bB(e,n,o,r,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,VX(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:fu(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=jc(l):(l=rl(n)?c0:Ua.current,l=qv(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&wB(e,a,r,l),op=!1,h=e.memoizedState,a.state=h,t5(e,r,a,s);var m=e.memoizedState;o!==d||h!==m||nl.current||op?(typeof f=="function"&&(V4(e,n,f,r),m=e.memoizedState),(c=op||bB(e,n,c,r,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return K4(t,e,n,r,i,s)}function K4(t,e,n,r,s,i){gY(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&hB(e,n,!1),Yh(t,e,i);r=e.stateNode,gme.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Kv(e,t.child,null,i),e.child=Kv(e,null,o,i)):uo(t,e,o,i),e.memoizedState=r.state,s&&hB(e,n,!0),e.child}function yY(t){var e=t.stateNode;e.pendingContext?dB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dB(t,e.context,!1),PL(t,e.containerInfo)}function IB(t,e,n,r,s){return Gv(),NL(s),e.flags|=256,uo(t,e,n,r),e.child}var X4={dehydrated:null,treeContext:null,retryLane:0};function Y4(t){return{baseLanes:t,cachePool:null,transitions:null}}function vY(t,e,n){var r=e.pendingProps,s=cs.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),jr(cs,s&1),t===null)return W4(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=wI(a,r,0,null),t=Kg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Y4(n),e.memoizedState=X4,t):FL(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return yme(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=zp(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=zp(o,i):(i=Kg(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Y4(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=X4,r}return i=t.child,t=i.sibling,r=zp(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function FL(t,e){return e=wI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rN(t,e,n,r){return r!==null&&NL(r),Kv(e,t.child,null,n),t=FL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yme(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=LO(Error(mt(422))),rN(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wI({mode:"visible",children:r.children},s,0,null),i=Kg(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Kv(e,t.child,null,a),e.child.memoizedState=Y4(a),e.memoizedState=X4,i);if(!(e.mode&1))return rN(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(mt(419)),r=LO(i,r,void 0),rN(t,e,a,r)}if(o=(a&t.childLanes)!==0,Jo||o){if(r=zi,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xh(t,s),Au(r,t,s,-1))}return HL(),r=LO(Error(mt(421))),rN(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Eme.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Al=Lp(s.nextSibling),$l=e,Zr=!0,xu=null,t!==null&&(yc[vc++]=Dh,yc[vc++]=Lh,yc[vc++]=u0,Dh=t.id,Lh=t.overflow,u0=e),e=FL(e,r.children),e.flags|=4096,e)}function AB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),U4(t.return,e,n)}function RO(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xY(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(uo(t,e,r.children,n),r=cs.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AB(t,n,e);else if(t.tag===19)AB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(jr(cs,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&n5(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),RO(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&n5(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}RO(e,!0,n,null,i);break;case"together":RO(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xC(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yh(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),h0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(mt(153));if(e.child!==null){for(t=e.child,n=zp(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zp(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vme(t,e,n){switch(e.tag){case 3:yY(e),Gv();break;case 5:HX(e);break;case 1:rl(e.type)&&YC(e);break;case 4:PL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;jr(QC,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jr(cs,cs.current&1),e.flags|=128,null):n&e.child.childLanes?vY(t,e,n):(jr(cs,cs.current&1),t=Yh(t,e,n),t!==null?t.sibling:null);jr(cs,cs.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xY(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jr(cs,cs.current),r)break;return null;case 22:case 23:return e.lanes=0,mY(t,e,n)}return Yh(t,e,n)}var bY,Z4,wY,_Y;bY=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Z4=function(){};wY=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Dg(Ed.current);var i=null;switch(n){case"input":s=x4(t,s),r=x4(t,r),i=[];break;case"select":s=ds({},s,{value:void 0}),r=ds({},r,{value:void 0}),i=[];break;case"textarea":s=_4(t,s),r=_4(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=KC)}S4(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jw.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jw.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fr("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};_Y=function(t,e,n,r){n!==r&&(e.flags|=4)};function P1(t,e){if(!Zr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Na(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xme(t,e,n){var r=e.pendingProps;switch(SL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(e),null;case 1:return rl(e.type)&&XC(),Na(e),null;case 3:return r=e.stateNode,Xv(),Wr(nl),Wr(Ua),jL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xu!==null&&(ij(xu),xu=null))),Z4(t,e),Na(e),null;case 5:OL(e);var s=Dg(u2.current);if(n=e.type,t!==null&&e.stateNode!=null)wY(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(mt(166));return Na(e),null}if(t=Dg(Ed.current),tN(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sd]=e,r[l2]=i,t=(e.mode&1)!==0,n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<iw.length;s++)Fr(iw[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":M8(r,i),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Fr("invalid",r);break;case"textarea":z8(r,i),Fr("invalid",r)}S4(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&eN(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&eN(r.textContent,o,t),s=["children",""+o]):Jw.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Fr("scroll",r)}switch(n){case"input":qS(r),F8(r,i,!0);break;case"textarea":qS(r),B8(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=KC)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YK(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Sd]=e,t[l2]=r,bY(t,e,!1,!1),e.stateNode=t;e:{switch(a=N4(n,r),n){case"dialog":Fr("cancel",t),Fr("close",t),s=r;break;case"iframe":case"object":case"embed":Fr("load",t),s=r;break;case"video":case"audio":for(s=0;s<iw.length;s++)Fr(iw[s],t);s=r;break;case"source":Fr("error",t),s=r;break;case"img":case"image":case"link":Fr("error",t),Fr("load",t),s=r;break;case"details":Fr("toggle",t),s=r;break;case"input":M8(t,r),s=x4(t,r),Fr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ds({},r,{value:void 0}),Fr("invalid",t);break;case"textarea":z8(t,r),s=_4(t,r),Fr("invalid",t);break;default:s=r}S4(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?QK(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ZK(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qw(t,l):typeof l=="number"&&Qw(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jw.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Fr("scroll",t):l!=null&&cL(t,i,l,a))}switch(n){case"input":qS(t),F8(t,r,!1);break;case"textarea":qS(t),B8(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zp(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Tv(t,!!r.multiple,i,!1):r.defaultValue!=null&&Tv(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=KC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Na(e),null;case 6:if(t&&e.stateNode!=null)_Y(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(mt(166));if(n=Dg(u2.current),Dg(Ed.current),tN(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sd]=e,(i=r.nodeValue!==n)&&(t=$l,t!==null))switch(t.tag){case 3:eN(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eN(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sd]=e,e.stateNode=r}return Na(e),null;case 13:if(Wr(cs),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zr&&Al!==null&&e.mode&1&&!(e.flags&128))zX(),Gv(),e.flags|=98560,i=!1;else if(i=tN(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(mt(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(mt(317));i[Sd]=e}else Gv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Na(e),i=!1}else xu!==null&&(ij(xu),xu=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cs.current&1?vi===0&&(vi=3):HL())),e.updateQueue!==null&&(e.flags|=4),Na(e),null);case 4:return Xv(),Z4(t,e),t===null&&a2(e.stateNode.containerInfo),Na(e),null;case 10:return IL(e.type._context),Na(e),null;case 17:return rl(e.type)&&XC(),Na(e),null;case 19:if(Wr(cs),i=e.memoizedState,i===null)return Na(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)P1(i,!1);else{if(vi!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=n5(t),a!==null){for(e.flags|=128,P1(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jr(cs,cs.current&1|2),e.child}t=t.sibling}i.tail!==null&&$s()>Zv&&(e.flags|=128,r=!0,P1(i,!1),e.lanes=4194304)}else{if(!r)if(t=n5(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),P1(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Zr)return Na(e),null}else 2*$s()-i.renderingStartTime>Zv&&n!==1073741824&&(e.flags|=128,r=!0,P1(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$s(),e.sibling=null,n=cs.current,jr(cs,r?n&1|2:n&1),e):(Na(e),null);case 22:case 23:return VL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kl&1073741824&&(Na(e),e.subtreeFlags&6&&(e.flags|=8192)):Na(e),null;case 24:return null;case 25:return null}throw Error(mt(156,e.tag))}function bme(t,e){switch(SL(e),e.tag){case 1:return rl(e.type)&&XC(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xv(),Wr(nl),Wr(Ua),jL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return OL(e),null;case 13:if(Wr(cs),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(mt(340));Gv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wr(cs),null;case 4:return Xv(),null;case 10:return IL(e.type._context),null;case 22:case 23:return VL(),null;case 24:return null;default:return null}}var sN=!1,$a=!1,wme=typeof WeakSet=="function"?WeakSet:Set,jt=null;function wv(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bs(t,e,r)}else n.current=null}function J4(t,e,n){try{n()}catch(r){bs(t,e,r)}}var EB=!1;function _me(t,e){if(D4=HC,t=TX(),_L(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(o=a+s),d!==i||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===s&&(o=a),h===i&&++u===r&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(L4={focusedElem:t,selectionRange:n},HC=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){e=jt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,x=e.stateNode,b=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:fu(e.type,y),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(k){bs(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}return m=EB,EB=!1,m}function Aw(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&J4(e,n,i)}s=s.next}while(s!==r)}}function xI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Q4(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kY(t){var e=t.alternate;e!==null&&(t.alternate=null,kY(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sd],delete e[l2],delete e[F4],delete e[sme],delete e[ime])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SY(t){return t.tag===5||t.tag===3||t.tag===4}function PB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SY(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ej(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=KC));else if(r!==4&&(t=t.child,t!==null))for(ej(t,e,n),t=t.sibling;t!==null;)ej(t,e,n),t=t.sibling}function tj(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tj(t,e,n),t=t.sibling;t!==null;)tj(t,e,n),t=t.sibling}var aa=null,yu=!1;function Qf(t,e,n){for(n=n.child;n!==null;)NY(t,e,n),n=n.sibling}function NY(t,e,n){if(Ad&&typeof Ad.onCommitFiberUnmount=="function")try{Ad.onCommitFiberUnmount(dI,n)}catch{}switch(n.tag){case 5:$a||wv(n,e);case 6:var r=aa,s=yu;aa=null,Qf(t,e,n),aa=r,yu=s,aa!==null&&(yu?(t=aa,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):aa.removeChild(n.stateNode));break;case 18:aa!==null&&(yu?(t=aa,n=n.stateNode,t.nodeType===8?EO(t.parentNode,n):t.nodeType===1&&EO(t,n),r2(t)):EO(aa,n.stateNode));break;case 4:r=aa,s=yu,aa=n.stateNode.containerInfo,yu=!0,Qf(t,e,n),aa=r,yu=s;break;case 0:case 11:case 14:case 15:if(!$a&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&J4(n,e,a),s=s.next}while(s!==r)}Qf(t,e,n);break;case 1:if(!$a&&(wv(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){bs(n,e,o)}Qf(t,e,n);break;case 21:Qf(t,e,n);break;case 22:n.mode&1?($a=(r=$a)||n.memoizedState!==null,Qf(t,e,n),$a=r):Qf(t,e,n);break;default:Qf(t,e,n)}}function OB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wme),e.forEach(function(r){var s=Pme.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function au(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:aa=o.stateNode,yu=!1;break e;case 3:aa=o.stateNode.containerInfo,yu=!0;break e;case 4:aa=o.stateNode.containerInfo,yu=!0;break e}o=o.return}if(aa===null)throw Error(mt(160));NY(i,a,s),aa=null,yu=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){bs(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)CY(e,t),e=e.sibling}function CY(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(au(e,t),dd(t),r&4){try{Aw(3,t,t.return),xI(3,t)}catch(y){bs(t,t.return,y)}try{Aw(5,t,t.return)}catch(y){bs(t,t.return,y)}}break;case 1:au(e,t),dd(t),r&512&&n!==null&&wv(n,n.return);break;case 5:if(au(e,t),dd(t),r&512&&n!==null&&wv(n,n.return),t.flags&32){var s=t.stateNode;try{Qw(s,"")}catch(y){bs(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&KK(s,i),N4(o,a);var c=N4(o,i);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?QK(s,d):u==="dangerouslySetInnerHTML"?ZK(s,d):u==="children"?Qw(s,d):cL(s,u,d,c)}switch(o){case"input":b4(s,i);break;case"textarea":XK(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Tv(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Tv(s,!!i.multiple,i.defaultValue,!0):Tv(s,!!i.multiple,i.multiple?[]:"",!1))}s[l2]=i}catch(y){bs(t,t.return,y)}}break;case 6:if(au(e,t),dd(t),r&4){if(t.stateNode===null)throw Error(mt(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){bs(t,t.return,y)}}break;case 3:if(au(e,t),dd(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{r2(e.containerInfo)}catch(y){bs(t,t.return,y)}break;case 4:au(e,t),dd(t);break;case 13:au(e,t),dd(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(WL=$s())),r&4&&OB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?($a=(c=$a)||u,au(e,t),$a=c):au(e,t),dd(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(jt=t,u=t.child;u!==null;){for(d=jt=u;jt!==null;){switch(h=jt,f=h.child,h.tag){case 0:case 11:case 14:case 15:Aw(4,h,h.return);break;case 1:wv(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){bs(r,n,y)}}break;case 5:wv(h,h.return);break;case 22:if(h.memoizedState!==null){$B(d);continue}}f!==null?(f.return=h,jt=f):$B(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=JK("display",a))}catch(y){bs(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){bs(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:au(e,t),dd(t),r&4&&OB(t);break;case 21:break;default:au(e,t),dd(t)}}function dd(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SY(n)){var r=n;break e}n=n.return}throw Error(mt(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qw(s,""),r.flags&=-33);var i=PB(t);tj(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=PB(t);ej(t,o,a);break;default:throw Error(mt(161))}}catch(l){bs(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kme(t,e,n){jt=t,TY(t)}function TY(t,e,n){for(var r=(t.mode&1)!==0;jt!==null;){var s=jt,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||sN;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||$a;o=sN;var c=$a;if(sN=a,($a=l)&&!c)for(jt=s;jt!==null;)a=jt,l=a.child,a.tag===22&&a.memoizedState!==null?DB(s):l!==null?(l.return=a,jt=l):DB(s);for(;i!==null;)jt=i,TY(i),i=i.sibling;jt=s,sN=o,$a=c}jB(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,jt=i):jB(t)}}function jB(t){for(;jt!==null;){var e=jt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$a||xI(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$a)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fu(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yB(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yB(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&r2(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}$a||e.flags&512&&Q4(e)}catch(h){bs(e,e.return,h)}}if(e===t){jt=null;break}if(n=e.sibling,n!==null){n.return=e.return,jt=n;break}jt=e.return}}function $B(t){for(;jt!==null;){var e=jt;if(e===t){jt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,jt=n;break}jt=e.return}}function DB(t){for(;jt!==null;){var e=jt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xI(4,e)}catch(l){bs(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){bs(e,s,l)}}var i=e.return;try{Q4(e)}catch(l){bs(e,i,l)}break;case 5:var a=e.return;try{Q4(e)}catch(l){bs(e,a,l)}}}catch(l){bs(e,e.return,l)}if(e===t){jt=null;break}var o=e.sibling;if(o!==null){o.return=e.return,jt=o;break}jt=e.return}}var Sme=Math.ceil,i5=df.ReactCurrentDispatcher,zL=df.ReactCurrentOwner,Ec=df.ReactCurrentBatchConfig,qn=0,zi=null,Gs=null,da=0,kl=0,_v=vm(0),vi=0,p2=null,h0=0,bI=0,BL=0,Ew=null,Ko=null,WL=0,Zv=1/0,Nh=null,a5=!1,nj=null,Mp=null,iN=!1,bp=null,o5=0,Pw=0,rj=null,bC=-1,wC=0;function go(){return qn&6?$s():bC!==-1?bC:bC=$s()}function Fp(t){return t.mode&1?qn&2&&da!==0?da&-da:ome.transition!==null?(wC===0&&(wC=dX()),wC):(t=pr,t!==0||(t=window.event,t=t===void 0?16:vX(t.type)),t):1}function Au(t,e,n,r){if(50<Pw)throw Pw=0,rj=null,Error(mt(185));m_(t,n,r),(!(qn&2)||t!==zi)&&(t===zi&&(!(qn&2)&&(bI|=n),vi===4&&pp(t,da)),sl(t,r),n===1&&qn===0&&!(e.mode&1)&&(Zv=$s()+500,gI&&xm()))}function sl(t,e){var n=t.callbackNode;ope(t,e);var r=VC(t,t===zi?da:0);if(r===0)n!==null&&V8(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&V8(n),e===1)t.tag===0?ame(LB.bind(null,t)):RX(LB.bind(null,t)),nme(function(){!(qn&6)&&xm()}),n=null;else{switch(hX(r)){case 1:n=pL;break;case 4:n=cX;break;case 16:n=UC;break;case 536870912:n=uX;break;default:n=UC}n=DY(n,IY.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IY(t,e){if(bC=-1,wC=0,qn&6)throw Error(mt(327));var n=t.callbackNode;if(Ov()&&t.callbackNode!==n)return null;var r=VC(t,t===zi?da:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=l5(t,r);else{e=r;var s=qn;qn|=2;var i=EY();(zi!==t||da!==e)&&(Nh=null,Zv=$s()+500,Gg(t,e));do try{Tme();break}catch(o){AY(t,o)}while(!0);TL(),i5.current=i,qn=s,Gs!==null?e=0:(zi=null,da=0,e=vi)}if(e!==0){if(e===2&&(s=E4(t),s!==0&&(r=s,e=sj(t,s))),e===1)throw n=p2,Gg(t,0),pp(t,r),sl(t,$s()),n;if(e===6)pp(t,r);else{if(s=t.current.alternate,!(r&30)&&!Nme(s)&&(e=l5(t,r),e===2&&(i=E4(t),i!==0&&(r=i,e=sj(t,i))),e===1))throw n=p2,Gg(t,0),pp(t,r),sl(t,$s()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(mt(345));case 2:mg(t,Ko,Nh);break;case 3:if(pp(t,r),(r&130023424)===r&&(e=WL+500-$s(),10<e)){if(VC(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){go(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=M4(mg.bind(null,t,Ko,Nh),e);break}mg(t,Ko,Nh);break;case 4:if(pp(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Iu(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=$s()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sme(r/1960))-r,10<r){t.timeoutHandle=M4(mg.bind(null,t,Ko,Nh),r);break}mg(t,Ko,Nh);break;case 5:mg(t,Ko,Nh);break;default:throw Error(mt(329))}}}return sl(t,$s()),t.callbackNode===n?IY.bind(null,t):null}function sj(t,e){var n=Ew;return t.current.memoizedState.isDehydrated&&(Gg(t,e).flags|=256),t=l5(t,e),t!==2&&(e=Ko,Ko=n,e!==null&&ij(e)),t}function ij(t){Ko===null?Ko=t:Ko.push.apply(Ko,t)}function Nme(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$u(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pp(t,e){for(e&=~BL,e&=~bI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Iu(e),r=1<<n;t[n]=-1,e&=~r}}function LB(t){if(qn&6)throw Error(mt(327));Ov();var e=VC(t,0);if(!(e&1))return sl(t,$s()),null;var n=l5(t,e);if(t.tag!==0&&n===2){var r=E4(t);r!==0&&(e=r,n=sj(t,r))}if(n===1)throw n=p2,Gg(t,0),pp(t,e),sl(t,$s()),n;if(n===6)throw Error(mt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mg(t,Ko,Nh),sl(t,$s()),null}function UL(t,e){var n=qn;qn|=1;try{return t(e)}finally{qn=n,qn===0&&(Zv=$s()+500,gI&&xm())}}function f0(t){bp!==null&&bp.tag===0&&!(qn&6)&&Ov();var e=qn;qn|=1;var n=Ec.transition,r=pr;try{if(Ec.transition=null,pr=1,t)return t()}finally{pr=r,Ec.transition=n,qn=e,!(qn&6)&&xm()}}function VL(){kl=_v.current,Wr(_v)}function Gg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tme(n)),Gs!==null)for(n=Gs.return;n!==null;){var r=n;switch(SL(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&XC();break;case 3:Xv(),Wr(nl),Wr(Ua),jL();break;case 5:OL(r);break;case 4:Xv();break;case 13:Wr(cs);break;case 19:Wr(cs);break;case 10:IL(r.type._context);break;case 22:case 23:VL()}n=n.return}if(zi=t,Gs=t=zp(t.current,null),da=kl=e,vi=0,p2=null,BL=bI=h0=0,Ko=Ew=null,$g!==null){for(e=0;e<$g.length;e++)if(n=$g[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}$g=null}return t}function AY(t,e){do{var n=Gs;try{if(TL(),yC.current=s5,r5){for(var r=us.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}r5=!1}if(d0=0,Li=fi=us=null,Iw=!1,d2=0,zL.current=null,n===null||n.return===null){vi=1,p2=e,Gs=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=da,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=kB(a);if(f!==null){f.flags&=-257,SB(f,a,o,i,e),f.mode&1&&_B(i,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){_B(i,c,e),HL();break e}l=Error(mt(426))}}else if(Zr&&o.mode&1){var v=kB(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),SB(v,a,o,i,e),NL(Yv(l,o));break e}}i=l=Yv(l,o),vi!==4&&(vi=2),Ew===null?Ew=[i]:Ew.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=hY(i,l,e);gB(i,x);break e;case 1:o=l;var b=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Mp===null||!Mp.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=fY(i,o,e);gB(i,k);break e}}i=i.return}while(i!==null)}OY(n)}catch(N){e=N,Gs===n&&n!==null&&(Gs=n=n.return);continue}break}while(!0)}function EY(){var t=i5.current;return i5.current=s5,t===null?s5:t}function HL(){(vi===0||vi===3||vi===2)&&(vi=4),zi===null||!(h0&268435455)&&!(bI&268435455)||pp(zi,da)}function l5(t,e){var n=qn;qn|=2;var r=EY();(zi!==t||da!==e)&&(Nh=null,Gg(t,e));do try{Cme();break}catch(s){AY(t,s)}while(!0);if(TL(),qn=n,i5.current=r,Gs!==null)throw Error(mt(261));return zi=null,da=0,vi}function Cme(){for(;Gs!==null;)PY(Gs)}function Tme(){for(;Gs!==null&&!Jfe();)PY(Gs)}function PY(t){var e=$Y(t.alternate,t,kl);t.memoizedProps=t.pendingProps,e===null?OY(t):Gs=e,zL.current=null}function OY(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bme(n,e),n!==null){n.flags&=32767,Gs=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vi=6,Gs=null;return}}else if(n=xme(n,e,kl),n!==null){Gs=n;return}if(e=e.sibling,e!==null){Gs=e;return}Gs=e=t}while(e!==null);vi===0&&(vi=5)}function mg(t,e,n){var r=pr,s=Ec.transition;try{Ec.transition=null,pr=1,Ime(t,e,n,r)}finally{Ec.transition=s,pr=r}return null}function Ime(t,e,n,r){do Ov();while(bp!==null);if(qn&6)throw Error(mt(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(mt(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(lpe(t,i),t===zi&&(Gs=zi=null,da=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iN||(iN=!0,DY(UC,function(){return Ov(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ec.transition,Ec.transition=null;var a=pr;pr=1;var o=qn;qn|=4,zL.current=null,_me(t,n),CY(n,t),Kpe(L4),HC=!!D4,L4=D4=null,t.current=n,kme(n),Qfe(),qn=o,pr=a,Ec.transition=i}else t.current=n;if(iN&&(iN=!1,bp=t,o5=s),i=t.pendingLanes,i===0&&(Mp=null),npe(n.stateNode),sl(t,$s()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(a5)throw a5=!1,t=nj,nj=null,t;return o5&1&&t.tag!==0&&Ov(),i=t.pendingLanes,i&1?t===rj?Pw++:(Pw=0,rj=t):Pw=0,xm(),null}function Ov(){if(bp!==null){var t=hX(o5),e=Ec.transition,n=pr;try{if(Ec.transition=null,pr=16>t?16:t,bp===null)var r=!1;else{if(t=bp,bp=null,o5=0,qn&6)throw Error(mt(331));var s=qn;for(qn|=4,jt=t.current;jt!==null;){var i=jt,a=i.child;if(jt.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(jt=c;jt!==null;){var u=jt;switch(u.tag){case 0:case 11:case 15:Aw(8,u,i)}var d=u.child;if(d!==null)d.return=u,jt=d;else for(;jt!==null;){u=jt;var h=u.sibling,f=u.return;if(kY(u),u===c){jt=null;break}if(h!==null){h.return=f,jt=h;break}jt=f}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}jt=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,jt=a;else e:for(;jt!==null;){if(i=jt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Aw(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,jt=x;break e}jt=i.return}}var b=t.current;for(jt=b;jt!==null;){a=jt;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,jt=_;else e:for(a=b;jt!==null;){if(o=jt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:xI(9,o)}}catch(N){bs(o,o.return,N)}if(o===a){jt=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,jt=k;break e}jt=o.return}}if(qn=s,xm(),Ad&&typeof Ad.onPostCommitFiberRoot=="function")try{Ad.onPostCommitFiberRoot(dI,t)}catch{}r=!0}return r}finally{pr=n,Ec.transition=e}}return!1}function RB(t,e,n){e=Yv(n,e),e=hY(t,e,1),t=Rp(t,e,1),e=go(),t!==null&&(m_(t,1,e),sl(t,e))}function bs(t,e,n){if(t.tag===3)RB(t,t,n);else for(;e!==null;){if(e.tag===3){RB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mp===null||!Mp.has(r))){t=Yv(n,t),t=fY(e,t,1),e=Rp(e,t,1),t=go(),e!==null&&(m_(e,1,t),sl(e,t));break}}e=e.return}}function Ame(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=go(),t.pingedLanes|=t.suspendedLanes&n,zi===t&&(da&n)===n&&(vi===4||vi===3&&(da&130023424)===da&&500>$s()-WL?Gg(t,0):BL|=n),sl(t,e)}function jY(t,e){e===0&&(t.mode&1?(e=XS,XS<<=1,!(XS&130023424)&&(XS=4194304)):e=1);var n=go();t=Xh(t,e),t!==null&&(m_(t,e,n),sl(t,n))}function Eme(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jY(t,n)}function Pme(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(mt(314))}r!==null&&r.delete(e),jY(t,n)}var $Y;$Y=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nl.current)Jo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jo=!1,vme(t,e,n);Jo=!!(t.flags&131072)}else Jo=!1,Zr&&e.flags&1048576&&MX(e,JC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xC(t,e),t=e.pendingProps;var s=qv(e,Ua.current);Pv(e,n),s=DL(null,e,r,t,s,n);var i=LL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rl(r)?(i=!0,YC(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,EL(e),s.updater=vI,e.stateNode=s,s._reactInternals=e,H4(e,r,t,n),e=K4(null,e,r,!0,i,n)):(e.tag=0,Zr&&i&&kL(e),uo(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xC(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=jme(r),t=fu(r,t),s){case 0:e=G4(null,e,r,t,n);break e;case 1:e=TB(null,e,r,t,n);break e;case 11:e=NB(null,e,r,t,n);break e;case 14:e=CB(null,e,r,fu(r.type,t),n);break e}throw Error(mt(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fu(r,s),G4(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fu(r,s),TB(t,e,r,s,n);case 3:e:{if(yY(e),t===null)throw Error(mt(387));r=e.pendingProps,i=e.memoizedState,s=i.element,VX(t,e),t5(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Yv(Error(mt(423)),e),e=IB(t,e,r,n,s);break e}else if(r!==s){s=Yv(Error(mt(424)),e),e=IB(t,e,r,n,s);break e}else for(Al=Lp(e.stateNode.containerInfo.firstChild),$l=e,Zr=!0,xu=null,n=WX(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gv(),r===s){e=Yh(t,e,n);break e}uo(t,e,r,n)}e=e.child}return e;case 5:return HX(e),t===null&&W4(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,R4(r,s)?a=null:i!==null&&R4(r,i)&&(e.flags|=32),gY(t,e),uo(t,e,a,n),e.child;case 6:return t===null&&W4(e),null;case 13:return vY(t,e,n);case 4:return PL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kv(e,null,r,n):uo(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fu(r,s),NB(t,e,r,s,n);case 7:return uo(t,e,e.pendingProps,n),e.child;case 8:return uo(t,e,e.pendingProps.children,n),e.child;case 12:return uo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,jr(QC,r._currentValue),r._currentValue=a,i!==null)if($u(i.value,a)){if(i.children===s.children&&!nl.current){e=Yh(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Wh(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),U4(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(mt(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),U4(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}uo(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pv(e,n),s=jc(s),r=r(s),e.flags|=1,uo(t,e,r,n),e.child;case 14:return r=e.type,s=fu(r,e.pendingProps),s=fu(r.type,s),CB(t,e,r,s,n);case 15:return pY(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fu(r,s),xC(t,e),e.tag=1,rl(r)?(t=!0,YC(e)):t=!1,Pv(e,n),dY(e,r,s),H4(e,r,s,n),K4(null,e,r,!0,t,n);case 19:return xY(t,e,n);case 22:return mY(t,e,n)}throw Error(mt(156,e.tag))};function DY(t,e){return lX(t,e)}function Ome(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(t,e,n,r){return new Ome(t,e,n,r)}function qL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jme(t){if(typeof t=="function")return qL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dL)return 11;if(t===hL)return 14}return 2}function zp(t,e){var n=t.alternate;return n===null?(n=bc(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _C(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")qL(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case hv:return Kg(n.children,s,i,e);case uL:a=8,s|=8;break;case m4:return t=bc(12,n,e,s|2),t.elementType=m4,t.lanes=i,t;case g4:return t=bc(13,n,e,s),t.elementType=g4,t.lanes=i,t;case y4:return t=bc(19,n,e,s),t.elementType=y4,t.lanes=i,t;case HK:return wI(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UK:a=10;break e;case VK:a=9;break e;case dL:a=11;break e;case hL:a=14;break e;case ap:a=16,r=null;break e}throw Error(mt(130,t==null?t:typeof t,""))}return e=bc(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Kg(t,e,n,r){return t=bc(7,t,r,e),t.lanes=n,t}function wI(t,e,n,r){return t=bc(22,t,r,e),t.elementType=HK,t.lanes=n,t.stateNode={isHidden:!1},t}function MO(t,e,n){return t=bc(6,t,null,e),t.lanes=n,t}function FO(t,e,n){return e=bc(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $me(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xO(0),this.expirationTimes=xO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xO(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function GL(t,e,n,r,s,i,a,o,l){return t=new $me(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bc(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},EL(i),t}function Dme(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dv,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LY(t){if(!t)return Jp;t=t._reactInternals;e:{if(V0(t)!==t||t.tag!==1)throw Error(mt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(mt(171))}if(t.tag===1){var n=t.type;if(rl(n))return LX(t,n,e)}return e}function RY(t,e,n,r,s,i,a,o,l){return t=GL(n,r,!0,t,s,i,a,o,l),t.context=LY(null),n=t.current,r=go(),s=Fp(n),i=Wh(r,s),i.callback=e??null,Rp(n,i,s),t.current.lanes=s,m_(t,s,r),sl(t,r),t}function _I(t,e,n,r){var s=e.current,i=go(),a=Fp(s);return n=LY(n),e.context===null?e.context=n:e.pendingContext=n,e=Wh(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rp(s,e,a),t!==null&&(Au(t,s,a,i),gC(t,s,a)),a}function c5(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function MB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function KL(t,e){MB(t,e),(t=t.alternate)&&MB(t,e)}function Lme(){return null}var MY=typeof reportError=="function"?reportError:function(t){console.error(t)};function XL(t){this._internalRoot=t}kI.prototype.render=XL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(mt(409));_I(t,e,null,null)};kI.prototype.unmount=XL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;f0(function(){_I(null,t,null,null)}),e[Kh]=null}};function kI(t){this._internalRoot=t}kI.prototype.unstable_scheduleHydration=function(t){if(t){var e=mX();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fp.length&&e!==0&&e<fp[n].priority;n++);fp.splice(n,0,t),n===0&&yX(t)}};function YL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function SI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FB(){}function Rme(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=c5(a);i.call(c)}}var a=RY(e,r,t,0,null,!1,!1,"",FB);return t._reactRootContainer=a,t[Kh]=a.current,a2(t.nodeType===8?t.parentNode:t),f0(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=c5(l);o.call(c)}}var l=GL(t,0,!1,null,null,!1,!1,"",FB);return t._reactRootContainer=l,t[Kh]=l.current,a2(t.nodeType===8?t.parentNode:t),f0(function(){_I(e,l,n,r)}),l}function NI(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=c5(a);o.call(l)}}_I(e,a,t,s)}else a=Rme(n,e,t,s,r);return c5(a)}fX=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sw(e.pendingLanes);n!==0&&(mL(e,n|1),sl(e,$s()),!(qn&6)&&(Zv=$s()+500,xm()))}break;case 13:f0(function(){var r=Xh(t,1);if(r!==null){var s=go();Au(r,t,1,s)}}),KL(t,1)}};gL=function(t){if(t.tag===13){var e=Xh(t,134217728);if(e!==null){var n=go();Au(e,t,134217728,n)}KL(t,134217728)}};pX=function(t){if(t.tag===13){var e=Fp(t),n=Xh(t,e);if(n!==null){var r=go();Au(n,t,e,r)}KL(t,e)}};mX=function(){return pr};gX=function(t,e){var n=pr;try{return pr=t,e()}finally{pr=n}};T4=function(t,e,n){switch(e){case"input":if(b4(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mI(r);if(!s)throw Error(mt(90));GK(r),b4(r,s)}}}break;case"textarea":XK(t,n);break;case"select":e=n.value,e!=null&&Tv(t,!!n.multiple,e,!1)}};nX=UL;rX=f0;var Mme={usingClientEntryPoint:!1,Events:[y_,gv,mI,eX,tX,UL]},O1={findFiberByHostInstance:jg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fme={bundleType:O1.bundleType,version:O1.version,rendererPackageName:O1.rendererPackageName,rendererConfig:O1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:df.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aX(t),t===null?null:t.stateNode},findFiberByHostInstance:O1.findFiberByHostInstance||Lme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aN.isDisabled&&aN.supportsFiber)try{dI=aN.inject(Fme),Ad=aN}catch{}}Wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mme;Wl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YL(e))throw Error(mt(200));return Dme(t,e,null,n)};Wl.createRoot=function(t,e){if(!YL(t))throw Error(mt(299));var n=!1,r="",s=MY;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=GL(t,1,!1,null,null,n,!1,r,s),t[Kh]=e.current,a2(t.nodeType===8?t.parentNode:t),new XL(e)};Wl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(mt(188)):(t=Object.keys(t).join(","),Error(mt(268,t)));return t=aX(e),t=t===null?null:t.stateNode,t};Wl.flushSync=function(t){return f0(t)};Wl.hydrate=function(t,e,n){if(!SI(e))throw Error(mt(200));return NI(null,t,e,!0,n)};Wl.hydrateRoot=function(t,e,n){if(!YL(t))throw Error(mt(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=MY;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=RY(e,null,t,1,n??null,s,!1,i,a),t[Kh]=e.current,a2(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new kI(e)};Wl.render=function(t,e,n){if(!SI(e))throw Error(mt(200));return NI(null,t,e,!1,n)};Wl.unmountComponentAtNode=function(t){if(!SI(t))throw Error(mt(40));return t._reactRootContainer?(f0(function(){NI(null,null,t,!1,function(){t._reactRootContainer=null,t[Kh]=null})}),!0):!1};Wl.unstable_batchedUpdates=UL;Wl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!SI(n))throw Error(mt(200));if(t==null||t._reactInternals===void 0)throw Error(mt(38));return NI(t,e,n,!1,r)};Wl.version="18.3.1-next-f1338f8080-20240426";function FY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FY)}catch(t){console.error(t)}}FY(),FK.exports=Wl;var CI=FK.exports,zB=CI;f4.createRoot=zB.createRoot,f4.hydrateRoot=zB.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m2.apply(this,arguments)}var wp;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wp||(wp={}));const BB="popstate";function zme(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return aj("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:u5(s)}return Wme(e,n,null,t)}function Zs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ZL(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Bme(){return Math.random().toString(36).substr(2,8)}function WB(t,e){return{usr:t.state,key:t.key,idx:e}}function aj(t,e,n,r){return n===void 0&&(n=null),m2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?jx(e):e,{state:n,key:e&&e.key||r||Bme()})}function u5(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jx(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wme(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=wp.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(m2({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=wp.Pop;let v=u(),x=v==null?null:v-c;c=v,l&&l({action:o,location:y.location,delta:x})}function h(v,x){o=wp.Push;let b=aj(y.location,v,x);c=u()+1;let _=WB(b,c),k=y.createHref(b);try{a.pushState(_,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(k)}i&&l&&l({action:o,location:y.location,delta:1})}function f(v,x){o=wp.Replace;let b=aj(y.location,v,x);c=u();let _=WB(b,c),k=y.createHref(b);a.replaceState(_,"",k),i&&l&&l({action:o,location:y.location,delta:0})}function m(v){let x=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof v=="string"?v:u5(v);return b=b.replace(/ $/,"%20"),Zs(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let y={get action(){return o},get location(){return t(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(BB,d),l=v,()=>{s.removeEventListener(BB,d),l=null}},createHref(v){return e(s,v)},createURL:m,encodeLocation(v){let x=m(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:f,go(v){return a.go(v)}};return y}var UB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(UB||(UB={}));function Ume(t,e,n){return n===void 0&&(n="/"),Vme(t,e,n)}function Vme(t,e,n,r){let s=typeof e=="string"?jx(e):e,i=JL(s.pathname||"/",n);if(i==null)return null;let a=zY(t);Hme(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=rge(i);o=ege(a[l],c)}return o}function zY(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Zs(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Bp([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(Zs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zY(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Jme(c,i.index),routesMeta:u})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of BY(i.path))s(i,a,l)}),e}function BY(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=BY(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hme(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Qme(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qme=/^:[\w-]+$/,Gme=3,Kme=2,Xme=1,Yme=10,Zme=-2,VB=t=>t==="*";function Jme(t,e){let n=t.split("/"),r=n.length;return n.some(VB)&&(r+=Zme),e&&(r+=Kme),n.filter(s=>!VB(s)).reduce((s,i)=>s+(qme.test(i)?Gme:i===""?Xme:Yme),r)}function Qme(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ege(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=tge({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Bp([i,d.pathname]),pathnameBase:lge(Bp([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Bp([i,d.pathnameBase]))}return a}function tge(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nge(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let y=o[d]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const m=o[d];return f&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:a,pattern:t}}function nge(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ZL(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rge(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ZL(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function JL(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const sge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ige=t=>sge.test(t);function age(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?jx(t):t,i;if(n)if(ige(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),ZL(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=HB(n.substring(1),"/"):i=HB(n,e)}else i=e;return{pathname:i,search:cge(r),hash:uge(s)}}function HB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oge(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function WY(t,e){let n=oge(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function UY(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=jx(t):(s=m2({},t),Zs(!s.pathname||!s.pathname.includes("?"),zO("?","pathname","search",s)),Zs(!s.pathname||!s.pathname.includes("#"),zO("#","pathname","hash",s)),Zs(!s.search||!s.search.includes("#"),zO("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=age(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Bp=t=>t.join("/").replace(/\/\/+/g,"/"),lge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VY=["post","put","patch","delete"];new Set(VY);const hge=["get",...VY];new Set(hge);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(this,arguments)}const QL=R.createContext(null),fge=R.createContext(null),H0=R.createContext(null),TI=R.createContext(null),bm=R.createContext({outlet:null,matches:[],isDataRoute:!1}),HY=R.createContext(null);function pge(t,e){let{relative:n}=e===void 0?{}:e;x_()||Zs(!1);let{basename:r,navigator:s}=R.useContext(H0),{hash:i,pathname:a,search:o}=GY(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Bp([r,a])),s.createHref({pathname:l,search:o,hash:i})}function x_(){return R.useContext(TI)!=null}function $x(){return x_()||Zs(!1),R.useContext(TI).location}function qY(t){R.useContext(H0).static||R.useLayoutEffect(t)}function Wc(){let{isDataRoute:t}=R.useContext(bm);return t?Ige():mge()}function mge(){x_()||Zs(!1);let t=R.useContext(QL),{basename:e,future:n,navigator:r}=R.useContext(H0),{matches:s}=R.useContext(bm),{pathname:i}=$x(),a=JSON.stringify(WY(s,n.v7_relativeSplatPath)),o=R.useRef(!1);return qY(()=>{o.current=!0}),R.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=UY(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Bp([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,a,i,t])}function gge(){let{matches:t}=R.useContext(bm),e=t[t.length-1];return e?e.params:{}}function GY(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(H0),{matches:s}=R.useContext(bm),{pathname:i}=$x(),a=JSON.stringify(WY(s,r.v7_relativeSplatPath));return R.useMemo(()=>UY(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function yge(t,e){return vge(t,e)}function vge(t,e,n,r){x_()||Zs(!1);let{navigator:s}=R.useContext(H0),{matches:i}=R.useContext(bm),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=$x(),u;if(e){var d;let v=typeof e=="string"?jx(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Zs(!1),u=v}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Ume(t,{pathname:f}),y=kge(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Bp([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Bp([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return e&&y?R.createElement(TI.Provider,{value:{location:g2({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wp.Pop}},y):y}function xge(){let t=Tge(),e=dge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const bge=R.createElement(xge,null);class wge extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(bm.Provider,{value:this.props.routeContext},R.createElement(HY.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _ge(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(QL);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(bm.Provider,{value:e},r)}function kge(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Zs(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,m=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,m=!1,y=null,v=null;n&&(f=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||bge,l&&(c<0&&h===0?(Age("route-fallback"),m=!0,v=null):c===h&&(m=!0,v=d.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,h+1)),b=()=>{let _;return f?_=y:m?_=v:d.route.Component?_=R.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,R.createElement(_ge,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?R.createElement(wge,{location:n.location,revalidation:n.revalidation,component:y,error:f,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var KY=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KY||{}),XY=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XY||{});function Sge(t){let e=R.useContext(QL);return e||Zs(!1),e}function Nge(t){let e=R.useContext(fge);return e||Zs(!1),e}function Cge(t){let e=R.useContext(bm);return e||Zs(!1),e}function YY(t){let e=Cge(),n=e.matches[e.matches.length-1];return n.route.id||Zs(!1),n.route.id}function Tge(){var t;let e=R.useContext(HY),n=Nge(),r=YY();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ige(){let{router:t}=Sge(KY.UseNavigateStable),e=YY(XY.UseNavigateStable),n=R.useRef(!1);return qY(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,g2({fromRouteId:e},i)))},[t,e])}const qB={};function Age(t,e,n){qB[t]||(qB[t]=!0)}function Ege(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vo(t){Zs(!1)}function Pge(t){let{basename:e="/",children:n=null,location:r,navigationType:s=wp.Pop,navigator:i,static:a=!1,future:o}=t;x_()&&Zs(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:i,static:a,future:g2({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=jx(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:m="default"}=r,y=R.useMemo(()=>{let v=JL(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:m},navigationType:s}},[l,u,d,h,f,m,s]);return y==null?null:R.createElement(H0.Provider,{value:c},R.createElement(TI.Provider,{children:n,value:y}))}function Oge(t){let{children:e,location:n}=t;return yge(oj(e),n)}new Promise(()=>{});function oj(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,oj(r.props.children,i));return}r.type!==Vo&&Zs(!1),!r.props.index||!r.props.children||Zs(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=oj(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lj(){return lj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lj.apply(this,arguments)}function jge(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function $ge(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dge(t,e){return t.button===0&&(!e||e==="_self")&&!$ge(t)}const Lge=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rge="6";try{window.__reactRouterVersion=Rge}catch{}const Mge="startTransition",GB=RK[Mge];function Fge(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=zme({window:s,v5Compat:!0}));let a=i.current,[o,l]=R.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=R.useCallback(d=>{c&&GB?GB(()=>l(d)):l(d)},[l,c]);return R.useLayoutEffect(()=>a.listen(u),[a,u]),R.useEffect(()=>Ege(r),[r]),R.createElement(Pge,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const zge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qn=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=jge(e,Lge),{basename:f}=R.useContext(H0),m,y=!1;if(typeof c=="string"&&Bge.test(c)&&(m=c,zge))try{let _=new URL(window.location.href),k=c.startsWith("//")?new URL(_.protocol+c):new URL(c),N=JL(k.pathname,f);k.origin===_.origin&&N!=null?c=N+k.search+k.hash:y=!0}catch{}let v=pge(c,{relative:s}),x=Wge(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:d});function b(_){r&&r(_),_.defaultPrevented||x(_)}return R.createElement("a",lj({},h,{href:m||v,onClick:y||i?r:b,ref:n,target:l}))});var KB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(KB||(KB={}));var XB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(XB||(XB={}));function Wge(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Wc(),c=$x(),u=GY(t,{relative:a});return R.useCallback(d=>{if(Dge(d,n)){d.preventDefault();let h=r!==void 0?r:u5(c)===u5(u);l(t,{replace:h,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,r,s,n,t,i,a,o])}/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...c},u)=>R.createElement("svg",{ref:u,...Uge,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Vge(t)}`,o].join(" "),...c},[...e.map(([d,h])=>R.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=pt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=pt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=pt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hge=pt("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=pt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=pt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=pt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=pt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=pt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xge=pt("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zge=pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=pt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=pt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=pt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=pt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qge=pt("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=pt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0e=pt("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=pt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=pt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=pt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=pt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=pt("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0e=pt("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=pt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=pt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0e=pt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0e=pt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=pt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0e=pt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=pt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0e=pt("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0e=pt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=pt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0e=pt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=pt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0e=pt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0e=pt("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=pt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0e=pt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=pt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0e=pt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0e=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=pt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=pt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=pt("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=pt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0e=pt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=pt("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0e=pt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=pt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=pt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0e=pt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=pt("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0e=pt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0e=pt("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0e=pt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=pt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=pt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=pt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0e=pt("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=pt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0e=pt("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=pt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=pt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=pt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0e=pt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=pt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=pt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=pt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),N0e=[{icon:p.jsx(Lx,{className:"w-6 h-6"}),title:"For Users",description:"Easily schedule e-waste pickups and track your environmental impact"},{icon:p.jsx(Wa,{className:"w-6 h-6"}),title:"For Recyclers",description:"Manage collections and process e-waste efficiently"},{icon:p.jsx(ha,{className:"w-6 h-6"}),title:"For Technicians",description:"Provide repair services and extend device lifecycles"},{icon:p.jsx(tZ,{className:"w-6 h-6"}),title:"For Educators",description:"Share knowledge about sustainable e-waste management"}],C0e=[{icon:p.jsx(Uh,{className:"w-8 h-8 text-teal-600"}),title:"E-Waste Pickup",description:"Schedule convenient pickups for your electronic waste",color:"bg-teal-50 border-teal-200"},{icon:p.jsx(ha,{className:"w-8 h-8 text-blue-600"}),title:"Device Repair",description:"Expert technicians to fix and extend the life of your devices",color:"bg-blue-50 border-blue-200"},{icon:p.jsx(m0,{className:"w-8 h-8 text-purple-600"}),title:"Marketplace",description:"Buy and sell refurbished electronics at affordable prices",color:"bg-purple-50 border-purple-200"},{icon:p.jsx(tZ,{className:"w-8 h-8 text-amber-600"}),title:"Education",description:"Learn about sustainable e-waste management practices",color:"bg-amber-50 border-amber-200"}],rg=[{name:"Sarah Johnson",role:"Regular User",content:"The pickup service is so convenient! I scheduled a collection for my old electronics and they were at my doorstep the next day.",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{name:"Michael Chen",role:"Technician",content:"As a repair technician, this platform has connected me with clients who truly value extending the life of their devices rather than replacing them.",image:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"},{name:"Priya Patel",role:"Recycling Business Owner",content:"The platform has streamlined our collection process and helped us connect with more environmentally conscious consumers.",image:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"}],T0e=[{value:"2,500+",label:"Devices Recycled"},{value:"1,200+",label:"Repairs Completed"},{value:"350+",label:"Active Users"},{value:"4.8/5",label:"User Rating"}],I0e=["GreenTech Solutions","EcoElectronics","Sustainable Future","TechRecycle Inc.","CircuitBoard Recyclers"];function A0e(){const[t,e]=R.useState(!1),[n,r]=R.useState(0),[s,i]=R.useState(!1);return R.useEffect(()=>{const a=()=>{e(window.scrollY>10)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),R.useEffect(()=>{const a=setInterval(()=>{r(o=>(o+1)%rg.length)},5e3);return()=>clearInterval(a)},[]),p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsxs("nav",{className:`fixed w-full z-10 transition-all duration-300 ${t?"bg-white shadow-md py-2":"bg-transparent py-4"}`,children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Wa,{className:`h-8 w-8 ${t?"text-emerald-600":"text-emerald-500"}`}),p.jsx("span",{className:`ml-2 text-xl font-bold ${t?"text-gray-900":"text-white"}`,children:"E-Waste Manager"})]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[p.jsx("a",{href:"#services",className:`${t?"text-gray-700":"text-white"} hover:text-emerald-500 transition-colors`,children:"Services"}),p.jsx("a",{href:"#impact",className:`${t?"text-gray-700":"text-white"} hover:text-emerald-500 transition-colors`,children:"Impact"}),p.jsx("a",{href:"#testimonials",className:`${t?"text-gray-700":"text-white"} hover:text-emerald-500 transition-colors`,children:"Testimonials"}),p.jsx(Qn,{to:"/login",className:`${t?"text-gray-700":"text-white"} hover:text-emerald-500 transition-colors`,children:"Login"}),p.jsx(Qn,{to:"/register",className:"bg-emerald-600 text-white px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors",children:"Register"})]}),p.jsx("div",{className:"md:hidden",children:p.jsx("button",{onClick:()=>i(!s),className:`${t?"text-gray-700":"text-white"} hover:text-emerald-500`,children:s?p.jsx(il,{className:"h-6 w-6"}):p.jsx(sZ,{className:"h-6 w-6"})})})]})}),s&&p.jsx("div",{className:"md:hidden bg-white shadow-lg",children:p.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[p.jsx("a",{href:"#services",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-emerald-500 hover:bg-gray-50",onClick:()=>i(!1),children:"Services"}),p.jsx("a",{href:"#impact",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-emerald-500 hover:bg-gray-50",onClick:()=>i(!1),children:"Impact"}),p.jsx("a",{href:"#testimonials",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-emerald-500 hover:bg-gray-50",onClick:()=>i(!1),children:"Testimonials"}),p.jsx(Qn,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-emerald-500 hover:bg-gray-50",onClick:()=>i(!1),children:"Login"}),p.jsx(Qn,{to:"/register",className:"block px-3 py-2 rounded-md text-base font-medium text-white bg-emerald-600 hover:bg-emerald-700",onClick:()=>i(!1),children:"Register"})]})})]}),p.jsxs("main",{children:[p.jsxs("div",{className:"relative bg-gradient-to-r from-emerald-800 to-teal-700 text-white",children:[p.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),p.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1550009158-9ebf69173e03?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80')",backgroundBlendMode:"overlay",opacity:.4}}),p.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-32 md:py-40 lg:py-48",children:p.jsxs("div",{className:"md:w-2/3",children:[p.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-6 leading-tight",children:["Sustainable E-Waste Management",p.jsx("span",{className:"block text-emerald-300",children:"for a Better Future"})]}),p.jsx("p",{className:"text-lg md:text-xl text-gray-100 mb-8 max-w-2xl",children:"Join our platform to contribute to responsible e-waste disposal, device repair, and environmental sustainability. Together, we can make a difference."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs(Qn,{to:"/register",className:"inline-flex items-center justify-center px-6 py-3 bg-emerald-500 text-white rounded-md hover:bg-emerald-600 transition-colors text-lg font-medium",children:["Get Started",p.jsx(JY,{className:"ml-2 h-5 w-5"})]}),p.jsxs("a",{href:"#services",className:"inline-flex items-center justify-center px-6 py-3 border-2 border-white text-white rounded-md hover:bg-white hover:text-emerald-700 transition-colors text-lg font-medium",children:["Learn More",p.jsx(jv,{className:"ml-2 h-5 w-5"})]})]})]})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",className:"w-full h-auto",children:p.jsx("path",{fill:"#f9fafb",fillOpacity:"1",d:"M0,96L80,112C160,128,320,160,480,160C640,160,800,128,960,122.7C1120,117,1280,139,1360,149.3L1440,160L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"})})})]}),p.jsx("div",{id:"impact",className:"py-16 bg-gray-50",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Environmental Impact"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Join over 350 community members making a difference through responsible e-waste management."})]}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:T0e.map((a,o)=>p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-4xl md:text-5xl font-bold text-emerald-600 mb-2",children:a.value}),p.jsx("div",{className:"text-gray-600",children:a.label})]},o))}),p.jsx("div",{className:"mt-16 bg-white rounded-xl shadow-lg overflow-hidden",children:p.jsx("div",{className:"p-8",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[p.jsxs("div",{className:"mb-6 md:mb-0 md:w-1/2",children:[p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Making a Measurable Difference"}),p.jsx("p",{className:"text-gray-600 mb-4",children:"Every device recycled or repaired through our platform contributes to reducing e-waste in landfills and conserving valuable resources."}),p.jsx("ul",{className:"space-y-2",children:["Reduced CO2 emissions","Conservation of precious metals","Decreased landfill waste","Extended device lifecycles"].map((a,o)=>p.jsxs("li",{className:"flex items-center",children:[p.jsx(Wi,{className:"h-5 w-5 text-emerald-500 mr-2"}),p.jsx("span",{children:a})]},o))})]}),p.jsx("div",{className:"md:w-1/2",children:p.jsx("img",{src:"https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",alt:"Environmental impact",className:"rounded-lg shadow-md"})})]})})})]})}),p.jsx("div",{id:"services",className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Services"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Comprehensive solutions for responsible e-waste management and device lifecycle extension."})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:C0e.map((a,o)=>p.jsxs("div",{className:`${a.color} border rounded-xl p-6 transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1`,children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-white flex items-center justify-center mb-4 shadow-sm",children:a.icon}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),p.jsx("p",{className:"text-gray-600",children:a.description})]},o))}),p.jsxs("div",{className:"mt-20",children:[p.jsx("h3",{className:"text-2xl font-bold text-gray-900 text-center mb-12",children:"How It Works"}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"hidden md:block absolute top-1/2 left-0 right-0 h-1 bg-emerald-200 -translate-y-1/2 z-0"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:[{step:"01",title:"Register",description:"Create an account and select your role in the e-waste ecosystem",icon:p.jsx(Lx,{className:"h-8 w-8 text-emerald-600"})},{step:"02",title:"Connect",description:"Schedule pickups, request repairs, or browse the marketplace",icon:p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"})},{step:"03",title:"Contribute",description:"Make a positive environmental impact and earn rewards",icon:p.jsx(y2,{className:"h-8 w-8 text-emerald-600"})}].map((a,o)=>p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center",children:[p.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center mb-4",children:a.icon}),p.jsxs("div",{className:"text-sm font-semibold text-emerald-600 mb-2",children:["STEP ",a.step]}),p.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:a.title}),p.jsx("p",{className:"text-gray-600",children:a.description})]},o))})]})]})]})}),p.jsx("div",{className:"py-16 bg-gray-50",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"For Everyone in the Ecosystem"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Our platform connects all stakeholders in the e-waste management process, making it easier to contribute to a sustainable future."})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:N0e.map((a,o)=>p.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-100 transform hover:-translate-y-1",children:[p.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-lg flex items-center justify-center mb-4 text-emerald-600",children:a.icon}),p.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),p.jsx("p",{className:"text-gray-600",children:a.description})]},o))})]})}),p.jsx("div",{id:"testimonials",className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What Our Users Say"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Hear from the people who are making a difference with our platform."})]}),p.jsxs("div",{className:"relative bg-emerald-50 rounded-2xl p-8 md:p-12 shadow-md overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-32 h-32 bg-emerald-200 rounded-full opacity-50"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-32 h-32 bg-emerald-200 rounded-full opacity-50"}),p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[p.jsx("div",{className:"mb-6 md:mb-0 md:w-1/3 flex justify-center",children:p.jsx("img",{src:rg[n].image,alt:rg[n].name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-md"})}),p.jsxs("div",{className:"md:w-2/3",children:[p.jsxs("div",{className:"text-xl md:text-2xl text-gray-700 italic mb-6",children:['"',rg[n].content,'"']}),p.jsx("div",{className:"font-semibold text-gray-900",children:rg[n].name}),p.jsx("div",{className:"text-emerald-600",children:rg[n].role})]})]}),p.jsx("div",{className:"flex justify-center mt-8",children:rg.map((a,o)=>p.jsx("button",{onClick:()=>r(o),className:`w-3 h-3 rounded-full mx-1 ${o===n?"bg-emerald-600":"bg-gray-300"}`,"aria-label":`Go to testimonial ${o+1}`},o))})]})]})]})}),p.jsx("div",{className:"py-12 bg-gray-50",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Trusted Partners"})}),p.jsx("div",{className:"flex flex-wrap justify-center gap-8 items-center",children:I0e.map((a,o)=>p.jsx("div",{className:"text-lg font-semibold text-gray-500",children:a},o))})]})}),p.jsx("div",{className:"bg-emerald-700 text-white py-16",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[p.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Ready to Make a Difference?"}),p.jsx("p",{className:"text-lg text-emerald-100 mb-8 max-w-2xl mx-auto",children:"Join our community today and be part of the solution to electronic waste."}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[p.jsx(Qn,{to:"/register",className:"px-8 py-3 bg-white text-emerald-700 rounded-md hover:bg-gray-100 transition-colors text-lg font-medium",children:"Get Started"}),p.jsx(Qn,{to:"/login",className:"px-8 py-3 border-2 border-white text-white rounded-md hover:bg-emerald-600 transition-colors text-lg font-medium",children:"Sign In"})]})]})})]}),p.jsx("footer",{className:"bg-gray-900 text-white py-12",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-400"}),p.jsx("span",{className:"ml-2 text-xl font-bold",children:"E-Waste Manager"})]}),p.jsx("p",{className:"text-gray-400",children:"Sustainable e-waste management for a better future."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Services"}),p.jsxs("ul",{className:"space-y-2 text-gray-400",children:[p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"E-Waste Pickup"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Device Repair"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Marketplace"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Education"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),p.jsxs("ul",{className:"space-y-2 text-gray-400",children:[p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"About Us"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Our Team"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Careers"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Contact"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Legal"}),p.jsxs("ul",{className:"space-y-2 text-gray-400",children:[p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Terms of Service"})}),p.jsx("li",{children:p.jsx("a",{href:"#",className:"hover:text-emerald-400",children:"Cookie Policy"})})]})]})]}),p.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:p.jsx("p",{children:" 2025 E-Waste Manager. All rights reserved."})})]})})]})}var uj=function(t,e){return uj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},uj(t,e)};function pZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");uj(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var p5=function(){return p5=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p5.apply(this,arguments)};function Rx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mZ(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function gZ(t,e){return function(n,r){e(n,r,t)}}function yZ(t,e,n,r,s,i){function a(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,h=!1,f=n.length-1;f>=0;f--){var m={};for(var y in r)m[y]=y==="access"?{}:r[y];for(var y in r.access)m.access[y]=r.access[y];m.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(x||null))};var v=(0,n[f])(o==="accessor"?{get:u.get,set:u.set}:u[l],m);if(o==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(d=a(v.get))&&(u.get=d),(d=a(v.set))&&(u.set=d),(d=a(v.init))&&s.unshift(d)}else(d=a(v))&&(o==="field"?s.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),h=!0}function vZ(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function xZ(t){return typeof t=="symbol"?t:"".concat(t)}function bZ(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function wZ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vt(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function _Z(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var AI=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function kZ(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&AI(e,t,n)}function m5(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rR(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function SZ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rR(arguments[e]));return t}function NZ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function CZ(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Jv(t){return this instanceof Jv?(this.v=t,this):new Jv(t)}function TZ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(f){return function(m){return Promise.resolve(m).then(f,d)}}function o(f,m){r[f]&&(s[f]=function(y){return new Promise(function(v,x){i.push([f,y,v,x])>1||l(f,y)})},m&&(s[f]=m(s[f])))}function l(f,m){try{c(r[f](m))}catch(y){h(i[0][3],y)}}function c(f){f.value instanceof Jv?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,m){f(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function IZ(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(a){return(n=!n)?{value:Jv(t[s](a)),done:!1}:i?i(a):a}:i}}function AZ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof m5=="function"?m5(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,l){a=t[i](a),s(o,l,a.done,a.value)})}}function s(i,a,o,l){Promise.resolve(l).then(function(c){i({value:c,done:o})},a)}}function EZ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E0e=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},dj=function(t){return dj=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},dj(t)};function PZ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=dj(t),r=0;r<n.length;r++)n[r]!=="default"&&AI(e,t,n[r]);return E0e(e,t),e}function OZ(t){return t&&t.__esModule?t:{default:t}}function jZ(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function $Z(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function DZ(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function LZ(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var P0e=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function RZ(t){function e(i){t.error=t.hasError?new P0e(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(a){return e(a),s()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function MZ(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,i,a){return r?e?".jsx":".js":s&&(!i||!a)?n:s+i+"."+a.toLowerCase()+"js"}):t}const O0e={__extends:pZ,__assign:p5,__rest:Rx,__decorate:mZ,__param:gZ,__esDecorate:yZ,__runInitializers:vZ,__propKey:xZ,__setFunctionName:bZ,__metadata:wZ,__awaiter:Vt,__generator:_Z,__createBinding:AI,__exportStar:kZ,__values:m5,__read:rR,__spread:SZ,__spreadArrays:NZ,__spreadArray:CZ,__await:Jv,__asyncGenerator:TZ,__asyncDelegator:IZ,__asyncValues:AZ,__makeTemplateObject:EZ,__importStar:PZ,__importDefault:OZ,__classPrivateFieldGet:jZ,__classPrivateFieldSet:$Z,__classPrivateFieldIn:DZ,__addDisposableResource:LZ,__disposeResources:RZ,__rewriteRelativeImportExtension:MZ},j0e=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:LZ,get __assign(){return p5},__asyncDelegator:IZ,__asyncGenerator:TZ,__asyncValues:AZ,__await:Jv,__awaiter:Vt,__classPrivateFieldGet:jZ,__classPrivateFieldIn:DZ,__classPrivateFieldSet:$Z,__createBinding:AI,__decorate:mZ,__disposeResources:RZ,__esDecorate:yZ,__exportStar:kZ,__extends:pZ,__generator:_Z,__importDefault:OZ,__importStar:PZ,__makeTemplateObject:EZ,__metadata:wZ,__param:gZ,__propKey:xZ,__read:rR,__rest:Rx,__rewriteRelativeImportExtension:MZ,__runInitializers:vZ,__setFunctionName:bZ,__spread:SZ,__spreadArray:CZ,__spreadArrays:NZ,__values:m5,default:O0e},Symbol.toStringTag,{value:"Module"})),$0e="modulepreload",D0e=function(t){return"/"+t},o7={},Jh=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=D0e(l),l in o7)return;o7[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":$0e,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},L0e=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Jh(async()=>{const{default:r}=await Promise.resolve().then(()=>G0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class sR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class l7 extends sR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class c7 extends sR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class u7 extends sR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hj;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(hj||(hj={}));class R0e{constructor(e,{headers:n={},customFetch:r,region:s=hj.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=L0e(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Vt(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:i,method:a,body:o,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const d=new URL(`${this.url}/${n}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)):h=o;const f=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:h,signal:l}).catch(x=>{throw x.name==="AbortError"?x:new l7(x)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new c7(f);if(!f.ok)throw new u7(f);let y=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield f.json():y==="application/octet-stream"||y==="application/pdf"?v=yield f.blob():y==="text/event-stream"?v=f:y==="multipart/form-data"?v=yield f.formData():v=yield f.text(),{data:v,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new l7(i)}:{data:null,error:i,response:i instanceof u7||i instanceof c7?i.context:void 0}}})}}var Xo={};const Mx=cI(j0e);var oN={},lN={},cN={},uN={},dN={},M0e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qv=M0e();const F0e=Qv.fetch,FZ=Qv.fetch.bind(Qv),zZ=Qv.Headers,z0e=Qv.Request,B0e=Qv.Response,G0=Object.freeze(Object.defineProperty({__proto__:null,Headers:zZ,Request:z0e,Response:B0e,default:FZ,fetch:F0e},Symbol.toStringTag,{value:"Module"})),W0e=cI(G0);var hN={},d7;function BZ(){if(d7)return hN;d7=1,Object.defineProperty(hN,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return hN.default=t,hN}var h7;function WZ(){if(h7)return dN;h7=1,Object.defineProperty(dN,"__esModule",{value:!0});const t=Mx,e=t.__importDefault(W0e),n=t.__importDefault(BZ());class r{constructor(i){var a,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,y=null,v=null,x=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const A=await c.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const k=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),N=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");k&&N&&N.length>1&&(v=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,x=406,b="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await c.text();try{m=JSON.parse(k),Array.isArray(m)&&c.status===404&&(y=[],m=null,x=200,b="OK")}catch{c.status===404&&k===""?(x=204,b="No Content"):m={message:k}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,x=200,b="OK"),m&&this.shouldThrowOnError)throw new n.default(m)}return{error:m,data:y,count:v,status:x,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return dN.default=r,dN}var f7;function UZ(){if(f7)return uN;f7=1,Object.defineProperty(uN,"__esModule",{value:!0});const e=Mx.__importDefault(WZ());class n extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var u;const d=[s?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return uN.default=n,uN}var p7;function iR(){if(p7)return cN;p7=1,Object.defineProperty(cN,"__esModule",{value:!0});const e=Mx.__importDefault(UZ()),n=new RegExp("[,()]");class r extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${u}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return cN.default=r,cN}var m7;function VZ(){if(m7)return lN;m7=1,Object.defineProperty(lN,"__esModule",{value:!0});const e=Mx.__importDefault(iR());class n{constructor(s,{headers:i={},schema:a,fetch:o}){this.url=s,this.headers=new Headers(i),this.schema=a,this.fetch=o}select(s,i){const{head:a=!1,count:o}=i??{},l=a?"HEAD":"GET";let c=!1;const u=(s??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:a=!0}={}){var o;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var a;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var i;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return lN.default=n,lN}var g7;function U0e(){if(g7)return oN;g7=1,Object.defineProperty(oN,"__esModule",{value:!0});const t=Mx,e=t.__importDefault(VZ()),n=t.__importDefault(iR());class r{constructor(i,{headers:a={},schema:o,fetch:l}={}){this.url=i,this.headers=new Headers(a),this.schemaName=o,this.fetch=l}from(i){const a=new URL(`${this.url}/${i}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:o=!1,get:l=!1,count:c}={}){var u;let d;const h=new URL(`${this.url}/rpc/${i}`);let f;o||l?(d=o?"HEAD":"GET",Object.entries(a).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{h.searchParams.append(y,v)})):(d="POST",f=a);const m=new Headers(this.headers);return c&&m.set("Prefer",`count=${c}`),new n.default({method:d,url:h,headers:m,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return oN.default=r,oN}Object.defineProperty(Xo,"__esModule",{value:!0});var HZ=Xo.PostgrestError=tJ=Xo.PostgrestBuilder=QZ=Xo.PostgrestTransformBuilder=ZZ=Xo.PostgrestFilterBuilder=XZ=Xo.PostgrestQueryBuilder=GZ=Xo.PostgrestClient=void 0;const Fx=Mx,qZ=Fx.__importDefault(U0e());var GZ=Xo.PostgrestClient=qZ.default;const KZ=Fx.__importDefault(VZ());var XZ=Xo.PostgrestQueryBuilder=KZ.default;const YZ=Fx.__importDefault(iR());var ZZ=Xo.PostgrestFilterBuilder=YZ.default;const JZ=Fx.__importDefault(UZ());var QZ=Xo.PostgrestTransformBuilder=JZ.default;const eJ=Fx.__importDefault(WZ());var tJ=Xo.PostgrestBuilder=eJ.default;const nJ=Fx.__importDefault(BZ());HZ=Xo.PostgrestError=nJ.default;var rJ=Xo.default={PostgrestClient:qZ.default,PostgrestQueryBuilder:KZ.default,PostgrestFilterBuilder:YZ.default,PostgrestTransformBuilder:JZ.default,PostgrestBuilder:eJ.default,PostgrestError:nJ.default};const V0e=Object.freeze(Object.defineProperty({__proto__:null,get PostgrestBuilder(){return tJ},get PostgrestClient(){return GZ},get PostgrestError(){return HZ},get PostgrestFilterBuilder(){return ZZ},get PostgrestQueryBuilder(){return XZ},get PostgrestTransformBuilder(){return QZ},default:rJ},Symbol.toStringTag,{value:"Module"})),{PostgrestClient:H0e,PostgrestQueryBuilder:Xpt,PostgrestFilterBuilder:Ypt,PostgrestTransformBuilder:Zpt,PostgrestBuilder:Jpt,PostgrestError:Qpt}=rJ||V0e;class q0e{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const G0e="2.78.0",K0e=`realtime-js/${G0e}`,X0e="1.0.0",fj=1e4,Y0e=1e3,Z0e=100;var Ow;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ow||(Ow={}));var hi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(hi||(hi={}));var vu;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(vu||(vu={}));var pj;(function(t){t.websocket="websocket"})(pj||(pj={}));var Cg;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Cg||(Cg={}));class J0e{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class sJ{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ar;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ar||(Ar={}));const y7=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=Q0e(a,t,e,s),i),{}):{}},Q0e=(t,e,n,r)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=n[t];return i&&!r.includes(i)?iJ(i,a):mj(a)},iJ=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rye(e,n)}switch(t){case Ar.bool:return eye(e);case Ar.float4:case Ar.float8:case Ar.int2:case Ar.int4:case Ar.int8:case Ar.numeric:case Ar.oid:return tye(e);case Ar.json:case Ar.jsonb:return nye(e);case Ar.timestamp:return sye(e);case Ar.abstime:case Ar.date:case Ar.daterange:case Ar.int4range:case Ar.int8range:case Ar.money:case Ar.reltime:case Ar.text:case Ar.time:case Ar.timestamptz:case Ar.timetz:case Ar.tsrange:case Ar.tstzrange:return mj(e);default:return mj(e)}},mj=t=>t,eye=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tye=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nye=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rye=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const a=t.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>iJ(e,o))}return t},sye=t=>typeof t=="string"?t.replace(" ","T"):t,aJ=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class BO{constructor(e,n,r={},s=fj){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var v7;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(v7||(v7={}));class jw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jw.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=jw.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=jw.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(i,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=i[c];if(d){const h=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),m=u.filter(v=>f.indexOf(v.presence_ref)<0),y=d.filter(v=>h.indexOf(v.presence_ref)<0);m.length>0&&(o[c]=m),y.length>0&&(l[c]=y)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[o].unshift(...h)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var x7;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(x7||(x7={}));var $w;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})($w||($w={}));var Ch;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ch||(Ch={}));class aR{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=hi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new BO(this,vu.join,this.params,this.timeout),this.rejoinTimer=new sJ(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hi.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vu.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new jw(this),this.broadcastEndpointURL=aJ(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==hi.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[$w.PRESENCE]&&this.bindings[$w.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Ch.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Ch.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e==null||e(Ch.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,x=[];for(let b=0;b<v;b++){const _=y[b],{filter:{event:k,schema:N,table:A,filter:T}}=_,C=f&&f[b];if(C&&C.event===k&&C.schema===N&&C.table===A&&C.filter===T)x.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),this.state=hi.errored,e==null||e(Ch.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ch.SUBSCRIBED);return}}).receive("error",f=>{this.state=hi.errored,e==null||e(Ch.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ch.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===hi.joined&&e===$w.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vu.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new BO(this,vu.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new BO(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Z0e){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=vu;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var m,y,v;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(y=f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(f=>f.callback(h,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var m,y,v,x,b,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const k=f.id,N=(m=f.filter)===null||m===void 0?void 0:m.event;return k&&((y=n.ids)===null||y===void 0?void 0:y.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(b=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:y,table:v,commit_timestamp:x,type:b,errors:_}=m;h=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(m))}f.callback(h,r)})}_isClosed(){return this.state===hi.closed}_isJoined(){return this.state===hi.joined}_isJoining(){return this.state===hi.joining}_isLeaving(){return this.state===hi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&aR.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vu.close,{},e)}_onError(e){this._on(vu.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=y7(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=y7(e.columns,e.old_record)),n}}const WO=()=>{},fN={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},iye=[1e3,2e3,5e3,1e4],aye=1e4,oye=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lye{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fj,this.transport=null,this.heartbeatIntervalMs=fN.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=WO,this.ref=0,this.reconnectTimer=null,this.logger=WO,this.conn=null,this.sendBuffer=[],this.serializer=new J0e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Jh(async()=>{const{default:o}=await Promise.resolve().then(()=>G0);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${pj.websocket}`,this.httpEndpoint=aJ(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=q0e.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:X0e}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ow.connecting:return Cg.Connecting;case Ow.open:return Cg.Open;case Ow.closing:return Cg.Closing;default:return Cg.Closed}}isConnected(){return this.connectionState()===Cg.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new aR(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Y0e,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fN.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=n,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vu.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oye],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:K0e};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(vu.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new sJ(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fN.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,a,o,l,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:fj,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:fN.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:WO,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>iye[d-1]||aye,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class oR extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function os(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cye extends oR{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gj extends oR{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const lR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Jh(async()=>{const{default:r}=await Promise.resolve().then(()=>G0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uye=()=>Vt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Jh(()=>Promise.resolve().then(()=>G0),void 0)).Response:Response}),yj=t=>{if(Array.isArray(t))return t.map(n=>yj(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=yj(r)}),e},dye=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},UO=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},hye=(t,e,n)=>Vt(void 0,void 0,void 0,function*(){const r=yield uye();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new cye(UO(s),i,a))}).catch(s=>{e(new gj(UO(s),s))}):e(new gj(UO(t),t))}),fye=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(dye(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function w_(t,e,n,r,s,i){return Vt(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,fye(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>hye(l,o,r))})})}function b2(t,e,n,r){return Vt(this,void 0,void 0,function*(){return w_(t,"GET",e,n,r)})}function pu(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return w_(t,"POST",e,r,s,n)})}function vj(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return w_(t,"PUT",e,r,s,n)})}function pye(t,e,n,r){return Vt(this,void 0,void 0,function*(){return w_(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function cR(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return w_(t,"DELETE",e,r,s,n)})}class mye{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Vt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(os(e))return{data:null,error:e};throw e}})}}var oJ;class gye{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[oJ]="BlobDownloadBuilder",this.promise=null}asStream(){return new mye(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Vt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(os(e))return{data:null,error:e};throw e}})}}oJ=Symbol.toStringTag;const yye={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},b7={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vye{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=lR(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Vt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},b7),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield(e=="PUT"?vj:pu)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Vt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:b7.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield vj(this.fetch,o.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(os(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pu(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new oR("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}})}update(e,n,r){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Vt(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield pu(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pu(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Vt(this,void 0,void 0,function*(){try{const s=yield pu(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"",o=this._getFinalPath(e),l=()=>b2(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new gye(l,this.shouldThrowOnError)}info(e){return Vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield b2(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:yj(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}})}exists(e){return Vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pye(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(os(r)&&r instanceof gj){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield cR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}list(e,n,r){return Vt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},yye),n),{prefix:e||""});return{data:yield pu(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}listV2(e,n){return Vt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pu(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const lJ="2.78.0",cJ={"X-Client-Info":`storage-js/${lJ}`};class xye{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cJ),n),this.fetch=lR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Vt(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield b2(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield b2(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}createBucket(e){return Vt(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pu(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(os(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield vj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield cR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class bye{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cJ),n),this.fetch=lR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield pu(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}listBuckets(e){return Vt(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield b2(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield cR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}})}}const uR={"X-Client-Info":`storage-js/${lJ}`,"Content-Type":"application/json"};class uJ extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Sl(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class VO extends uJ{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wye extends uJ{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var w7;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(w7||(w7={}));const dR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Jh(async()=>{const{default:r}=await Promise.resolve().then(()=>G0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},_ye=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},_7=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kye=(t,e,n)=>Vt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new VO(_7(a),s,o))}).catch(()=>{const a=s+"",o=i.statusText||`HTTP ${s} error`;e(new VO(o,s,a))});else{const a=s+"",o=i.statusText||`HTTP ${s} error`;e(new VO(o,s,a))}}else e(new wye(_7(t),t))}),Sye=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(_ye(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function Nye(t,e,n,r,s,i){return Vt(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(n,Sye(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>kye(l,o,r))})})}function Nl(t,e,n,r,s){return Vt(this,void 0,void 0,function*(){return Nye(t,"POST",e,r,s,n)})}class Cye{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uR),n),this.fetch=dR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield Nl(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sl(r))return{data:null,error:r};throw r}})}listIndexes(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Vt(this,void 0,void 0,function*(){try{return{data:(yield Nl(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Sl(r))return{data:null,error:r};throw r}})}}class Tye{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uR),n),this.fetch=dR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nl(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}getVectors(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}listVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Nl(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}queryVectors(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Vt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nl(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}}class Iye{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uR),n),this.fetch=dR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield Nl(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Nl(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}listBuckets(){return Vt(this,arguments,void 0,function*(e={}){try{return{data:yield Nl(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:(yield Nl(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Sl(n))return{data:null,error:n};throw n}})}}class Aye extends Iye{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Eye(this.url,this.headers,e,this.fetch)}}class Eye extends Cye{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Vt(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Vt(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Vt(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Vt(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Pye(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Pye extends Tye{constructor(e,n,r,s,i){super(e,n,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Vt(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Vt(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Vt(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Vt(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Vt(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Oye extends xye{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new vye(this.url,this.headers,e,this.fetch)}get vectors(){return new Aye(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new bye(this.url+"/iceberg",this.headers,this.fetch)}}const jye="2.78.0";let aw="";typeof Deno<"u"?aw="deno":typeof document<"u"?aw="web":typeof navigator<"u"&&navigator.product==="ReactNative"?aw="react-native":aw="node";const $ye={"X-Client-Info":`supabase-js-${aw}/${jye}`},Dye={headers:$ye},Lye={schema:"public"},Rye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mye={},Fye=t=>{let e;return t?e=t:typeof fetch>"u"?e=FZ:e=fetch,(...n)=>e(...n)},zye=()=>typeof Headers>"u"?zZ:Headers,Bye=(t,e,n)=>{const r=Fye(n),s=zye();return async(i,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:c}))}};function Wye(t){return t.endsWith("/")?t:t+"/"}function Uye(t,e){var n,r;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function Vye(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wye(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dJ="2.78.0",ev=30*1e3,xj=3,HO=xj*ev,Hye="http://localhost:9999",qye="supabase.auth.token",Gye={"X-Client-Info":`gotrue-js/${dJ}`},bj="X-Supabase-Api-Version",hJ={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kye=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xye=10*60*1e3;class w2 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Kt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Yye extends w2{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Zye(t){return Kt(t)&&t.name==="AuthApiError"}class Tg extends w2{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class wm extends w2{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class uu extends wm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jye(t){return Kt(t)&&t.name==="AuthSessionMissingError"}class Ry extends wm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pN extends wm{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mN extends wm{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Qye(t){return Kt(t)&&t.name==="AuthImplicitGrantRedirectError"}class k7 extends wm{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wj extends wm{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function qO(t){return Kt(t)&&t.name==="AuthRetryableFetchError"}class S7 extends wm{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class _j extends wm{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const g5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),N7=` 	
\r=`.split(""),eve=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<N7.length;e+=1)t[N7[e].charCodeAt(0)]=-2;for(let e=0;e<g5.length;e+=1)t[g5[e].charCodeAt(0)]=e;return t})();function C7(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(g5[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(g5[r]),e.queuedBits-=6}}function fJ(t,e,n){const r=eve[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function T7(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{rve(a,r,n)};for(let a=0;a<t.length;a+=1)fJ(t.charCodeAt(a),s,i);return e.join("")}function tve(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nve(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tve(r,e)}}function rve(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Dv(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)fJ(t.charCodeAt(s),n,r);return new Uint8Array(e)}function sve(t){const e=[];return nve(t,n=>e.push(n)),new Uint8Array(e)}function Lg(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>C7(s,n,r)),C7(null,n,r),e.join("")}function ive(t){return Math.round(Date.now()/1e3)+t}function ave(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const lo=()=>typeof window<"u"&&typeof document<"u",sg={tested:!1,writable:!1},pJ=()=>{if(!lo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sg.tested)return sg.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),sg.tested=!0,sg.writable=!0}catch{sg.tested=!0,sg.writable=!1}return sg.writable};function ove(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const mJ=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Jh(async()=>{const{default:r}=await Promise.resolve().then(()=>G0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},lve=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",tv=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ig=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ep=async(t,e)=>{await t.removeItem(e)};class EI{constructor(){this.promise=new EI.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}EI.promiseConstructor=Promise;function GO(t){const e=t.split(".");if(e.length!==3)throw new _j("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Kye.test(e[r]))throw new _j("JWT not in base64url format");return{header:JSON.parse(T7(e[0])),payload:JSON.parse(T7(e[1])),signature:Dv(e[2]),raw:{header:e[0],payload:e[1]}}}async function cve(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uve(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function dve(t){return("0"+t.toString(16)).substr(-2)}function hve(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,dve).join("")}async function fve(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pve(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fve(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function My(t,e,n=!1){const r=hve();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await tv(t,`${e}-code-verifier`,s);const i=await pve(r);return[i,r===i?"plain":"s256"]}const mve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gve(t){const e=t.headers.get(bj);if(!e||!e.match(mve))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yve(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vve(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xve=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fy(t){if(!xve.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function KO(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bve(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function I7(t){return JSON.parse(JSON.stringify(t))}const gg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wve=[502,503,504];async function A7(t){var e;if(!lve(t))throw new wj(gg(t),0);if(wve.includes(t.status))throw new wj(gg(t),t.status);let n;try{n=await t.json()}catch(i){throw new Tg(gg(i),i)}let r;const s=gve(t);if(s&&s.getTime()>=hJ["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new S7(gg(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new uu}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new S7(gg(n),t.status,n.weak_password.reasons);throw new Yye(gg(n),t.status||500,r)}const _ve=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function rn(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[bj]||(i[bj]=hJ["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await kve(t,e,n+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function kve(t,e,n,r,s,i){const a=_ve(e,r,s,i);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new wj(gg(l),0)}if(o.ok||await A7(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await A7(l)}}function du(t){var e;let n=null;Cve(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ive(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function E7(t){const e=du(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function mp(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Sve(t){return{data:t,error:null}}function Nve(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,a=Rx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function P7(t){return t}function Cve(t){return t.access_token&&t.refresh_token&&t.expires_in}const XO=["global","local","others"];class Tve{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=mJ(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=XO[0]){if(XO.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${XO.join(", ")}`);try{return await rn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await rn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:mp})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Rx(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await rn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Nve,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Kt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await rn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mp})}catch(n){if(Kt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await rn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P7});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Kt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Fy(e);try{return await rn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mp})}catch(n){if(Kt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Fy(e);try{return await rn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:mp})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Fy(e);try{return await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:mp})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Fy(e.userId);try{const{data:n,error:r}=await rn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Fy(e.userId),Fy(e.id);try{return{data:await rn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await rn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P7});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Kt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await rn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await rn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await rn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await rn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await rn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}}function O7(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const zy={debug:!!(globalThis&&pJ()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gJ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ive extends gJ{}async function Ave(t,e,n){zy.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),zy.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){zy.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{zy.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw zy.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ive(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zy.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Eve(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yJ(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Pve(t){return parseInt(t,16)}function Ove(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function jve(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=yJ(t.address),m=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${f}

${y}`;let x=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),l&&(x+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}x+=b}return`${v}
${x}`}class Us extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class y5 extends Us{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function $ve({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Us({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Us({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Us({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Us({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Us({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Us({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Us({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Us({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(vJ(a)){if(i.rp.id!==a)return new Us({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Us({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Us({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Us({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Us({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Dve({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Us({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Us({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(vJ(r)){if(n.rpId!==r)return new Us({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Us({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Us({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Us({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Lve{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Rve=new Lve;function Mve(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Rx(t,["challenge","user","excludeCredentials"]),i=Dv(e).buffer,a=Object.assign(Object.assign({},n),{id:Dv(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Dv(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function Fve(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Rx(t,["challenge","allowCredentials"]),s=Dv(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Dv(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function zve(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Lg(new Uint8Array(t.response.attestationObject)),clientDataJSON:Lg(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Bve(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Lg(new Uint8Array(s.authenticatorData)),clientDataJSON:Lg(new Uint8Array(s.clientDataJSON)),signature:Lg(new Uint8Array(s.signature)),userHandle:s.userHandle?Lg(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vJ(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function j7(){var t,e;return!!(lo()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Wve(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new y5("Browser returned unexpected credential type",e)}:{data:null,error:new y5("Empty credential response",e)}}catch(e){return{data:null,error:$ve({error:e,options:t})}}}async function Uve(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new y5("Browser returned unexpected credential type",e)}:{data:null,error:new y5("Empty credential response",e)}}catch(e){return{data:null,error:Dve({error:e,options:t})}}}const Vve={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Hve={userVerification:"preferred",hints:["security-key"]};function v5(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))r[i]=a;else if(n(a))r[i]=a;else if(e(a)){const o=r[i];e(o)?r[i]=v5(o,a):r[i]=v5(a)}else r[i]=a}return r}function qve(t,e){return v5(Vve,t,e||{})}function Gve(t,e){return v5(Hve,t,e||{})}class Kve{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=s??Rve.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=qve(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await Wve({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=Gve(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await Uve(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(a){return Kt(a)?{data:null,error:a}:{data:null,error:new Tg("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!n)return{data:null,error:new w2("rpId is required for WebAuthn authentication")};try{if(!j7())return{data:null,error:new Tg("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return Kt(a)?{data:null,error:a}:{data:null,error:new Tg("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!n)return{data:null,error:new w2("rpId is required for WebAuthn registration")};try{if(!j7())return{data:null,error:new Tg("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return Kt(a)?{data:null,error:a}:{data:null,error:new Tg("Unexpected error in register",a)}}}}Eve();const Xve={url:Hye,storageKey:qye,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gye,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $7(t,e,n){return await n()}const By={};class _2{get jwks(){var e,n;return(n=(e=By[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){By[this.storageKey]=Object.assign(Object.assign({},By[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=By[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){By[this.storageKey]=Object.assign(Object.assign({},By[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_2.nextInstanceID,_2.nextInstanceID+=1,this.instanceID>0&&lo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Xve),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Tve({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=mJ(s.fetch),this.lock=s.lock||$7,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:lo()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Ave:this.lock=$7,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kve(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:pJ()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O7(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=O7(this.memoryStorage)),lo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dJ}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ove(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),lo()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Qye(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Kt(n)?{error:n}:{error:new Tg("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:du}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Kt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await My(this.storage,this.storageKey)),i=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:du})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await rn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:du})}else throw new pN("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Kt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:a,options:o}=e;n=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:E7})}else if("phone"in e){const{phone:i,password:a,options:o}=e;n=await rn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:E7})}else throw new pN("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ry}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Kt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,a,o,l,c,u,d,h;let f,m;if("message"in e)f=e.message,m=e.signature;else{const{chain:y,wallet:v,statement:x,options:b}=e;let _;if(lo())if(typeof v=="object")_=v;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")_=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),N=await _.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=yJ(N[0]);let T=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!T){const P=await _.request({method:"eth_chainId"});T=Pve(P)}const C={domain:k.host,address:A,statement:x,uri:k.href,version:"1",chainId:T,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=jve(C),m=await _.request({method:"personal_sign",params:[Ove(f),A]})}try{const{data:y,error:v}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:du});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Ry}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(Kt(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSolana(e){var n,r,s,i,a,o,l,c,u,d,h,f;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:v,wallet:x,statement:b,options:_}=e;let k;if(lo())if(typeof x=="object")k=x;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))k=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=x}const N=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const A=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let T;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")T=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)T=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)m=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),y=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(u=_==null?void 0:_.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const A=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=A}}try{const{data:v,error:x}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Lg(y)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:du});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Ry}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(Kt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const n=await ig(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await rn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:du});if(await ep(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ry}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Kt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=e,o=await rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:du}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ry}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Kt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await My(this.storage,this.storageKey));const{error:d}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await rn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new pN("You must provide either an email or phone number.")}catch(o){if(Kt(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await rn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:du});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Kt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await My(this.storage,this.storageKey)),await rn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Sve})}catch(i){if(Kt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new uu;const{error:s}=await rn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Kt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await rn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await rn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new pN("You must provide either an email or phone number and a type")}catch(n){if(Kt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ig(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<HO:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ig(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=KO()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=bve(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mp}):await this._useSession(async n=>{var r,s,i;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new uu}:await rn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:mp})})}catch(n){if(Kt(n))return Jye(n)&&(await this._removeSession(),await ep(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new uu;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await My(this.storage,this.storageKey));const{data:c,error:u}=await rn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:mp});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new uu;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=GO(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Kt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new uu;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Kt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!lo())throw new mN("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mN(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new k7("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mN("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k7("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new mN("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=ev&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Kt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ig(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Zye(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await ep(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=ave(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await My(this.storage,this.storageKey,!0));try{return await rn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Kt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,c,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await rn(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return lo()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Kt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:a,provider:o,token:l,access_token:c,nonce:u}=e,d=await rn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:du}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ry}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:f})}catch(s){if(Kt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await rn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await uve(async s=>(s>0&&await cve(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await rn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:du})),(s,i)=>{const a=200*Math.pow(2,s);return i&&qO(i)&&Date.now()+a-r<ev})}catch(r){if(this._debug(n,"error",r),Kt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),lo()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ig(this.storage,this.storageKey);if(s&&this.userStorage){let a=await ig(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await tv(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:KO()}else if(s&&!s.user&&!s.user){const a=await ig(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ep(this.storage,this.storageKey+"-user"),await tv(this.storage,this.storageKey,s)):s.user=KO()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<HO;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${HO}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),qO(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new uu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new EI;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new uu;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),Kt(i)){const a={data:null,error:i};return qO(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await tv(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=I7(s);await tv(this.storage,this.storageKey,i)}else{const s=I7(n);await tv(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ep(this.storage,this.storageKey),await ep(this.storage,this.storageKey+"-code-verifier"),await ep(this.storage,this.storageKey+"-user"),this.userStorage&&await ep(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ev);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ev);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ev}ms, refresh threshold is ${xj} ticks`),s<=xj&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gJ)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await My(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await rn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await rn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?zve(e.webauthn.credential_response):Bve(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const a=await rn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Mve(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Fve(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=GO(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?{data:null,error:s}:r?await rn(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new uu}})}catch(n){if(Kt(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return{data:null,error:i};if(!s)return{data:null,error:new uu};const a=await rn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&lo()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return{data:null,error:i};if(!s)return{data:null,error:new uu};const a=await rn(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&lo()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Xye>s)return r;const{data:i,error:a}=await rn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:f,error:m}=await this.getSession();if(m||!f.session)return{data:null,error:m};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=GO(r);n!=null&&n.allowExpired||yve(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const u=vve(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,sve(`${o}.${l}`)))throw new _j("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}}}_2.nextInstanceID=0;const Yve=_2;class Zve extends Yve{constructor(e){super(e)}}class Jve{constructor(e,n,r){var s,i,a;this.supabaseUrl=e,this.supabaseKey=n;const o=Vye(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:Lye,realtime:Mye,auth:Object.assign(Object.assign({},Rye),{storageKey:l}),global:Dye},u=Uye(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=Bye(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new H0e(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Oye(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new R0e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zve({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new lye(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qve=(t,e,n)=>new Jve(t,e,n);function exe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}exe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const txe="https://ycmnnyaffmpnfdrcwmam.supabase.co",nxe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljbW5ueWFmZm1wbmZkcmN3bWFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNjEzNzIsImV4cCI6MjA3OTczNzM3Mn0.6eZLoC9LlL0C_bLKLJbCMr5_gHWAfQJK9clDw--oeJg",tt=Qve(txe,nxe);function rxe(){const t=Wc(),e=$x(),[n,r]=R.useState(""),[s,i]=R.useState(""),[a,o]=R.useState(!0),[l,c]=R.useState({email:"",password:""});R.useEffect(()=>{var m;(m=e.state)!=null&&m.message&&i(e.state.message),(async()=>{try{const{data:{user:y}}=await tt.auth.getUser();if(y){const{data:v}=await tt.from("profiles").select("role").eq("id",y.id).single();if(v){o(!1);return}}o(!1)}catch(y){console.error("Error checking authentication:",y),o(!1)}})()},[e,t]);const u=async f=>{f.preventDefault(),r(""),i("");try{const{data:m,error:y}=await tt.auth.signInWithPassword({email:l.email.trim().toLowerCase(),password:l.password});if(y)throw y;if(!m.user)throw new Error("No user returned from authentication");const{data:v,error:x}=await tt.from("profiles").select("role").eq("id",m.user.id).single();if(x)throw x;if(!v)throw new Error("No profile found for user");r(""),i(""),t(`/dashboard/${v.role}`)}catch(m){console.error("Login error:",m),r(m.message==="Invalid login credentials"?"Invalid email or password. Please try again.":"An error occurred during login. Please try again.")}},d=f=>{c({...l,[f.target.name]:f.target.value})},h=async()=>{try{await tt.auth.signOut(),window.location.reload()}catch(f){console.error("Error signing out:",f)}};return a?p.jsx("div",{className:"min-h-screen flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-emerald-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[p.jsx(Qn,{to:"/",className:"flex justify-center items-center",children:p.jsx(Wa,{className:"h-12 w-12 text-emerald-600"})}),p.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Sign in to your account"})]}),p.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:p.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&p.jsx("div",{className:"mb-4 p-4 text-sm text-red-600 bg-red-50 rounded-lg",children:n}),s&&p.jsx("div",{className:"mb-4 p-4 text-sm text-emerald-600 bg-emerald-50 rounded-lg",children:s}),p.jsxs("form",{className:"space-y-6",onSubmit:u,children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:d,className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l.password,onChange:d,className:"block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-emerald-500"})})]}),p.jsx("div",{children:p.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:"Sign in"})})]}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{onClick:h,className:"w-full flex justify-center py-2 px-4 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-600 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Sign out from current session"})}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-300"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Don't have an account?"})})]}),p.jsx("div",{className:"mt-6",children:p.jsx(Qn,{to:"/register",className:"w-full flex justify-center py-2 px-4 border border-emerald-600 rounded-md shadow-sm text-sm font-medium text-emerald-600 bg-white hover:bg-emerald-50",children:"Register"})})]})]})})]})}const sxe="/assets/background-B3CL6Lj-.png";function ixe(){const t=Wc(),[e,n]=R.useState(""),[r,s]=R.useState(!1),[i,a]=R.useState(!0),[o,l]=R.useState({name:"",email:"",password:"",confirmPassword:"",role:"user"});R.useEffect(()=>{(async()=>{try{const{data:{user:f}}=await tt.auth.getUser();a(!1)}catch(f){console.error("Error checking authentication:",f),a(!1)}})()},[t]);const c=async h=>{h.preventDefault(),n(""),s(!0);try{if(o.password!==o.confirmPassword){n("Passwords do not match"),s(!1);return}const{data:f,error:m}=await tt.from("profiles").select("id").eq("email",o.email);if(m)throw m;if(f&&f.length>0){n("An account with this email already exists"),s(!1);return}const{data:y,error:v}=await tt.auth.signUp({email:o.email,password:o.password,options:{data:{full_name:o.name,role:o.role}}});if(v)throw v;if(!y.user)throw new Error("No user data returned");const{error:x}=await tt.from("profiles").insert([{id:y.user.id,full_name:o.name,role:o.role,email:o.email}]);if(x)throw x;t("/login",{state:{message:"Registration successful! Please log in."}})}catch(f){console.error("Registration error:",f),n(f.message||"An error occurred during registration")}finally{s(!1)}},u=h=>{l({...o,[h.target.name]:h.target.value})},d=async()=>{try{await tt.auth.signOut(),window.location.reload()}catch(h){console.error("Error signing out:",h)}};return i?p.jsx("div",{className:"min-h-screen flex justify-center items-center bg-emerald-50",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${sxe})`},children:[p.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-[2px]"}),p.jsxs("div",{className:"relative sm:mx-auto sm:w-full sm:max-w-md",children:[p.jsxs("div",{className:"flex flex-col justify-center items-center mb-6",children:[p.jsx(Qn,{to:"/",className:"flex justify-center items-center bg-white/20 p-3 rounded-full backdrop-blur-sm shadow-lg border border-white/30 hover:scale-105 transition-transform duration-300",children:p.jsx(Wa,{className:"h-14 w-14 text-white drop-shadow-md"})}),p.jsx("h2",{className:"mt-4 text-center text-3xl font-bold tracking-tight text-white drop-shadow-lg",children:"Create your account"}),p.jsx("p",{className:"mt-2 text-center text-sm text-emerald-50 font-medium drop-shadow",children:"Join the e-waste revolution"})]}),p.jsxs("div",{className:"bg-white/90 backdrop-blur-md py-8 px-6 shadow-2xl rounded-2xl sm:px-10 border border-white/50 relative overflow-hidden",children:[p.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-emerald-400/20 rounded-full blur-2xl"}),p.jsx("div",{className:"absolute -bottom-10 -left-10 w-32 h-32 bg-teal-400/20 rounded-full blur-2xl"}),e&&p.jsxs("div",{className:"mb-6 p-3 text-sm text-red-600 bg-red-50/90 border border-red-200 rounded-lg shadow-sm flex items-center gap-2",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]}),p.jsxs("form",{className:"space-y-6 relative z-10",onSubmit:c,children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Full Name"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:o.name,onChange:u,className:"block w-full rounded-xl border-0 bg-gray-50 px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6 transition-all duration-200",placeholder:"John Doe"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email address"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o.email,onChange:u,className:"block w-full rounded-xl border-0 bg-gray-50 px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6 transition-all duration-200",placeholder:"you@example.com"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Password"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:o.password,onChange:u,className:"block w-full rounded-xl border-0 bg-gray-50 px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6 transition-all duration-200",placeholder:""})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Confirm Password"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:o.confirmPassword,onChange:u,className:"block w-full rounded-xl border-0 bg-gray-50 px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6 transition-all duration-200",placeholder:""})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"role",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Role"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{id:"role",name:"role",value:o.role,onChange:u,className:"block w-full rounded-xl border-0 bg-gray-50 px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-emerald-500 sm:text-sm sm:leading-6 appearance-none transition-all duration-200",children:[p.jsx("option",{value:"user",children:"User"}),p.jsx("option",{value:"recycler",children:"Recycler"}),p.jsx("option",{value:"technician",children:"Technician"}),p.jsx("option",{value:"educator",children:"Educator"})]}),p.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500",children:p.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),p.jsx("div",{className:"pt-2",children:p.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-lg text-sm font-bold text-white bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed transform hover:-translate-y-0.5 transition-all duration-200",children:r?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Register"})})]}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{onClick:d,className:"w-full flex justify-center py-2 px-4 border border-red-200 rounded-xl shadow-sm text-sm font-medium text-red-600 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200",children:"Sign out from current session"})}),p.jsxs("div",{className:"mt-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-4 bg-white/50 backdrop-blur-sm text-gray-500 rounded-full",children:"Already have an account?"})})]}),p.jsx("div",{className:"mt-6",children:p.jsx(Qn,{to:"/login",className:"w-full flex justify-center py-3 px-4 border-2 border-emerald-600 rounded-full shadow-sm text-sm font-bold text-emerald-600 bg-transparent hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-200",children:"Sign in"})})]})]})]})]})}const xJ=R.createContext();function axe({children:t}){const[e,n]=R.useState(()=>localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");R.useEffect(()=>{const s=window.document.documentElement;e==="dark"?(s.classList.add("dark"),localStorage.setItem("theme","dark")):(s.classList.remove("dark"),localStorage.setItem("theme","light"))},[e]);const r=()=>{n(s=>s==="dark"?"light":"dark")};return p.jsx(xJ.Provider,{value:{theme:e,toggleTheme:r},children:t})}function bJ(){return R.useContext(xJ)}var __=t=>t.type==="checkbox",Rg=t=>t instanceof Date,Go=t=>t==null;const wJ=t=>typeof t=="object";var Js=t=>!Go(t)&&!Array.isArray(t)&&wJ(t)&&!Rg(t),oxe=t=>Js(t)&&t.target?__(t.target)?t.target.checked:t.target.value:t,lxe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,cxe=(t,e)=>t.has(lxe(e)),uxe=t=>{const e=t.constructor&&t.constructor.prototype;return Js(e)&&e.hasOwnProperty("isPrototypeOf")},hR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function di(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(hR&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(Js(t)&&uxe(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=di(t[s]));return r}var PI=t=>/^\w*$/.test(t),ls=t=>t===void 0,fR=t=>Array.isArray(t)?t.filter(Boolean):[],pR=t=>fR(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Mt=(t,e,n)=>{if(!e||!Js(t))return n;const r=(PI(e)?[e]:pR(e)).reduce((s,i)=>Go(s)?s:s[i],t);return ls(r)||r===t?ls(t[e])?n:t[e]:r},xd=t=>typeof t=="boolean",_u=t=>typeof t=="function",_r=(t,e,n)=>{let r=-1;const s=PI(e)?[e]:pR(e),i=s.length,a=i-1;for(;++r<i;){const o=s[r];let l=n;if(r!==a){const c=t[o];l=Js(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=l,t=t[o]}};const D7={BLUR:"blur",FOCUS_OUT:"focusout"},ku={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bh={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dxe=Os.createContext(null);dxe.displayName="HookFormControlContext";var hxe=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==ku.all&&(e._proxyFormState[a]=!r||ku.all),t[a]}});return s};const fxe=typeof window<"u"?Os.useLayoutEffect:Os.useEffect;var Cl=t=>typeof t=="string",pxe=(t,e,n,r,s)=>Cl(t)?(r&&e.watch.add(t),Mt(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Mt(n,i))):(r&&(e.watchAll=!0),n),kj=t=>Go(t)||!wJ(t);function gp(t,e,n=new WeakSet){if(kj(t)||kj(e))return Object.is(t,e);if(Rg(t)&&Rg(e))return Object.is(t.getTime(),e.getTime());const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const a=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Rg(a)&&Rg(o)||Js(a)&&Js(o)||Array.isArray(a)&&Array.isArray(o)?!gp(a,o,n):!Object.is(a,o))return!1}}return!0}const mxe=Os.createContext(null);mxe.displayName="HookFormContext";var _J=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Dw=t=>Array.isArray(t)?t:[t],L7=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function kJ(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r],i=e[r];if(s&&Js(s)&&i){const a=kJ(s,i);Js(a)&&(n[r]=a)}else t[r]&&(n[r]=i)}return n}var co=t=>Js(t)&&!Object.keys(t).length,mR=t=>t.type==="file",x5=t=>{if(!hR)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},SJ=t=>t.type==="select-multiple",gR=t=>t.type==="radio",gxe=t=>gR(t)||__(t),YO=t=>x5(t)&&t.isConnected;function yxe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=ls(t)?r++:t[e[r++]];return t}function vxe(t){for(const e in t)if(t.hasOwnProperty(e)&&!ls(t[e]))return!1;return!0}function Ws(t,e){const n=Array.isArray(e)?e:PI(e)?[e]:pR(e),r=n.length===1?t:yxe(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Js(r)&&co(r)||Array.isArray(r)&&vxe(r))&&Ws(t,n.slice(0,-1)),t}var xxe=t=>{for(const e in t)if(_u(t[e]))return!0;return!1};function NJ(t){return Array.isArray(t)||Js(t)&&!xxe(t)}function Sj(t,e={}){for(const n in t){const r=t[n];NJ(r)?(e[n]=Array.isArray(r)?[]:{},Sj(r,e[n])):ls(r)||(e[n]=!0)}return e}function nv(t,e,n){n||(n=Sj(e));for(const r in t){const s=t[r];if(NJ(s))ls(e)||kj(n[r])?n[r]=Sj(s,Array.isArray(s)?[]:{}):nv(s,Go(e)?{}:e[r],n[r]);else{const i=e[r];n[r]=!gp(s,i)}}return n}const R7={value:!1,isValid:!1},M7={value:!0,isValid:!0};var CJ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ls(t[0].attributes.value)?ls(t[0].value)||t[0].value===""?M7:{value:t[0].value,isValid:!0}:M7:R7}return R7},TJ=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>ls(t)?t:e?t===""?NaN:t&&+t:n&&Cl(t)?new Date(t):r?r(t):t;const F7={isValid:!1,value:null};var IJ=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,F7):F7;function z7(t){const e=t.ref;return mR(e)?e.files:gR(e)?IJ(t.refs).value:SJ(e)?[...e.selectedOptions].map(({value:n})=>n):__(e)?CJ(t.refs).value:TJ(ls(e.value)?t.ref.value:e.value,t)}var bxe=(t,e,n,r)=>{const s={};for(const i of t){const a=Mt(e,i);a&&_r(s,i,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},b5=t=>t instanceof RegExp,j1=t=>ls(t)?t:b5(t)?t.source:Js(t)?b5(t.value)?t.value.source:t.value:t,B7=t=>({isOnSubmit:!t||t===ku.onSubmit,isOnBlur:t===ku.onBlur,isOnChange:t===ku.onChange,isOnAll:t===ku.all,isOnTouch:t===ku.onTouched});const W7="AsyncFunction";var wxe=t=>!!t&&!!t.validate&&!!(_u(t.validate)&&t.validate.constructor.name===W7||Js(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===W7)),_xe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),U7=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Lw=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=Mt(t,s);if(i){const{_f:a,...o}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Lw(o,e))break}else if(Js(o)&&Lw(o,e))break}}};function V7(t,e,n){const r=Mt(t,n);if(r||PI(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),a=Mt(e,i),o=Mt(t,i);if(a&&!Array.isArray(a)&&n!==i)return{name:n};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};s.pop()}return{name:n}}var kxe=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return co(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!r||ku.all))},Sxe=(t,e,n)=>!t||!e||t===e||Dw(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Nxe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Cxe=(t,e)=>!fR(Mt(t,e)).length&&Ws(t,e),Txe=(t,e,n)=>{const r=Dw(Mt(t,n));return _r(r,"root",e[n]),_r(t,n,r),t};function H7(t,e,n="validate"){if(Cl(t)||Array.isArray(t)&&t.every(Cl)||xd(t)&&!t)return{type:n,message:Cl(t)?t:"",ref:e}}var Wy=t=>Js(t)&&!b5(t)?t:{value:t,message:""},q7=async(t,e,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:m,name:y,valueAsNumber:v,mount:x}=t._f,b=Mt(n,y);if(!x||e.has(y))return{};const _=o?o[0]:a,k=O=>{s&&_.reportValidity&&(_.setCustomValidity(xd(O)?"":O||""),_.reportValidity())},N={},A=gR(a),T=__(a),C=A||T,P=(v||mR(a))&&ls(a.value)&&ls(b)||x5(a)&&a.value===""||b===""||Array.isArray(b)&&!b.length,$=_J.bind(null,y,r,N),j=(O,F,B,Z=bh.maxLength,V=bh.minLength)=>{const G=O?F:B;N[y]={type:O?Z:V,message:G,ref:a,...$(O?Z:V,G)}};if(i?!Array.isArray(b)||!b.length:l&&(!C&&(P||Go(b))||xd(b)&&!b||T&&!CJ(o).isValid||A&&!IJ(o).isValid)){const{value:O,message:F}=Cl(l)?{value:!!l,message:l}:Wy(l);if(O&&(N[y]={type:bh.required,message:F,ref:_,...$(bh.required,F)},!r))return k(F),N}if(!P&&(!Go(d)||!Go(h))){let O,F;const B=Wy(h),Z=Wy(d);if(!Go(b)&&!isNaN(b)){const V=a.valueAsNumber||b&&+b;Go(B.value)||(O=V>B.value),Go(Z.value)||(F=V<Z.value)}else{const V=a.valueAsDate||new Date(b),G=ee=>new Date(new Date().toDateString()+" "+ee),U=a.type=="time",K=a.type=="week";Cl(B.value)&&b&&(O=U?G(b)>G(B.value):K?b>B.value:V>new Date(B.value)),Cl(Z.value)&&b&&(F=U?G(b)<G(Z.value):K?b<Z.value:V<new Date(Z.value))}if((O||F)&&(j(!!O,B.message,Z.message,bh.max,bh.min),!r))return k(N[y].message),N}if((c||u)&&!P&&(Cl(b)||i&&Array.isArray(b))){const O=Wy(c),F=Wy(u),B=!Go(O.value)&&b.length>+O.value,Z=!Go(F.value)&&b.length<+F.value;if((B||Z)&&(j(B,O.message,F.message),!r))return k(N[y].message),N}if(f&&!P&&Cl(b)){const{value:O,message:F}=Wy(f);if(b5(O)&&!b.match(O)&&(N[y]={type:bh.pattern,message:F,ref:a,...$(bh.pattern,F)},!r))return k(F),N}if(m){if(_u(m)){const O=await m(b,n),F=H7(O,_);if(F&&(N[y]={...F,...$(bh.validate,F.message)},!r))return k(F.message),N}else if(Js(m)){let O={};for(const F in m){if(!co(O)&&!r)break;const B=H7(await m[F](b,n),_,F);B&&(O={...B,...$(F,B.message)},k(B.message),r&&(N[y]=O))}if(!co(O)&&(N[y]={ref:_,...O},!r))return N}}return k(!0),N};const Ixe={mode:ku.onSubmit,reValidateMode:ku.onChange,shouldFocusError:!0};function Axe(t={}){let e={...Ixe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:_u(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Js(e.defaultValues)||Js(e.values)?di(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:di(s),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={...u};let h={...d};const f={array:L7(),state:L7()},m=e.criteriaMode===ku.all,y=pe=>xe=>{clearTimeout(c),c=setTimeout(pe,xe)},v=async pe=>{if(!a.keepIsValid&&!e.disabled&&(d.isValid||h.isValid||pe)){let xe;e.resolver?(xe=co((await C()).errors),x()):xe=await $(r,!0),xe!==n.isValid&&f.state.next({isValid:xe})}},x=(pe,xe)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((pe||Array.from(o.mount)).forEach(je=>{je&&(xe?_r(n.validatingFields,je,xe):Ws(n.validatingFields,je))}),f.state.next({validatingFields:n.validatingFields,isValidating:!co(n.validatingFields)}))},b=(pe,xe=[],je,qe,Ge=!0,Ue=!0)=>{if(qe&&je&&!e.disabled){if(a.action=!0,Ue&&Array.isArray(Mt(r,pe))){const st=je(Mt(r,pe),qe.argA,qe.argB);Ge&&_r(r,pe,st)}if(Ue&&Array.isArray(Mt(n.errors,pe))){const st=je(Mt(n.errors,pe),qe.argA,qe.argB);Ge&&_r(n.errors,pe,st),Cxe(n.errors,pe)}if((d.touchedFields||h.touchedFields)&&Ue&&Array.isArray(Mt(n.touchedFields,pe))){const st=je(Mt(n.touchedFields,pe),qe.argA,qe.argB);Ge&&_r(n.touchedFields,pe,st)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=nv(s,i)),f.state.next({name:pe,isDirty:O(pe,xe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _r(i,pe,xe)},_=(pe,xe)=>{_r(n.errors,pe,xe),f.state.next({errors:n.errors})},k=pe=>{n.errors=pe,f.state.next({errors:n.errors,isValid:!1})},N=(pe,xe,je,qe)=>{const Ge=Mt(r,pe);if(Ge){const Ue=Mt(i,pe,ls(je)?Mt(s,pe):je);ls(Ue)||qe&&qe.defaultChecked||xe?_r(i,pe,xe?Ue:z7(Ge._f)):Z(pe,Ue),a.mount&&!a.action&&v()}},A=(pe,xe,je,qe,Ge)=>{let Ue=!1,st=!1;const wt={name:pe};if(!e.disabled){if(!je||qe){(d.isDirty||h.isDirty)&&(st=n.isDirty,n.isDirty=wt.isDirty=O(),Ue=st!==wt.isDirty);const gt=gp(Mt(s,pe),xe);st=!!Mt(n.dirtyFields,pe),gt?Ws(n.dirtyFields,pe):_r(n.dirtyFields,pe,!0),wt.dirtyFields=n.dirtyFields,Ue=Ue||(d.dirtyFields||h.dirtyFields)&&st!==!gt}if(je){const gt=Mt(n.touchedFields,pe);gt||(_r(n.touchedFields,pe,je),wt.touchedFields=n.touchedFields,Ue=Ue||(d.touchedFields||h.touchedFields)&&gt!==je)}Ue&&Ge&&f.state.next(wt)}return Ue?wt:{}},T=(pe,xe,je,qe)=>{const Ge=Mt(n.errors,pe),Ue=(d.isValid||h.isValid)&&xd(xe)&&n.isValid!==xe;if(e.delayError&&je?(l=y(()=>_(pe,je)),l(e.delayError)):(clearTimeout(c),l=null,je?_r(n.errors,pe,je):Ws(n.errors,pe)),(je?!gp(Ge,je):Ge)||!co(qe)||Ue){const st={...qe,...Ue&&xd(xe)?{isValid:xe}:{},errors:n.errors,name:pe};n={...n,...st},f.state.next(st)}},C=async pe=>(x(pe,!0),await e.resolver(i,e.context,bxe(pe||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),P=async pe=>{const{errors:xe}=await C(pe);if(x(pe),pe)for(const je of pe){const qe=Mt(xe,je);qe?_r(n.errors,je,qe):Ws(n.errors,je)}else n.errors=xe;return xe},$=async(pe,xe,je={valid:!0})=>{for(const qe in pe){const Ge=pe[qe];if(Ge){const{_f:Ue,...st}=Ge;if(Ue){const wt=o.array.has(Ue.name),gt=Ge._f&&wxe(Ge._f);gt&&d.validatingFields&&x([Ue.name],!0);const zt=await q7(Ge,o.disabled,i,m,e.shouldUseNativeValidation&&!xe,wt);if(gt&&d.validatingFields&&x([Ue.name]),zt[Ue.name]&&(je.valid=!1,xe||t.shouldUseNativeValidation))break;!xe&&(Mt(zt,Ue.name)?wt?Txe(n.errors,zt,Ue.name):_r(n.errors,Ue.name,zt[Ue.name]):Ws(n.errors,Ue.name))}!co(st)&&await $(st,xe,je)}}return je.valid},j=()=>{for(const pe of o.unMount){const xe=Mt(r,pe);xe&&(xe._f.refs?xe._f.refs.every(je=>!YO(je)):!YO(xe._f.ref))&&ge(pe)}o.unMount=new Set},O=(pe,xe)=>!e.disabled&&(pe&&xe&&_r(i,pe,xe),!gp(oe(),s)),F=(pe,xe,je)=>pxe(pe,o,{...a.mount?i:ls(xe)?s:Cl(pe)?{[pe]:xe}:xe},je,xe),B=pe=>fR(Mt(a.mount?i:s,pe,e.shouldUnregister?Mt(s,pe,[]):[])),Z=(pe,xe,je={})=>{const qe=Mt(r,pe);let Ge=xe;if(qe){const Ue=qe._f;Ue&&(!Ue.disabled&&_r(i,pe,TJ(xe,Ue)),Ge=x5(Ue.ref)&&Go(xe)?"":xe,SJ(Ue.ref)?[...Ue.ref.options].forEach(st=>st.selected=Ge.includes(st.value)):Ue.refs?__(Ue.ref)?Ue.refs.forEach(st=>{(!st.defaultChecked||!st.disabled)&&(Array.isArray(Ge)?st.checked=!!Ge.find(wt=>wt===st.value):st.checked=Ge===st.value||!!Ge)}):Ue.refs.forEach(st=>st.checked=st.value===Ge):mR(Ue.ref)?Ue.ref.value="":(Ue.ref.value=Ge,Ue.ref.type||f.state.next({name:pe,values:di(i)})))}(je.shouldDirty||je.shouldTouch)&&A(pe,Ge,je.shouldTouch,je.shouldDirty,!0),je.shouldValidate&&ee(pe)},V=(pe,xe,je)=>{for(const qe in xe){if(!xe.hasOwnProperty(qe))return;const Ge=xe[qe],Ue=pe+"."+qe,st=Mt(r,Ue);(o.array.has(pe)||Js(Ge)||st&&!st._f)&&!Rg(Ge)?V(Ue,Ge,je):Z(Ue,Ge,je)}},G=(pe,xe,je={})=>{const qe=Mt(r,pe),Ge=o.array.has(pe),Ue=di(xe);_r(i,pe,Ue),Ge?(f.array.next({name:pe,values:di(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&je.shouldDirty&&f.state.next({name:pe,dirtyFields:nv(s,i),isDirty:O(pe,Ue)})):qe&&!qe._f&&!Go(Ue)?V(pe,Ue,je):Z(pe,Ue,je),U7(pe,o)?f.state.next({...n,name:pe,values:di(i)}):f.state.next({name:a.mount?pe:void 0,values:di(i)})},U=async pe=>{a.mount=!0;const xe=pe.target;let je=xe.name,qe=!0;const Ge=Mt(r,je),Ue=gt=>{qe=Number.isNaN(gt)||Rg(gt)&&isNaN(gt.getTime())||gp(gt,Mt(i,je,gt))},st=B7(e.mode),wt=B7(e.reValidateMode);if(Ge){let gt,zt;const ft=xe.type?z7(Ge._f):oxe(pe),wn=pe.type===D7.BLUR||pe.type===D7.FOCUS_OUT,nn=!_xe(Ge._f)&&!e.resolver&&!Mt(n.errors,je)&&!Ge._f.deps||Nxe(wn,Mt(n.touchedFields,je),n.isSubmitted,wt,st),qr=U7(je,o,wn);_r(i,je,ft),wn?(!xe||!xe.readOnly)&&(Ge._f.onBlur&&Ge._f.onBlur(pe),l&&l(0)):Ge._f.onChange&&Ge._f.onChange(pe);const Dn=A(je,ft,wn),gr=!co(Dn)||qr;if(!wn&&f.state.next({name:je,type:pe.type,values:di(i)}),nn)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?wn&&v():wn||v()),gr&&f.state.next({name:je,...qr?{}:Dn});if(!wn&&qr&&f.state.next({...n}),e.resolver){const{errors:si}=await C([je]);if(x([je]),Ue(ft),qe){const Wn=V7(n.errors,r,je),Gl=V7(si,r,Wn.name||je);gt=Gl.error,je=Gl.name,zt=co(si)}}else x([je],!0),gt=(await q7(Ge,o.disabled,i,m,e.shouldUseNativeValidation))[je],x([je]),Ue(ft),qe&&(gt?zt=!1:(d.isValid||h.isValid)&&(zt=await $(r,!0)));qe&&(Ge._f.deps&&(!Array.isArray(Ge._f.deps)||Ge._f.deps.length>0)&&ee(Ge._f.deps),T(je,zt,gt,Dn))}},K=(pe,xe)=>{if(Mt(n.errors,xe)&&pe.focus)return pe.focus(),1},ee=async(pe,xe={})=>{let je,qe;const Ge=Dw(pe);if(e.resolver){const Ue=await P(ls(pe)?pe:Ge);je=co(Ue),qe=pe?!Ge.some(st=>Mt(Ue,st)):je}else pe?(qe=(await Promise.all(Ge.map(async Ue=>{const st=Mt(r,Ue);return await $(st&&st._f?{[Ue]:st}:st)}))).every(Boolean),!(!qe&&!n.isValid)&&v()):qe=je=await $(r);return f.state.next({...!Cl(pe)||(d.isValid||h.isValid)&&je!==n.isValid?{}:{name:pe},...e.resolver||!pe?{isValid:je}:{},errors:n.errors}),xe.shouldFocus&&!qe&&Lw(r,K,pe?Ge:o.mount),qe},oe=(pe,xe)=>{let je={...a.mount?i:s};return xe&&(je=kJ(xe.dirtyFields?n.dirtyFields:n.touchedFields,je)),ls(pe)?je:Cl(pe)?Mt(je,pe):pe.map(qe=>Mt(je,qe))},W=(pe,xe)=>({invalid:!!Mt((xe||n).errors,pe),isDirty:!!Mt((xe||n).dirtyFields,pe),error:Mt((xe||n).errors,pe),isValidating:!!Mt(n.validatingFields,pe),isTouched:!!Mt((xe||n).touchedFields,pe)}),Y=pe=>{pe&&Dw(pe).forEach(xe=>Ws(n.errors,xe)),f.state.next({errors:pe?n.errors:{}})},Q=(pe,xe,je)=>{const qe=(Mt(r,pe,{_f:{}})._f||{}).ref,Ge=Mt(n.errors,pe)||{},{ref:Ue,message:st,type:wt,...gt}=Ge;_r(n.errors,pe,{...gt,...xe,ref:qe}),f.state.next({name:pe,errors:n.errors,isValid:!1}),je&&je.shouldFocus&&qe&&qe.focus&&qe.focus()},J=(pe,xe)=>_u(pe)?f.state.subscribe({next:je=>"values"in je&&pe(F(void 0,xe),je)}):F(pe,xe,!0),te=pe=>f.state.subscribe({next:xe=>{Sxe(pe.name,xe.name,pe.exact)&&kxe(xe,pe.formState||d,Me,pe.reRenderRoot)&&pe.callback({values:{...i},...n,...xe,defaultValues:s})}}).unsubscribe,me=pe=>(a.mount=!0,h={...h,...pe.formState},te({...pe,formState:{...u,...pe.formState}})),ge=(pe,xe={})=>{for(const je of pe?Dw(pe):o.mount)o.mount.delete(je),o.array.delete(je),xe.keepValue||(Ws(r,je),Ws(i,je)),!xe.keepError&&Ws(n.errors,je),!xe.keepDirty&&Ws(n.dirtyFields,je),!xe.keepTouched&&Ws(n.touchedFields,je),!xe.keepIsValidating&&Ws(n.validatingFields,je),!e.shouldUnregister&&!xe.keepDefaultValue&&Ws(s,je);f.state.next({values:di(i)}),f.state.next({...n,...xe.keepDirty?{isDirty:O()}:{}}),!xe.keepIsValid&&v()},ce=({disabled:pe,name:xe})=>{if(xd(pe)&&a.mount||pe||o.disabled.has(xe)){const Ge=o.disabled.has(xe)!==!!pe;pe?o.disabled.add(xe):o.disabled.delete(xe),Ge&&a.mount&&!a.action&&v()}},Ce=(pe,xe={})=>{let je=Mt(r,pe);const qe=xd(xe.disabled)||xd(e.disabled);return _r(r,pe,{...je||{},_f:{...je&&je._f?je._f:{ref:{name:pe}},name:pe,mount:!0,...xe}}),o.mount.add(pe),je?ce({disabled:xd(xe.disabled)?xe.disabled:e.disabled,name:pe}):N(pe,!0,xe.value),{...qe?{disabled:xe.disabled||e.disabled}:{},...e.progressive?{required:!!xe.required,min:j1(xe.min),max:j1(xe.max),minLength:j1(xe.minLength),maxLength:j1(xe.maxLength),pattern:j1(xe.pattern)}:{},name:pe,onChange:U,onBlur:U,ref:Ge=>{if(Ge){Ce(pe,xe),je=Mt(r,pe);const Ue=ls(Ge.value)&&Ge.querySelectorAll&&Ge.querySelectorAll("input,select,textarea")[0]||Ge,st=gxe(Ue),wt=je._f.refs||[];if(st?wt.find(gt=>gt===Ue):Ue===je._f.ref)return;_r(r,pe,{_f:{...je._f,...st?{refs:[...wt.filter(YO),Ue,...Array.isArray(Mt(s,pe))?[{}]:[]],ref:{type:Ue.type,name:pe}}:{ref:Ue}}}),N(pe,!1,void 0,Ue)}else je=Mt(r,pe,{}),je._f&&(je._f.mount=!1),(e.shouldUnregister||xe.shouldUnregister)&&!(cxe(o.array,pe)&&a.action)&&o.unMount.add(pe)}}},_e=()=>e.shouldFocusError&&Lw(r,K,o.mount),we=pe=>{xd(pe)&&(f.state.next({disabled:pe}),Lw(r,(xe,je)=>{const qe=Mt(r,je);qe&&(xe.disabled=qe._f.disabled||pe,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ge=>{Ge.disabled=qe._f.disabled||pe}))},0,!1))},He=(pe,xe)=>async je=>{let qe;je&&(je.preventDefault&&je.preventDefault(),je.persist&&je.persist());let Ge=di(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Ue,values:st}=await C();x(),n.errors=Ue,Ge=di(st)}else await $(r);if(o.disabled.size)for(const Ue of o.disabled)Ws(Ge,Ue);if(Ws(n.errors,"root"),co(n.errors)){f.state.next({errors:{}});try{await pe(Ge,je)}catch(Ue){qe=Ue}}else xe&&await xe({...n.errors},je),_e(),setTimeout(_e);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:co(n.errors)&&!qe,submitCount:n.submitCount+1,errors:n.errors}),qe)throw qe},Qe=(pe,xe={})=>{Mt(r,pe)&&(ls(xe.defaultValue)?G(pe,di(Mt(s,pe))):(G(pe,xe.defaultValue),_r(s,pe,di(xe.defaultValue))),xe.keepTouched||Ws(n.touchedFields,pe),xe.keepDirty||(Ws(n.dirtyFields,pe),n.isDirty=xe.defaultValue?O(pe,di(Mt(s,pe))):O()),xe.keepError||(Ws(n.errors,pe),d.isValid&&v()),f.state.next({...n}))},Ae=(pe,xe={})=>{const je=pe?di(pe):s,qe=di(je),Ge=co(pe),Ue=Ge?s:qe;if(xe.keepDefaultValues||(s=je),!xe.keepValues){if(xe.keepDirtyValues){const st=new Set([...o.mount,...Object.keys(nv(s,i))]);for(const wt of Array.from(st)){const gt=Mt(n.dirtyFields,wt),zt=Mt(i,wt),ft=Mt(Ue,wt);gt&&!ls(zt)?_r(Ue,wt,zt):!gt&&!ls(ft)&&G(wt,ft)}}else{if(hR&&ls(pe))for(const st of o.mount){const wt=Mt(r,st);if(wt&&wt._f){const gt=Array.isArray(wt._f.refs)?wt._f.refs[0]:wt._f.ref;if(x5(gt)){const zt=gt.closest("form");if(zt){zt.reset();break}}}}if(xe.keepFieldsRef)for(const st of o.mount)G(st,Mt(Ue,st));else r={}}i=e.shouldUnregister?xe.keepDefaultValues?di(s):{}:di(Ue),f.array.next({values:{...Ue}}),f.state.next({values:{...Ue}})}o={mount:xe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues||!e.shouldUnregister&&!co(Ue),a.watch=!!e.shouldUnregister,a.keepIsValid=!!xe.keepIsValid,a.action=!1,xe.keepErrors||(n.errors={}),f.state.next({submitCount:xe.keepSubmitCount?n.submitCount:0,isDirty:Ge?!1:xe.keepDirty?n.isDirty:!!(xe.keepDefaultValues&&!gp(pe,s)),isSubmitted:xe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ge?{}:xe.keepDirtyValues?xe.keepDefaultValues&&i?nv(s,i):n.dirtyFields:xe.keepDefaultValues&&pe?nv(s,pe):xe.keepDirty?n.dirtyFields:{},touchedFields:xe.keepTouched?n.touchedFields:{},errors:xe.keepErrors?n.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},he=(pe,xe)=>Ae(_u(pe)?pe(i):pe,{...e.resetOptions,...xe}),ht=(pe,xe={})=>{const je=Mt(r,pe),qe=je&&je._f;if(qe){const Ge=qe.refs?qe.refs[0]:qe.ref;Ge.focus&&setTimeout(()=>{Ge.focus(),xe.shouldSelect&&_u(Ge.select)&&Ge.select()})}},Me=pe=>{n={...n,...pe}},nt={control:{register:Ce,unregister:ge,getFieldState:W,handleSubmit:He,setError:Q,_subscribe:te,_runSchema:C,_updateIsValidating:x,_focusError:_e,_getWatch:F,_getDirty:O,_setValid:v,_setFieldArray:b,_setDisabledField:ce,_setErrors:k,_getFieldArray:B,_reset:Ae,_resetDefaultValues:()=>_u(e.defaultValues)&&e.defaultValues().then(pe=>{he(pe,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:we,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(pe){a=pe},get _defaultValues(){return s},get _names(){return o},set _names(pe){o=pe},get _formState(){return n},get _options(){return e},set _options(pe){e={...e,...pe}}},subscribe:me,trigger:ee,register:Ce,handleSubmit:He,watch:J,setValue:G,getValues:oe,reset:he,resetField:Qe,clearErrors:Y,unregister:ge,setError:Q,setFocus:ht,getFieldState:W};return{...nt,formControl:nt}}function OI(t={}){const e=Os.useRef(void 0),n=Os.useRef(void 0),[r,s]=Os.useState({isDirty:!1,isValidating:!1,isLoading:_u(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:_u(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!_u(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...o}=Axe(t);e.current={...o,formState:r}}const i=e.current.control;return i._options=t,fxe(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(o=>({...o,isReady:!0})),i._formState.isReady=!0,a},[i]),Os.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Os.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Os.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Os.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Os.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Os.useEffect(()=>{var a;t.values&&!gp(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((a=i._options.resetOptions)===null||a===void 0)&&a.keepIsValid||i._setValid(),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),Os.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Os.useMemo(()=>hxe(r,i),[i,r]),e.current}function Exe({onClose:t,onSuccess:e}){const{register:n,handleSubmit:r,formState:{errors:s}}=OI(),[i,a]=R.useState(!1),o=async l=>{try{a(!0);const{data:{user:c}}=await tt.auth.getUser();if(!c)throw new Error("You must be logged in to request a pickup");const{data:u}=await tt.from("profiles").select("full_name, email").eq("id",c.id).single(),{error:d}=await tt.from("pickup_requests").insert([{user_id:c.id,user_name:(u==null?void 0:u.full_name)||"Unknown",user_email:(u==null?void 0:u.email)||c.email,items:l.items,quantity:parseInt(l.quantity,10),address:l.address,notes:l.notes,status:"pending"}]);if(d)throw d;const h=parseInt(l.quantity,10)*10,{error:f}=await tt.rpc("add_points",{user_id:c.id,points_to_add:h});f&&console.error("Error adding points:",f),console.log("Pickup request created successfully"),e()}catch(c){console.error("Error creating pickup request:",c),alert("There was an error creating your pickup request. Please try again.")}finally{a(!1)}};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[p.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Request E-Waste Pickup"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:p.jsx(il,{className:"h-6 w-6"})})]}),p.jsxs("form",{onSubmit:r(o),className:"p-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"items",className:"block text-sm font-medium text-gray-700 mb-1",children:"Items to Pickup *"}),p.jsx("input",{id:"items",...n("items",{required:"Items are required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"e.g., Old laptop, broken phone, etc."}),s.items&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.items.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),p.jsx("input",{id:"quantity",type:"number",min:"1",...n("quantity",{required:"Quantity is required",min:{value:1,message:"Quantity must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Number of items"}),s.quantity&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.quantity.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Address *"}),p.jsx("textarea",{id:"address",rows:3,...n("address",{required:"Address is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Your full address for pickup"}),s.address&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),p.jsx("textarea",{id:"notes",rows:3,...n("notes"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Any special instructions or details"})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[p.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:i?"Submitting...":"Submit Request"})]})]})]})})}function Vl(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Du(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Pxe(t,e){const n=Vl(t);return isNaN(e)?Du(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Oxe(t,e){const n=Vl(t);if(isNaN(e))return Du(t,NaN);const r=n.getDate(),s=Du(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const AJ=6048e5,jxe=864e5;let $xe={};function jI(){return $xe}function y0(t,e){var o,l,c,u;const n=jI(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=Vl(t),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function w5(t){return y0(t,{weekStartsOn:1})}function EJ(t){const e=Vl(t),n=e.getFullYear(),r=Du(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=w5(r),i=Du(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=w5(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function _5(t){const e=Vl(t);return e.setHours(0,0,0,0),e}function G7(t){const e=Vl(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Dxe(t,e){const n=_5(t),r=_5(e),s=+n-G7(n),i=+r-G7(r);return Math.round((s-i)/jxe)}function Lxe(t){const e=EJ(t),n=Du(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),w5(n)}function PJ(t){return Du(t,Date.now())}function Rxe(t,e){const n=_5(t),r=_5(e);return+n==+r}function Mxe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Fxe(t){if(!Mxe(t)&&typeof t!="number")return!1;const e=Vl(t);return!isNaN(Number(e))}function zxe(t){const e=Vl(t),n=Du(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Bxe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wxe=(t,e,n)=>{let r;const s=Bxe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ZO(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Uxe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Vxe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Hxe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qxe={date:ZO({formats:Uxe,defaultWidth:"full"}),time:ZO({formats:Vxe,defaultWidth:"full"}),dateTime:ZO({formats:Hxe,defaultWidth:"full"})},Gxe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kxe=(t,e,n,r)=>Gxe[t];function $1(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Xxe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yxe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zxe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jxe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ebe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tbe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},nbe={ordinalNumber:tbe,era:$1({values:Xxe,defaultWidth:"wide"}),quarter:$1({values:Yxe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$1({values:Zxe,defaultWidth:"wide"}),day:$1({values:Jxe,defaultWidth:"wide"}),dayPeriod:$1({values:Qxe,defaultWidth:"wide",formattingValues:ebe,defaultFormattingWidth:"wide"})};function D1(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?sbe(o,d=>d.test(a)):rbe(o,d=>d.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function rbe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function sbe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ibe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const abe=/^(\d+)(th|st|nd|rd)?/i,obe=/\d+/i,lbe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cbe={any:[/^b/i,/^(a|c)/i]},ube={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dbe={any:[/1/i,/2/i,/3/i,/4/i]},hbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fbe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pbe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mbe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ybe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vbe={ordinalNumber:ibe({matchPattern:abe,parsePattern:obe,valueCallback:t=>parseInt(t,10)}),era:D1({matchPatterns:lbe,defaultMatchWidth:"wide",parsePatterns:cbe,defaultParseWidth:"any"}),quarter:D1({matchPatterns:ube,defaultMatchWidth:"wide",parsePatterns:dbe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:D1({matchPatterns:hbe,defaultMatchWidth:"wide",parsePatterns:fbe,defaultParseWidth:"any"}),day:D1({matchPatterns:pbe,defaultMatchWidth:"wide",parsePatterns:mbe,defaultParseWidth:"any"}),dayPeriod:D1({matchPatterns:gbe,defaultMatchWidth:"any",parsePatterns:ybe,defaultParseWidth:"any"})},xbe={code:"en-US",formatDistance:Wxe,formatLong:qxe,formatRelative:Kxe,localize:nbe,match:vbe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bbe(t){const e=Vl(t);return Dxe(e,zxe(e))+1}function wbe(t){const e=Vl(t),n=+w5(e)-+Lxe(e);return Math.round(n/AJ)+1}function OJ(t,e){var u,d,h,f;const n=Vl(t),r=n.getFullYear(),s=jI(),i=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(h=s.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=Du(t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=y0(a,e),l=Du(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=y0(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function _be(t,e){var o,l,c,u;const n=jI(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=OJ(t,e),i=Du(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),y0(i,e)}function kbe(t,e){const n=Vl(t),r=+y0(n,e)-+_be(n,e);return Math.round(r/AJ)+1}function cr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const tp={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return cr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):cr(n+1,2)},d(t,e){return cr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return cr(t.getHours()%12||12,e.length)},H(t,e){return cr(t.getHours(),e.length)},m(t,e){return cr(t.getMinutes(),e.length)},s(t,e){return cr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return cr(s,e.length)}},Uy={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},K7={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return tp.y(t,e)},Y:function(t,e,n,r){const s=OJ(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return cr(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,e.length)},R:function(t,e){const n=EJ(t);return cr(n,e.length)},u:function(t,e){const n=t.getFullYear();return cr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return tp.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=kbe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):cr(s,e.length)},I:function(t,e,n){const r=wbe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):tp.d(t,e)},D:function(t,e,n){const r=bbe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return cr(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return cr(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Uy.noon:r===0?s=Uy.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Uy.evening:r>=12?s=Uy.afternoon:r>=4?s=Uy.morning:s=Uy.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return tp.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):tp.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):tp.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):tp.s(t,e)},S:function(t,e){return tp.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Y7(r);case"XXXX":case"XX":return yg(r);case"XXXXX":case"XXX":default:return yg(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Y7(r);case"xxxx":case"xx":return yg(r);case"xxxxx":case"xxx":default:return yg(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+X7(r,":");case"OOOO":default:return"GMT"+yg(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+X7(r,":");case"zzzz":default:return"GMT"+yg(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return cr(r,e.length)},T:function(t,e,n){const r=t.getTime();return cr(r,e.length)}};function X7(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+cr(i,2)}function Y7(t,e){return t%60===0?(t>0?"-":"+")+cr(Math.abs(t)/60,2):yg(t,e)}function yg(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+s+e+i}const Z7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},jJ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Sbe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Z7(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Z7(r,e)).replace("{{time}}",jJ(s,e))},Nbe={p:jJ,P:Sbe},Cbe=/^D+$/,Tbe=/^Y+$/,Ibe=["D","DD","YY","YYYY"];function Abe(t){return Cbe.test(t)}function Ebe(t){return Tbe.test(t)}function Pbe(t,e,n){const r=Obe(t,e,n);if(console.warn(r),Ibe.includes(t))throw new RangeError(r)}function Obe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$be=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dbe=/^'([^]*?)'?$/,Lbe=/''/g,Rbe=/[a-zA-Z]/;function gi(t,e,n){var u,d,h,f;const r=jI(),s=r.locale??xbe,i=r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=r.weekStartsOn??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,o=Vl(t);if(!Fxe(o))throw new RangeError("Invalid time value");let l=e.match($be).map(m=>{const y=m[0];if(y==="p"||y==="P"){const v=Nbe[y];return v(m,s.formatLong)}return m}).join("").match(jbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const y=m[0];if(y==="'")return{isToken:!1,value:Mbe(m)};if(K7[y])return{isToken:!0,value:m};if(y.match(Rbe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(m=>{if(!m.isToken)return m.value;const y=m.value;(Ebe(y)||Abe(y))&&Pbe(y,e,String(t));const v=K7[y[0]];return v(o,y,s.localize,c)}).join("")}function Mbe(t){const e=t.match(Dbe);return e?e[1].replace(Lbe,"'"):t}function Fbe(t,e,n){const r=y0(t,n),s=y0(e,n);return+r==+s}function zbe(t,e){return Fbe(t,PJ(t),e)}function Bbe(t){return Rxe(t,PJ(t))}function J7(t,e){return Pxe(t,-e)}function Wbe(t,e){return Oxe(t,-1)}function Ube(){const[t,e]=R.useState([]),[n,r]=R.useState(!0);R.useEffect(()=>{s();const a=tt.channel("pickup_status_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"pickup_requests"},o=>{e(l=>l.map(c=>c.id===o.new.id?{...c,...o.new}:c))}).subscribe();return()=>{tt.removeChannel(a)}},[]);const s=async()=>{try{const{data:{user:a}}=await tt.auth.getUser();if(!a){r(!1);return}const{data:o,error:l}=await tt.from("pickup_requests").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(l)throw l;e(o||[])}catch(a){console.error("Error fetching pickup history:",a)}finally{r(!1)}},i=a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?p.jsx("div",{className:"flex justify-center items-center h-48",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[t.map(a=>p.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(yo,{className:"h-5 w-5 text-emerald-600"}),p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pickup Request"})]}),p.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i(a.status)}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Items"}),p.jsx("p",{className:"text-gray-900",children:a.items}),p.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Quantity: ",a.quantity]})]}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Zh,{className:"w-4 h-4 text-gray-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Pickup Address"}),p.jsx("p",{className:"text-gray-900",children:a.address})]})]})})]}),a.notes&&p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Notes"}),p.jsx("p",{className:"text-gray-900",children:a.notes})]}),p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[p.jsx(Bd,{className:"w-4 h-4"}),p.jsxs("span",{children:["Requested on ",gi(new Date(a.created_at),"PPp")]})]}),a.status==="pending"&&p.jsxs("div",{className:"flex items-center gap-1 text-sm text-yellow-600",children:[p.jsx(Yd,{className:"w-4 h-4"}),p.jsx("span",{children:"Waiting for recycler response"})]})]})]})},a.id)),t.length===0&&p.jsxs("div",{className:"text-center py-8 bg-white shadow rounded-lg",children:[p.jsx(yo,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No pickups yet"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Start by requesting a new pickup from the dashboard."})]})]})}function $J(t,e){const n=R.useRef(e);R.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Vbe=1;function Hbe(t){return Object.freeze({__version:Vbe,map:t})}function DJ(t,e){return Object.freeze({...t,...e})}const LJ=R.createContext(null),RJ=LJ.Provider;function $I(){const t=R.useContext(LJ);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function MJ(t){function e(n,r){const{instance:s,context:i}=t(n).current;return R.useImperativeHandle(r,()=>s),n.children==null?null:Os.createElement(RJ,{value:i},n.children)}return R.forwardRef(e)}function qbe(t){function e(n,r){const[s,i]=R.useState(!1),{instance:a}=t(n,i).current;R.useImperativeHandle(r,()=>a),R.useEffect(function(){s&&a.update()},[a,s,n.children]);const o=a._contentNode;return o?CI.createPortal(n.children,o):null}return R.forwardRef(e)}function Gbe(t){function e(n,r){const{instance:s}=t(n).current;return R.useImperativeHandle(r,()=>s),null}return R.forwardRef(e)}function yR(t,e){const n=R.useRef();R.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function DI(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Kbe(t,e){return function(r,s){const i=$I(),a=t(DI(r,i),i);return $J(i.map,r.attribution),yR(a.current,r.eventHandlers),e(a.current,i,r,s),a}}var Nj={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ac,function(n){var r="1.9.4";function s(g){var w,I,M,X;for(I=1,M=arguments.length;I<M;I++){X=arguments[I];for(w in X)g[w]=X[w]}return g}var i=Object.create||function(){function g(){}return function(w){return g.prototype=w,new g}}();function a(g,w){var I=Array.prototype.slice;if(g.bind)return g.bind.apply(g,I.call(arguments,1));var M=I.call(arguments,2);return function(){return g.apply(w,M.length?M.concat(I.call(arguments)):arguments)}}var o=0;function l(g){return"_leaflet_id"in g||(g._leaflet_id=++o),g._leaflet_id}function c(g,w,I){var M,X,ae,ke;return ke=function(){M=!1,X&&(ae.apply(I,X),X=!1)},ae=function(){M?X=arguments:(g.apply(I,arguments),setTimeout(ke,w),M=!0)},ae}function u(g,w,I){var M=w[1],X=w[0],ae=M-X;return g===M&&I?g:((g-X)%ae+ae)%ae+X}function d(){return!1}function h(g,w){if(w===!1)return g;var I=Math.pow(10,w===void 0?6:w);return Math.round(g*I)/I}function f(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function m(g){return f(g).split(/\s+/)}function y(g,w){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?i(g.options):{});for(var I in w)g.options[I]=w[I];return g.options}function v(g,w,I){var M=[];for(var X in g)M.push(encodeURIComponent(I?X.toUpperCase():X)+"="+encodeURIComponent(g[X]));return(!w||w.indexOf("?")===-1?"?":"&")+M.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function b(g,w){return g.replace(x,function(I,M){var X=w[M];if(X===void 0)throw new Error("No value provided for variable "+I);return typeof X=="function"&&(X=X(w)),X})}var _=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function k(g,w){for(var I=0;I<g.length;I++)if(g[I]===w)return I;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var T=0;function C(g){var w=+new Date,I=Math.max(0,16-(w-T));return T=w+I,window.setTimeout(g,I)}var P=window.requestAnimationFrame||A("RequestAnimationFrame")||C,$=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function j(g,w,I){if(I&&P===C)g.call(w);else return P.call(window,a(g,w))}function O(g){g&&$.call(window,g)}var F={__proto__:null,extend:s,create:i,bind:a,get lastId(){return o},stamp:l,throttle:c,wrapNum:u,falseFn:d,formatNum:h,trim:f,splitWords:m,setOptions:y,getParamString:v,template:b,isArray:_,indexOf:k,emptyImageUrl:N,requestFn:P,cancelFn:$,requestAnimFrame:j,cancelAnimFrame:O};function B(){}B.extend=function(g){var w=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},I=w.__super__=this.prototype,M=i(I);M.constructor=w,w.prototype=M;for(var X in this)Object.prototype.hasOwnProperty.call(this,X)&&X!=="prototype"&&X!=="__super__"&&(w[X]=this[X]);return g.statics&&s(w,g.statics),g.includes&&(Z(g.includes),s.apply(null,[M].concat(g.includes))),s(M,g),delete M.statics,delete M.includes,M.options&&(M.options=I.options?i(I.options):{},s(M.options,g.options)),M._initHooks=[],M.callInitHooks=function(){if(!this._initHooksCalled){I.callInitHooks&&I.callInitHooks.call(this),this._initHooksCalled=!0;for(var ae=0,ke=M._initHooks.length;ae<ke;ae++)M._initHooks[ae].call(this)}},w},B.include=function(g){var w=this.prototype.options;return s(this.prototype,g),g.options&&(this.prototype.options=w,this.mergeOptions(g.options)),this},B.mergeOptions=function(g){return s(this.prototype.options,g),this},B.addInitHook=function(g){var w=Array.prototype.slice.call(arguments,1),I=typeof g=="function"?g:function(){this[g].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(I),this};function Z(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=_(g)?g:[g];for(var w=0;w<g.length;w++)g[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(g,w,I){if(typeof g=="object")for(var M in g)this._on(M,g[M],w);else{g=m(g);for(var X=0,ae=g.length;X<ae;X++)this._on(g[X],w,I)}return this},off:function(g,w,I){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var M in g)this._off(M,g[M],w);else{g=m(g);for(var X=arguments.length===1,ae=0,ke=g.length;ae<ke;ae++)X?this._off(g[ae]):this._off(g[ae],w,I)}return this},_on:function(g,w,I,M){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(g,w,I)===!1){I===this&&(I=void 0);var X={fn:w,ctx:I};M&&(X.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(X)}},_off:function(g,w,I){var M,X,ae;if(this._events&&(M=this._events[g],!!M)){if(arguments.length===1){if(this._firingCount)for(X=0,ae=M.length;X<ae;X++)M[X].fn=d;delete this._events[g];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var ke=this._listens(g,w,I);if(ke!==!1){var Fe=M[ke];this._firingCount&&(Fe.fn=d,this._events[g]=M=M.slice()),M.splice(ke,1)}}},fire:function(g,w,I){if(!this.listens(g,I))return this;var M=s({},w,{type:g,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var X=this._events[g];if(X){this._firingCount=this._firingCount+1||1;for(var ae=0,ke=X.length;ae<ke;ae++){var Fe=X[ae],Ke=Fe.fn;Fe.once&&this.off(g,Ke,Fe.ctx),Ke.call(Fe.ctx||this,M)}this._firingCount--}}return I&&this._propagateEvent(M),this},listens:function(g,w,I,M){typeof g!="string"&&console.warn('"string" type argument expected');var X=w;typeof w!="function"&&(M=!!w,X=void 0,I=void 0);var ae=this._events&&this._events[g];if(ae&&ae.length&&this._listens(g,X,I)!==!1)return!0;if(M){for(var ke in this._eventParents)if(this._eventParents[ke].listens(g,w,I,M))return!0}return!1},_listens:function(g,w,I){if(!this._events)return!1;var M=this._events[g]||[];if(!w)return!!M.length;I===this&&(I=void 0);for(var X=0,ae=M.length;X<ae;X++)if(M[X].fn===w&&M[X].ctx===I)return X;return!1},once:function(g,w,I){if(typeof g=="object")for(var M in g)this._on(M,g[M],w,!0);else{g=m(g);for(var X=0,ae=g.length;X<ae;X++)this._on(g[X],w,I,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[l(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[l(g)],this},_propagateEvent:function(g){for(var w in this._eventParents)this._eventParents[w].fire(g.type,s({layer:g.target,propagatedFrom:g.target},g),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var G=B.extend(V);function U(g,w,I){this.x=I?Math.round(g):g,this.y=I?Math.round(w):w}var K=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(g){return this.clone()._add(ee(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(ee(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new U(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new U(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=K(this.x),this.y=K(this.y),this},distanceTo:function(g){g=ee(g);var w=g.x-this.x,I=g.y-this.y;return Math.sqrt(w*w+I*I)},equals:function(g){return g=ee(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=ee(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function ee(g,w,I){return g instanceof U?g:_(g)?new U(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new U(g.x,g.y):new U(g,w,I)}function oe(g,w){if(g)for(var I=w?[g,w]:g,M=0,X=I.length;M<X;M++)this.extend(I[M])}oe.prototype={extend:function(g){var w,I;if(!g)return this;if(g instanceof U||typeof g[0]=="number"||"x"in g)w=I=ee(g);else if(g=W(g),w=g.min,I=g.max,!w||!I)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=I.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(I.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(I.y,this.max.y)),this},getCenter:function(g){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var w,I;return typeof g[0]=="number"||g instanceof U?g=ee(g):g=W(g),g instanceof oe?(w=g.min,I=g.max):w=I=g,w.x>=this.min.x&&I.x<=this.max.x&&w.y>=this.min.y&&I.y<=this.max.y},intersects:function(g){g=W(g);var w=this.min,I=this.max,M=g.min,X=g.max,ae=X.x>=w.x&&M.x<=I.x,ke=X.y>=w.y&&M.y<=I.y;return ae&&ke},overlaps:function(g){g=W(g);var w=this.min,I=this.max,M=g.min,X=g.max,ae=X.x>w.x&&M.x<I.x,ke=X.y>w.y&&M.y<I.y;return ae&&ke},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var w=this.min,I=this.max,M=Math.abs(w.x-I.x)*g,X=Math.abs(w.y-I.y)*g;return W(ee(w.x-M,w.y-X),ee(I.x+M,I.y+X))},equals:function(g){return g?(g=W(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function W(g,w){return!g||g instanceof oe?g:new oe(g,w)}function Y(g,w){if(g)for(var I=w?[g,w]:g,M=0,X=I.length;M<X;M++)this.extend(I[M])}Y.prototype={extend:function(g){var w=this._southWest,I=this._northEast,M,X;if(g instanceof J)M=g,X=g;else if(g instanceof Y){if(M=g._southWest,X=g._northEast,!M||!X)return this}else return g?this.extend(te(g)||Q(g)):this;return!w&&!I?(this._southWest=new J(M.lat,M.lng),this._northEast=new J(X.lat,X.lng)):(w.lat=Math.min(M.lat,w.lat),w.lng=Math.min(M.lng,w.lng),I.lat=Math.max(X.lat,I.lat),I.lng=Math.max(X.lng,I.lng)),this},pad:function(g){var w=this._southWest,I=this._northEast,M=Math.abs(w.lat-I.lat)*g,X=Math.abs(w.lng-I.lng)*g;return new Y(new J(w.lat-M,w.lng-X),new J(I.lat+M,I.lng+X))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof J||"lat"in g?g=te(g):g=Q(g);var w=this._southWest,I=this._northEast,M,X;return g instanceof Y?(M=g.getSouthWest(),X=g.getNorthEast()):M=X=g,M.lat>=w.lat&&X.lat<=I.lat&&M.lng>=w.lng&&X.lng<=I.lng},intersects:function(g){g=Q(g);var w=this._southWest,I=this._northEast,M=g.getSouthWest(),X=g.getNorthEast(),ae=X.lat>=w.lat&&M.lat<=I.lat,ke=X.lng>=w.lng&&M.lng<=I.lng;return ae&&ke},overlaps:function(g){g=Q(g);var w=this._southWest,I=this._northEast,M=g.getSouthWest(),X=g.getNorthEast(),ae=X.lat>w.lat&&M.lat<I.lat,ke=X.lng>w.lng&&M.lng<I.lng;return ae&&ke},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,w){return g?(g=Q(g),this._southWest.equals(g.getSouthWest(),w)&&this._northEast.equals(g.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(g,w){return g instanceof Y?g:new Y(g,w)}function J(g,w,I){if(isNaN(g)||isNaN(w))throw new Error("Invalid LatLng object: ("+g+", "+w+")");this.lat=+g,this.lng=+w,I!==void 0&&(this.alt=+I)}J.prototype={equals:function(g,w){if(!g)return!1;g=te(g);var I=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return I<=(w===void 0?1e-9:w)},toString:function(g){return"LatLng("+h(this.lat,g)+", "+h(this.lng,g)+")"},distanceTo:function(g){return ge.distance(this,te(g))},wrap:function(){return ge.wrapLatLng(this)},toBounds:function(g){var w=180*g/40075017,I=w/Math.cos(Math.PI/180*this.lat);return Q([this.lat-w,this.lng-I],[this.lat+w,this.lng+I])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function te(g,w,I){return g instanceof J?g:_(g)&&typeof g[0]!="object"?g.length===3?new J(g[0],g[1],g[2]):g.length===2?new J(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new J(g.lat,"lng"in g?g.lng:g.lon,g.alt):w===void 0?null:new J(g,w,I)}var me={latLngToPoint:function(g,w){var I=this.projection.project(g),M=this.scale(w);return this.transformation._transform(I,M)},pointToLatLng:function(g,w){var I=this.scale(w),M=this.transformation.untransform(g,I);return this.projection.unproject(M)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var w=this.projection.bounds,I=this.scale(g),M=this.transformation.transform(w.min,I),X=this.transformation.transform(w.max,I);return new oe(M,X)},infinite:!1,wrapLatLng:function(g){var w=this.wrapLng?u(g.lng,this.wrapLng,!0):g.lng,I=this.wrapLat?u(g.lat,this.wrapLat,!0):g.lat,M=g.alt;return new J(I,w,M)},wrapLatLngBounds:function(g){var w=g.getCenter(),I=this.wrapLatLng(w),M=w.lat-I.lat,X=w.lng-I.lng;if(M===0&&X===0)return g;var ae=g.getSouthWest(),ke=g.getNorthEast(),Fe=new J(ae.lat-M,ae.lng-X),Ke=new J(ke.lat-M,ke.lng-X);return new Y(Fe,Ke)}},ge=s({},me,{wrapLng:[-180,180],R:6371e3,distance:function(g,w){var I=Math.PI/180,M=g.lat*I,X=w.lat*I,ae=Math.sin((w.lat-g.lat)*I/2),ke=Math.sin((w.lng-g.lng)*I/2),Fe=ae*ae+Math.cos(M)*Math.cos(X)*ke*ke,Ke=2*Math.atan2(Math.sqrt(Fe),Math.sqrt(1-Fe));return this.R*Ke}}),ce=6378137,Ce={R:ce,MAX_LATITUDE:85.0511287798,project:function(g){var w=Math.PI/180,I=this.MAX_LATITUDE,M=Math.max(Math.min(I,g.lat),-I),X=Math.sin(M*w);return new U(this.R*g.lng*w,this.R*Math.log((1+X)/(1-X))/2)},unproject:function(g){var w=180/Math.PI;return new J((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*w,g.x*w/this.R)},bounds:function(){var g=ce*Math.PI;return new oe([-g,-g],[g,g])}()};function _e(g,w,I,M){if(_(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=w,this._c=I,this._d=M}_e.prototype={transform:function(g,w){return this._transform(g.clone(),w)},_transform:function(g,w){return w=w||1,g.x=w*(this._a*g.x+this._b),g.y=w*(this._c*g.y+this._d),g},untransform:function(g,w){return w=w||1,new U((g.x/w-this._b)/this._a,(g.y/w-this._d)/this._c)}};function we(g,w,I,M){return new _e(g,w,I,M)}var He=s({},ge,{code:"EPSG:3857",projection:Ce,transformation:function(){var g=.5/(Math.PI*Ce.R);return we(g,.5,-g,.5)}()}),Qe=s({},He,{code:"EPSG:900913"});function Ae(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function he(g,w){var I="",M,X,ae,ke,Fe,Ke;for(M=0,ae=g.length;M<ae;M++){for(Fe=g[M],X=0,ke=Fe.length;X<ke;X++)Ke=Fe[X],I+=(X?"L":"M")+Ke.x+" "+Ke.y;I+=w?St.svg?"z":"x":""}return I||"M0 0"}var ht=document.documentElement.style,Me="ActiveXObject"in window,Ve=Me&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),pe=er("webkit"),xe=er("android"),je=er("android 2")||er("android 3"),qe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ge=xe&&er("Google")&&qe<537&&!("AudioNode"in window),Ue=!!window.opera,st=!nt&&er("chrome"),wt=er("gecko")&&!pe&&!Ue&&!Me,gt=!st&&er("safari"),zt=er("phantom"),ft="OTransition"in ht,wn=navigator.platform.indexOf("Win")===0,nn=Me&&"transition"in ht,qr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!je,Dn="MozPerspective"in ht,gr=!window.L_DISABLE_3D&&(nn||qr||Dn)&&!ft&&!zt,si=typeof orientation<"u"||er("mobile"),Wn=si&&pe,Gl=si&&qr,Rr=!window.PointerEvent&&window.MSPointerEvent,Eo=!!(window.PointerEvent||Rr),Kl="ontouchstart"in window||!!window.TouchEvent,Gr=!window.L_NO_TOUCH&&(Kl||Eo),on=si&&Ue,Kn=si&&wt,th=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ii=function(){var g=!1;try{var w=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",d,w),window.removeEventListener("testPassiveEventSupport",d,w)}catch{}return g}(),Xl=function(){return!!document.createElement("canvas").getContext}(),Po=!!(document.createElementNS&&Ae("svg").createSVGRect),Jt=!!Po&&function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pl=!Po&&function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var w=g.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}}(),Yl=navigator.platform.indexOf("Mac")===0,va=navigator.platform.indexOf("Linux")===0;function er(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var St={ie:Me,ielt9:Ve,edge:nt,webkit:pe,android:xe,android23:je,androidStock:Ge,opera:Ue,chrome:st,gecko:wt,safari:gt,phantom:zt,opera12:ft,win:wn,ie3d:nn,webkit3d:qr,gecko3d:Dn,any3d:gr,mobile:si,mobileWebkit:Wn,mobileWebkit3d:Gl,msPointer:Rr,pointer:Eo,touch:Gr,touchNative:Kl,mobileOpera:on,mobileGecko:Kn,retina:th,passiveEvents:ii,canvas:Xl,svg:Po,vml:pl,inlineSvg:Jt,mac:Yl,linux:va},xa=St.msPointer?"MSPointerDown":"pointerdown",nh=St.msPointer?"MSPointerMove":"pointermove",Zl=St.msPointer?"MSPointerUp":"pointerup",Oo=St.msPointer?"MSPointerCancel":"pointercancel",Za={touchstart:xa,touchmove:nh,touchend:Zl,touchcancel:Oo},jo={touchstart:h1,touchmove:ih,touchend:ih,touchcancel:ih},Qi={},Ja=!1;function Jl(g,w,I){return w==="touchstart"&&Ef(),jo[w]?(I=jo[w].bind(this,I),g.addEventListener(Za[w],I,!1),I):(console.warn("wrong event specified:",w),d)}function rh(g,w,I){if(!Za[w]){console.warn("wrong event specified:",w);return}g.removeEventListener(Za[w],I,!1)}function If(g){Qi[g.pointerId]=g}function Af(g){Qi[g.pointerId]&&(Qi[g.pointerId]=g)}function sh(g){delete Qi[g.pointerId]}function Ef(){Ja||(document.addEventListener(xa,If,!0),document.addEventListener(nh,Af,!0),document.addEventListener(Zl,sh,!0),document.addEventListener(Oo,sh,!0),Ja=!0)}function ih(g,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var I in Qi)w.touches.push(Qi[I]);w.changedTouches=[w],g(w)}}function h1(g,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&ss(w),ih(g,w)}function f1(g){var w={},I,M;for(M in g)I=g[M],w[M]=I&&I.bind?I.bind(g):I;return g=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Pf=200;function py(g,w){g.addEventListener("dblclick",w);var I=0,M;function X(ae){if(ae.detail!==1){M=ae.detail;return}if(!(ae.pointerType==="mouse"||ae.sourceCapabilities&&!ae.sourceCapabilities.firesTouchEvents)){var ke=Qc(ae);if(!(ke.some(function(Ke){return Ke instanceof HTMLLabelElement&&Ke.attributes.for})&&!ke.some(function(Ke){return Ke instanceof HTMLInputElement||Ke instanceof HTMLSelectElement}))){var Fe=Date.now();Fe-I<=Pf?(M++,M===2&&w(f1(ae))):M=1,I=Fe}}}return g.addEventListener("click",X),{dblclick:w,simDblclick:X}}function p1(g,w){g.removeEventListener("dblclick",w.dblclick),g.removeEventListener("click",w.simDblclick)}var ah=Of(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oh=Of(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lm=oh==="webkitTransition"||oh==="OTransition"?oh+"End":"transitionend";function my(g){return typeof g=="string"?document.getElementById(g):g}function Ql(g,w){var I=g.style[w]||g.currentStyle&&g.currentStyle[w];if((!I||I==="auto")&&document.defaultView){var M=document.defaultView.getComputedStyle(g,null);I=M?M[w]:null}return I==="auto"?null:I}function Ln(g,w,I){var M=document.createElement(g);return M.className=w||"",I&&I.appendChild(M),M}function un(g){var w=g.parentNode;w&&w.removeChild(g)}function lh(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function Kc(g){var w=g.parentNode;w&&w.lastChild!==g&&w.appendChild(g)}function Xc(g){var w=g.parentNode;w&&w.firstChild!==g&&w.insertBefore(g,w.firstChild)}function ch(g,w){if(g.classList!==void 0)return g.classList.contains(w);var I=ai(g);return I.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(I)}function hn(g,w){if(g.classList!==void 0)for(var I=m(w),M=0,X=I.length;M<X;M++)g.classList.add(I[M]);else if(!ch(g,w)){var ae=ai(g);Xu(g,(ae?ae+" ":"")+w)}}function Vn(g,w){g.classList!==void 0?g.classList.remove(w):Xu(g,f((" "+ai(g)+" ").replace(" "+w+" "," ")))}function Xu(g,w){g.className.baseVal===void 0?g.className=w:g.className.baseVal=w}function ai(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function Ti(g,w){"opacity"in g.style?g.style.opacity=w:"filter"in g.style&&gy(g,w)}function gy(g,w){var I=!1,M="DXImageTransform.Microsoft.Alpha";try{I=g.filters.item(M)}catch{if(w===1)return}w=Math.round(w*100),I?(I.Enabled=w!==100,I.Opacity=w):g.style.filter+=" progid:"+M+"(opacity="+w+")"}function Of(g){for(var w=document.documentElement.style,I=0;I<g.length;I++)if(g[I]in w)return g[I];return!1}function ec(g,w,I){var M=w||new U(0,0);g.style[ah]=(St.ie3d?"translate("+M.x+"px,"+M.y+"px)":"translate3d("+M.x+"px,"+M.y+"px,0)")+(I?" scale("+I+")":"")}function Kr(g,w){g._leaflet_pos=w,St.any3d?ec(g,w):(g.style.left=w.x+"px",g.style.top=w.y+"px")}function tc(g){return g._leaflet_pos||new U(0,0)}var uh,Yc,Rm;if("onselectstart"in document)uh=function(){ln(window,"selectstart",ss)},Yc=function(){An(window,"selectstart",ss)};else{var dh=Of(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);uh=function(){if(dh){var g=document.documentElement.style;Rm=g[dh],g[dh]="none"}},Yc=function(){dh&&(document.documentElement.style[dh]=Rm,Rm=void 0)}}function Mm(){ln(window,"dragstart",ss)}function ml(){An(window,"dragstart",ss)}var Zc,Yu;function jf(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(As(),Zc=g,Yu=g.style.outlineStyle,g.style.outlineStyle="none",ln(window,"keydown",As))}function As(){Zc&&(Zc.style.outlineStyle=Yu,Zc=void 0,Yu=void 0,An(window,"keydown",As))}function yy(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function $f(g){var w=g.getBoundingClientRect();return{x:w.width/g.offsetWidth||1,y:w.height/g.offsetHeight||1,boundingClientRect:w}}var sn={__proto__:null,TRANSFORM:ah,TRANSITION:oh,TRANSITION_END:Lm,get:my,getStyle:Ql,create:Ln,remove:un,empty:lh,toFront:Kc,toBack:Xc,hasClass:ch,addClass:hn,removeClass:Vn,setClass:Xu,getClass:ai,setOpacity:Ti,testProp:Of,setTransform:ec,setPosition:Kr,getPosition:tc,get disableTextSelection(){return uh},get enableTextSelection(){return Yc},disableImageDrag:Mm,enableImageDrag:ml,preventOutline:jf,restoreOutline:As,getSizedParentNode:yy,getScale:$f};function ln(g,w,I,M){if(w&&typeof w=="object")for(var X in w)Zu(g,X,w[X],I);else{w=m(w);for(var ae=0,ke=w.length;ae<ke;ae++)Zu(g,w[ae],I,M)}return this}var $o="_leaflet_events";function An(g,w,I,M){if(arguments.length===1)Fm(g),delete g[$o];else if(w&&typeof w=="object")for(var X in w)hh(g,X,w[X],I);else if(w=m(w),arguments.length===2)Fm(g,function(Fe){return k(w,Fe)!==-1});else for(var ae=0,ke=w.length;ae<ke;ae++)hh(g,w[ae],I,M);return this}function Fm(g,w){for(var I in g[$o]){var M=I.split(/\d/)[0];(!w||w(M))&&hh(g,M,null,null,I)}}var Df={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zu(g,w,I,M){var X=w+l(I)+(M?"_"+l(M):"");if(g[$o]&&g[$o][X])return this;var ae=function(Fe){return I.call(M||g,Fe||window.event)},ke=ae;!St.touchNative&&St.pointer&&w.indexOf("touch")===0?ae=Jl(g,w,ae):St.touch&&w==="dblclick"?ae=py(g,ae):"addEventListener"in g?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?g.addEventListener(Df[w]||w,ae,St.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(ae=function(Fe){Fe=Fe||window.event,Ju(g,Fe)&&ke(Fe)},g.addEventListener(Df[w],ae,!1)):g.addEventListener(w,ke,!1):g.attachEvent("on"+w,ae),g[$o]=g[$o]||{},g[$o][X]=ae}function hh(g,w,I,M,X){X=X||w+l(I)+(M?"_"+l(M):"");var ae=g[$o]&&g[$o][X];if(!ae)return this;!St.touchNative&&St.pointer&&w.indexOf("touch")===0?rh(g,w,ae):St.touch&&w==="dblclick"?p1(g,ae):"removeEventListener"in g?g.removeEventListener(Df[w]||w,ae,!1):g.detachEvent("on"+w,ae),g[$o][X]=null}function Jc(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function zm(g){return Zu(g,"wheel",Jc),this}function fh(g){return ln(g,"mousedown touchstart dblclick contextmenu",Jc),g._leaflet_disable_click=!0,this}function ss(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function Qa(g){return ss(g),Jc(g),this}function Qc(g){if(g.composedPath)return g.composedPath();for(var w=[],I=g.target;I;)w.push(I),I=I.parentNode;return w}function vy(g,w){if(!w)return new U(g.clientX,g.clientY);var I=$f(w),M=I.boundingClientRect;return new U((g.clientX-M.left)/I.x-w.clientLeft,(g.clientY-M.top)/I.y-w.clientTop)}var ph=St.linux&&St.chrome?window.devicePixelRatio:St.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lf(g){return St.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/ph:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function Ju(g,w){var I=w.relatedTarget;if(!I)return!0;try{for(;I&&I!==g;)I=I.parentNode}catch{return!1}return I!==g}var xy={__proto__:null,on:ln,off:An,stopPropagation:Jc,disableScrollPropagation:zm,disableClickPropagation:fh,preventDefault:ss,stop:Qa,getPropagationPath:Qc,getMousePosition:vy,getWheelDelta:Lf,isExternalTarget:Ju,addListener:ln,removeListener:An},Bm=G.extend({run:function(g,w,I,M){this.stop(),this._el=g,this._inProgress=!0,this._duration=I||.25,this._easeOutPower=1/Math.max(M||.5,.2),this._startPos=tc(g),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(g){var w=+new Date-this._startTime,I=this._duration*1e3;w<I?this._runFrame(this._easeOut(w/I),g):(this._runFrame(1),this._complete())},_runFrame:function(g,w){var I=this._startPos.add(this._offset.multiplyBy(g));w&&I._round(),Kr(this._el,I),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),Cn=G.extend({options:{crs:He,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,w){w=y(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(te(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oh&&St.any3d&&!St.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ln(this._proxy,Lm,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,w,I){if(w=w===void 0?this._zoom:this._limitZoom(w),g=this._limitCenter(te(g),w,this.options.maxBounds),I=I||{},this._stop(),this._loaded&&!I.reset&&I!==!0){I.animate!==void 0&&(I.zoom=s({animate:I.animate},I.zoom),I.pan=s({animate:I.animate,duration:I.duration},I.pan));var M=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,w,I.zoom):this._tryAnimatedPan(g,I.pan);if(M)return clearTimeout(this._sizeTimer),this}return this._resetView(g,w,I.pan&&I.pan.noMoveStart),this},setZoom:function(g,w){return this._loaded?this.setView(this.getCenter(),g,{zoom:w}):(this._zoom=g,this)},zoomIn:function(g,w){return g=g||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,w)},zoomOut:function(g,w){return g=g||(St.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,w)},setZoomAround:function(g,w,I){var M=this.getZoomScale(w),X=this.getSize().divideBy(2),ae=g instanceof U?g:this.latLngToContainerPoint(g),ke=ae.subtract(X).multiplyBy(1-1/M),Fe=this.containerPointToLatLng(X.add(ke));return this.setView(Fe,w,{zoom:I})},_getBoundsCenterZoom:function(g,w){w=w||{},g=g.getBounds?g.getBounds():Q(g);var I=ee(w.paddingTopLeft||w.padding||[0,0]),M=ee(w.paddingBottomRight||w.padding||[0,0]),X=this.getBoundsZoom(g,!1,I.add(M));if(X=typeof w.maxZoom=="number"?Math.min(w.maxZoom,X):X,X===1/0)return{center:g.getCenter(),zoom:X};var ae=M.subtract(I).divideBy(2),ke=this.project(g.getSouthWest(),X),Fe=this.project(g.getNorthEast(),X),Ke=this.unproject(ke.add(Fe).divideBy(2).add(ae),X);return{center:Ke,zoom:X}},fitBounds:function(g,w){if(g=Q(g),!g.isValid())throw new Error("Bounds are not valid.");var I=this._getBoundsCenterZoom(g,w);return this.setView(I.center,I.zoom,w)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,w){return this.setView(g,this._zoom,{pan:w})},panBy:function(g,w){if(g=ee(g).round(),w=w||{},!g.x&&!g.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bm,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){hn(this._mapPane,"leaflet-pan-anim");var I=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,I,w.duration||.25,w.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,w,I){if(I=I||{},I.animate===!1||!St.any3d)return this.setView(g,w,I);this._stop();var M=this.project(this.getCenter()),X=this.project(g),ae=this.getSize(),ke=this._zoom;g=te(g),w=w===void 0?ke:w;var Fe=Math.max(ae.x,ae.y),Ke=Fe*this.getZoomScale(ke,w),lt=X.distanceTo(M)||1,Tt=1.42,Xt=Tt*Tt;function _n(ar){var ra=ar?-1:1,nO=ar?Ke:Fe,rO=Ke*Ke-Fe*Fe+ra*Xt*Xt*lt*lt,AS=2*nO*Xt*lt,Py=rO/AS,x1=Math.sqrt(Py*Py+1)-Py,ES=x1<1e-9?-18:Math.log(x1);return ES}function na(ar){return(Math.exp(ar)-Math.exp(-ar))/2}function Ps(ar){return(Math.exp(ar)+Math.exp(-ar))/2}function Fo(ar){return na(ar)/Ps(ar)}var ka=_n(0);function Gf(ar){return Fe*(Ps(ka)/Ps(ka+Tt*ar))}function eO(ar){return Fe*(Ps(ka)*Fo(ka+Tt*ar)-na(ka))/Xt}function cd(ar){return 1-Math.pow(1-ar,1.5)}var xl=Date.now(),oc=(_n(1)-ka)/Tt,tO=I.duration?1e3*I.duration:1e3*oc*.8;function v1(){var ar=(Date.now()-xl)/tO,ra=cd(ar)*oc;ar<=1?(this._flyToFrame=j(v1,this),this._move(this.unproject(M.add(X.subtract(M).multiplyBy(eO(ra)/lt)),ke),this.getScaleZoom(Fe/Gf(ra),ke),{flyTo:!0})):this._move(g,w)._moveEnd(!0)}return this._moveStart(!0,I.noMoveStart),v1.call(this),this},flyToBounds:function(g,w){var I=this._getBoundsCenterZoom(g,w);return this.flyTo(I.center,I.zoom,w)},setMaxBounds:function(g){return g=Q(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var w=this.options.minZoom;return this.options.minZoom=g,this._loaded&&w!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var w=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&w!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,w){this._enforcingBounds=!0;var I=this.getCenter(),M=this._limitCenter(I,this._zoom,Q(g));return I.equals(M)||this.panTo(M,w),this._enforcingBounds=!1,this},panInside:function(g,w){w=w||{};var I=ee(w.paddingTopLeft||w.padding||[0,0]),M=ee(w.paddingBottomRight||w.padding||[0,0]),X=this.project(this.getCenter()),ae=this.project(g),ke=this.getPixelBounds(),Fe=W([ke.min.add(I),ke.max.subtract(M)]),Ke=Fe.getSize();if(!Fe.contains(ae)){this._enforcingBounds=!0;var lt=ae.subtract(Fe.getCenter()),Tt=Fe.extend(ae).getSize().subtract(Ke);X.x+=lt.x<0?-Tt.x:Tt.x,X.y+=lt.y<0?-Tt.y:Tt.y,this.panTo(this.unproject(X),w),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=s({animate:!1,pan:!0},g===!0?{animate:!0}:g);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var I=this.getSize(),M=w.divideBy(2).round(),X=I.divideBy(2).round(),ae=M.subtract(X);return!ae.x&&!ae.y?this:(g.animate&&g.pan?this.panBy(ae):(g.pan&&this._rawPanBy(ae),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:I}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=s({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=a(this._handleGeolocationResponse,this),I=a(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,I,g):navigator.geolocation.getCurrentPosition(w,I,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var w=g.code,I=g.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+I+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var w=g.coords.latitude,I=g.coords.longitude,M=new J(w,I),X=M.toBounds(g.coords.accuracy*2),ae=this._locateOptions;if(ae.setView){var ke=this.getBoundsZoom(X);this.setView(M,ae.maxZoom?Math.min(ke,ae.maxZoom):ke)}var Fe={latlng:M,bounds:X,timestamp:g.timestamp};for(var Ke in g.coords)typeof g.coords[Ke]=="number"&&(Fe[Ke]=g.coords[Ke]);this.fire("locationfound",Fe)}},addHandler:function(g,w){if(!w)return this;var I=this[g]=new w(this);return this._handlers.push(I),this.options[g]&&I.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),un(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)un(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,w){var I="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),M=Ln("div",I,w||this._mapPane);return g&&(this._panes[g]=M),M},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),w=this.unproject(g.getBottomLeft()),I=this.unproject(g.getTopRight());return new Y(w,I)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,w,I){g=Q(g),I=ee(I||[0,0]);var M=this.getZoom()||0,X=this.getMinZoom(),ae=this.getMaxZoom(),ke=g.getNorthWest(),Fe=g.getSouthEast(),Ke=this.getSize().subtract(I),lt=W(this.project(Fe,M),this.project(ke,M)).getSize(),Tt=St.any3d?this.options.zoomSnap:1,Xt=Ke.x/lt.x,_n=Ke.y/lt.y,na=w?Math.max(Xt,_n):Math.min(Xt,_n);return M=this.getScaleZoom(na,M),Tt&&(M=Math.round(M/(Tt/100))*(Tt/100),M=w?Math.ceil(M/Tt)*Tt:Math.floor(M/Tt)*Tt),Math.max(X,Math.min(ae,M))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,w){var I=this._getTopLeftPoint(g,w);return new oe(I,I.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,w){var I=this.options.crs;return w=w===void 0?this._zoom:w,I.scale(g)/I.scale(w)},getScaleZoom:function(g,w){var I=this.options.crs;w=w===void 0?this._zoom:w;var M=I.zoom(g*I.scale(w));return isNaN(M)?1/0:M},project:function(g,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(te(g),w)},unproject:function(g,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(ee(g),w)},layerPointToLatLng:function(g){var w=ee(g).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(g){var w=this.project(te(g))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng(te(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(Q(g))},distance:function(g,w){return this.options.crs.distance(te(g),te(w))},containerPointToLayerPoint:function(g){return ee(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return ee(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var w=this.containerPointToLayerPoint(ee(g));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(te(g)))},mouseEventToContainerPoint:function(g){return vy(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var w=this._container=my(g);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ln(w,"scroll",this._onScroll,this),this._containerId=l(w)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&St.any3d,hn(g,"leaflet-container"+(St.touch?" leaflet-touch":"")+(St.retina?" leaflet-retina":"")+(St.ielt9?" leaflet-oldie":"")+(St.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=Ql(g,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Kr(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(hn(g.markerPane,"leaflet-zoom-hide"),hn(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,w,I){Kr(this._mapPane,new U(0,0));var M=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var X=this._zoom!==w;this._moveStart(X,I)._move(g,w)._moveEnd(X),this.fire("viewreset"),M&&this.fire("load")},_moveStart:function(g,w){return g&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(g,w,I,M){w===void 0&&(w=this._zoom);var X=this._zoom!==w;return this._zoom=w,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),M?I&&I.pinch&&this.fire("zoom",I):((X||I&&I.pinch)&&this.fire("zoom",I),this.fire("move",I)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){Kr(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[l(this._container)]=this;var w=g?An:ln;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),St.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,w){for(var I=[],M,X=w==="mouseout"||w==="mouseover",ae=g.target||g.srcElement,ke=!1;ae;){if(M=this._targets[l(ae)],M&&(w==="click"||w==="preclick")&&this._draggableMoved(M)){ke=!0;break}if(M&&M.listens(w,!0)&&(X&&!Ju(ae,g)||(I.push(M),X))||ae===this._container)break;ae=ae.parentNode}return!I.length&&!ke&&!X&&this.listens(w,!0)&&(I=[this]),I},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var w=g.target||g.srcElement;if(!(!this._loaded||w._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(w))){var I=g.type;I==="mousedown"&&jf(w),this._fireDOMEvent(g,I)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,w,I){if(g.type==="click"){var M=s({},g);M.type="preclick",this._fireDOMEvent(M,M.type,I)}var X=this._findEventTargets(g,w);if(I){for(var ae=[],ke=0;ke<I.length;ke++)I[ke].listens(w,!0)&&ae.push(I[ke]);X=ae.concat(X)}if(X.length){w==="contextmenu"&&ss(g);var Fe=X[0],Ke={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var lt=Fe.getLatLng&&(!Fe._radius||Fe._radius<=10);Ke.containerPoint=lt?this.latLngToContainerPoint(Fe.getLatLng()):this.mouseEventToContainerPoint(g),Ke.layerPoint=this.containerPointToLayerPoint(Ke.containerPoint),Ke.latlng=lt?Fe.getLatLng():this.layerPointToLatLng(Ke.layerPoint)}for(ke=0;ke<X.length;ke++)if(X[ke].fire(w,Ke,!0),Ke.originalEvent._stopped||X[ke].options.bubblingMouseEvents===!1&&k(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,w=this._handlers.length;g<w;g++)this._handlers[g].disable()},whenReady:function(g,w){return this._loaded?g.call(w||this,{target:this}):this.on("load",g,w),this},_getMapPanePos:function(){return tc(this._mapPane)||new U(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,w){var I=g&&w!==void 0?this._getNewPixelOrigin(g,w):this.getPixelOrigin();return I.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,w){var I=this.getSize()._divideBy(2);return this.project(g,w)._subtract(I)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,w,I){var M=this._getNewPixelOrigin(I,w);return this.project(g,w)._subtract(M)},_latLngBoundsToNewLayerBounds:function(g,w,I){var M=this._getNewPixelOrigin(I,w);return W([this.project(g.getSouthWest(),w)._subtract(M),this.project(g.getNorthWest(),w)._subtract(M),this.project(g.getSouthEast(),w)._subtract(M),this.project(g.getNorthEast(),w)._subtract(M)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,w,I){if(!I)return g;var M=this.project(g,w),X=this.getSize().divideBy(2),ae=new oe(M.subtract(X),M.add(X)),ke=this._getBoundsOffset(ae,I,w);return Math.abs(ke.x)<=1&&Math.abs(ke.y)<=1?g:this.unproject(M.add(ke),w)},_limitOffset:function(g,w){if(!w)return g;var I=this.getPixelBounds(),M=new oe(I.min.add(g),I.max.add(g));return g.add(this._getBoundsOffset(M,w))},_getBoundsOffset:function(g,w,I){var M=W(this.project(w.getNorthEast(),I),this.project(w.getSouthWest(),I)),X=M.min.subtract(g.min),ae=M.max.subtract(g.max),ke=this._rebound(X.x,-ae.x),Fe=this._rebound(X.y,-ae.y);return new U(ke,Fe)},_rebound:function(g,w){return g+w>0?Math.round(g-w)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(w))},_limitZoom:function(g){var w=this.getMinZoom(),I=this.getMaxZoom(),M=St.any3d?this.options.zoomSnap:1;return M&&(g=Math.round(g/M)*M),Math.max(w,Math.min(I,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Vn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,w){var I=this._getCenterOffset(g)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(I)?!1:(this.panBy(I,w),!0)},_createAnimProxy:function(){var g=this._proxy=Ln("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(w){var I=ah,M=this._proxy.style[I];ec(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),M===this._proxy.style[I]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){un(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),w=this.getZoom();ec(this._proxy,this.project(g,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,w,I){if(this._animatingZoom)return!0;if(I=I||{},!this._zoomAnimated||I.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var M=this.getZoomScale(w),X=this._getCenterOffset(g)._divideBy(1-1/M);return I.animate!==!0&&!this.getSize().contains(X)?!1:(j(function(){this._moveStart(!0,I.noMoveStart||!1)._animateZoom(g,w,!0)},this),!0)},_animateZoom:function(g,w,I,M){this._mapPane&&(I&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=w,hn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:w,noUpdate:M}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Vn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function by(g,w){return new Cn(g,w)}var fs=B.extend({options:{position:"topright"},initialize:function(g){y(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var w=this._map;return w&&w.removeControl(this),this.options.position=g,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var w=this._container=this.onAdd(g),I=this.getPosition(),M=g._controlCorners[I];return hn(w,"leaflet-control"),I.indexOf("bottom")!==-1?M.insertBefore(w,M.firstChild):M.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(un(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),eo=function(g){return new fs(g)};Cn.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},w="leaflet-",I=this._controlContainer=Ln("div",w+"control-container",this._container);function M(X,ae){var ke=w+X+" "+w+ae;g[X+ae]=Ln("div",ke,I)}M("top","left"),M("top","right"),M("bottom","left"),M("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)un(this._controlCorners[g]);un(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wy=fs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,w,I,M){return I<M?-1:M<I?1:0}},initialize:function(g,w,I){y(this,I),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var M in g)this._addLayer(g[M],M);for(M in w)this._addLayer(w[M],M,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return fs.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,w){return this._addLayer(g,w),this._map?this._update():this},addOverlay:function(g,w){return this._addLayer(g,w,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var w=this._getLayer(l(g));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){hn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(hn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):Vn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Vn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",w=this._container=Ln("div",g),I=this.options.collapsed;w.setAttribute("aria-haspopup",!0),fh(w),zm(w);var M=this._section=Ln("section",g+"-list");I&&(this._map.on("click",this.collapse,this),ln(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var X=this._layersLink=Ln("a",g+"-toggle",w);X.href="#",X.title="Layers",X.setAttribute("role","button"),ln(X,{keydown:function(ae){ae.keyCode===13&&this._expandSafely()},click:function(ae){ss(ae),this._expandSafely()}},this),I||this.expand(),this._baseLayersList=Ln("div",g+"-base",M),this._separator=Ln("div",g+"-separator",M),this._overlaysList=Ln("div",g+"-overlays",M),w.appendChild(M)},_getLayer:function(g){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&l(this._layers[w].layer)===g)return this._layers[w]},_addLayer:function(g,w,I){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:w,overlay:I}),this.options.sortLayers&&this._layers.sort(a(function(M,X){return this.options.sortFunction(M.layer,X.layer,M.name,X.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;lh(this._baseLayersList),lh(this._overlaysList),this._layerControlInputs=[];var g,w,I,M,X=0;for(I=0;I<this._layers.length;I++)M=this._layers[I],this._addItem(M),w=w||M.overlay,g=g||!M.overlay,X+=M.overlay?0:1;return this.options.hideSingleBase&&(g=g&&X>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=w&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var w=this._getLayer(l(g.target)),I=w.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;I&&this._map.fire(I,w)},_createRadioElement:function(g,w){var I='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(w?' checked="checked"':"")+"/>",M=document.createElement("div");return M.innerHTML=I,M.firstChild},_addItem:function(g){var w=document.createElement("label"),I=this._map.hasLayer(g.layer),M;g.overlay?(M=document.createElement("input"),M.type="checkbox",M.className="leaflet-control-layers-selector",M.defaultChecked=I):M=this._createRadioElement("leaflet-base-layers_"+l(this),I),this._layerControlInputs.push(M),M.layerId=l(g.layer),ln(M,"click",this._onInputClick,this);var X=document.createElement("span");X.innerHTML=" "+g.name;var ae=document.createElement("span");w.appendChild(ae),ae.appendChild(M),ae.appendChild(X);var ke=g.overlay?this._overlaysList:this._baseLayersList;return ke.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var g=this._layerControlInputs,w,I,M=[],X=[];this._handlingClick=!0;for(var ae=g.length-1;ae>=0;ae--)w=g[ae],I=this._getLayer(w.layerId).layer,w.checked?M.push(I):w.checked||X.push(I);for(ae=0;ae<X.length;ae++)this._map.hasLayer(X[ae])&&this._map.removeLayer(X[ae]);for(ae=0;ae<M.length;ae++)this._map.hasLayer(M[ae])||this._map.addLayer(M[ae]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,w,I,M=this._map.getZoom(),X=g.length-1;X>=0;X--)w=g[X],I=this._getLayer(w.layerId).layer,w.disabled=I.options.minZoom!==void 0&&M<I.options.minZoom||I.options.maxZoom!==void 0&&M>I.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;this._preventClick=!0,ln(g,"click",ss),this.expand();var w=this;setTimeout(function(){An(g,"click",ss),w._preventClick=!1})}}),Qu=function(g,w,I){return new wy(g,w,I)},to=fs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var w="leaflet-control-zoom",I=Ln("div",w+" leaflet-bar"),M=this.options;return this._zoomInButton=this._createButton(M.zoomInText,M.zoomInTitle,w+"-in",I,this._zoomIn),this._zoomOutButton=this._createButton(M.zoomOutText,M.zoomOutTitle,w+"-out",I,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),I},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,w,I,M,X){var ae=Ln("a",I,M);return ae.innerHTML=g,ae.href="#",ae.title=w,ae.setAttribute("role","button"),ae.setAttribute("aria-label",w),fh(ae),ln(ae,"click",Qa),ln(ae,"click",X,this),ln(ae,"click",this._refocusOnMap,this),ae},_updateDisabled:function(){var g=this._map,w="leaflet-disabled";Vn(this._zoomInButton,w),Vn(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(hn(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(hn(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});Cn.mergeOptions({zoomControl:!0}),Cn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new to,this.addControl(this.zoomControl))});var Wm=function(g){return new to(g)},ed=fs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var w="leaflet-control-scale",I=Ln("div",w),M=this.options;return this._addScales(M,w+"-line",I),g.on(M.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),I},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,w,I){g.metric&&(this._mScale=Ln("div",w,I)),g.imperial&&(this._iScale=Ln("div",w,I))},_update:function(){var g=this._map,w=g.getSize().y/2,I=g.distance(g.containerPointToLatLng([0,w]),g.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(I)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var w=this._getRoundNum(g),I=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,I,w/g)},_updateImperial:function(g){var w=g*3.2808399,I,M,X;w>5280?(I=w/5280,M=this._getRoundNum(I),this._updateScale(this._iScale,M+" mi",M/I)):(X=this._getRoundNum(w),this._updateScale(this._iScale,X+" ft",X/w))},_updateScale:function(g,w,I){g.style.width=Math.round(this.options.maxWidth*I)+"px",g.innerHTML=w},_getRoundNum:function(g){var w=Math.pow(10,(Math.floor(g)+"").length-1),I=g/w;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:1,w*I}}),m1=function(g){return new ed(g)},Rf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Um=fs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(St.inlineSvg?Rf+" ":"")+"Leaflet</a>"},initialize:function(g){y(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=Ln("div","leaflet-control-attribution"),fh(this._container);for(var w in g._layers)g._layers[w].getAttribution&&this.addAttribution(g._layers[w].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var w in this._attributions)this._attributions[w]&&g.push(w);var I=[];this.options.prefix&&I.push(this.options.prefix),g.length&&I.push(g.join(", ")),this._container.innerHTML=I.join(' <span aria-hidden="true">|</span> ')}}});Cn.mergeOptions({attributionControl:!0}),Cn.addInitHook(function(){this.options.attributionControl&&new Um().addTo(this)});var Vm=function(g){return new Um(g)};fs.Layers=wy,fs.Zoom=to,fs.Scale=ed,fs.Attribution=Um,eo.layers=Qu,eo.zoom=Wm,eo.scale=m1,eo.attribution=Vm;var ba=B.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ba.addTo=function(g,w){return g.addHandler(w,this),this};var _y={Events:V},mh=St.touch?"touchstart mousedown":"mousedown",Do=G.extend({options:{clickTolerance:3},initialize:function(g,w,I,M){y(this,M),this._element=g,this._dragStartTarget=w||g,this._preventOutline=I},enable:function(){this._enabled||(ln(this._dragStartTarget,mh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Do._dragging===this&&this.finishDrag(!0),An(this._dragStartTarget,mh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!ch(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){Do._dragging===this&&this.finishDrag();return}if(!(Do._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(Do._dragging=this,this._preventOutline&&jf(this._element),Mm(),uh(),!this._moving)){this.fire("down");var w=g.touches?g.touches[0]:g,I=yy(this._element);this._startPoint=new U(w.clientX,w.clientY),this._startPos=tc(this._element),this._parentScale=$f(I);var M=g.type==="mousedown";ln(document,M?"mousemove":"touchmove",this._onMove,this),ln(document,M?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var w=g.touches&&g.touches.length===1?g.touches[0]:g,I=new U(w.clientX,w.clientY)._subtract(this._startPoint);!I.x&&!I.y||Math.abs(I.x)+Math.abs(I.y)<this.options.clickTolerance||(I.x/=this._parentScale.x,I.y/=this._parentScale.y,ss(g),this._moved||(this.fire("dragstart"),this._moved=!0,hn(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),hn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(I),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),Kr(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){Vn(document.body,"leaflet-dragging"),this._lastTarget&&(Vn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),An(document,"mousemove touchmove",this._onMove,this),An(document,"mouseup touchend touchcancel",this._onUp,this),ml(),Yc();var w=this._moved&&this._moving;this._moving=!1,Do._dragging=!1,w&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)})}});function Mf(g,w,I){var M,X=[1,4,2,8],ae,ke,Fe,Ke,lt,Tt,Xt,_n;for(ae=0,Tt=g.length;ae<Tt;ae++)g[ae]._code=Je(g[ae],w);for(Fe=0;Fe<4;Fe++){for(Xt=X[Fe],M=[],ae=0,Tt=g.length,ke=Tt-1;ae<Tt;ke=ae++)Ke=g[ae],lt=g[ke],Ke._code&Xt?lt._code&Xt||(_n=Le(lt,Ke,Xt,w,I),_n._code=Je(_n,w),M.push(_n)):(lt._code&Xt&&(_n=Le(lt,Ke,Xt,w,I),_n._code=Je(_n,w),M.push(_n)),M.push(Ke));g=M}return g}function Hm(g,w){var I,M,X,ae,ke,Fe,Ke,lt,Tt;if(!g||g.length===0)throw new Error("latlngs not passed");Ot(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var Xt=te([0,0]),_n=Q(g),na=_n.getNorthWest().distanceTo(_n.getSouthWest())*_n.getNorthEast().distanceTo(_n.getNorthWest());na<1700&&(Xt=qm(g));var Ps=g.length,Fo=[];for(I=0;I<Ps;I++){var ka=te(g[I]);Fo.push(w.project(te([ka.lat-Xt.lat,ka.lng-Xt.lng])))}for(Fe=Ke=lt=0,I=0,M=Ps-1;I<Ps;M=I++)X=Fo[I],ae=Fo[M],ke=X.y*ae.x-ae.y*X.x,Ke+=(X.x+ae.x)*ke,lt+=(X.y+ae.y)*ke,Fe+=ke*3;Fe===0?Tt=Fo[0]:Tt=[Ke/Fe,lt/Fe];var Gf=w.unproject(ee(Tt));return te([Gf.lat+Xt.lat,Gf.lng+Xt.lng])}function qm(g){for(var w=0,I=0,M=0,X=0;X<g.length;X++){var ae=te(g[X]);w+=ae.lat,I+=ae.lng,M++}return te([w/M,I/M])}var Ff={__proto__:null,clipPolygon:Mf,polygonCenter:Hm,centroid:qm};function td(g,w){if(!w||!g.length)return g.slice();var I=w*w;return g=re(g,I),g=Gm(g,I),g}function zf(g,w,I){return Math.sqrt(Nt(g,w,I,!0))}function nd(g,w,I){return Nt(g,w,I)}function Gm(g,w){var I=g.length,M=typeof Uint8Array<"u"?Uint8Array:Array,X=new M(I);X[0]=X[I-1]=1,D(g,X,w,0,I-1);var ae,ke=[];for(ae=0;ae<I;ae++)X[ae]&&ke.push(g[ae]);return ke}function D(g,w,I,M,X){var ae=0,ke,Fe,Ke;for(Fe=M+1;Fe<=X-1;Fe++)Ke=Nt(g[Fe],g[M],g[X],!0),Ke>ae&&(ke=Fe,ae=Ke);ae>I&&(w[ke]=1,D(g,w,I,M,ke),D(g,w,I,ke,X))}function re(g,w){for(var I=[g[0]],M=1,X=0,ae=g.length;M<ae;M++)dt(g[M],g[X])>w&&(I.push(g[M]),X=M);return X<ae-1&&I.push(g[ae-1]),I}var ve;function Te(g,w,I,M,X){var ae=M?ve:Je(g,I),ke=Je(w,I),Fe,Ke,lt;for(ve=ke;;){if(!(ae|ke))return[g,w];if(ae&ke)return!1;Fe=ae||ke,Ke=Le(g,w,Fe,I,X),lt=Je(Ke,I),Fe===ae?(g=Ke,ae=lt):(w=Ke,ke=lt)}}function Le(g,w,I,M,X){var ae=w.x-g.x,ke=w.y-g.y,Fe=M.min,Ke=M.max,lt,Tt;return I&8?(lt=g.x+ae*(Ke.y-g.y)/ke,Tt=Ke.y):I&4?(lt=g.x+ae*(Fe.y-g.y)/ke,Tt=Fe.y):I&2?(lt=Ke.x,Tt=g.y+ke*(Ke.x-g.x)/ae):I&1&&(lt=Fe.x,Tt=g.y+ke*(Fe.x-g.x)/ae),new U(lt,Tt,X)}function Je(g,w){var I=0;return g.x<w.min.x?I|=1:g.x>w.max.x&&(I|=2),g.y<w.min.y?I|=4:g.y>w.max.y&&(I|=8),I}function dt(g,w){var I=w.x-g.x,M=w.y-g.y;return I*I+M*M}function Nt(g,w,I,M){var X=w.x,ae=w.y,ke=I.x-X,Fe=I.y-ae,Ke=ke*ke+Fe*Fe,lt;return Ke>0&&(lt=((g.x-X)*ke+(g.y-ae)*Fe)/Ke,lt>1?(X=I.x,ae=I.y):lt>0&&(X+=ke*lt,ae+=Fe*lt)),ke=g.x-X,Fe=g.y-ae,M?ke*ke+Fe*Fe:new U(X,ae)}function Ot(g){return!_(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function cn(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(g)}function an(g,w){var I,M,X,ae,ke,Fe,Ke,lt;if(!g||g.length===0)throw new Error("latlngs not passed");Ot(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var Tt=te([0,0]),Xt=Q(g),_n=Xt.getNorthWest().distanceTo(Xt.getSouthWest())*Xt.getNorthEast().distanceTo(Xt.getNorthWest());_n<1700&&(Tt=qm(g));var na=g.length,Ps=[];for(I=0;I<na;I++){var Fo=te(g[I]);Ps.push(w.project(te([Fo.lat-Tt.lat,Fo.lng-Tt.lng])))}for(I=0,M=0;I<na-1;I++)M+=Ps[I].distanceTo(Ps[I+1])/2;if(M===0)lt=Ps[0];else for(I=0,ae=0;I<na-1;I++)if(ke=Ps[I],Fe=Ps[I+1],X=ke.distanceTo(Fe),ae+=X,ae>M){Ke=(ae-M)/X,lt=[Fe.x-Ke*(Fe.x-ke.x),Fe.y-Ke*(Fe.y-ke.y)];break}var ka=w.unproject(ee(lt));return te([ka.lat+Tt.lat,ka.lng+Tt.lng])}var Rn={__proto__:null,simplify:td,pointToSegmentDistance:zf,closestPointOnSegment:nd,clipSegment:Te,_getEdgeIntersection:Le,_getBitCode:Je,_sqClosestPointOnSegment:Nt,isFlat:Ot,_flat:cn,polylineCenter:an},br={project:function(g){return new U(g.lng,g.lat)},unproject:function(g){return new J(g.y,g.x)},bounds:new oe([-180,-90],[180,90])},Ir={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var w=Math.PI/180,I=this.R,M=g.lat*w,X=this.R_MINOR/I,ae=Math.sqrt(1-X*X),ke=ae*Math.sin(M),Fe=Math.tan(Math.PI/4-M/2)/Math.pow((1-ke)/(1+ke),ae/2);return M=-I*Math.log(Math.max(Fe,1e-10)),new U(g.lng*w*I,M)},unproject:function(g){for(var w=180/Math.PI,I=this.R,M=this.R_MINOR/I,X=Math.sqrt(1-M*M),ae=Math.exp(-g.y/I),ke=Math.PI/2-2*Math.atan(ae),Fe=0,Ke=.1,lt;Fe<15&&Math.abs(Ke)>1e-7;Fe++)lt=X*Math.sin(ke),lt=Math.pow((1-lt)/(1+lt),X/2),Ke=Math.PI/2-2*Math.atan(ae*lt)-ke,ke+=Ke;return new J(ke*w,g.x*w/I)}},ps={__proto__:null,LonLat:br,Mercator:Ir,SphericalMercator:Ce},Ii=s({},ge,{code:"EPSG:3395",projection:Ir,transformation:function(){var g=.5/(Math.PI*Ir.R);return we(g,.5,-g,.5)}()}),Es=s({},ge,{code:"EPSG:4326",projection:br,transformation:we(1/180,1,-1/180,.5)}),gl=s({},me,{projection:br,transformation:we(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,w){var I=w.lng-g.lng,M=w.lat-g.lat;return Math.sqrt(I*I+M*M)},infinite:!0});me.Earth=ge,me.EPSG3395=Ii,me.EPSG3857=He,me.EPSG900913=Qe,me.EPSG4326=Es,me.Simple=gl;var Mr=G.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[l(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[l(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var w=g.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var I=this.getEvents();w.on(I,this),this.once("remove",function(){w.off(I,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});Cn.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var w=l(g);return this._layers[w]?this:(this._layers[w]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var w=l(g);return this._layers[w]?(this._loaded&&g.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return l(g)in this._layers},eachLayer:function(g,w){for(var I in this._layers)g.call(w,this._layers[I]);return this},_addLayers:function(g){g=g?_(g)?g:[g]:[];for(var w=0,I=g.length;w<I;w++)this.addLayer(g[w])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[l(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var w=l(g);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,w=-1/0,I=this._getZoomSpan();for(var M in this._zoomBoundLayers){var X=this._zoomBoundLayers[M].options;g=X.minZoom===void 0?g:Math.min(g,X.minZoom),w=X.maxZoom===void 0?w:Math.max(w,X.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=g===1/0?void 0:g,I!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ea=Mr.extend({initialize:function(g,w){y(this,w),this._layers={};var I,M;if(g)for(I=0,M=g.length;I<M;I++)this.addLayer(g[I])},addLayer:function(g){var w=this.getLayerId(g);return this._layers[w]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var w=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(g){var w=typeof g=="number"?g:this.getLayerId(g);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var w=Array.prototype.slice.call(arguments,1),I,M;for(I in this._layers)M=this._layers[I],M[g]&&M[g].apply(M,w);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,w){for(var I in this._layers)g.call(w,this._layers[I]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return l(g)}}),ky=function(g,w){return new ea(g,w)},no=ea.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),ea.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),ea.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new Y;for(var w in this._layers){var I=this._layers[w];g.extend(I.getBounds?I.getBounds():I.getLatLng())}return g}}),Km=function(g,w){return new no(g,w)},yl=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){y(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,w){var I=this._getIconUrl(g);if(!I){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var M=this._createImg(I,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(M,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),M},_setIconStyles:function(g,w){var I=this.options,M=I[w+"Size"];typeof M=="number"&&(M=[M,M]);var X=ee(M),ae=ee(w==="shadow"&&I.shadowAnchor||I.iconAnchor||X&&X.divideBy(2,!0));g.className="leaflet-marker-"+w+" "+(I.className||""),ae&&(g.style.marginLeft=-ae.x+"px",g.style.marginTop=-ae.y+"px"),X&&(g.style.width=X.x+"px",g.style.height=X.y+"px")},_createImg:function(g,w){return w=w||document.createElement("img"),w.src=g,w},_getIconUrl:function(g){return St.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function Xm(g){return new yl(g)}var eu=yl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof eu.imagePath!="string"&&(eu.imagePath=this._detectIconPath()),(this.options.imagePath||eu.imagePath)+yl.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var w=function(I,M,X){var ae=M.exec(I);return ae&&ae[X]};return g=w(g,/^url\((['"])?(.+)\1\)$/,2),g&&w(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=Ln("div","leaflet-default-icon-path",document.body),w=Ql(g,"background-image")||Ql(g,"backgroundImage");if(document.body.removeChild(g),w=this._stripUrl(w),w)return w;var I=document.querySelector('link[href$="leaflet.css"]');return I?I.href.substring(0,I.href.length-11-1):""}}),gh=ba.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new Do(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),hn(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Vn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var w=this._marker,I=w._map,M=this._marker.options.autoPanSpeed,X=this._marker.options.autoPanPadding,ae=tc(w._icon),ke=I.getPixelBounds(),Fe=I.getPixelOrigin(),Ke=W(ke.min._subtract(Fe).add(X),ke.max._subtract(Fe).subtract(X));if(!Ke.contains(ae)){var lt=ee((Math.max(Ke.max.x,ae.x)-Ke.max.x)/(ke.max.x-Ke.max.x)-(Math.min(Ke.min.x,ae.x)-Ke.min.x)/(ke.min.x-Ke.min.x),(Math.max(Ke.max.y,ae.y)-Ke.max.y)/(ke.max.y-Ke.max.y)-(Math.min(Ke.min.y,ae.y)-Ke.min.y)/(ke.min.y-Ke.min.y)).multiplyBy(M);I.panBy(lt,{animate:!1}),this._draggable._newPos._add(lt),this._draggable._startPos._add(lt),Kr(w._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=j(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,g)))},_onDrag:function(g){var w=this._marker,I=w._shadow,M=tc(w._icon),X=w._map.layerPointToLatLng(M);I&&Kr(I,M),w._latlng=X,g.latlng=X,g.oldLatLng=this._oldLatLng,w.fire("move",g).fire("drag",g)},_onDragEnd:function(g){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),ms=Mr.extend({options:{icon:new eu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,w){y(this,w),this._latlng=te(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var w=this._latlng;return this._latlng=te(g),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),I=g.icon.createIcon(this._icon),M=!1;I!==this._icon&&(this._icon&&this._removeIcon(),M=!0,g.title&&(I.title=g.title),I.tagName==="IMG"&&(I.alt=g.alt||"")),hn(I,w),g.keyboard&&(I.tabIndex="0",I.setAttribute("role","button")),this._icon=I,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ln(I,"focus",this._panOnFocus,this);var X=g.icon.createShadow(this._shadow),ae=!1;X!==this._shadow&&(this._removeShadow(),ae=!0),X&&(hn(X,w),X.alt=""),this._shadow=X,g.opacity<1&&this._updateOpacity(),M&&this.getPane().appendChild(this._icon),this._initInteraction(),X&&ae&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&An(this._icon,"focus",this._panOnFocus,this),un(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&un(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&Kr(this._icon,g),this._shadow&&Kr(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var w=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(hn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gh)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gh(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&Ti(this._icon,g),this._shadow&&Ti(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var w=this.options.icon.options,I=w.iconSize?ee(w.iconSize):ee(0,0),M=w.iconAnchor?ee(w.iconAnchor):ee(0,0);g.panInside(this._latlng,{paddingTopLeft:M,paddingBottomRight:I.subtract(M)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bf(g,w){return new ms(g,w)}var ro=Mr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return y(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),tu=ro.extend({options:{fill:!0,radius:10},initialize:function(g,w){y(this,w),this._latlng=te(g),this._radius=this.options.radius},setLatLng:function(g){var w=this._latlng;return this._latlng=te(g),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var w=g&&g.radius||this._radius;return ro.prototype.setStyle.call(this,g),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,w=this._radiusY||g,I=this._clickTolerance(),M=[g+I,w+I];this._pxBounds=new oe(this._point.subtract(M),this._point.add(M))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ym(g,w){return new tu(g,w)}var Ai=tu.extend({initialize:function(g,w,I){if(typeof w=="number"&&(w=s({},I,{radius:w})),y(this,w),this._latlng=te(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new Y(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:ro.prototype.setStyle,_project:function(){var g=this._latlng.lng,w=this._latlng.lat,I=this._map,M=I.options.crs;if(M.distance===ge.distance){var X=Math.PI/180,ae=this._mRadius/ge.R/X,ke=I.project([w+ae,g]),Fe=I.project([w-ae,g]),Ke=ke.add(Fe).divideBy(2),lt=I.unproject(Ke).lat,Tt=Math.acos((Math.cos(ae*X)-Math.sin(w*X)*Math.sin(lt*X))/(Math.cos(w*X)*Math.cos(lt*X)))/X;(isNaN(Tt)||Tt===0)&&(Tt=ae/Math.cos(Math.PI/180*w)),this._point=Ke.subtract(I.getPixelOrigin()),this._radius=isNaN(Tt)?0:Ke.x-I.project([lt,g-Tt]).x,this._radiusY=Ke.y-ke.y}else{var Xt=M.unproject(M.project(this._latlng).subtract([this._mRadius,0]));this._point=I.latLngToLayerPoint(this._latlng),this._radius=this._point.x-I.latLngToLayerPoint(Xt).x}this._updateBounds()}});function g1(g,w,I){return new Ai(g,w,I)}var so=ro.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,w){y(this,w),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var w=1/0,I=null,M=Nt,X,ae,ke=0,Fe=this._parts.length;ke<Fe;ke++)for(var Ke=this._parts[ke],lt=1,Tt=Ke.length;lt<Tt;lt++){X=Ke[lt-1],ae=Ke[lt];var Xt=M(g,X,ae,!0);Xt<w&&(w=Xt,I=M(g,X,ae))}return I&&(I.distance=Math.sqrt(w)),I},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return an(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,w){return w=w||this._defaultShape(),g=te(g),w.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new Y,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var w=[],I=Ot(g),M=0,X=g.length;M<X;M++)I?(w[M]=te(g[M]),this._bounds.extend(w[M])):w[M]=this._convertLatLngs(g[M]);return w},_project:function(){var g=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),w=new U(g,g);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(g,w,I){var M=g[0]instanceof J,X=g.length,ae,ke;if(M){for(ke=[],ae=0;ae<X;ae++)ke[ae]=this._map.latLngToLayerPoint(g[ae]),I.extend(ke[ae]);w.push(ke)}else for(ae=0;ae<X;ae++)this._projectLatlngs(g[ae],w,I)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,I,M,X,ae,ke,Fe,Ke;for(I=0,X=0,ae=this._rings.length;I<ae;I++)for(Ke=this._rings[I],M=0,ke=Ke.length;M<ke-1;M++)Fe=Te(Ke[M],Ke[M+1],g,M,!0),Fe&&(w[X]=w[X]||[],w[X].push(Fe[0]),(Fe[1]!==Ke[M+1]||M===ke-2)&&(w[X].push(Fe[1]),X++))}},_simplifyPoints:function(){for(var g=this._parts,w=this.options.smoothFactor,I=0,M=g.length;I<M;I++)g[I]=td(g[I],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,w){var I,M,X,ae,ke,Fe,Ke=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(I=0,ae=this._parts.length;I<ae;I++)for(Fe=this._parts[I],M=0,ke=Fe.length,X=ke-1;M<ke;X=M++)if(!(!w&&M===0)&&zf(g,Fe[X],Fe[M])<=Ke)return!0;return!1}});function Sy(g,w){return new so(g,w)}so._flat=cn;var oi=so.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Hm(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var w=so.prototype._convertLatLngs.call(this,g),I=w.length;return I>=2&&w[0]instanceof J&&w[0].equals(w[I-1])&&w.pop(),w},_setLatLngs:function(g){so.prototype._setLatLngs.call(this,g),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,w=this.options.weight,I=new U(w,w);if(g=new oe(g.min.subtract(I),g.max.add(I)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var M=0,X=this._rings.length,ae;M<X;M++)ae=Mf(this._rings[M],g,!0),ae.length&&this._parts.push(ae)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var w=!1,I,M,X,ae,ke,Fe,Ke,lt;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(ae=0,Ke=this._parts.length;ae<Ke;ae++)for(I=this._parts[ae],ke=0,lt=I.length,Fe=lt-1;ke<lt;Fe=ke++)M=I[ke],X=I[Fe],M.y>g.y!=X.y>g.y&&g.x<(X.x-M.x)*(g.y-M.y)/(X.y-M.y)+M.x&&(w=!w);return w||so.prototype._containsPoint.call(this,g,!0)}});function Wf(g,w){return new oi(g,w)}var Lo=no.extend({initialize:function(g,w){y(this,w),this._layers={},g&&this.addData(g)},addData:function(g){var w=_(g)?g:g.features,I,M,X;if(w){for(I=0,M=w.length;I<M;I++)X=w[I],(X.geometries||X.geometry||X.features||X.coordinates)&&this.addData(X);return this}var ae=this.options;if(ae.filter&&!ae.filter(g))return this;var ke=yh(g,ae);return ke?(ke.feature=Ro(g),ke.defaultOptions=ke.options,this.resetStyle(ke),ae.onEachFeature&&ae.onEachFeature(g,ke),this.addLayer(ke)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=s({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(w){this._setLayerStyle(w,g)},this)},_setLayerStyle:function(g,w){g.setStyle&&(typeof w=="function"&&(w=w(g.feature)),g.setStyle(w))}});function yh(g,w){var I=g.type==="Feature"?g.geometry:g,M=I?I.coordinates:null,X=[],ae=w&&w.pointToLayer,ke=w&&w.coordsToLatLng||ru,Fe,Ke,lt,Tt;if(!M&&!I)return null;switch(I.type){case"Point":return Fe=ke(M),nu(ae,g,Fe,w);case"MultiPoint":for(lt=0,Tt=M.length;lt<Tt;lt++)Fe=ke(M[lt]),X.push(nu(ae,g,Fe,w));return new no(X);case"LineString":case"MultiLineString":return Ke=li(M,I.type==="LineString"?0:1,ke),new so(Ke,w);case"Polygon":case"MultiPolygon":return Ke=li(M,I.type==="Polygon"?1:2,ke),new oi(Ke,w);case"GeometryCollection":for(lt=0,Tt=I.geometries.length;lt<Tt;lt++){var Xt=yh({geometry:I.geometries[lt],type:"Feature",properties:g.properties},w);Xt&&X.push(Xt)}return new no(X);case"FeatureCollection":for(lt=0,Tt=I.features.length;lt<Tt;lt++){var _n=yh(I.features[lt],w);_n&&X.push(_n)}return new no(X);default:throw new Error("Invalid GeoJSON object.")}}function nu(g,w,I,M){return g?g(w,I):new ms(I,M&&M.markersInheritOptions&&M)}function ru(g){return new J(g[1],g[0],g[2])}function li(g,w,I){for(var M=[],X=0,ae=g.length,ke;X<ae;X++)ke=w?li(g[X],w-1,I):(I||ru)(g[X]),M.push(ke);return M}function ci(g,w){return g=te(g),g.alt!==void 0?[h(g.lng,w),h(g.lat,w),h(g.alt,w)]:[h(g.lng,w),h(g.lat,w)]}function vl(g,w,I,M){for(var X=[],ae=0,ke=g.length;ae<ke;ae++)X.push(w?vl(g[ae],Ot(g[ae])?0:w-1,I,M):ci(g[ae],M));return!w&&I&&X.length>0&&X.push(X[0].slice()),X}function wa(g,w){return g.feature?s({},g.feature,{geometry:w}):Ro(w)}function Ro(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var rd={toGeoJSON:function(g){return wa(this,{type:"Point",coordinates:ci(this.getLatLng(),g)})}};ms.include(rd),Ai.include(rd),tu.include(rd),so.include({toGeoJSON:function(g){var w=!Ot(this._latlngs),I=vl(this._latlngs,w?1:0,!1,g);return wa(this,{type:(w?"Multi":"")+"LineString",coordinates:I})}}),oi.include({toGeoJSON:function(g){var w=!Ot(this._latlngs),I=w&&!Ot(this._latlngs[0]),M=vl(this._latlngs,I?2:w?1:0,!0,g);return w||(M=[M]),wa(this,{type:(I?"Multi":"")+"Polygon",coordinates:M})}}),ea.include({toMultiPoint:function(g){var w=[];return this.eachLayer(function(I){w.push(I.toGeoJSON(g).geometry.coordinates)}),wa(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(g){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(g);var I=w==="GeometryCollection",M=[];return this.eachLayer(function(X){if(X.toGeoJSON){var ae=X.toGeoJSON(g);if(I)M.push(ae.geometry);else{var ke=Ro(ae);ke.type==="FeatureCollection"?M.push.apply(M,ke.features):M.push(ke)}}}),I?wa(this,{geometries:M,type:"GeometryCollection"}):{type:"FeatureCollection",features:M}}});function nc(g,w){return new Lo(g,w)}var is=nc,sd=Mr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,w,I){this._url=g,this._bounds=Q(w),y(this,I)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(hn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){un(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&Kc(this._image),this},bringToBack:function(){return this._map&&Xc(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=Q(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",w=this._image=g?this._url:Ln("img");if(hn(w,"leaflet-image-layer"),this._zoomAnimated&&hn(w,"leaflet-zoom-animated"),this.options.className&&hn(w,this.options.className),w.onselectstart=d,w.onmousemove=d,w.onload=a(this.fire,this,"load"),w.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(g){var w=this._map.getZoomScale(g.zoom),I=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;ec(this._image,I,w)},_reset:function(){var g=this._image,w=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),I=w.getSize();Kr(g,w.min),g.style.width=I.x+"px",g.style.height=I.y+"px"},_updateOpacity:function(){Ti(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),ta=function(g,w,I){return new sd(g,w,I)},io=sd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",w=this._image=g?this._url:Ln("video");if(hn(w,"leaflet-image-layer"),this._zoomAnimated&&hn(w,"leaflet-zoom-animated"),this.options.className&&hn(w,this.options.className),w.onselectstart=d,w.onmousemove=d,w.onloadeddata=a(this.fire,this,"load"),g){for(var I=w.getElementsByTagName("source"),M=[],X=0;X<I.length;X++)M.push(I[X].src);this._url=I.length>0?M:[w.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var ae=0;ae<this._url.length;ae++){var ke=Ln("source");ke.src=this._url[ae],w.appendChild(ke)}}});function Uf(g,w,I){return new io(g,w,I)}var Zm=sd.extend({_initImage:function(){var g=this._image=this._url;hn(g,"leaflet-image-layer"),this._zoomAnimated&&hn(g,"leaflet-zoom-animated"),this.options.className&&hn(g,this.options.className),g.onselectstart=d,g.onmousemove=d}});function Jm(g,w,I){return new Zm(g,w,I)}var Ei=Mr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,w){g&&(g instanceof J||_(g))?(this._latlng=te(g),y(this,w)):(y(this,g),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&Ti(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&Ti(this._container,1),this.bringToFront(),this.options.interactive&&(hn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(Ti(this._container,0),this._removeTimeout=setTimeout(a(un,void 0,this._container),200)):un(this._container),this.options.interactive&&(Vn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=te(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kc(this._container),this},bringToBack:function(){return this._map&&Xc(this._container),this},_prepareOpen:function(g){var w=this._source;if(!w._map)return!1;if(w instanceof no){w=null;var I=this._source._layers;for(var M in I)if(I[M]._map){w=I[M];break}if(!w)return!1;this._source=w}if(!g)if(w.getCenter)g=w.getCenter();else if(w.getLatLng)g=w.getLatLng();else if(w.getBounds)g=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")g.innerHTML=w;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),w=ee(this.options.offset),I=this._getAnchor();this._zoomAnimated?Kr(this._container,g.add(I)):w=w.add(g).add(I);var M=this._containerBottom=-w.y,X=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=M+"px",this._container.style.left=X+"px"}},_getAnchor:function(){return[0,0]}});Cn.include({_initOverlay:function(g,w,I,M){var X=w;return X instanceof g||(X=new g(M).setContent(w)),I&&X.setLatLng(I),X}}),Mr.include({_initOverlay:function(g,w,I,M){var X=I;return X instanceof g?(y(X,M),X._source=this):(X=w&&!M?w:new g(M,this),X.setContent(I)),X}});var rc=Ei.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,Ei.prototype.openOn.call(this,g)},onAdd:function(g){Ei.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ro||this._source.on("preclick",Jc))},onRemove:function(g){Ei.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ro||this._source.off("preclick",Jc))},getEvents:function(){var g=Ei.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",w=this._container=Ln("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),I=this._wrapper=Ln("div",g+"-content-wrapper",w);if(this._contentNode=Ln("div",g+"-content",I),fh(w),zm(this._contentNode),ln(w,"contextmenu",Jc),this._tipContainer=Ln("div",g+"-tip-container",w),this._tip=Ln("div",g+"-tip",this._tipContainer),this.options.closeButton){var M=this._closeButton=Ln("a",g+"-close-button",w);M.setAttribute("role","button"),M.setAttribute("aria-label","Close popup"),M.href="#close",M.innerHTML='<span aria-hidden="true">&#215;</span>',ln(M,"click",function(X){ss(X),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,w=g.style;w.width="",w.whiteSpace="nowrap";var I=g.offsetWidth;I=Math.min(I,this.options.maxWidth),I=Math.max(I,this.options.minWidth),w.width=I+1+"px",w.whiteSpace="",w.height="";var M=g.offsetHeight,X=this.options.maxHeight,ae="leaflet-popup-scrolled";X&&M>X?(w.height=X+"px",hn(g,ae)):Vn(g,ae),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var w=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),I=this._getAnchor();Kr(this._container,w.add(I))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,w=parseInt(Ql(this._container,"marginBottom"),10)||0,I=this._container.offsetHeight+w,M=this._containerWidth,X=new U(this._containerLeft,-I-this._containerBottom);X._add(tc(this._container));var ae=g.layerPointToContainerPoint(X),ke=ee(this.options.autoPanPadding),Fe=ee(this.options.autoPanPaddingTopLeft||ke),Ke=ee(this.options.autoPanPaddingBottomRight||ke),lt=g.getSize(),Tt=0,Xt=0;ae.x+M+Ke.x>lt.x&&(Tt=ae.x+M-lt.x+Ke.x),ae.x-Tt-Fe.x<0&&(Tt=ae.x-Fe.x),ae.y+I+Ke.y>lt.y&&(Xt=ae.y+I-lt.y+Ke.y),ae.y-Xt-Fe.y<0&&(Xt=ae.y-Fe.y),(Tt||Xt)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([Tt,Xt]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),id=function(g,w){return new rc(g,w)};Cn.mergeOptions({closePopupOnClick:!0}),Cn.include({openPopup:function(g,w,I){return this._initOverlay(rc,g,w,I).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),Mr.include({bindPopup:function(g,w){return this._popup=this._initOverlay(rc,this._popup,g,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof no||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){Qa(g);var w=g.layer||g.target;if(this._popup._source===w&&!(w instanceof ro)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=w,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var sc=Ei.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){Ei.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){Ei.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=Ei.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",w=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ln("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var w,I,M=this._map,X=this._container,ae=M.latLngToContainerPoint(M.getCenter()),ke=M.layerPointToContainerPoint(g),Fe=this.options.direction,Ke=X.offsetWidth,lt=X.offsetHeight,Tt=ee(this.options.offset),Xt=this._getAnchor();Fe==="top"?(w=Ke/2,I=lt):Fe==="bottom"?(w=Ke/2,I=0):Fe==="center"?(w=Ke/2,I=lt/2):Fe==="right"?(w=0,I=lt/2):Fe==="left"?(w=Ke,I=lt/2):ke.x<ae.x?(Fe="right",w=0,I=lt/2):(Fe="left",w=Ke+(Tt.x+Xt.x)*2,I=lt/2),g=g.subtract(ee(w,I,!0)).add(Tt).add(Xt),Vn(X,"leaflet-tooltip-right"),Vn(X,"leaflet-tooltip-left"),Vn(X,"leaflet-tooltip-top"),Vn(X,"leaflet-tooltip-bottom"),hn(X,"leaflet-tooltip-"+Fe),Kr(X,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&Ti(this._container,g)},_animateZoom:function(g){var w=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(w)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Vf=function(g,w){return new sc(g,w)};Cn.include({openTooltip:function(g,w,I){return this._initOverlay(sc,g,w,I).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),Mr.include({bindTooltip:function(g,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sc,this._tooltip,g,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var w=g?"off":"on",I={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?I.add=this._openTooltip:(I.mouseover=this._openTooltip,I.mouseout=this.closeTooltip,I.click=this._openTooltip,this._map?this._addFocusListeners():I.add=this._addFocusListeners),this._tooltip.options.sticky&&(I.mousemove=this._moveTooltip),this[w](I),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof no||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var w=typeof g.getElement=="function"&&g.getElement();w&&(ln(w,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),ln(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var w=typeof g.getElement=="function"&&g.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(g)});return}this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0)}},_moveTooltip:function(g){var w=g.latlng,I,M;this._tooltip.options.sticky&&g.originalEvent&&(I=this._map.mouseEventToContainerPoint(g.originalEvent),M=this._map.containerPointToLayerPoint(I),w=this._map.layerPointToLatLng(M)),this._tooltip.setLatLng(w)}});var ad=yl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var w=g&&g.tagName==="DIV"?g:document.createElement("div"),I=this.options;if(I.html instanceof Element?(lh(w),w.appendChild(I.html)):w.innerHTML=I.html!==!1?I.html:"",I.bgPos){var M=ee(I.bgPos);w.style.backgroundPosition=-M.x+"px "+-M.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function od(g){return new ad(g)}yl.Default=eu;var su=Mr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:St.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){y(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),un(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kc(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Xc(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof U?g:new U(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var w=this.getPane().children,I=-g(-1/0,1/0),M=0,X=w.length,ae;M<X;M++)ae=w[M].style.zIndex,w[M]!==this._container&&ae&&(I=g(I,+ae));isFinite(I)&&(this.options.zIndex=I+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!St.ielt9){Ti(this._container,this.options.opacity);var g=+new Date,w=!1,I=!1;for(var M in this._tiles){var X=this._tiles[M];if(!(!X.current||!X.loaded)){var ae=Math.min(1,(g-X.loaded)/200);Ti(X.el,ae),ae<1?w=!0:(X.active?I=!0:this._onOpaqueTile(X),X.active=!0)}}I&&!this._noPrune&&this._pruneTiles(),w&&(O(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Ln("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,w=this.options.maxZoom;if(g!==void 0){for(var I in this._levels)I=Number(I),this._levels[I].el.children.length||I===g?(this._levels[I].el.style.zIndex=w-Math.abs(g-I),this._onUpdateLevel(I)):(un(this._levels[I].el),this._removeTilesAtZoom(I),this._onRemoveLevel(I),delete this._levels[I]);var M=this._levels[g],X=this._map;return M||(M=this._levels[g]={},M.el=Ln("div","leaflet-tile-container leaflet-zoom-animated",this._container),M.el.style.zIndex=w,M.origin=X.project(X.unproject(X.getPixelOrigin()),g).round(),M.zoom=g,this._setZoomTransform(M,X.getCenter(),X.getZoom()),d(M.el.offsetWidth),this._onCreateLevel(M)),this._level=M,M}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var g,w,I=this._map.getZoom();if(I>this.options.maxZoom||I<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)w=this._tiles[g],w.retain=w.current;for(g in this._tiles)if(w=this._tiles[g],w.current&&!w.active){var M=w.coords;this._retainParent(M.x,M.y,M.z,M.z-5)||this._retainChildren(M.x,M.y,M.z,M.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var w in this._tiles)this._tiles[w].coords.z===g&&this._removeTile(w)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)un(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,w,I,M){var X=Math.floor(g/2),ae=Math.floor(w/2),ke=I-1,Fe=new U(+X,+ae);Fe.z=+ke;var Ke=this._tileCoordsToKey(Fe),lt=this._tiles[Ke];return lt&&lt.active?(lt.retain=!0,!0):(lt&&lt.loaded&&(lt.retain=!0),ke>M?this._retainParent(X,ae,ke,M):!1)},_retainChildren:function(g,w,I,M){for(var X=2*g;X<2*g+2;X++)for(var ae=2*w;ae<2*w+2;ae++){var ke=new U(X,ae);ke.z=I+1;var Fe=this._tileCoordsToKey(ke),Ke=this._tiles[Fe];if(Ke&&Ke.active){Ke.retain=!0;continue}else Ke&&Ke.loaded&&(Ke.retain=!0);I+1<M&&this._retainChildren(X,ae,I+1,M)}},_resetView:function(g){var w=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var w=this.options;return w.minNativeZoom!==void 0&&g<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<g?w.maxNativeZoom:g},_setView:function(g,w,I,M){var X=Math.round(w);this.options.maxZoom!==void 0&&X>this.options.maxZoom||this.options.minZoom!==void 0&&X<this.options.minZoom?X=void 0:X=this._clampZoom(X);var ae=this.options.updateWhenZooming&&X!==this._tileZoom;(!M||ae)&&(this._tileZoom=X,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),X!==void 0&&this._update(g),I||this._pruneTiles(),this._noPrune=!!I),this._setZoomTransforms(g,w)},_setZoomTransforms:function(g,w){for(var I in this._levels)this._setZoomTransform(this._levels[I],g,w)},_setZoomTransform:function(g,w,I){var M=this._map.getZoomScale(I,g.zoom),X=g.origin.multiplyBy(M).subtract(this._map._getNewPixelOrigin(w,I)).round();St.any3d?ec(g.el,X,M):Kr(g.el,X)},_resetGrid:function(){var g=this._map,w=g.options.crs,I=this._tileSize=this.getTileSize(),M=this._tileZoom,X=this._map.getPixelWorldBounds(this._tileZoom);X&&(this._globalTileRange=this._pxBoundsToTileRange(X)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,w.wrapLng[0]],M).x/I.x),Math.ceil(g.project([0,w.wrapLng[1]],M).x/I.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([w.wrapLat[0],0],M).y/I.x),Math.ceil(g.project([w.wrapLat[1],0],M).y/I.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var w=this._map,I=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),M=w.getZoomScale(I,this._tileZoom),X=w.project(g,this._tileZoom).floor(),ae=w.getSize().divideBy(M*2);return new oe(X.subtract(ae),X.add(ae))},_update:function(g){var w=this._map;if(w){var I=this._clampZoom(w.getZoom());if(g===void 0&&(g=w.getCenter()),this._tileZoom!==void 0){var M=this._getTiledPixelBounds(g),X=this._pxBoundsToTileRange(M),ae=X.getCenter(),ke=[],Fe=this.options.keepBuffer,Ke=new oe(X.getBottomLeft().subtract([Fe,-Fe]),X.getTopRight().add([Fe,-Fe]));if(!(isFinite(X.min.x)&&isFinite(X.min.y)&&isFinite(X.max.x)&&isFinite(X.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var lt in this._tiles){var Tt=this._tiles[lt].coords;(Tt.z!==this._tileZoom||!Ke.contains(new U(Tt.x,Tt.y)))&&(this._tiles[lt].current=!1)}if(Math.abs(I-this._tileZoom)>1){this._setView(g,I);return}for(var Xt=X.min.y;Xt<=X.max.y;Xt++)for(var _n=X.min.x;_n<=X.max.x;_n++){var na=new U(_n,Xt);if(na.z=this._tileZoom,!!this._isValidTile(na)){var Ps=this._tiles[this._tileCoordsToKey(na)];Ps?Ps.current=!0:ke.push(na)}}if(ke.sort(function(ka,Gf){return ka.distanceTo(ae)-Gf.distanceTo(ae)}),ke.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fo=document.createDocumentFragment();for(_n=0;_n<ke.length;_n++)this._addTile(ke[_n],Fo);this._level.el.appendChild(Fo)}}}},_isValidTile:function(g){var w=this._map.options.crs;if(!w.infinite){var I=this._globalTileRange;if(!w.wrapLng&&(g.x<I.min.x||g.x>I.max.x)||!w.wrapLat&&(g.y<I.min.y||g.y>I.max.y))return!1}if(!this.options.bounds)return!0;var M=this._tileCoordsToBounds(g);return Q(this.options.bounds).overlaps(M)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var w=this._map,I=this.getTileSize(),M=g.scaleBy(I),X=M.add(I),ae=w.unproject(M,g.z),ke=w.unproject(X,g.z);return[ae,ke]},_tileCoordsToBounds:function(g){var w=this._tileCoordsToNwSe(g),I=new Y(w[0],w[1]);return this.options.noWrap||(I=this._map.wrapLatLngBounds(I)),I},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var w=g.split(":"),I=new U(+w[0],+w[1]);return I.z=+w[2],I},_removeTile:function(g){var w=this._tiles[g];w&&(un(w.el),delete this._tiles[g],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){hn(g,"leaflet-tile");var w=this.getTileSize();g.style.width=w.x+"px",g.style.height=w.y+"px",g.onselectstart=d,g.onmousemove=d,St.ielt9&&this.options.opacity<1&&Ti(g,this.options.opacity)},_addTile:function(g,w){var I=this._getTilePos(g),M=this._tileCoordsToKey(g),X=this.createTile(this._wrapCoords(g),a(this._tileReady,this,g));this._initTile(X),this.createTile.length<2&&j(a(this._tileReady,this,g,null,X)),Kr(X,I),this._tiles[M]={el:X,coords:g,current:!0},w.appendChild(X),this.fire("tileloadstart",{tile:X,coords:g})},_tileReady:function(g,w,I){w&&this.fire("tileerror",{error:w,tile:I,coords:g});var M=this._tileCoordsToKey(g);I=this._tiles[M],I&&(I.loaded=+new Date,this._map._fadeAnimated?(Ti(I.el,0),O(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(I.active=!0,this._pruneTiles()),w||(hn(I.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:I.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),St.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var w=new U(this._wrapX?u(g.x,this._wrapX):g.x,this._wrapY?u(g.y,this._wrapY):g.y);return w.z=g.z,w},_pxBoundsToTileRange:function(g){var w=this.getTileSize();return new oe(g.min.unscaleBy(w).floor(),g.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function Mo(g){return new su(g)}var ui=su.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,w){this._url=g,w=y(this,w),w.detectRetina&&St.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,w){return this._url===g&&w===void 0&&(w=!0),this._url=g,w||this.redraw(),this},createTile:function(g,w){var I=document.createElement("img");return ln(I,"load",a(this._tileOnLoad,this,w,I)),ln(I,"error",a(this._tileOnError,this,w,I)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(I.referrerPolicy=this.options.referrerPolicy),I.alt="",I.src=this.getTileUrl(g),I},getTileUrl:function(g){var w={r:St.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var I=this._globalTileRange.max.y-g.y;this.options.tms&&(w.y=I),w["-y"]=I}return b(this._url,s(w,this.options))},_tileOnLoad:function(g,w){St.ielt9?setTimeout(a(g,this,null,w),0):g(null,w)},_tileOnError:function(g,w,I){var M=this.options.errorTileUrl;M&&w.getAttribute("src")!==M&&(w.src=M),g(I,w)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,w=this.options.maxZoom,I=this.options.zoomReverse,M=this.options.zoomOffset;return I&&(g=w-g),g+M},_getSubdomain:function(g){var w=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var g,w;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(w=this._tiles[g].el,w.onload=d,w.onerror=d,!w.complete)){w.src=N;var I=this._tiles[g].coords;un(w),delete this._tiles[g],this.fire("tileabort",{tile:w,coords:I})}},_removeTile:function(g){var w=this._tiles[g];if(w)return w.el.setAttribute("src",N),su.prototype._removeTile.call(this,g)},_tileReady:function(g,w,I){if(!(!this._map||I&&I.getAttribute("src")===N))return su.prototype._tileReady.call(this,g,w,I)}});function rr(g,w){return new ui(g,w)}var sr=ui.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,w){this._url=g;var I=s({},this.defaultWmsParams);for(var M in w)M in this.options||(I[M]=w[M]);w=y(this,w);var X=w.detectRetina&&St.retina?2:1,ae=this.getTileSize();I.width=ae.x*X,I.height=ae.y*X,this.wmsParams=I},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,ui.prototype.onAdd.call(this,g)},getTileUrl:function(g){var w=this._tileCoordsToNwSe(g),I=this._crs,M=W(I.project(w[0]),I.project(w[1])),X=M.min,ae=M.max,ke=(this._wmsVersion>=1.3&&this._crs===Es?[X.y,X.x,ae.y,ae.x]:[X.x,X.y,ae.x,ae.y]).join(","),Fe=ui.prototype.getTileUrl.call(this,g);return Fe+v(this.wmsParams,Fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ke},setParams:function(g,w){return s(this.wmsParams,g),w||this.redraw(),this}});function as(g,w){return new sr(g,w)}ui.WMS=sr,rr.wms=as;var ir=Mr.extend({options:{padding:.1},initialize:function(g){y(this,g),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),hn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,w){var I=this._map.getZoomScale(w,this._zoom),M=this._map.getSize().multiplyBy(.5+this.options.padding),X=this._map.project(this._center,w),ae=M.multiplyBy(-I).add(X).subtract(this._map._getNewPixelOrigin(g,w));St.any3d?ec(this._container,ae,I):Kr(this._container,ae)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,w=this._map.getSize(),I=this._map.containerPointToLayerPoint(w.multiplyBy(-g)).round();this._bounds=new oe(I,I.add(w.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ic=ir.extend({options:{tolerance:0},getEvents:function(){var g=ir.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");ln(g,"mousemove",this._onMouseMove,this),ln(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ln(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,un(this._container),An(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var w in this._layers)g=this._layers[w],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ir.prototype._update.call(this);var g=this._bounds,w=this._container,I=g.getSize(),M=St.retina?2:1;Kr(w,g.min),w.width=M*I.x,w.height=M*I.y,w.style.width=I.x+"px",w.style.height=I.y+"px",St.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[l(g)]=g;var w=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var w=g._order,I=w.next,M=w.prev;I?I.prev=M:this._drawLast=M,M?M.next=I:this._drawFirst=I,delete g._order,delete this._layers[l(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var w=g.options.dashArray.split(/[, ]+/),I=[],M,X;for(X=0;X<w.length;X++){if(M=Number(w[X]),isNaN(M))return;I.push(M)}g.options._dashArray=I}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var w=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(g._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(g._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var w=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,w=this._redrawBounds;if(this._ctx.save(),w){var I=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,I.x,I.y),this._ctx.clip()}this._drawing=!0;for(var M=this._drawFirst;M;M=M.next)g=M.layer,(!w||g._pxBounds&&g._pxBounds.intersects(w))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,w){if(this._drawing){var I,M,X,ae,ke=g._parts,Fe=ke.length,Ke=this._ctx;if(Fe){for(Ke.beginPath(),I=0;I<Fe;I++){for(M=0,X=ke[I].length;M<X;M++)ae=ke[I][M],Ke[M?"lineTo":"moveTo"](ae.x,ae.y);w&&Ke.closePath()}this._fillStroke(Ke,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var w=g._point,I=this._ctx,M=Math.max(Math.round(g._radius),1),X=(Math.max(Math.round(g._radiusY),1)||M)/M;X!==1&&(I.save(),I.scale(1,X)),I.beginPath(),I.arc(w.x,w.y/X,M,0,Math.PI*2,!1),X!==1&&I.restore(),this._fillStroke(I,g)}},_fillStroke:function(g,w){var I=w.options;I.fill&&(g.globalAlpha=I.fillOpacity,g.fillStyle=I.fillColor||I.color,g.fill(I.fillRule||"evenodd")),I.stroke&&I.weight!==0&&(g.setLineDash&&g.setLineDash(w.options&&w.options._dashArray||[]),g.globalAlpha=I.opacity,g.lineWidth=I.weight,g.strokeStyle=I.color,g.lineCap=I.lineCap,g.lineJoin=I.lineJoin,g.stroke())},_onClick:function(g){for(var w=this._map.mouseEventToLayerPoint(g),I,M,X=this._drawFirst;X;X=X.next)I=X.layer,I.options.interactive&&I._containsPoint(w)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(I))&&(M=I);this._fireEvent(M?[M]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,w)}},_handleMouseOut:function(g){var w=this._hoveredLayer;w&&(Vn(this._container,"leaflet-interactive"),this._fireEvent([w],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,w){if(!this._mouseHoverThrottled){for(var I,M,X=this._drawFirst;X;X=X.next)I=X.layer,I.options.interactive&&I._containsPoint(w)&&(M=I);M!==this._hoveredLayer&&(this._handleMouseOut(g),M&&(hn(this._container,"leaflet-interactive"),this._fireEvent([M],g,"mouseover"),this._hoveredLayer=M)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,w,I){this._map._fireDOMEvent(w,I||w.type,g)},_bringToFront:function(g){var w=g._order;if(w){var I=w.next,M=w.prev;if(I)I.prev=M;else return;M?M.next=I:I&&(this._drawFirst=I),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(g)}},_bringToBack:function(g){var w=g._order;if(w){var I=w.next,M=w.prev;if(M)M.next=I;else return;I?I.prev=M:M&&(this._drawLast=M),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(g)}}});function Hf(g){return St.canvas?new ic(g):null}var ac=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ny={_initContainer:function(){this._container=Ln("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ir.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var w=g._container=ac("shape");hn(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",g._path=ac("path"),w.appendChild(g._path),this._updateStyle(g),this._layers[l(g)]=g},_addPath:function(g){var w=g._container;this._container.appendChild(w),g.options.interactive&&g.addInteractiveTarget(w)},_removePath:function(g){var w=g._container;un(w),g.removeInteractiveTarget(w),delete this._layers[l(g)]},_updateStyle:function(g){var w=g._stroke,I=g._fill,M=g.options,X=g._container;X.stroked=!!M.stroke,X.filled=!!M.fill,M.stroke?(w||(w=g._stroke=ac("stroke")),X.appendChild(w),w.weight=M.weight+"px",w.color=M.color,w.opacity=M.opacity,M.dashArray?w.dashStyle=_(M.dashArray)?M.dashArray.join(" "):M.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=M.lineCap.replace("butt","flat"),w.joinstyle=M.lineJoin):w&&(X.removeChild(w),g._stroke=null),M.fill?(I||(I=g._fill=ac("fill")),X.appendChild(I),I.color=M.fillColor||M.color,I.opacity=M.fillOpacity):I&&(X.removeChild(I),g._fill=null)},_updateCircle:function(g){var w=g._point.round(),I=Math.round(g._radius),M=Math.round(g._radiusY||I);this._setPath(g,g._empty()?"M0 0":"AL "+w.x+","+w.y+" "+I+","+M+" 0,"+65535*360)},_setPath:function(g,w){g._path.v=w},_bringToFront:function(g){Kc(g._container)},_bringToBack:function(g){Xc(g._container)}},qf=St.vml?ac:Ae,ld=ir.extend({_initContainer:function(){this._container=qf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){un(this._container),An(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ir.prototype._update.call(this);var g=this._bounds,w=g.getSize(),I=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,I.setAttribute("width",w.x),I.setAttribute("height",w.y)),Kr(I,g.min),I.setAttribute("viewBox",[g.min.x,g.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(g){var w=g._path=qf("path");g.options.className&&hn(w,g.options.className),g.options.interactive&&hn(w,"leaflet-interactive"),this._updateStyle(g),this._layers[l(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){un(g._path),g.removeInteractiveTarget(g._path),delete this._layers[l(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var w=g._path,I=g.options;w&&(I.stroke?(w.setAttribute("stroke",I.color),w.setAttribute("stroke-opacity",I.opacity),w.setAttribute("stroke-width",I.weight),w.setAttribute("stroke-linecap",I.lineCap),w.setAttribute("stroke-linejoin",I.lineJoin),I.dashArray?w.setAttribute("stroke-dasharray",I.dashArray):w.removeAttribute("stroke-dasharray"),I.dashOffset?w.setAttribute("stroke-dashoffset",I.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),I.fill?(w.setAttribute("fill",I.fillColor||I.color),w.setAttribute("fill-opacity",I.fillOpacity),w.setAttribute("fill-rule",I.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(g,w){this._setPath(g,he(g._parts,w))},_updateCircle:function(g){var w=g._point,I=Math.max(Math.round(g._radius),1),M=Math.max(Math.round(g._radiusY),1)||I,X="a"+I+","+M+" 0 1,0 ",ae=g._empty()?"M0 0":"M"+(w.x-I)+","+w.y+X+I*2+",0 "+X+-I*2+",0 ";this._setPath(g,ae)},_setPath:function(g,w){g._path.setAttribute("d",w)},_bringToFront:function(g){Kc(g._path)},_bringToBack:function(g){Xc(g._path)}});St.vml&&ld.include(Ny);function _a(g){return St.svg||St.vml?new ld(g):null}Cn.include({getRenderer:function(g){var w=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var w=this._paneRenderers[g];return w===void 0&&(w=this._createRenderer({pane:g}),this._paneRenderers[g]=w),w},_createRenderer:function(g){return this.options.preferCanvas&&Hf(g)||_a(g)}});var ao=oi.extend({initialize:function(g,w){oi.prototype.initialize.call(this,this._boundsToLatLngs(g),w)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=Q(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function Cy(g,w){return new ao(g,w)}ld.create=qf,ld.pointsToPath=he,Lo.geometryToLayer=yh,Lo.coordsToLatLng=ru,Lo.coordsToLatLngs=li,Lo.latLngToCoords=ci,Lo.latLngsToCoords=vl,Lo.getFeature=wa,Lo.asFeature=Ro,Cn.mergeOptions({boxZoom:!0});var Qm=ba.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){ln(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){An(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){un(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),uh(),Mm(),this._startPoint=this._map.mouseEventToContainerPoint(g),ln(document,{contextmenu:Qa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=Ln("div","leaflet-zoom-box",this._container),hn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var w=new oe(this._point,this._startPoint),I=w.getSize();Kr(this._box,w.min),this._box.style.width=I.x+"px",this._box.style.height=I.y+"px"},_finish:function(){this._moved&&(un(this._box),Vn(this._container,"leaflet-crosshair")),Yc(),ml(),An(document,{contextmenu:Qa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var w=new Y(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Cn.addInitHook("addHandler","boxZoom",Qm),Cn.mergeOptions({doubleClickZoom:!0});var y1=ba.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var w=this._map,I=w.getZoom(),M=w.options.zoomDelta,X=g.originalEvent.shiftKey?I-M:I+M;w.options.doubleClickZoom==="center"?w.setZoom(X):w.setZoomAround(g.containerPoint,X)}});Cn.addInitHook("addHandler","doubleClickZoom",y1),Cn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eg=ba.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new Do(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}hn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Vn(this._map._container,"leaflet-grab"),Vn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=Q(this._map.options.maxBounds);this._offsetLimit=W(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var w=this._lastTime=+new Date,I=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(I),this._times.push(w),this._prunePositions(w)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,w){return g-(g-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;g.x<w.min.x&&(g.x=this._viscousLimit(g.x,w.min.x)),g.y<w.min.y&&(g.y=this._viscousLimit(g.y,w.min.y)),g.x>w.max.x&&(g.x=this._viscousLimit(g.x,w.max.x)),g.y>w.max.y&&(g.y=this._viscousLimit(g.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,w=Math.round(g/2),I=this._initialWorldOffset,M=this._draggable._newPos.x,X=(M-w+I)%g+w-I,ae=(M+w+I)%g-w-I,ke=Math.abs(X+I)<Math.abs(ae+I)?X:ae;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ke},_onDragEnd:function(g){var w=this._map,I=w.options,M=!I.inertia||g.noInertia||this._times.length<2;if(w.fire("dragend",g),M)w.fire("moveend");else{this._prunePositions(+new Date);var X=this._lastPos.subtract(this._positions[0]),ae=(this._lastTime-this._times[0])/1e3,ke=I.easeLinearity,Fe=X.multiplyBy(ke/ae),Ke=Fe.distanceTo([0,0]),lt=Math.min(I.inertiaMaxSpeed,Ke),Tt=Fe.multiplyBy(lt/Ke),Xt=lt/(I.inertiaDeceleration*ke),_n=Tt.multiplyBy(-Xt/2).round();!_n.x&&!_n.y?w.fire("moveend"):(_n=w._limitOffset(_n,w.options.maxBounds),j(function(){w.panBy(_n,{duration:Xt,easeLinearity:ke,noMoveStart:!0,animate:!0})}))}}});Cn.addInitHook("addHandler","dragging",eg),Cn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tg=ba.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),ln(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),An(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,w=document.documentElement,I=g.scrollTop||w.scrollTop,M=g.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(M,I)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var w=this._panKeys={},I=this.keyCodes,M,X;for(M=0,X=I.left.length;M<X;M++)w[I.left[M]]=[-1*g,0];for(M=0,X=I.right.length;M<X;M++)w[I.right[M]]=[g,0];for(M=0,X=I.down.length;M<X;M++)w[I.down[M]]=[0,g];for(M=0,X=I.up.length;M<X;M++)w[I.up[M]]=[0,-1*g]},_setZoomDelta:function(g){var w=this._zoomKeys={},I=this.keyCodes,M,X;for(M=0,X=I.zoomIn.length;M<X;M++)w[I.zoomIn[M]]=g;for(M=0,X=I.zoomOut.length;M<X;M++)w[I.zoomOut[M]]=-g},_addHooks:function(){ln(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){An(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var w=g.keyCode,I=this._map,M;if(w in this._panKeys){if(!I._panAnim||!I._panAnim._inProgress)if(M=this._panKeys[w],g.shiftKey&&(M=ee(M).multiplyBy(3)),I.options.maxBounds&&(M=I._limitOffset(ee(M),I.options.maxBounds)),I.options.worldCopyJump){var X=I.wrapLatLng(I.unproject(I.project(I.getCenter()).add(M)));I.panTo(X)}else I.panBy(M)}else if(w in this._zoomKeys)I.setZoom(I.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&I._popup&&I._popup.options.closeOnEscapeKey)I.closePopup();else return;Qa(g)}}});Cn.addInitHook("addHandler","keyboard",tg),Cn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ty=ba.extend({addHooks:function(){ln(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){An(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var w=Lf(g),I=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var M=Math.max(I-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),M),Qa(g)},_performZoom:function(){var g=this._map,w=g.getZoom(),I=this._map.options.zoomSnap||0;g._stop();var M=this._delta/(this._map.options.wheelPxPerZoomLevel*4),X=4*Math.log(2/(1+Math.exp(-Math.abs(M))))/Math.LN2,ae=I?Math.ceil(X/I)*I:X,ke=g._limitZoom(w+(this._delta>0?ae:-ae))-w;this._delta=0,this._startTime=null,ke&&(g.options.scrollWheelZoom==="center"?g.setZoom(w+ke):g.setZoomAround(this._lastMousePos,w+ke))}});Cn.addInitHook("addHandler","scrollWheelZoom",Ty);var IS=600;Cn.mergeOptions({tapHold:St.touchNative&&St.safari&&St.mobile,tapTolerance:15});var Iy=ba.extend({addHooks:function(){ln(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){An(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var w=g.touches[0];this._startPos=this._newPos=new U(w.clientX,w.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ln(document,"touchend",ss),ln(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),IS),ln(document,"touchend touchcancel contextmenu",this._cancel,this),ln(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){An(document,"touchend",ss),An(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),An(document,"touchend touchcancel contextmenu",this._cancel,this),An(document,"touchmove",this._onMove,this)},_onMove:function(g){var w=g.touches[0];this._newPos=new U(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,w){var I=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});I._simulated=!0,w.target.dispatchEvent(I)}});Cn.addInitHook("addHandler","tapHold",Iy),Cn.mergeOptions({touchZoom:St.touch,bounceAtZoomLimits:!0});var Ay=ba.extend({addHooks:function(){hn(this._map._container,"leaflet-touch-zoom"),ln(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Vn(this._map._container,"leaflet-touch-zoom"),An(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var w=this._map;if(!(!g.touches||g.touches.length!==2||w._animatingZoom||this._zooming)){var I=w.mouseEventToContainerPoint(g.touches[0]),M=w.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(I.add(M)._divideBy(2))),this._startDist=I.distanceTo(M),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),ln(document,"touchmove",this._onTouchMove,this),ln(document,"touchend touchcancel",this._onTouchEnd,this),ss(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var w=this._map,I=w.mouseEventToContainerPoint(g.touches[0]),M=w.mouseEventToContainerPoint(g.touches[1]),X=I.distanceTo(M)/this._startDist;if(this._zoom=w.getScaleZoom(X,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&X<1||this._zoom>w.getMaxZoom()&&X>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,X===1)return}else{var ae=I._add(M)._divideBy(2)._subtract(this._centerPoint);if(X===1&&ae.x===0&&ae.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(ae),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var ke=a(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(ke,this,!0),ss(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),An(document,"touchmove",this._onTouchMove,this),An(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Cn.addInitHook("addHandler","touchZoom",Ay),Cn.BoxZoom=Qm,Cn.DoubleClickZoom=y1,Cn.Drag=eg,Cn.Keyboard=tg,Cn.ScrollWheelZoom=Ty,Cn.TapHold=Iy,Cn.TouchZoom=Ay,n.Bounds=oe,n.Browser=St,n.CRS=me,n.Canvas=ic,n.Circle=Ai,n.CircleMarker=tu,n.Class=B,n.Control=fs,n.DivIcon=ad,n.DivOverlay=Ei,n.DomEvent=xy,n.DomUtil=sn,n.Draggable=Do,n.Evented=G,n.FeatureGroup=no,n.GeoJSON=Lo,n.GridLayer=su,n.Handler=ba,n.Icon=yl,n.ImageOverlay=sd,n.LatLng=J,n.LatLngBounds=Y,n.Layer=Mr,n.LayerGroup=ea,n.LineUtil=Rn,n.Map=Cn,n.Marker=ms,n.Mixin=_y,n.Path=ro,n.Point=U,n.PolyUtil=Ff,n.Polygon=oi,n.Polyline=so,n.Popup=rc,n.PosAnimation=Bm,n.Projection=ps,n.Rectangle=ao,n.Renderer=ir,n.SVG=ld,n.SVGOverlay=Zm,n.TileLayer=ui,n.Tooltip=sc,n.Transformation=_e,n.Util=F,n.VideoOverlay=io,n.bind=a,n.bounds=W,n.canvas=Hf,n.circle=g1,n.circleMarker=Ym,n.control=eo,n.divIcon=od,n.extend=s,n.featureGroup=Km,n.geoJSON=nc,n.geoJson=is,n.gridLayer=Mo,n.icon=Xm,n.imageOverlay=ta,n.latLng=te,n.latLngBounds=Q,n.layerGroup=ky,n.map=by,n.marker=Bf,n.point=ee,n.polygon=Wf,n.polyline=Sy,n.popup=id,n.rectangle=Cy,n.setOptions=y,n.stamp=l,n.svg=_a,n.svgOverlay=Jm,n.tileLayer=rr,n.tooltip=Vf,n.transformation=we,n.version=r,n.videoOverlay=Uf;var Ey=window.L;n.noConflict=function(){return window.L=Ey,this},window.L=n})})(Nj,Nj.exports);var zx=Nj.exports;const LI=Bc(zx);function RI(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function MI(t,e){return e==null?function(r,s){const i=R.useRef();return i.current||(i.current=t(r,s)),i}:function(r,s){const i=R.useRef();i.current||(i.current=t(r,s));const a=R.useRef(r),{instance:o}=i.current;return R.useEffect(function(){a.current!==r&&(e(o,r,a.current),a.current=r)},[o,r,s]),i}}function FJ(t,e){R.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function zJ(t){return function(n){const r=$I(),s=t(DI(n,r),r);return $J(r.map,n.attribution),yR(s.current,n.eventHandlers),FJ(s.current,r),s}}function Xbe(t,e){const n=R.useRef();R.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function Ybe(t){return function(n){const r=$I(),s=t(DI(n,r),r);return yR(s.current,n.eventHandlers),FJ(s.current,r),Xbe(s.current,n),s}}function Zbe(t,e){const n=MI(t,e),r=zJ(n);return MJ(r)}function Jbe(t,e){const n=MI(t),r=Kbe(n,e);return qbe(r)}function Qbe(t,e){const n=MI(t,e),r=Ybe(n);return MJ(r)}function e1e(t,e){const n=MI(t,e),r=zJ(n);return Gbe(r)}function t1e(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function n1e(){return $I().map}function Cj(){return Cj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cj.apply(this,arguments)}function r1e({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:a,style:o,whenReady:l,zoom:c,...u},d){const[h]=R.useState({className:s,id:i,style:o}),[f,m]=R.useState(null);R.useImperativeHandle(d,()=>(f==null?void 0:f.map)??null,[f]);const y=R.useCallback(x=>{if(x!==null&&f===null){const b=new zx.Map(x,u);n!=null&&c!=null?b.setView(n,c):t!=null&&b.fitBounds(t,e),l!=null&&b.whenReady(l),m(Hbe(b))}},[]);R.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const v=f?Os.createElement(RJ,{value:f},r):a??null;return Os.createElement("div",Cj({},h,{ref:y}),v)}const s1e=R.forwardRef(r1e),Q7=Zbe(function({position:e,...n},r){const s=new zx.Marker(e,n);return RI(s,DJ(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),i1e=Qbe(function({positions:e,...n},r){const s=new zx.Polyline(e,n);return RI(s,DJ(r,{overlayContainer:s}))},function(e,n,r){n.positions!==r.positions&&e.setLatLngs(n.positions)}),eW=Jbe(function(e,n){const r=new zx.Popup(e,n.overlayContainer);return RI(r,n)},function(e,n,{position:r},s){R.useEffect(function(){const{instance:a}=e;function o(c){c.popup===a&&(a.update(),s(!0))}function l(c){c.popup===a&&s(!1)}return n.map.on({popupopen:o,popupclose:l}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var u;n.map.off({popupopen:o,popupclose:l}),(u=n.overlayContainer)==null||u.unbindPopup(),n.map.removeLayer(a)}},[e,n,s,r])}),a1e=e1e(function({url:e,...n},r){const s=new zx.TileLayer(e,DI(n,r));return RI(s,r)},function(e,n,r){t1e(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)}),o1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",l1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let c1e=LI.icon({iconUrl:o1e,shadowUrl:l1e,iconSize:[25,41],iconAnchor:[12,41]});LI.Marker.prototype.options.icon=c1e;const u1e=new LI.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),d1e=new LI.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),h1e=[{id:1,name:"Green Earth Recyclers",position:[9.9312,76.2673],description:"E-waste collection and processing center"},{id:2,name:"Tech Waste Solutions",position:[9.9894,76.3172],description:"Specialized in computer and mobile recycling"},{id:3,name:"Eco Warriors Hub",position:[9.9658,76.2884],description:"Community recycling center"},{id:4,name:"Digital Disposal Experts",position:[9.9446,76.3223],description:"Professional e-waste management"}];function f1e({center:t}){const e=n1e();return R.useEffect(()=>{t&&e.flyTo(t,13)},[t,e]),null}function BJ(){const[t,e]=R.useState([9.95,76.29]),[n,r]=R.useState(null),[s,i]=R.useState(null);R.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(o=>{e([o.coords.latitude,o.coords.longitude])},()=>{console.log("Using default location")})},[]);const a=o=>{i(o);const l=[(t[0]+o.position[0])/2+.005,(t[1]+o.position[1])/2-.005];r([t,l,o.position])};return p.jsxs("div",{className:"h-[500px] w-full rounded-xl overflow-hidden shadow-lg border border-gray-200 dark:border-gray-700 relative z-0",children:[p.jsxs(s1e,{center:t,zoom:12,style:{height:"100%",width:"100%"},children:[p.jsx(a1e,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),p.jsx(f1e,{center:s?s.position:t}),p.jsx(Q7,{position:t,icon:u1e,children:p.jsx(eW,{children:p.jsx("div",{className:"p-2",children:p.jsxs("h3",{className:"font-bold text-blue-600 flex items-center gap-2",children:[p.jsx(Zh,{className:"w-4 h-4"}),"You are here"]})})})}),h1e.map(o=>p.jsx(Q7,{position:o.position,icon:d1e,children:p.jsx(eW,{children:p.jsxs("div",{className:"p-2 min-w-[200px]",children:[p.jsxs("h3",{className:"font-bold text-emerald-600 flex items-center gap-2 mb-1",children:[p.jsx(Wa,{className:"w-4 h-4"}),o.name]}),p.jsx("p",{className:"text-sm text-gray-600 mb-3",children:o.description}),p.jsxs("button",{onClick:()=>a(o),className:"w-full py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[p.jsx(iZ,{className:"w-4 h-4"}),"Get Directions"]})]})})},o.id)),n&&p.jsx(i1e,{positions:n,color:"#3b82f6",weight:4,opacity:.7,dashArray:"10, 10"})]}),p.jsxs("div",{className:"absolute top-4 right-4 z-[1000] bg-white dark:bg-gray-800 p-3 rounded-lg shadow-md border border-gray-100 dark:border-gray-700 max-w-xs",children:[p.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Legend"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),p.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Your Location"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),p.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Recycling Center"})]})]})]})]})}function p1e(){const[t,e]=R.useState([]),[n,r]=R.useState(!0);return R.useEffect(()=>{(async()=>{try{const{data:i,error:a}=await tt.from("educational_content").select("*, profiles(full_name)").order("created_at",{ascending:!1});if(a)throw a;e(i||[])}catch(i){console.error("Error fetching educational content:",i)}finally{r(!1)}})()},[]),n?p.jsx("div",{className:"flex justify-center items-center h-48",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[t.map(s=>{var i;return p.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.title}),p.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["By ",((i=s.profiles)==null?void 0:i.full_name)||"Unknown Author","  ",gi(new Date(s.created_at),"MMM d, yyyy")]}),p.jsx("div",{className:"prose max-w-none",children:s.content}),s.resources&&p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[p.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Additional Resources"}),p.jsx("ul",{className:"list-disc pl-5 text-sm text-emerald-600",children:s.resources.map((a,o)=>p.jsx("li",{children:p.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:a.title})},o))})]})]})},s.id)}),t.length===0&&p.jsx("div",{className:"text-center py-8 text-gray-500",children:"No educational content available yet"})]})}function m1e(){const[t,e]=R.useState([]),[n,r]=R.useState([]),[s,i]=R.useState(0),[a,o]=R.useState(!0),[l,c]=R.useState(!1),[u,d]=R.useState({text:"",type:""});R.useEffect(()=>{h(),f()},[]);const h=async()=>{try{const{data:y,error:v}=await tt.from("rewards").select("*").eq("is_active",!0).order("points_required",{ascending:!0});if(v)throw v;e(y||[])}catch(y){console.error("Error fetching rewards:",y)}},f=async()=>{try{const{data:{user:y}}=await tt.auth.getUser();if(!y){o(!1);return}const{data:v,error:x}=await tt.from("profiles").select("points").eq("id",y.id).single();if(x)throw x;i(v.points||0);const{data:b,error:_}=await tt.from("user_rewards").select(`
          *,
          reward:rewards(*)
        `).eq("user_id",y.id).order("redeemed_at",{ascending:!1});if(_)throw _;r(b||[])}catch(y){console.error("Error fetching user data:",y)}finally{o(!1)}},m=async y=>{try{c(!0),d({text:"",type:""});const{data:{user:v}}=await tt.auth.getUser();if(!v){d({text:"You must be logged in to redeem rewards",type:"error"});return}if(s<y.points_required){d({text:"You don't have enough points to redeem this reward",type:"error"});return}const x=Math.random().toString(36).substring(2,10).toUpperCase(),{error:b}=await tt.rpc("deduct_points",{user_id:v.id,points_to_deduct:y.points_required});if(b)throw b;const{error:_}=await tt.from("user_rewards").insert([{user_id:v.id,reward_id:y.id,code:x}]);if(_)throw _;i(s-y.points_required),d({text:`Successfully redeemed ${y.title}! Your code is ${x}`,type:"success"}),f()}catch(v){console.error("Error redeeming reward:",v),d({text:"There was an error redeeming your reward. Please try again.",type:"error"})}finally{c(!1)}};return a?p.jsx("div",{className:"flex justify-center items-center h-48",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[u.text&&p.jsx("div",{className:`p-4 rounded-lg ${u.type==="error"?"bg-red-50 text-red-800":"bg-emerald-50 text-emerald-800"}`,children:p.jsxs("div",{className:"flex items-center",children:[u.type==="error"?p.jsx(Yd,{className:"h-5 w-5 mr-2"}):p.jsx(Yge,{className:"h-5 w-5 mr-2"}),p.jsx("p",{children:u.text})]})}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Points"}),p.jsxs("div",{className:"flex items-center bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full",children:[p.jsx(y2,{className:"h-5 w-5 mr-2"}),p.jsxs("span",{className:"font-semibold",children:[s," points"]})]})]}),p.jsx("p",{className:"text-gray-600",children:"Earn points by recycling e-waste and completing other eco-friendly actions. Redeem your points for discounts on marketplace purchases."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Rewards"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.map(y=>p.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:y.title}),p.jsxs("div",{className:"flex items-center text-amber-600",children:[p.jsx(y2,{className:"h-4 w-4 mr-1"}),p.jsx("span",{children:y.points_required})]})]}),p.jsx("p",{className:"text-gray-600 mb-4",children:y.description}),p.jsxs("button",{onClick:()=>m(y),disabled:l||s<y.points_required,className:`w-full py-2 px-4 rounded-md flex items-center justify-center ${s>=y.points_required?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[p.jsx(cj,{className:"h-4 w-4 mr-2"}),l?"Redeeming...":"Redeem Reward"]})]})},y.id)),t.length===0&&p.jsxs("div",{className:"col-span-full text-center py-8 bg-white rounded-lg shadow-sm",children:[p.jsx(cj,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No rewards available"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Check back later for new rewards."})]})]})]}),n.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Redeemed Rewards"}),p.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:p.jsx("ul",{className:"divide-y divide-gray-200",children:n.map(y=>p.jsx("li",{className:"p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-gray-900",children:y.reward.title}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Redeemed on ",new Date(y.redeemed_at).toLocaleDateString()]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.is_used?"bg-gray-100 text-gray-800":"bg-emerald-100 text-emerald-800"}`,children:y.is_used?"Used":"Available"}),p.jsx("p",{className:"text-sm font-mono mt-1",children:y.code})]})]})},y.id))})})]})]})}const tW=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Mt(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},WJ=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?tW(r.ref,n,t):r.refs&&r.refs.forEach(s=>tW(s,n,t))}},g1e=(t,e)=>{e.shouldUseNativeValidation&&WJ(t,e);const n={};for(const r in t){const s=Mt(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(y1e(e.names||Object.keys(t),r)){const a=Object.assign({},Mt(n,r));_r(a,"root",i),_r(n,r,a)}else _r(n,r,i)}return n},y1e=(t,e)=>t.some(n=>n.startsWith(e+"."));var v1e=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[a]={message:o.message,type:o.code}}else n[a]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var l=n[a].types,c=l&&l[r.code];n[a]=_J(a,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},UJ=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(a,o){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&WJ({},i),{errors:{},values:n.raw?r:c}})}catch(c){return o(c)}return l&&l.then?l.then(void 0,o):l}(0,function(a){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(a))return{values:{},errors:g1e(v1e(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}},Xn;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Xn||(Xn={}));var nW;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(nW||(nW={}));const Ut=Xn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lp=t=>{switch(typeof t){case"undefined":return Ut.undefined;case"string":return Ut.string;case"number":return Number.isNaN(t)?Ut.nan:Ut.number;case"boolean":return Ut.boolean;case"function":return Ut.function;case"bigint":return Ut.bigint;case"symbol":return Ut.symbol;case"object":return Array.isArray(t)?Ut.array:t===null?Ut.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ut.promise:typeof Map<"u"&&t instanceof Map?Ut.map:typeof Set<"u"&&t instanceof Set?Ut.set:typeof Date<"u"&&t instanceof Date?Ut.date:Ut.object;default:return Ut.unknown}},yt=Xn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qh extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Qh))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Xn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Qh.create=t=>new Qh(t);const Tj=(t,e)=>{let n;switch(t.code){case yt.invalid_type:t.received===Ut.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case yt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Xn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Xn.joinValues(t.keys,", ")}`;break;case yt.invalid_union:n="Invalid input";break;case yt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Xn.joinValues(t.options)}`;break;case yt.invalid_enum_value:n=`Invalid enum value. Expected ${Xn.joinValues(t.options)}, received '${t.received}'`;break;case yt.invalid_arguments:n="Invalid function arguments";break;case yt.invalid_return_type:n="Invalid function return type";break;case yt.invalid_date:n="Invalid date";break;case yt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Xn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case yt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case yt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case yt.custom:n="Invalid input";break;case yt.invalid_intersection_types:n="Intersection results could not be merged";break;case yt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case yt.not_finite:n="Number must be finite";break;default:n=e.defaultError,Xn.assertNever(t)}return{message:n}};let x1e=Tj;function b1e(){return x1e}const w1e=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}};function Pt(t,e){const n=b1e(),r=w1e({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Tj?void 0:Tj].filter(s=>!!s)});t.common.issues.push(r)}class Ml{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return pn;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,a=await s.value;r.push({key:i,value:a})}return Ml.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return pn;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const pn=Object.freeze({status:"aborted"}),ow=t=>({status:"dirty",value:t}),Uc=t=>({status:"valid",value:t}),rW=t=>t.status==="aborted",sW=t=>t.status==="dirty",ex=t=>t.status==="valid",k5=t=>typeof Promise<"u"&&t instanceof Promise;var Ht;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ht||(Ht={}));class em{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const iW=(t,e)=>{if(ex(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Qh(t.common.issues);return this._error=n,this._error}}};function In(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{const{message:l}=t;return a.code==="invalid_enum_value"?{message:l??o.defaultError}:typeof o.data>"u"?{message:l??r??o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:l??n??o.defaultError}},description:s}}class Gn{get description(){return this._def.description}_getType(e){return lp(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ml,ctx:{common:e.parent.common,data:e.data,parsedType:lp(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(k5(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lp(e)},s=this._parseSync({data:e,path:r.path,parent:r});return iW(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lp(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return ex(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>ex(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lp(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(k5(s)?s:Promise.resolve(s));return iW(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:yt.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new rx({schema:this,typeName:gn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Wp.create(this,this._def)}nullable(){return sx.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Od.create(this)}promise(){return T5.create(this,this._def)}or(e){return N5.create([this,e],this._def)}and(e){return C5.create(this,e,this._def)}transform(e){return new rx({...In(this._def),schema:this,typeName:gn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Aj({...In(this._def),innerType:this,defaultValue:n,typeName:gn.ZodDefault})}brand(){return new V1e({typeName:gn.ZodBranded,type:this,...In(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ej({...In(this._def),innerType:this,catchValue:n,typeName:gn.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return vR.create(this,e)}readonly(){return Pj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _1e=/^c[^\s-]{8,}$/i,k1e=/^[0-9a-z]+$/,S1e=/^[0-9A-HJKMNP-TV-Z]{26}$/i,N1e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,C1e=/^[a-z0-9_-]{21}$/i,T1e=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,I1e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,A1e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,E1e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let JO;const P1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O1e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,j1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$1e=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,D1e=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,L1e=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,VJ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",R1e=new RegExp(`^${VJ}$`);function HJ(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function M1e(t){return new RegExp(`^${HJ(t)}$`)}function F1e(t){let e=`${VJ}T${HJ(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function z1e(t,e){return!!((e==="v4"||!e)&&P1e.test(t)||(e==="v6"||!e)&&j1e.test(t))}function B1e(t,e){if(!T1e.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function W1e(t,e){return!!((e==="v4"||!e)&&O1e.test(t)||(e==="v6"||!e)&&$1e.test(t))}class _p extends Gn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ut.string){const i=this._getOrReturnCtx(e);return Pt(i,{code:yt.invalid_type,expected:Ut.string,received:i.parsedType}),pn}const r=new Ml;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?Pt(s,{code:yt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Pt(s,{code:yt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")A1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"email",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")JO||(JO=new RegExp(E1e,"u")),JO.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"emoji",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")N1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"uuid",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")C1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"nanoid",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")_1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"cuid",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")k1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"cuid2",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")S1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"ulid",code:yt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Pt(s,{validation:"url",code:yt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"regex",code:yt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?F1e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?R1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?M1e(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?I1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"duration",code:yt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?z1e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"ip",code:yt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?B1e(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"jwt",code:yt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?W1e(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"cidr",code:yt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?D1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"base64",code:yt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?L1e.test(e.data)||(s=this._getOrReturnCtx(e,s),Pt(s,{validation:"base64url",code:yt.invalid_string,message:i.message}),r.dirty()):Xn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:yt.invalid_string,...Ht.errToObj(r)})}_addCheck(e){return new _p({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ht.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ht.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ht.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ht.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ht.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ht.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ht.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ht.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ht.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ht.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ht.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ht.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ht.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ht.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ht.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ht.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ht.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ht.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ht.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ht.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ht.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ht.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ht.errToObj(n)})}nonempty(e){return this.min(1,Ht.errToObj(e))}trim(){return new _p({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _p({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _p({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}_p.create=t=>new _p({checks:[],typeName:gn.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...In(t)});function U1e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class tx extends Gn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ut.number){const i=this._getOrReturnCtx(e);return Pt(i,{code:yt.invalid_type,expected:Ut.number,received:i.parsedType}),pn}let r;const s=new Ml;for(const i of this._def.checks)i.kind==="int"?Xn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?U1e(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.not_finite,message:i.message}),s.dirty()):Xn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ht.toString(n))}setLimit(e,n,r,s){return new tx({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ht.toString(s)}]})}_addCheck(e){return new tx({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ht.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ht.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ht.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ht.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ht.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Xn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}tx.create=t=>new tx({checks:[],typeName:gn.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...In(t)});class k2 extends Gn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ut.bigint)return this._getInvalidInput(e);let r;const s=new Ml;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Pt(r,{code:yt.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Xn.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Pt(n,{code:yt.invalid_type,expected:Ut.bigint,received:n.parsedType}),pn}gte(e,n){return this.setLimit("min",e,!0,Ht.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ht.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ht.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ht.toString(n))}setLimit(e,n,r,s){return new k2({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ht.toString(s)}]})}_addCheck(e){return new k2({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ht.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ht.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ht.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ht.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ht.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}k2.create=t=>new k2({checks:[],typeName:gn.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...In(t)});class aW extends Gn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ut.boolean){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.boolean,received:r.parsedType}),pn}return Uc(e.data)}}aW.create=t=>new aW({typeName:gn.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...In(t)});class S5 extends Gn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ut.date){const i=this._getOrReturnCtx(e);return Pt(i,{code:yt.invalid_type,expected:Ut.date,received:i.parsedType}),pn}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Pt(i,{code:yt.invalid_date}),pn}const r=new Ml;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Pt(s,{code:yt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Xn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new S5({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ht.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ht.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}S5.create=t=>new S5({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:gn.ZodDate,...In(t)});class oW extends Gn{_parse(e){if(this._getType(e)!==Ut.symbol){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.symbol,received:r.parsedType}),pn}return Uc(e.data)}}oW.create=t=>new oW({typeName:gn.ZodSymbol,...In(t)});class lW extends Gn{_parse(e){if(this._getType(e)!==Ut.undefined){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.undefined,received:r.parsedType}),pn}return Uc(e.data)}}lW.create=t=>new lW({typeName:gn.ZodUndefined,...In(t)});class cW extends Gn{_parse(e){if(this._getType(e)!==Ut.null){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.null,received:r.parsedType}),pn}return Uc(e.data)}}cW.create=t=>new cW({typeName:gn.ZodNull,...In(t)});class uW extends Gn{constructor(){super(...arguments),this._any=!0}_parse(e){return Uc(e.data)}}uW.create=t=>new uW({typeName:gn.ZodAny,...In(t)});class dW extends Gn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Uc(e.data)}}dW.create=t=>new dW({typeName:gn.ZodUnknown,...In(t)});class tm extends Gn{_parse(e){const n=this._getOrReturnCtx(e);return Pt(n,{code:yt.invalid_type,expected:Ut.never,received:n.parsedType}),pn}}tm.create=t=>new tm({typeName:gn.ZodNever,...In(t)});class hW extends Gn{_parse(e){if(this._getType(e)!==Ut.undefined){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.void,received:r.parsedType}),pn}return Uc(e.data)}}hW.create=t=>new hW({typeName:gn.ZodVoid,...In(t)});class Od extends Gn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ut.array)return Pt(n,{code:yt.invalid_type,expected:Ut.array,received:n.parsedType}),pn;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(Pt(n,{code:a?yt.too_big:yt.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Pt(n,{code:yt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Pt(n,{code:yt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new em(n,a,n.path,o)))).then(a=>Ml.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new em(n,a,n.path,o)));return Ml.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Od({...this._def,minLength:{value:e,message:Ht.toString(n)}})}max(e,n){return new Od({...this._def,maxLength:{value:e,message:Ht.toString(n)}})}length(e,n){return new Od({...this._def,exactLength:{value:e,message:Ht.toString(n)}})}nonempty(e){return this.min(1,e)}}Od.create=(t,e)=>new Od({type:t,minLength:null,maxLength:null,exactLength:null,typeName:gn.ZodArray,...In(e)});function rv(t){if(t instanceof Vs){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Wp.create(rv(r))}return new Vs({...t._def,shape:()=>e})}else return t instanceof Od?new Od({...t._def,type:rv(t.element)}):t instanceof Wp?Wp.create(rv(t.unwrap())):t instanceof sx?sx.create(rv(t.unwrap())):t instanceof v0?v0.create(t.items.map(e=>rv(e))):t}class Vs extends Gn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Xn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Ut.object){const c=this._getOrReturnCtx(e);return Pt(c,{code:yt.invalid_type,expected:Ut.object,received:c.parsedType}),pn}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof tm&&this._def.unknownKeys==="strip"))for(const c in s.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new em(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof tm){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")o.length>0&&(Pt(s,{code:yt.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new em(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>Ml.mergeObjectSync(r,c)):Ml.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Ht.errToObj,new Vs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ht.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Vs({...this._def,unknownKeys:"strip"})}passthrough(){return new Vs({...this._def,unknownKeys:"passthrough"})}extend(e){return new Vs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Vs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:gn.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Vs({...this._def,catchall:e})}pick(e){const n={};for(const r of Xn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Vs({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Xn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Vs({...this._def,shape:()=>n})}deepPartial(){return rv(this)}partial(e){const n={};for(const r of Xn.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Vs({...this._def,shape:()=>n})}required(e){const n={};for(const r of Xn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Wp;)i=i._def.innerType;n[r]=i}return new Vs({...this._def,shape:()=>n})}keyof(){return qJ(Xn.objectKeys(this.shape))}}Vs.create=(t,e)=>new Vs({shape:()=>t,unknownKeys:"strip",catchall:tm.create(),typeName:gn.ZodObject,...In(e)});Vs.strictCreate=(t,e)=>new Vs({shape:()=>t,unknownKeys:"strict",catchall:tm.create(),typeName:gn.ZodObject,...In(e)});Vs.lazycreate=(t,e)=>new Vs({shape:t,unknownKeys:"strip",catchall:tm.create(),typeName:gn.ZodObject,...In(e)});class N5 extends Gn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new Qh(o.ctx.common.issues));return Pt(n,{code:yt.invalid_union,unionErrors:a}),pn}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new Qh(l));return Pt(n,{code:yt.invalid_union,unionErrors:o}),pn}}get options(){return this._def.options}}N5.create=(t,e)=>new N5({options:t,typeName:gn.ZodUnion,...In(e)});function Ij(t,e){const n=lp(t),r=lp(e);if(t===e)return{valid:!0,data:t};if(n===Ut.object&&r===Ut.object){const s=Xn.objectKeys(e),i=Xn.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const l=Ij(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===Ut.array&&r===Ut.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],l=Ij(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Ut.date&&r===Ut.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class C5 extends Gn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(rW(i)||rW(a))return pn;const o=Ij(i.value,a.value);return o.valid?((sW(i)||sW(a))&&n.dirty(),{status:n.value,value:o.data}):(Pt(r,{code:yt.invalid_intersection_types}),pn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}C5.create=(t,e,n)=>new C5({left:t,right:e,typeName:gn.ZodIntersection,...In(n)});class v0 extends Gn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ut.array)return Pt(r,{code:yt.invalid_type,expected:Ut.array,received:r.parsedType}),pn;if(r.data.length<this._def.items.length)return Pt(r,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pn;!this._def.rest&&r.data.length>this._def.items.length&&(Pt(r,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new em(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Ml.mergeArray(n,a)):Ml.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new v0({...this._def,rest:e})}}v0.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new v0({items:t,typeName:gn.ZodTuple,rest:null,...In(e)})};class fW extends Gn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ut.map)return Pt(r,{code:yt.invalid_type,expected:Ut.map,received:r.parsedType}),pn;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:s._parse(new em(r,o,r.path,[c,"key"])),value:i._parse(new em(r,l,r.path,[c,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pn;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pn;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),o.set(c.value,u.value)}return{status:n.value,value:o}}}}fW.create=(t,e,n)=>new fW({valueType:e,keyType:t,typeName:gn.ZodMap,...In(n)});class S2 extends Gn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ut.set)return Pt(r,{code:yt.invalid_type,expected:Ut.set,received:r.parsedType}),pn;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Pt(r,{code:yt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Pt(r,{code:yt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pn;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const o=[...r.data.values()].map((l,c)=>i._parse(new em(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new S2({...this._def,minSize:{value:e,message:Ht.toString(n)}})}max(e,n){return new S2({...this._def,maxSize:{value:e,message:Ht.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}S2.create=(t,e)=>new S2({valueType:t,minSize:null,maxSize:null,typeName:gn.ZodSet,...In(e)});class pW extends Gn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}pW.create=(t,e)=>new pW({getter:t,typeName:gn.ZodLazy,...In(e)});class mW extends Gn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Pt(n,{received:n.data,code:yt.invalid_literal,expected:this._def.value}),pn}return{status:"valid",value:e.data}}get value(){return this._def.value}}mW.create=(t,e)=>new mW({value:t,typeName:gn.ZodLiteral,...In(e)});function qJ(t,e){return new nx({values:t,typeName:gn.ZodEnum,...In(e)})}class nx extends Gn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Pt(n,{expected:Xn.joinValues(r),received:n.parsedType,code:yt.invalid_type}),pn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Pt(n,{received:n.data,code:yt.invalid_enum_value,options:r}),pn}return Uc(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return nx.create(e,{...this._def,...n})}exclude(e,n=this._def){return nx.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}nx.create=qJ;class gW extends Gn{_parse(e){const n=Xn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ut.string&&r.parsedType!==Ut.number){const s=Xn.objectValues(n);return Pt(r,{expected:Xn.joinValues(s),received:r.parsedType,code:yt.invalid_type}),pn}if(this._cache||(this._cache=new Set(Xn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Xn.objectValues(n);return Pt(r,{received:r.data,code:yt.invalid_enum_value,options:s}),pn}return Uc(e.data)}get enum(){return this._def.values}}gW.create=(t,e)=>new gW({values:t,typeName:gn.ZodNativeEnum,...In(e)});class T5 extends Gn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ut.promise&&n.common.async===!1)return Pt(n,{code:yt.invalid_type,expected:Ut.promise,received:n.parsedType}),pn;const r=n.parsedType===Ut.promise?n.data:Promise.resolve(n.data);return Uc(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}T5.create=(t,e)=>new T5({type:t,typeName:gn.ZodPromise,...In(e)});class rx extends Gn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===gn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{Pt(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return pn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?pn:l.status==="dirty"||n.value==="dirty"?ow(l.value):l});{if(n.value==="aborted")return pn;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?pn:o.status==="dirty"||n.value==="dirty"?ow(o.value):o}}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?pn:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?pn:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ex(a))return pn;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>ex(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):pn);Xn.assertNever(s)}}rx.create=(t,e,n)=>new rx({schema:t,typeName:gn.ZodEffects,effect:e,...In(n)});rx.createWithPreprocess=(t,e,n)=>new rx({schema:e,effect:{type:"preprocess",transform:t},typeName:gn.ZodEffects,...In(n)});class Wp extends Gn{_parse(e){return this._getType(e)===Ut.undefined?Uc(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wp.create=(t,e)=>new Wp({innerType:t,typeName:gn.ZodOptional,...In(e)});class sx extends Gn{_parse(e){return this._getType(e)===Ut.null?Uc(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sx.create=(t,e)=>new sx({innerType:t,typeName:gn.ZodNullable,...In(e)});class Aj extends Gn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ut.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Aj.create=(t,e)=>new Aj({innerType:t,typeName:gn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...In(e)});class Ej extends Gn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return k5(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qh(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Qh(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ej.create=(t,e)=>new Ej({innerType:t,typeName:gn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...In(e)});class yW extends Gn{_parse(e){if(this._getType(e)!==Ut.nan){const r=this._getOrReturnCtx(e);return Pt(r,{code:yt.invalid_type,expected:Ut.nan,received:r.parsedType}),pn}return{status:"valid",value:e.data}}}yW.create=t=>new yW({typeName:gn.ZodNaN,...In(t)});class V1e extends Gn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vR extends Gn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?pn:i.status==="dirty"?(n.dirty(),ow(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pn:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new vR({in:e,out:n,typeName:gn.ZodPipeline})}}class Pj extends Gn{_parse(e){const n=this._def.innerType._parse(e),r=s=>(ex(s)&&(s.value=Object.freeze(s.value)),s);return k5(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}Pj.create=(t,e)=>new Pj({innerType:t,typeName:gn.ZodReadonly,...In(e)});var gn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(gn||(gn={}));const cp=_p.create,H1e=tx.create;tm.create;Od.create;const GJ=Vs.create;N5.create;C5.create;v0.create;const vW=nx.create;T5.create;Wp.create;sx.create;const q1e=["Smartphone","Laptop","Desktop","Tablet","Monitor","Printer","Other"],G1e=GJ({deviceType:cp().min(1,"Device type is required"),deviceModel:cp().min(1,"Device model is required"),issueDescription:cp().min(10,"Description must be at least 10 characters"),address:cp().min(5,"Address is required"),preferredDate:cp().optional(),notes:cp().optional()});function K1e({onSuccess:t,onCancel:e}){const{register:n,handleSubmit:r,formState:{errors:s},reset:i}=OI({resolver:UJ(G1e),defaultValues:{deviceType:"",deviceModel:"",issueDescription:"",address:"",preferredDate:"",notes:""}}),[a,o]=R.useState(!1),[l,c]=R.useState([]),[u,d]=R.useState(""),[h,f]=R.useState(!1),[m,y]=R.useState(""),[v,x]=R.useState(""),b=async N=>{const A=Array.from(N.target.files);if(A.length+l.length>4){d("Maximum 4 images allowed");return}o(!0),d("");try{const C=["https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60"].slice(0,A.length);c(P=>[...P,...C])}catch(T){console.error("Error uploading images:",T),d("Error uploading images. Please try again.")}finally{o(!1)}},_=N=>{c(A=>A.filter((T,C)=>C!==N))},k=async N=>{try{f(!0),y(""),x("");const{data:{user:A}}=await tt.auth.getUser();if(!A){y("You must be logged in to request a repair"),f(!1);return}const{data:T,error:C}=await tt.from("profiles").select("full_name, email").eq("id",A.id).single();if(C){console.error("Error fetching user profile:",C),y("Error fetching your profile information"),f(!1);return}const{data:P,error:$}=await tt.from("repair_requests").insert([{user_id:A.id,user_name:(T==null?void 0:T.full_name)||"Unknown",user_email:(T==null?void 0:T.email)||A.email,device_type:N.deviceType,device_model:N.deviceModel,issue_description:N.issueDescription,address:N.address,preferred_date:N.preferredDate||null,notes:N.notes,images:l.length>0?l:null,status:"pending"}]).select();if($){console.error("Error creating repair request:",$),y($.message||"Error creating repair request"),f(!1);return}if(P&&P.length>0)try{const{error:j}=await tt.from("repair_updates").insert([{repair_id:P[0].id,author_id:A.id,message:`New repair request submitted for ${N.deviceType} ${N.deviceModel}. Waiting for technician assignment.`}]);j&&console.error("Error creating initial update:",j)}catch(j){console.error("Error creating initial update:",j)}x("Repair request submitted successfully! A technician will be notified."),i(),c([]),setTimeout(()=>{t&&t(P&&P.length>0?P[0]:null)},2e3)}catch(A){console.error("Error creating repair request:",A),y("There was an error creating your repair request. Please try again.")}finally{f(!1)}};return p.jsxs("div",{className:"space-y-6",children:[v&&p.jsxs("div",{className:"p-4 bg-green-50 text-green-700 rounded-md flex items-center",children:[p.jsx(Wi,{className:"h-5 w-5 mr-2"}),v]}),m&&p.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md flex items-center",children:[p.jsx(Yd,{className:"h-5 w-5 mr-2"}),m]}),p.jsxs("form",{onSubmit:r(k),className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"deviceType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Type *"}),p.jsxs("select",{id:"deviceType",...n("deviceType"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[p.jsx("option",{value:"",children:"Select device type"}),q1e.map(N=>p.jsx("option",{value:N,children:N},N))]}),s.deviceType&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deviceType.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"deviceModel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Model *"}),p.jsx("input",{id:"deviceModel",type:"text",...n("deviceModel"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"e.g., iPhone 13, Dell XPS 15"}),s.deviceModel&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.deviceModel.message})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"issueDescription",className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue Description *"}),p.jsx("textarea",{id:"issueDescription",rows:3,...n("issueDescription"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Describe the issue with your device in detail"}),s.issueDescription&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.issueDescription.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup/Delivery Address *"}),p.jsx("textarea",{id:"address",rows:2,...n("address"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Your full address for device pickup or delivery"}),s.address&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.address.message})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"preferredDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Pickup Date (Optional)"}),p.jsx("input",{id:"preferredDate",type:"date",...n("preferredDate"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",min:new Date().toISOString().split("T")[0]}),s.preferredDate&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.preferredDate.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Images (Optional)"}),p.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsx(hZ,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsxs("div",{className:"flex text-sm text-gray-600",children:[p.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-emerald-600 hover:text-emerald-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-emerald-500",children:[p.jsx("span",{children:"Upload images"}),p.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:b,disabled:a,className:"sr-only"})]}),p.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB (max 4 images)"})]})}),u&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:u}),a&&p.jsxs("div",{className:"mt-2 flex items-center justify-center text-sm text-gray-600",children:[p.jsx(v2,{className:"animate-spin h-4 w-4 mr-2"}),"Uploading..."]}),l.length>0&&p.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-2",children:l.map((N,A)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:N,alt:`Device image ${A+1}`,className:"h-16 w-full object-cover rounded-md"}),p.jsx("button",{type:"button",onClick:()=>_(A),className:"absolute -top-2 -right-2 bg-red-100 rounded-full p-1 text-red-600 hover:bg-red-200",children:p.jsx(il,{className:"h-3 w-3"})})]},A))})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),p.jsx("textarea",{id:"notes",rows:2,...n("notes"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Any special instructions or details"})]}),p.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[e&&p.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:h||v,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:h?"Submitting...":"Submit Request"})]})]})]})}function X1e({onClose:t,onSuccess:e}){return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Request Device Repair"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:p.jsx(il,{className:"h-6 w-6"})})]}),p.jsx("div",{className:"overflow-y-auto p-6",children:p.jsx(K1e,{onSuccess:e,onCancel:t})})]})})}const QO=[{id:"pending",label:"Request Submitted",icon:p.jsx(Bd,{className:"h-5 w-5"})},{id:"assigned",label:"Technician Assigned",icon:p.jsx(Uh,{className:"h-5 w-5"})},{id:"diagnosing",label:"Diagnosing",icon:p.jsx(Yd,{className:"h-5 w-5"})},{id:"repairing",label:"Repairing",icon:p.jsx(f5,{className:"h-5 w-5"})},{id:"completed",label:"Completed",icon:p.jsx(Wi,{className:"h-5 w-5"})}];function Y1e({status:t,estimatedCompletion:e}){const n=QO.findIndex(r=>r.id===t);return t==="cancelled"?p.jsx("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx(Yd,{className:"h-6 w-6 text-red-600 mr-3"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Repair Request Cancelled"}),p.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This repair request has been cancelled. Please contact support if you need assistance."})]})]})}):p.jsxs("div",{className:"py-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"overflow-hidden h-2 mb-6 text-xs flex rounded bg-gray-200",children:p.jsx("div",{style:{width:`${Math.max(5,n/(QO.length-1)*100)}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-emerald-500 transition-all duration-500"})}),p.jsx("div",{className:"flex justify-between",children:QO.map((r,s)=>{const i=s===n,a=s<n,o=s>n;return p.jsxs("div",{className:`flex flex-col items-center ${o?"opacity-50":""}`,children:[p.jsx("div",{className:`
                    w-10 h-10 rounded-full flex items-center justify-center 
                    ${i?"bg-emerald-100 text-emerald-600 border-2 border-emerald-500":a?"bg-emerald-500 text-white":"bg-gray-200 text-gray-500"}
                  `,children:r.icon}),p.jsx("div",{className:"text-xs text-center mt-2 max-w-[80px]",children:r.label})]},r.id)})})]}),e&&p.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:p.jsxs("p",{children:["Estimated completion: ",new Date(e).toLocaleDateString()]})})]})}function Z1e({repair:t,onClose:e,onUpdate:n,userRole:r}){const{register:s,handleSubmit:i,formState:{errors:a},reset:o}=OI(),[l,c]=R.useState(!1),[u,d]=R.useState([]),[h,f]=R.useState(!0),[m,y]=R.useState(null),[v,x]=R.useState((t==null?void 0:t.estimated_cost)||""),[b,_]=R.useState((t==null?void 0:t.estimated_completion)||""),[k,N]=R.useState(!1),[A,T]=R.useState(!1);R.useEffect(()=>{P(),C()},[t==null?void 0:t.id]);const C=async()=>{try{const{data:{user:B}}=await tt.auth.getUser();if(B){const{data:Z}=await tt.from("profiles").select("role, full_name").eq("id",B.id).single();y({...B,...Z})}}catch(B){console.error("Error fetching current user:",B)}},P=async()=>{try{const{data:B,error:Z}=await tt.from("repair_updates").select(`
          *,
          author:profiles(full_name, role)
        `).eq("repair_id",t.id).order("created_at",{ascending:!0});if(Z)throw Z;d(B||[])}catch(B){console.error("Error fetching repair updates:",B)}finally{f(!1)}},$=async B=>{try{c(!0);const{data:{user:Z}}=await tt.auth.getUser();if(!Z)throw new Error("You must be logged in to send a message");const{error:V}=await tt.from("repair_updates").insert([{repair_id:t.id,author_id:Z.id,message:B.message}]);if(V)throw V;P(),o({message:""}),n&&n()}catch(Z){console.error("Error sending message:",Z),alert("There was an error sending your message. Please try again.")}finally{c(!1)}},j=async()=>{try{if(c(!0),!v||isNaN(parseFloat(v))){alert("Please enter a valid cost estimate");return}const{error:B}=await tt.from("repair_requests").update({estimated_cost:parseFloat(v),updated_at:new Date().toISOString()}).eq("id",t.id);if(B)throw B;const{data:{user:Z}}=await tt.auth.getUser();Z&&await tt.from("repair_updates").insert([{repair_id:t.id,author_id:Z.id,message:`Estimated repair cost: $${parseFloat(v).toFixed(2)}`}]),N(!1),n&&n(),P()}catch(B){console.error("Error updating cost:",B),alert("There was an error updating the cost. Please try again.")}finally{c(!1)}},O=async()=>{try{if(c(!0),!b){alert("Please select a valid completion date");return}const{error:B}=await tt.from("repair_requests").update({estimated_completion:b,updated_at:new Date().toISOString()}).eq("id",t.id);if(B)throw B;const{data:{user:Z}}=await tt.auth.getUser();Z&&await tt.from("repair_updates").insert([{repair_id:t.id,author_id:Z.id,message:`Estimated completion date: ${gi(new Date(b),"PPP")}`}]),T(!1),n&&n(),P()}catch(B){console.error("Error updating completion date:",B),alert("There was an error updating the completion date. Please try again.")}finally{c(!1)}},F=r==="technician"||(m==null?void 0:m.role)==="technician";return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[p.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[p.jsx(f5,{className:"w-5 h-5 text-emerald-600 mr-2"}),t.device_type," ",t.device_model," Repair"]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-500",children:p.jsx(il,{className:"h-6 w-6"})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Repair Status"}),p.jsx(Y1e,{status:t.status,estimatedCompletion:t.estimated_completion})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Device Information"}),p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(f5,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Device"}),p.jsxs("p",{className:"font-medium",children:[t.device_type," - ",t.device_model]})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(AlertCircle,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Issue"}),p.jsx("p",{children:t.issue_description})]})]}),t.notes&&p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(tR,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Additional Notes"}),p.jsx("p",{children:t.notes})]})]})]})]}),t.images&&t.images.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Device Images"}),p.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.images.map((B,Z)=>p.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"block",children:p.jsx("img",{src:B,alt:`Device image ${Z+1}`,className:"h-32 w-full object-cover rounded-md hover:opacity-80 transition-opacity"})},Z))})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Customer Information"}),p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(g0,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Customer"}),p.jsx("p",{className:"font-medium",children:t.user_name})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(rZ,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),p.jsx("p",{children:t.user_email})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Zh,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),p.jsx("p",{children:t.address})]})]}),t.preferred_date&&p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(p0,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Preferred Pickup Date"}),p.jsx("p",{children:gi(new Date(t.preferred_date),"PPP")})]})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Repair Details"}),p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Bd,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Request Date"}),p.jsx("p",{children:gi(new Date(t.created_at),"PPP")})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx("div",{className:"w-5 h-5 flex-shrink-0",children:""}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Cost"}),k?p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx("span",{className:"text-gray-500 mr-1",children:"$"}),p.jsx("input",{type:"number",value:v,onChange:B=>x(B.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md",placeholder:"0.00",min:"0",step:"0.01"}),p.jsx("button",{onClick:j,disabled:l,className:"ml-2 px-2 py-1 bg-emerald-600 text-white text-sm rounded-md hover:bg-emerald-700 disabled:opacity-50",children:"Save"}),p.jsx("button",{onClick:()=>N(!1),className:"ml-1 px-2 py-1 border border-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-50",children:"Cancel"})]}):p.jsxs("div",{className:"flex items-center",children:[p.jsx("p",{children:t.estimated_cost?`$${t.estimated_cost}`:"Not set"}),F&&t.status!=="cancelled"&&t.status!=="completed"&&p.jsx("button",{onClick:()=>N(!0),className:"ml-2 text-xs text-emerald-600 hover:text-emerald-700",children:t.estimated_cost?"Update":"Set estimate"})]})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(p0,{className:"w-5 h-5 text-gray-500 mt-0.5"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Estimated Completion"}),A?p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx("input",{type:"date",value:b,onChange:B=>_(B.target.value),className:"w-40 px-2 py-1 border border-gray-300 rounded-md",min:new Date().toISOString().split("T")[0]}),p.jsx("button",{onClick:O,disabled:l,className:"ml-2 px-2 py-1 bg-emerald-600 text-white text-sm rounded-md hover:bg-emerald-700 disabled:opacity-50",children:"Save"}),p.jsx("button",{onClick:()=>T(!1),className:"ml-1 px-2 py-1 border border-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-50",children:"Cancel"})]}):p.jsxs("div",{className:"flex items-center",children:[p.jsx("p",{children:t.estimated_completion?gi(new Date(t.estimated_completion),"PPP"):"Not set"}),F&&t.status!=="cancelled"&&t.status!=="completed"&&p.jsx("button",{onClick:()=>T(!0),className:"ml-2 text-xs text-emerald-600 hover:text-emerald-700",children:t.estimated_completion?"Update":"Set date"})]})]})]})]})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Communication History"}),p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:h?p.jsx("div",{className:"flex justify-center items-center h-24",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600"})}):u.length>0?p.jsx("div",{className:"space-y-4",children:u.map(B=>p.jsxs("div",{className:`p-3 rounded-lg ${B.author.role==="technician"?"bg-emerald-50 ml-6":"bg-gray-100 mr-6"}`,children:[p.jsxs("div",{className:"flex justify-between items-start mb-1",children:[p.jsxs("span",{className:"font-medium text-sm",children:[B.author.full_name,B.author.role==="technician"&&" (Technician)"]}),p.jsx("span",{className:"text-xs text-gray-500",children:gi(new Date(B.created_at),"MMM d, h:mm a")})]}),p.jsx("p",{className:"text-gray-800",children:B.message})]},B.id))}):p.jsx("div",{className:"text-center py-8 text-gray-500",children:t.status==="pending"?p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"Your repair request is pending assignment to a technician."}),p.jsx("p",{className:"mt-2",children:"You'll be notified when a technician accepts your request."})]}):p.jsx(p.Fragment,{children:"No messages yet. Start the conversation!"})})})]})]})}),t.status!=="cancelled"&&t.status!=="completed"&&p.jsxs("form",{onSubmit:i($),className:"p-6 border-t",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Send a Message"}),p.jsx("textarea",{id:"message",rows:3,...s("message",{required:"Message is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Type your message here..."}),a.message&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.message.message})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:l?"Sending...":"Send Message"})})]})]})})}const J1e={pending:"bg-yellow-100 text-yellow-800",assigned:"bg-blue-100 text-blue-800",diagnosing:"bg-purple-100 text-purple-800",repairing:"bg-indigo-100 text-indigo-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},Q1e={pending:p.jsx(Bd,{className:"h-5 w-5"}),assigned:p.jsx(ha,{className:"h-5 w-5"}),diagnosing:p.jsx(Yd,{className:"h-5 w-5"}),repairing:p.jsx(ha,{className:"h-5 w-5"}),completed:p.jsx(Wi,{className:"h-5 w-5"}),cancelled:p.jsx($v,{className:"h-5 w-5"})};function ewe({userRole:t="user",userId:e=null}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[a,o]=R.useState(null),[l,c]=R.useState(!1),[u,d]=R.useState(null),[h,f]=R.useState("all"),[m,y]=R.useState("");R.useEffect(()=>{v();const T=tt.channel("repair_status_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"repair_requests"},P=>{r($=>$.map(j=>j.id===P.new.id?{...j,...P.new}:j))}).subscribe(),C=tt.channel("repair_updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"repair_updates"},P=>{n.find(j=>j.id===P.new.repair_id)&&v()}).subscribe();return()=>{tt.removeChannel(T),tt.removeChannel(C)}},[t,e]);const v=async()=>{try{i(!0);const{data:{user:T}}=await tt.auth.getUser();if(!T&&!e){i(!1);return}let C=tt.from("repair_requests").select(`
          *,
          technician:profiles!technician_id(full_name)
        `).order("created_at",{ascending:!1});t==="user"?C=C.eq("user_id",e||T.id):t==="technician"&&(C=C.or(`technician_id.eq.${e||T.id},status.eq.pending`));const{data:P,error:$}=await C;if($)throw $;r(P||[])}catch(T){console.error("Error fetching repair history:",T)}finally{i(!1)}},x=async T=>{try{d(T);const{error:C}=await tt.from("repair_requests").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",T);if(C)throw C;const{data:{user:P}}=await tt.auth.getUser();P&&await tt.from("repair_updates").insert([{repair_id:T,author_id:P.id,message:"Request cancelled by user."}]),r($=>$.map(j=>j.id===T?{...j,status:"cancelled"}:j))}catch(C){console.error("Error cancelling repair:",C),alert("Failed to cancel repair request. Please try again.")}finally{d(null)}},b=async(T,C)=>{try{const{data:{user:P}}=await tt.auth.getUser();if(!P)return;const $=n.find(F=>F.id===T),j={status:C,updated_at:new Date().toISOString()};C==="assigned"&&($==null?void 0:$.technician_id)===null&&(j.technician_id=P.id);const{error:O}=await tt.from("repair_requests").update(j).eq("id",T);if(O)throw O;if(C==="assigned"&&($==null?void 0:$.status)!=="assigned")try{await tt.from("repair_updates").insert([{repair_id:T,author_id:P.id,message:"Your repair request has been accepted and assigned to a technician. We'll be in touch shortly to arrange the next steps."}])}catch(F){console.error("Error sending notification:",F)}r(F=>F.map(B=>B.id===T?{...B,status:C,updated_at:new Date().toISOString(),technician_id:j.technician_id||B.technician_id}:B))}catch(P){console.error("Error updating repair status:",P),alert("Failed to update repair status. Please try again.")}},_=T=>{o(T),c(!0)},k=()=>{c(!1),o(null)},N=()=>{v()},A=n.filter(T=>{if(h!=="all"&&T.status!==h)return!1;if(m){const C=m.toLowerCase();return T.device_type.toLowerCase().includes(C)||T.device_model&&T.device_model.toLowerCase().includes(C)||T.issue_description.toLowerCase().includes(C)||T.user_name&&T.user_name.toLowerCase().includes(C)}return!0});return s?p.jsx("div",{className:"flex justify-center items-center h-48",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:p.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4 md:items-center",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"relative",children:[p.jsx(q0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),p.jsx("input",{type:"text",placeholder:"Search repairs...",value:m,onChange:T=>y(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"})]})}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="all"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"All"}),p.jsx("button",{onClick:()=>f("pending"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Pending"}),p.jsx("button",{onClick:()=>f("assigned"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="assigned"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Assigned"}),p.jsx("button",{onClick:()=>f("diagnosing"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="diagnosing"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Diagnosing"}),p.jsx("button",{onClick:()=>f("repairing"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="repairing"?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Repairing"}),p.jsx("button",{onClick:()=>f("completed"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="completed"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:"Completed"})]})]})}),A.map(T=>p.jsx("div",{className:`bg-white rounded-lg shadow-md overflow-hidden transition-all duration-200 ${T.status==="pending"?"border-l-4 border-yellow-400":T.status==="assigned"?"border-l-4 border-blue-400":""}`,children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ha,{className:"h-5 w-5 text-emerald-600"}),p.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[T.device_type," ",T.device_model&&`- ${T.device_model}`," Repair"]})]}),p.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center ${J1e[T.status]}`,children:[Q1e[T.status],p.jsx("span",{className:"ml-1 capitalize",children:T.status})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Issue"}),p.jsx("p",{className:"text-gray-900 line-clamp-2",children:T.issue_description})]}),p.jsx("div",{children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Zh,{className:"w-4 h-4 text-gray-500 mt-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Address"}),p.jsx("p",{className:"text-gray-900 line-clamp-1",children:T.address})]})]})})]}),T.estimated_cost&&p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Estimated Cost"}),p.jsxs("p",{className:"text-gray-900",children:["$",T.estimated_cost]})]}),T.technician&&p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Assigned Technician"}),p.jsx("p",{className:"text-gray-900",children:T.technician.full_name})]}),p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[p.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[p.jsx(Bd,{className:"w-4 h-4"}),p.jsxs("span",{children:["Requested on ",gi(new Date(T.created_at),"MMM d, yyyy")]})]}),p.jsxs("div",{className:"flex gap-2",children:[t==="user"&&T.status==="pending"&&p.jsxs("button",{onClick:()=>x(T.id),disabled:u===T.id,className:"inline-flex items-center px-3 py-2 border border-red-300 text-sm font-medium rounded-md text-red-600 hover:bg-red-50 disabled:opacity-50",children:[p.jsx($v,{className:"w-4 h-4 mr-2"}),u===T.id?"Cancelling...":"Cancel Request"]}),t==="technician"&&T.status==="pending"&&p.jsxs("button",{onClick:()=>b(T.id,"assigned"),className:"inline-flex items-center px-3 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-600 hover:bg-blue-50",children:[p.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Accept Request"]}),t==="technician"&&T.status==="assigned"&&p.jsxs("button",{onClick:()=>b(T.id,"diagnosing"),className:"inline-flex items-center px-3 py-2 border border-purple-300 text-sm font-medium rounded-md text-purple-600 hover:bg-purple-50",children:[p.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Start Diagnosis"]}),t==="technician"&&T.status==="diagnosing"&&p.jsxs("button",{onClick:()=>b(T.id,"repairing"),className:"inline-flex items-center px-3 py-2 border border-indigo-300 text-sm font-medium rounded-md text-indigo-600 hover:bg-indigo-50",children:[p.jsx(ha,{className:"w-4 h-4 mr-2"}),"Start Repair"]}),t==="technician"&&T.status==="repairing"&&p.jsxs("button",{onClick:()=>b(T.id,"completed"),className:"inline-flex items-center px-3 py-2 border border-green-300 text-sm font-medium rounded-md text-green-600 hover:bg-green-50",children:[p.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Mark Completed"]}),p.jsxs("button",{onClick:()=>_(T),className:"inline-flex items-center px-3 py-2 border border-emerald-600 text-sm font-medium rounded-md text-emerald-600 hover:bg-emerald-50",children:[p.jsx(tR,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]})},T.id)),A.length===0&&p.jsxs("div",{className:"text-center py-8 bg-white shadow rounded-lg",children:[p.jsx(ha,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No repair requests found"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:h!=="all"?`No ${h} repair requests found.`:m?"No repair requests match your search criteria.":t==="user"?"Start by requesting a device repair from the dashboard.":"New repair requests will appear here."})]}),l&&a&&p.jsx(Z1e,{repair:a,onClose:k,onUpdate:N,userRole:t})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe=1e-7,nwe=1e-4;class xR{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class FI{refCount(e){return Wo("refCount")}incRef(e){return Wo("incRef")}timerAvailable(){return!0}time(e){return Wo("time")}read(e){return Wo("read")}readSync(e){return Wo("readSync")}readToGPU(e,n){return Wo("readToGPU")}numDataIds(){return Wo("numDataIds")}disposeData(e,n){return Wo("disposeData")}write(e,n,r){return Wo("write")}move(e,n,r,s,i){return Wo("move")}createTensorFromGPUData(e,n,r){return Wo("createTensorFromGPUData")}memory(){return Wo("memory")}floatPrecision(){return Wo("floatPrecision")}epsilon(){return this.floatPrecision()===32?twe:nwe}dispose(){return Wo("dispose")}}function Wo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,sv(t,e,n)}function bR(t,e,n){return Math.max(t,Math.min(e,n))}function wR(t){return t%2===0?t:t+1}function sv(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function swe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function le(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ul(t,e,n=""){le(jn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Bx(t){le(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Xe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function iwe(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function jn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ix(t){return t%1===0}function Oj(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Lv(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function xW(t,e=s=>0,n,r){return new Promise((s,i)=>{let a=0;const o=()=>{if(t()){s();return}a++;const l=e(a);if(n!=null&&a>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function KJ(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Sn(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),le(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),le(t.every(r=>ix(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function _m(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Sn(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[a]==null||i[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function Ui(t,e){return _s(t,e)}function _s(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function awe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function owe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function XJ(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function I5(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function lwe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function k_(t){return typeof t=="string"||t instanceof String}function cwe(t){return typeof t=="boolean"}function jj(t){return typeof t=="number"}function Wx(t){return Array.isArray(t)?Wx(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":jj(t)?"float32":k_(t)?"string":cwe(t)?"bool":"float32"}function $j(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Dj(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Gt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function YJ(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let a=0;a<i;a++)s[a]=n[t+a]}else{const i=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=YJ(t+l*o,a,n,r)}return s}function Pc(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return YJ(0,t,e,n)}function uwe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function _R(t,e){const n=pa(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function pa(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function ZJ(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Pc(t,new Float32Array(n));if(e==="int32")return Pc(t,new Int32Array(n));if(e==="bool")return Pc(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Hl(t){t.forEach(e=>{le(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function jd(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Ux(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function x0(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bW="tfjsflags";class JJ{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=dwe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(We().getBool("IS_TEST")||We().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];We().getBool("IS_TEST")||We().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(x0(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);bW in e&&e[bW].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=fwe(s,i)})}}function dwe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(hwe(e,r[0],r[1]),r.join("="))),e}function hwe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function fwe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function We(){return kR}let kR=null;function pwe(t){kR=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e3;function QJ(){if(e3==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");e3=t}return e3}function mwe(){const t=QJ();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function SR(t,e){const n=mwe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const S_="Abs",Vx="Acos",Hx="Acosh",K0="Add",N_="AddN",zI="All",BI="Any",C_="ArgMax",T_="ArgMin",qx="Asin",Gx="Asinh",Kx="Atan",Xx="Atanh",Yx="Atan2",I_="AvgPool",WI="AvgPoolGrad",A_="AvgPool3D",UI="AvgPool3DGrad",E_="BatchMatMul",P_="BatchToSpaceND",VI="Bincount",O_="BitwiseAnd",eQ="BroadcastTo",HI="BroadcastArgs",Zx="Cast",Jx="Ceil",Qx="ClipByValue",qI="Complex",j_="ComplexAbs",$_="Concat",D_="Conv2D",GI="Conv2DBackpropFilter",L_="Conv2DBackpropInput",R_="Conv3D",KI="Conv3DBackpropFilterV2",XI="Conv3DBackpropInputV2",eb="Cos",tb="Cosh",YI="Cumprod",M_="Cumsum",ZI="CropAndResize",JI="DenseBincount",QI="DepthToSpace",F_="DepthwiseConv2dNative",eA="DepthwiseConv2dNativeBackpropFilter",tA="DepthwiseConv2dNativeBackpropInput",nA="Diag",z_="Dilation2D",A5="Dilation2DBackpropInput",E5="Dilation2DBackpropFilter",tQ="Draw",nb="RealDiv",rA="Einsum",rb="Elu",sA="EluGrad",sb="Erf",B_="Equal",ib="Exp",W_="ExpandDims",ab="Expm1",iA="FFT",aA="Fill",oA="FlipLeftRight",ob="Floor",lb="FloorDiv",U_="FusedBatchNorm",V_="GatherV2",lA="GatherNd",H_="Greater",cb="GreaterEqual",ub="Identity",cA="IFFT",uA="Imag",db="IsFinite",hb="IsInf",fb="IsNan",q_="LeakyRelu",G_="Less",K_="LessEqual",dA="LinSpace",pb="Log",mb="Log1p",X_="LogicalAnd",Y_="LogicalNot",Z_="LogicalOr",nQ="LogSoftmax",J_="LRN",hA="LRNGrad",Q_="Max",gb="Maximum",ek="MaxPool",fA="MaxPoolGrad",tk="MaxPool3D",pA="MaxPool3DGrad",mA="MaxPoolWithArgmax",nk="Mean",rk="Min",yb="Minimum",sk="MirrorPad",vb="Mod",gA="Multinomial",xb="Multiply",ik="Neg",ak="NotEqual",yA="NonMaxSuppressionV3",vA="NonMaxSuppressionV4",xA="NonMaxSuppressionV5",ok="OnesLike",lk="OneHot",ck="Pack",uk="PadV2",bb="Pow",dk="Prelu",hk="Prod",bA="RaggedGather",wA="RaggedRange",_A="RaggedTensorToTensor",kA="Range",SA="Real",wb="Reciprocal",_b="Relu",fk="Reshape",pk="ResizeNearestNeighbor",NA="ResizeNearestNeighborGrad",mk="ResizeBilinear",CA="ResizeBilinearGrad",kb="Relu6",gk="Reverse",Sb="Round",Nb="Rsqrt",TA="ScatterNd",IA="TensorScatterUpdate",AA="SearchSorted",yk="Select",Cb="Selu",vk="Slice",Tb="Sin",Ib="Sinh",Ab="Sign",Eb="Sigmoid",Pb="Softplus",Ob="Sqrt",xk="Sum",bk="SpaceToBatchND",wk="SplitV",_k="Softmax",EA="SparseFillEmptyRows",PA="SparseReshape",OA="SparseSegmentMean",jA="SparseSegmentSum",$A="SparseToDense",jb="SquaredDifference",DA="Square",kk="StaticRegexReplace",LA="StridedSlice",RA="StringNGrams",MA="StringSplit",FA="StringToHashBucketFast",$b="Sub",Db="Tan",Lb="Tanh",Rb="Tile",zA="TopK",BA="Transform",Xg="Transpose",WA="Unique",Sk="Unpack",Nk="UnsortedSegmentSum",Ck="ZerosLike",Mb="Step",P5="FromPixels",UA="RotateWithOffset",N2="_FusedMatMul",C2="FusedConv2D",T2="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(...t){We().getBool("IS_TEST")||We().getBool("PROD")||console.warn(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5=SR("kernelRegistry",()=>new Map),Lj=SR("gradRegistry",()=>new Map);function j5(t,e){const n=sQ(t,e);return O5.get(n)}function Rj(t){return Lj.get(t)}function Mj(t){const e=O5.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,a]=s,[o]=i.split("_");o===t&&n.push(a)}return n}function NR(t){const{kernelName:e,backendName:n}=t,r=sQ(e,n);O5.has(r)&&Tl(`The kernel '${e}' for backend '${n}' is already registered`),O5.set(r,t)}function rQ(t){const{kernelName:e}=t;Lj.has(e)&&We().getBool("DEBUG")&&Tl(`Overriding the gradient for '${e}'`),Lj.set(e,t)}function sQ(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQ(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var aQ=$r,wc=null;try{wc=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function $r(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}$r.prototype.__isLong__;Object.defineProperty($r.prototype,"__isLong__",{value:!0});function dl(t){return(t&&t.__isLong__)===!0}$r.isLong=dl;var wW={},_W={};function X0(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=_W[t],r)?r:(n=Dr(t,(t|0)<0?-1:0,!0),s&&(_W[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=wW[t],r)?r:(n=Dr(t,t<0?-1:0,!1),s&&(wW[t]=n),n))}$r.fromInt=X0;function _c(t,e){if(isNaN(t))return e?Mg:kc;if(e){if(t<0)return Mg;if(t>=oQ)return uQ}else{if(t<=-SW)return Qo;if(t+1>=SW)return cQ}return t<0?_c(-t,e).neg():Dr(t%ax|0,t/ax|0,e)}$r.fromNumber=_c;function Dr(t,e,n){return new $r(t,e,n)}$r.fromBits=Dr;var $5=Math.pow;function CR(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return kc;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return CR(t.substring(1),e,n).neg();for(var s=_c($5(n,8)),i=kc,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),l=parseInt(t.substring(a,a+o),n);if(o<8){var c=_c($5(n,o));i=i.mul(c).add(_c(l))}else i=i.mul(s),i=i.add(_c(l))}return i.unsigned=e,i}$r.fromString=CR;function Bu(t,e){return typeof t=="number"?_c(t,e):typeof t=="string"?CR(t,e):Dr(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}$r.fromValue=Bu;var kW=65536,gwe=1<<24,ax=kW*kW,oQ=ax*ax,SW=oQ/2,NW=X0(gwe),kc=X0(0);$r.ZERO=kc;var Mg=X0(0,!0);$r.UZERO=Mg;var kv=X0(1);$r.ONE=kv;var lQ=X0(1,!0);$r.UONE=lQ;var Fj=X0(-1);$r.NEG_ONE=Fj;var cQ=Dr(-1,2147483647,!1);$r.MAX_VALUE=cQ;var uQ=Dr(-1,-1,!0);$r.MAX_UNSIGNED_VALUE=uQ;var Qo=Dr(0,-2147483648,!1);$r.MIN_VALUE=Qo;var _t=$r.prototype;_t.toInt=function(){return this.unsigned?this.low>>>0:this.low};_t.toNumber=function(){return this.unsigned?(this.high>>>0)*ax+(this.low>>>0):this.high*ax+(this.low>>>0)};_t.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Qo)){var n=_c(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=_c($5(e,6),this.unsigned),a=this,o="";;){var l=a.div(i),c=a.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(a=l,a.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}};_t.getHighBits=function(){return this.high};_t.getHighBitsUnsigned=function(){return this.high>>>0};_t.getLowBits=function(){return this.low};_t.getLowBitsUnsigned=function(){return this.low>>>0};_t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qo)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};_t.isZero=function(){return this.high===0&&this.low===0};_t.eqz=_t.isZero;_t.isNegative=function(){return!this.unsigned&&this.high<0};_t.isPositive=function(){return this.unsigned||this.high>=0};_t.isOdd=function(){return(this.low&1)===1};_t.isEven=function(){return(this.low&1)===0};_t.equals=function(e){return dl(e)||(e=Bu(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};_t.eq=_t.equals;_t.notEquals=function(e){return!this.eq(e)};_t.neq=_t.notEquals;_t.ne=_t.notEquals;_t.lessThan=function(e){return this.comp(e)<0};_t.lt=_t.lessThan;_t.lessThanOrEqual=function(e){return this.comp(e)<=0};_t.lte=_t.lessThanOrEqual;_t.le=_t.lessThanOrEqual;_t.greaterThan=function(e){return this.comp(e)>0};_t.gt=_t.greaterThan;_t.greaterThanOrEqual=function(e){return this.comp(e)>=0};_t.gte=_t.greaterThanOrEqual;_t.ge=_t.greaterThanOrEqual;_t.compare=function(e){if(dl(e)||(e=Bu(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};_t.comp=_t.compare;_t.negate=function(){return!this.unsigned&&this.eq(Qo)?Qo:this.not().add(kv)};_t.neg=_t.negate;_t.add=function(e){dl(e)||(e=Bu(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,o=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,f=0;return f+=i+c,h+=f>>>16,f&=65535,h+=s+l,d+=h>>>16,h&=65535,d+=r+o,u+=d>>>16,d&=65535,u+=n+a,u&=65535,Dr(h<<16|f,u<<16|d,this.unsigned)};_t.subtract=function(e){return dl(e)||(e=Bu(e)),this.add(e.neg())};_t.sub=_t.subtract;_t.multiply=function(e){if(this.isZero())return kc;if(dl(e)||(e=Bu(e)),wc){var n=wc.mul(this.low,this.high,e.low,e.high);return Dr(n,wc.get_high(),this.unsigned)}if(e.isZero())return kc;if(this.eq(Qo))return e.isOdd()?Qo:kc;if(e.eq(Qo))return this.isOdd()?Qo:kc;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(NW)&&e.lt(NW))return _c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,m=0;return m+=a*u,f+=m>>>16,m&=65535,f+=i*u,h+=f>>>16,f&=65535,f+=a*c,h+=f>>>16,f&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=a*l,d+=h>>>16,h&=65535,d+=r*u+s*c+i*l+a*o,d&=65535,Dr(f<<16|m,d<<16|h,this.unsigned)};_t.mul=_t.multiply;_t.divide=function(e){if(dl(e)||(e=Bu(e)),e.isZero())throw Error("division by zero");if(wc){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?wc.div_u:wc.div_s)(this.low,this.high,e.low,e.high);return Dr(n,wc.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Mg:kc;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Mg;if(e.gt(this.shru(1)))return lQ;i=Mg}else{if(this.eq(Qo)){if(e.eq(kv)||e.eq(Fj))return Qo;if(e.eq(Qo))return kv;var a=this.shr(1);return r=a.div(e).shl(1),r.eq(kc)?e.isNegative()?kv:Fj:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Qo))return this.unsigned?Mg:kc;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=kc}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),l=o<=48?1:$5(2,o-48),c=_c(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=_c(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=kv),i=i.add(c),s=s.sub(u)}return i};_t.div=_t.divide;_t.modulo=function(e){if(dl(e)||(e=Bu(e)),wc){var n=(this.unsigned?wc.rem_u:wc.rem_s)(this.low,this.high,e.low,e.high);return Dr(n,wc.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};_t.mod=_t.modulo;_t.rem=_t.modulo;_t.not=function(){return Dr(~this.low,~this.high,this.unsigned)};_t.and=function(e){return dl(e)||(e=Bu(e)),Dr(this.low&e.low,this.high&e.high,this.unsigned)};_t.or=function(e){return dl(e)||(e=Bu(e)),Dr(this.low|e.low,this.high|e.high,this.unsigned)};_t.xor=function(e){return dl(e)||(e=Bu(e)),Dr(this.low^e.low,this.high^e.high,this.unsigned)};_t.shiftLeft=function(e){return dl(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Dr(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Dr(0,this.low<<e-32,this.unsigned)};_t.shl=_t.shiftLeft;_t.shiftRight=function(e){return dl(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Dr(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Dr(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};_t.shr=_t.shiftRight;_t.shiftRightUnsigned=function(e){if(dl(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Dr(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Dr(n,0,this.unsigned):Dr(n>>>e-32,0,this.unsigned)};_t.shru=_t.shiftRightUnsigned;_t.shr_u=_t.shiftRightUnsigned;_t.toSigned=function(){return this.unsigned?Dr(this.low,this.high,!1):this};_t.toUnsigned=function(){return this.unsigned?this:Dr(this.low,this.high,!0)};_t.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};_t.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};_t.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};$r.fromBytes=function(e,n,r){return r?$r.fromBytesLE(e,n):$r.fromBytesBE(e,n)};$r.fromBytesLE=function(e,n){return new $r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};$r.fromBytesBE=function(e,n){return new $r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const dQ=Bc(aQ),ywe=CK({__proto__:null,default:dQ},[aQ]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ig=dQ||ywe;function VA(t){return Ig.fromString(t,!0,16)}const hQ=VA("c3a5c85c97cb3127"),vg=VA("b492b66fbe98f273"),Da=VA("9ae16a3b2f90404f");function zj(t){return t.xor(t.shru(47))}function fQ(t,e,n){const r=t.slice(e,e+n);return Ig.fromBytes(Array.from(r),!0,!0)}function Sr(t,e){return fQ(t,e,8)}function CW(t,e){return fQ(t,e,4)}function yi(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Up(t,e,n=VA("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function vwe(t,e,n,r,s,i){s=s.add(t),i=yi(i.add(s).add(r),21);const a=s;return s=s.add(e),s=s.add(n),i=i.add(yi(s,44)),[s.add(r),i.add(a)]}function gN(t,e,n,r){return vwe(Sr(t,e),Sr(t,e+8),Sr(t,e+16),Sr(t,e+24),n,r)}function xwe(t,e=t.length){if(e>=8){const n=Da.add(e*2),r=Sr(t,0).add(Da),s=Sr(t,e-8),i=yi(s,37).mul(n).add(r),a=yi(r,25).add(s).mul(n);return Up(i,a,n)}if(e>=4){const n=Da.add(e*2),r=CW(t,0);return Up(r.shl(3).add(e),CW(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),a=e+(s<<2);return zj(Da.mul(i).xor(hQ.mul(a))).mul(Da)}return Da}function bwe(t,e=t.length){const n=Da.add(e*2),r=Sr(t,0).mul(vg),s=Sr(t,8),i=Sr(t,e-8).mul(n),a=Sr(t,e-16).mul(Da);return Up(yi(r.add(s),43).add(yi(i,30)).add(a),r.add(yi(s.add(Da),18)).add(i),n)}function wwe(t,e=t.length){const n=Da.add(e*2),r=Sr(t,0).mul(Da),s=Sr(t,8),i=Sr(t,e-8).mul(n),a=Sr(t,e-16).mul(Da),o=yi(r.add(s),43).add(yi(i,30)).add(a),l=Up(o,r.add(yi(s.add(Da),18)).add(i),n),c=Sr(t,16).mul(n),u=Sr(t,24),d=o.add(Sr(t,e-32)).mul(n),h=l.add(Sr(t,e-24)).mul(n);return Up(yi(c.add(u),43).add(yi(d,30)).add(h),c.add(yi(u.add(r),18)).add(d),n)}function _we(t,e=t.length){const n=Ig.fromNumber(81,!0);if(e<=32)return e<=16?xwe(t,e):bwe(t,e);if(e<=64)return wwe(t,e);let r=n,s=n.mul(vg).add(113),i=zj(s.mul(Da).add(113)).mul(Da),a=[Ig.UZERO,Ig.UZERO],o=[Ig.UZERO,Ig.UZERO];r=r.mul(Da).add(Sr(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=yi(r.add(s).add(a[0]).add(Sr(t,l+8)),37).mul(vg),s=yi(s.add(a[1]).add(Sr(t,l+48)),42).mul(vg),r=r.xor(o[1]),s=s.add(a[0]).add(Sr(t,l+40)),i=yi(i.add(o[0]),33).mul(vg),a=gN(t,l,a[1].mul(vg),r.add(o[0])),o=gN(t,l+32,i.add(o[1]),s.add(Sr(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const d=vg.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=yi(r.add(s).add(a[0]).add(Sr(t,l+8)),37).mul(d),s=yi(s.add(a[1]).add(Sr(t,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),s=s.add(a[0].mul(9).add(Sr(t,l+40))),i=yi(i.add(o[0]),33).mul(d),a=gN(t,l,a[1].mul(d),r.add(o[0])),o=gN(t,l+32,i.add(o[1]),s.add(Sr(t,l+16))),[i,r]=[r,i],Up(Up(a[0],o[0],d).add(zj(s).mul(hQ)).add(i),Up(a[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function km(t,e){return e==="string"?Vp(t):Y0([t],e)}function kwe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Y0(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=b0(t)),We().getBool("DEBUG")&&awe(t,e),kwe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ho(){return We().platform.now()}function Vp(t,e="utf-8"){return e=e||"utf-8",We().platform.encode(t,e)}function nm(t,e="utf-8"){return e=e||"utf-8",We().platform.decode(t,e)}function Dc(t){return We().platform.isTypedArray!=null?We().platform.isTypedArray(t):iQ(t)}function b0(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||x0(t)||t==null||Dc(t)&&n)e.push(t);else if(Array.isArray(t)||Dc(t))for(let r=0;r<t.length;++r)b0(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)b0(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Swe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Cwe)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let a;const o=ho();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();a=Promise.resolve({kernelMs:ho()-o})}if(We().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{Nwe(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),s,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],i,l[2])})})}}function Nwe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Cwe{logKernelProfile(e,n,r,s,i,a){const o=typeof s=="number"?Lv(`${s}ms`,9):s.error,l=Lv(e,25),c=n.rank,u=n.size,d=Lv(n.shape.toString(),14);let h="";for(const f in i){const m=i[f];if(m!=null){const y=m.shape||n.shape,v=y.length;h+=`${f}: ${v}D ${v>0?y:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${u}	%c${h}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let m=0;m<e.length;m++)if(r[h.id]){c.outputs.forEach(y=>r[y.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(const h in u)i[u[h].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&a[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];r[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,o.push(d)}}return o}function Iwe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],a=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?a.push(c):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(a);for(const l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!jn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TW=20,L1=3,t3=7;function Awe(t,e,n,r){const s=Gt(e),i=Ewe(t,e,n,s),a=e.length,o=kC(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Ewe(t,e,n,r){const s=Xe(e),i=r[r.length-1],a=new Array(i).fill(0),o=e.length,l=n==="complex64"?cw(t):t;if(o>1)for(let c=0;c<s/i;c++){const u=c*i;for(let d=0;d<i;d++)a[d]=Math.max(a[d],lw(l[u+d],0,n).length)}return a}function lw(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(t3))} + ${parseFloat(t[1].toFixed(t3))}j`:k_(t)?r=`'${t}'`:n==="bool"?r=pQ(t):r=parseFloat(t.toFixed(t3)).toString(),Lv(r,e)}function pQ(t){return t===0?"false":"true"}function kC(t,e,n,r,s,i=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=cw(t);return[lw(y[0],0,n)]}return n==="bool"?[pQ(t[0])]:[t[0].toString()]}if(l===1){if(o>TW){const v=L1*a;let x=Array.from(t.slice(0,v)),b=Array.from(t.slice((o-L1)*a,o*a));return n==="complex64"&&(x=cw(x),b=cw(b)),["["+x.map((_,k)=>lw(_,s[k],n)).join(", ")+", ..., "+b.map((_,k)=>lw(_,s[o-L1+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?cw(t):Array.from(t)).map((v,x)=>lw(v,s[x],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*a,h=[];if(o>TW){for(let y=0;y<L1;y++){const v=y*d,x=v+d;h.push(...kC(t.slice(v,x),c,n,u,s,!1))}h.push("...");for(let y=o-L1;y<o;y++){const v=y*d,x=v+d;h.push(...kC(t.slice(v,x),c,n,u,s,y===o-1))}}else for(let y=0;y<o;y++){const v=y*d,x=v+d;h.push(...kC(t.slice(v,x),c,n,u,s,y===o-1))}const f=l===2?",":"";h[0]="["+(o>0?h[0]+f:"");for(let y=1;y<h.length-1;y++)h[y]=" "+h[y]+f;let m=`,
`;for(let y=2;y<l;y++)m+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":m),h}function cw(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fs{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Xe(e),r!=null){const s=r.length;le(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||_s(n,this.size),this.strides=Gt(e)}set(e,...n){n.length===0&&(n=[0]),le(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return bu().makeTensor(this.values,this.shape,this.dtype)}}let bu=null,iv=null;function Pwe(t){bu=t}function Owe(t){iv=t}class Or{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Xe(e),this.strides=Gt(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return iv.buffer(this.shape,this.dtype,e)}bufferSync(){return iv.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Pc(this.shape,e,this.dtype==="complex64")}arraySync(){return Pc(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=bu().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>nm(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),bu().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=bu().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>nm(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await bu().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),bu().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return iv.print(this,e)}clone(){return this.throwIfDisposed(),iv.clone(this)}toString(e=!1){const n=this.dataSync();return Awe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),iv.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),bu().makeVariable(this,e,n,r)}}Object.defineProperty(Or,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Ze(){return SR("Tensor",()=>Or)}Ze();class I2 extends Or{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!jn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);bu().disposeTensor(this),this.dataId=e.dataId,bu().incRef(this,null)}dispose(){bu().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(I2,Symbol.hasInstance,{value:t=>t instanceof Or&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bj;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(Bj||(Bj={}));var Wj;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Wj||(Wj={}));var Uj;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(Uj||(Uj={}));var Vj;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(Vj||(Vj={}));var Hj;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(Hj||(Hj={}));const jwe={float32:Vj,int32:Wj,bool:Uj,complex64:Hj};function xo(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return jwe[t][e]}function HA(t){return xo(t,"int32")}function mQ(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function gQ(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hs(t,e){if(t.dtype===e.dtype)return[t,e];const n=xo(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function $we(t,e){le(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function yQ(t){const e=[];return vQ(t,e,new Set),e}function vQ(t,e,n){if(t==null)return;if(t instanceof Or){e.push(t);return}if(!Dwe(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),vQ(i,e,n))}}function Dwe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3(t){return t.kernelName!=null}class IW{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ox{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new IW}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Tl(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Swe(this.backendInstance),!0}setupRegisteredKernels(){Mj(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){Mj(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof FI)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Tl(`Initialization of backend ${e} failed`),Tl(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Tl(`Initialization of backend ${e} failed`),Tl(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return ox.nextTensorId++}nextVariableId(){return ox.nextVariableId++}clone(e){const n=Ne.runKernel(ub,{x:e}),r={x:e},s=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return Ne.runKernel(Zx,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(j5(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-n-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=n3(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(n3(e)){const{kernelName:m,inputs:y,attrs:v}=e;this.backendName==null&&this.backend;const x=j5(m,this.backendName);le(x!=null,()=>`Cannot find registered kernel '${m}' for backend '${this.backendName}'`),o=()=>{const b=this.backend.numDataIds();l=x.kernelFunc({inputs:y,attrs:v,backend:this.backend});const _=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(m,b,_);const k=_.map(N=>N.rank!=null?N:this.makeTensorFromTensorInfo(N));if(s){const N=this.getTensorsForGradient(m,y,k);r=this.saveTensorsForBackwardMode(N)}return k}}else{const{forwardFunc:m}=e,y=v=>{s&&(r=v.map(x=>this.keep(this.clone(x))))};o=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>m(this.backend,y));const x=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,v,x),x}}const{inputs:u,attrs:d}=e,h=n3(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(f=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(c,u,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(m=>u[m]!=null?u[m].shape:null),outputShapes:n.map(m=>m.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=Rj(e);if(s!=null){const i=s.inputsToSave||[],a=s.outputsToSave||[];let o;s.saveAllInputs?(le(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=i.map(c=>n[c]);const l=r.filter((c,u)=>a[u]);return o.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&k_(e[0])&&(i=e.map(l=>Vp(l)));const a=s.write(i,n,r),o=new Or(n,r,a,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(a),c=lwe(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,a=new Or(s,i,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new I2(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*I5(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof I2||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*I5(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=Rj(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=r[d],f=pa(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),s(c.length>1?c:c[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=yQ(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(le(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));le(i instanceof Or,()=>"The result y returned by f() must be a tensor.");const a=Twe(this.state.activeTape,n,i);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??Lwe(i.shape),Iwe(o,a,c=>this.tidy(c),Rwe);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return le($j(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{le(n.every(o=>o instanceof Or),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((o,l)=>{s[l]=o});const i=(o,l)=>(r=e(...n,l),le(r.value instanceof Or,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),le($j(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];le(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),le(u.every(h=>h instanceof Or),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ho(),r=await this.backend.time(e);return r.wallMs=ho()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new IW;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}ox.nextTensorId=0;ox.nextVariableId=0;function Lwe(t){const e=_R(Xe(t),"float32");return Ne.makeTensor(e,t,"float32")}function xQ(){const t=QJ();if(t._tfengine==null){const e=new JJ(t);t._tfengine=new ox(e)}return pwe(t._tfengine.ENV),Pwe(()=>t._tfengine),t._tfengine}const Ne=xQ();function Rwe(t,e){const n={a:t,b:e};return Ne.runKernel(K0,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mwe(){return typeof navigator<"u"&&navigator!=null}function bQ(t){if(t||Mwe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function wQ(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bo=We();bo.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});bo.registerFlag("IS_BROWSER",()=>wQ());bo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");bo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));bo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));bo.registerFlag("PROD",()=>!1);bo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>bo.getBool("DEBUG"));bo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);bo.registerFlag("IS_TEST",()=>!1);bo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>bo.getBool("DEBUG"));bo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);bo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);bo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sm(t,e){let n=t;if(Dc(t))return e==="string"?[]:[t.length];if(mQ(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(gQ(t))return[t.buffer.size/(e==null?4:I5(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Dc(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&We().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&_Q(t,r,[]),r}function _Q(t,e,n){if(n=n||[],!Array.isArray(t)&&!Dc(t)){le(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}le(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),le(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)_Q(t[s],r,n.concat(s))}function AW(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function de(t,e,n,r="numeric"){if(t instanceof Ze())return AW(r,t.dtype,e,n),t;let s=Wx(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),AW(r,s,e,n),t==null||!Dc(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Sm(t,s);!Dc(t)&&!Array.isArray(t)&&(t=[t]);const o=s!=="string"?Y0(t,s):b0(t,[],!0);return Ne.makeTensor(o,i,s)}function D5(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,a)=>de(i,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TR="__op";function be(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+TR;const s=(...i)=>{Ne.startScope(n);try{const a=r(...i);return x0(a)&&console.error("Cannot return a Promise inside of tidy."),Ne.endScope(a),a}catch(a){throw Ne.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t,e){const n=de(t,"real","complex"),r=de(e,"imag","complex");ul(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return Ne.runKernel(qI,s)}const ef=be({complex_:Fwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(t,e,n,r){if(r==null)r=Wx(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(gQ(t)||mQ(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Ne.backend.createTensorFromGPUData(t,e||n,r)}if(!Dc(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Hl(e);const s=Xe(e),i=Xe(n);le(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==Xe(e.slice(a)):!0;le(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Dc(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Y0(t,r):b0(t,[],!0),Ne.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oc(t,e,n){const r=Sm(t,n);return Nm(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Wu{static join(e){return new Wu(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Dc(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),a=new Uint8Array(i);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+o-c.start,h=o,m=Math.min(n,c.end)-c.start,y=new Uint8Array(c.buffer,d,m-d);if(a.set(y,h),o+=y.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=zwe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function zwe(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mu(){return Ne}function qj(){return Ne.memory()}function Re(t,e){return Ne.tidy(t,e)}function bn(t){yQ(t).forEach(n=>n.dispose())}function Ks(t){return Ne.keep(t)}function kQ(){return Ne.ready()}function SQ(){return Ne.backendName}function IR(t,e,n=1){return Ne.registerBackend(t,e,n)}function AR(){return Ne.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rm=4;async function Gj(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<s.length;++a){const o=s[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((v,x)=>v+x.length,0)+rm*h.length,m=new Uint8Array(f);let y=0;for(let v=0;v<h.length;v++){const x=h[v],b=new Uint8Array(new Uint32Array([x.length]).buffer);m.set(b,y),y+=rm,m.set(x,y),y+=x.length}d(m)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:Uwe(i),specs:n}}function NQ(t,e){const n=new Wu(t),r={};let s=0;for(const i of e){const a=Bwe(i,(o,l)=>n.slice(s+o,s+l));r[i.name]=CQ(i,n.slice(s,s+a)),s+=a}return r}function Bwe(t,e){const n=Xe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=w0[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=rm+new Uint32Array(e(s,s+rm))[0];return s}else r=w0[t.dtype];return n*r}async function Wwe(t,e){const n=Xe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=w0[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=rm+new Uint32Array(await e(s,s+rm))[0];return s}else r=w0[t.dtype];return n*r}function CQ(t,e){const n=t.name,r=t.dtype,s=t.shape,i=Xe(s);let a,o=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=w0[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];a[d]=h*l.scale+l.min}}else if(l.dtype==="float16")a=Xwe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];a[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*c}else if(r==="string"){const l=Xe(t.shape);a=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(o,o+rm))[0];o+=rm;const d=new Uint8Array(e.slice(o,o+u));a.push(d),o+=u}}else{const l=w0[r];if(r==="float32")a=new Float32Array(e);else if(r==="int32")a=new Int32Array(e);else if(r==="bool")a=new Uint8Array(e);else if(r==="complex64"){a=new Float32Array(e);const c=new Float32Array(a.length/2),u=new Float32Array(a.length/2);for(let m=0;m<c.length;m++)c[m]=a[m*2],u[m]=a[m*2+1];const d=Oc(c,s,"float32"),h=Oc(u,s,"float32"),f=ef(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=i*l}return Oc(a,s,r)}async function EW(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const a=new Uint8Array(r.length+i.byteLength);a.set(r,0),a.set(new Uint8Array(i),r.length),r=a}return r.buffer}async function TQ(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const a=await Wwe(i,async(c,u)=>(s=await EW(r,s,u),s.slice(c,u)));s=await EW(r,s,a);const o=s.slice(0,a);s=s.slice(a);const l=CQ(i,o);if(n[i.name]=l,SQ()==="webgpu"){const c=AR();"uploadToGPU"in c&&Xe(l.shape)>=We().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function Uwe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const ER=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function PW(t){return ER?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Vwe(t){if(ER)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Hwe(t){if(ER){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function IQ(t){return Wu.join(t)}function OW(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function AQ(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function EQ(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function PR(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),EQ(t,n,r)}function Tk(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:PW(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:PW(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Wu(t.weightData).byteLength}}function Kj(t){const e=[];for(const n of t)e.push(...n.weights);return e}function qwe(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Gwe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Kwe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Xwe(){const t=qwe(),e=Gwe(),n=Kwe();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let a=0;a<r.length;a++){const o=r[a],l=t[n[o>>10]+(o&1023)]+e[o>>10];i[a]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Xr.instance==null&&(Xr.instance=new Xr),Xr.instance}static registerSaveRouter(e){Xr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Xr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Xr.getHandlers(e,"save")}static getLoadHandlers(e,n){return Xr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Xr.getInstance().loadRouters:Xr.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&s.push(o)}),s}}const Ywe=t=>Xr.registerSaveRouter(t),Zwe=t=>Xr.registerLoadRouter(t),PQ=t=>Xr.getSaveHandlers(t),Jwe=(t,e)=>Xr.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xj="tensorflowjs",Yj=1,Fg="models_store",kp="model_info_store";function OQ(){if(!We().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Zj(t){const e=t.result;e.createObjectStore(Fg,{keyPath:"modelPath"}),e.createObjectStore(kp,{keyPath:"modelPath"})}class _0{constructor(e){if(this.indexedDB=OQ(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(Xj,Yj);i.onupgradeneeded=()=>Zj(i),i.onsuccess=()=>{const a=i.result;if(n==null){const o=a.transaction(Fg,"readonly"),c=o.objectStore(Fg).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(a.close(),s(c.error)),o.oncomplete=()=>a.close()}else{n.weightData=Wu.join(n.weightData);const o=Tk(n),l=a.transaction(kp,"readwrite");let c=l.objectStore(kp),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(h){return s(h)}let d;u.onsuccess=()=>{d=a.transaction(Fg,"readwrite");const h=d.objectStore(Fg);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(m){return s(m)}f.onsuccess=()=>r({modelArtifactsInfo:o}),f.onerror=m=>{c=l.objectStore(kp);const y=c.delete(this.modelPath);y.onsuccess=()=>(a.close(),s(f.error)),y.onerror=v=>(a.close(),s(f.error))}},u.onerror=h=>(a.close(),s(u.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}_0.URL_SCHEME="indexeddb://";const jQ=t=>We().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_0.URL_SCHEME)?Qwe(t.slice(_0.URL_SCHEME.length)):null;Xr.registerSaveRouter(jQ);Xr.registerLoadRouter(jQ);function Qwe(t){return new _0(t)}function e2e(t){return t.startsWith(_0.URL_SCHEME)?t.slice(_0.URL_SCHEME.length):t}class t2e{constructor(){this.indexedDB=OQ()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Xj,Yj);r.onupgradeneeded=()=>Zj(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(kp,"readonly"),o=i.objectStore(kp).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),n(o.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=e2e(e),new Promise((n,r)=>{const s=this.indexedDB.open(Xj,Yj);s.onupgradeneeded=()=>Zj(s),s.onsuccess=()=>{const i=s.result,a=i.transaction(kp,"readwrite"),o=a.objectStore(kp),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=o.delete(e),d=()=>{c=i.transaction(Fg,"readwrite");const f=c.objectStore(Fg).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=m=>r(l.error)};u.onsuccess=d,u.onerror=h=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),a.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jh="/",av="tensorflowjs_models",$Q="info",n2e="model_topology",r2e="weight_specs",s2e="weight_data",i2e="model_metadata";function DQ(t){return{info:[av,t,$Q].join(jh),topology:[av,t,n2e].join(jh),weightSpecs:[av,t,r2e].join(jh),weightData:[av,t,s2e].join(jh),modelMetadata:[av,t,i2e].join(jh)}}function LQ(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function a2e(t){const e=t.split(jh);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(jh)}function o2e(t){return t.startsWith(k0.URL_SCHEME)?t.slice(k0.URL_SCHEME.length):t}class k0{constructor(e){if(!We().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=DQ(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Tk(e),i=Wu.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Vwe(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw LQ(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Hwe(a),n}}k0.URL_SCHEME="localstorage://";const RQ=t=>We().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(k0.URL_SCHEME)?l2e(t.slice(k0.URL_SCHEME.length)):null;Xr.registerSaveRouter(RQ);Xr.registerLoadRouter(RQ);function l2e(t){return new k0(t)}class c2e{constructor(){le(We().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),le(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=av+jh,r=jh+$Q;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const a=a2e(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=o2e(e);const n=DQ(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return LQ(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rv="://";class Oa{constructor(){this.managers={}}static getInstance(){return Oa.instance==null&&(Oa.instance=new Oa),Oa.instance}static registerManager(e,n){le(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Rv)&&(e=e.slice(0,e.indexOf(Rv))),le(e.length>0,()=>"scheme must not be an empty string.");const r=Oa.getInstance();le(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Oa.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Oa.getInstance().managers)}}function SC(t){if(t.indexOf(Rv)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Oa.getSchemes().join(",")}`);return{scheme:t.split(Rv)[0],path:t.split(Rv)[1]}}async function MQ(t,e,n=!1){le(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Xr.getLoadHandlers(t);le(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),le(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=Xr.getSaveHandlers(e);le(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),le(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const a=i[0],o=SC(t).scheme,l=SC(t).path,c=o===SC(t).scheme,u=await s.load();n&&c&&await Oa.getManager(o).removeModel(l);const d=await a.save(u);return n&&!c&&await Oa.getManager(o).removeModel(l),d.modelArtifactsInfo}async function u2e(){const t=Oa.getSchemes(),e={};for(const n of t){const r=await Oa.getManager(n).listModels();for(const s in r){const i=n+Rv+s;e[i]=r[s]}}return e}async function d2e(t){const e=SC(t);return Oa.getManager(e.scheme).removeModel(e.path)}async function h2e(t,e){return MQ(t,e,!1)}async function f2e(t,e){return MQ(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p2e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!We().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return iQ(e)}}if(We().get("IS_BROWSER")){We().setPlatform("browser",new p2e);try{Oa.registerManager(k0.URL_SCHEME,new c2e)}catch{}try{Oa.registerManager(_0.URL_SCHEME,new t2e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2e={importFetch:()=>require("node-fetch")};let r3;class g2e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return We().global.fetch!=null?We().global.fetch(e,n):(r3==null&&(r3=m2e.importFetch()),r3(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}We().get("IS_NODE")&&!We().get("IS_BROWSER")&&We().setPlatform("node",new g2e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yn(t,e="float32",n){return e=e||"float32",Hl(t),new Fs(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t,e){const n=de(t,"x","cast");if(!owe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return Ne.runKernel(Zx,r,s)}const bt=be({cast_:y2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e(t){const n={x:de(t,"x","clone","string_or_numeric")};return Ne.runKernel(ub,n)}const $d=be({clone_:v2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OR(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xQ();const x2e={buffer:yn,cast:bt,clone:$d,print:OR};Owe(x2e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t,e){let n=de(t,"a","add"),r=de(e,"b","add");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(K0,s)}const ot=be({add_:b2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t,e){let n=de(t,"a","floorDiv"),r=de(e,"b","floorDiv");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(lb,s)}const qA=be({floorDiv_:w2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t,e){let n=de(t,"a","div"),r=de(e,"b","div");if([n,r]=hs(n,r),n.dtype==="int32"&&r.dtype==="int32")return qA(n,r);const s={a:n,b:r},i={};return Ne.runKernel(nb,s,i)}const Wt=be({div_:_2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t,e){let n=de(t,"a","mul"),r=de(e,"b","mul");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(xb,s)}const Se=be({mul_:k2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e(t){const e=de(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Ne.runKernel(j_,n)}else{const n={x:e};return Ne.runKernel(S_,n)}}const js=be({abs_:S2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const n={x:de(t,"x","acos")};return Ne.runKernel(Vx,n)}const jR=be({acos_:N2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const n={x:de(t,"x","acosh")};return Ne.runKernel(Hx,n)}const $R=be({acosh_:C2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t){le(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),le(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>de(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!jn(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return Ne.runKernel(N_,r)}const FQ=be({addN_:T2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2e(t,e=null,n=!1){const s={x:de(t,"x","all","bool")},i={axis:e,keepDims:n};return Ne.runKernel(zI,s,i)}const GA=be({all_:I2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t,e=null,n=!1){const s={x:de(t,"x","any","bool")},i={axis:e,keepDims:n};return Ne.runKernel(BI,s,i)}const A2=be({any_:A2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2e(t,e=0){const r={x:de(t,"x","argMax")},s={axis:e};return Ne.runKernel(C_,r,s)}const S0=be({argMax_:E2e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(t,e=0){const r={x:de(t,"x","argMin")},s={axis:e};return Ne.runKernel(T_,r,s)}const DR=be({argMin_:P2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const n={x:de(t,"x","asin")};return Ne.runKernel(qx,n)}const LR=be({asin_:O2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j2e(t){const n={x:de(t,"x","asinh")};return Ne.runKernel(Gx,n)}const RR=be({asinh_:j2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(t){const n={x:de(t,"x","atan")};return Ne.runKernel(Kx,n)}const MR=be({atan_:$2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t,e){let n=de(t,"a","atan2"),r=de(e,"b","atan2");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(Yx,s)}const FR=be({atan2_:D2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L2e(t){const n={x:de(t,"x","atanh")};return Ne.runKernel(Xx,n)}const zR=be({atanh_:L2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ik(t,e,n,r,s="NHWC",i){const a=t[3],o=[...e,a],l=ff(s);return ki(t,o,n,i,r,null,null,l)}function Vc(t,e,n,r,s,i,a="channelsLast"){const[o,l]=E2(e);let c;if(a==="channelsLast")c=[o,l,t[3],t[3]];else if(a==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return ki(t,c,n,r,s,i,!1,a)}function hf(t,e,n,r,s,i,a="NDHWC"){const[o,l,c]=Jj(e);let u,d;if(a==="NDHWC")d="channelsLast",u=[o,l,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",u=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return Cm(t,u,n,r,s,!1,d,i)}function ki(t,e,n,r,s,i,a=!1,o="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d]=t;else if(o==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,f,,m]=e,[y,v]=E2(n),[x,b]=E2(r),_=Mv(h,x),k=Mv(f,b),{padInfo:N,outHeight:A,outWidth:T}=F2e(s,c,u,y,v,_,k,i,o),C=a?m*d:m;let P;return o==="channelsFirst"?P=[l,C,A,T]:o==="channelsLast"&&(P=[l,A,T,C]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:A,outWidth:T,outChannels:C,padInfo:N,strideHeight:y,strideWidth:v,filterHeight:h,filterWidth:f,effectiveFilterHeight:_,effectiveFilterWidth:k,dilationHeight:x,dilationWidth:b,inShape:t,outShape:P,filterShape:e}}function Cm(t,e,n,r,s,i=!1,a="channelsLast",o){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d,h]=t;else if(a==="channelsFirst")[l,h,c,u,d]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,m,y,,v]=e,[x,b,_]=Jj(n),[k,N,A]=Jj(r),T=Mv(f,k),C=Mv(m,N),P=Mv(y,A),{padInfo:$,outDepth:j,outHeight:O,outWidth:F}=z2e(s,c,u,d,x,b,_,T,C,P,o),B=i?v*h:v;let Z;return a==="channelsFirst"?Z=[l,B,j,O,F]:a==="channelsLast"&&(Z=[l,j,O,F,B]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:j,outHeight:O,outWidth:F,outChannels:B,padInfo:$,strideDepth:x,strideHeight:b,strideWidth:_,filterDepth:f,filterHeight:m,filterWidth:y,effectiveFilterDepth:T,effectiveFilterHeight:C,effectiveFilterWidth:P,dilationDepth:k,dilationHeight:N,dilationWidth:A,inShape:t,outShape:Z,filterShape:e}}function R2e(t,e,n,r,s){r==null&&(r=BR(t,e,n));const i=t[0],a=t[1],o=P2((i-e+2*r)/n+1,s),l=P2((a-e+2*r)/n+1,s);return[o,l]}function M2e(t,e,n,r,s,i){s==null&&(s=BR(t,e[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*s>=e[o]&&(a[o]=P2((t[o]-e[o]+2*s)/r[o]+1,i));return a}function BR(t,e,n,r=1){const s=Mv(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function E2(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function Jj(t){return typeof t=="number"?[t,t,t]:t}function Mv(t,e){return e<=1?t:t+(t-1)*(e-1)}function F2e(t,e,n,r,s,i,a,o,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=R2e([e,n],i,r,t,o);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(u-1)*r+i-e),f=Math.max(0,(d-1)*s+a-n),m=Math.floor(h/2),y=h-m,v=Math.floor(f/2),x=f-v;c={top:m,bottom:y,left:v,right:x,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),d=Math.ceil((n-a+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:f,left:m,right:y,type:h===0&&f===0&&m===0&&y===0?"VALID":"EXPLICIT"},u=P2((e-i+h+f)/r+1,o),d=P2((n-a+m+y)/s+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function z2e(t,e,n,r,s,i,a,o,l,c,u){let d,h,f,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=M2e([e,n,r,1],[o,l,c],1,[s,i,a],t,u);h=v[0],f=v[1],m=v[2]}else if(t==="same"){h=Math.ceil(e/s),f=Math.ceil(n/i),m=Math.ceil(r/a);const y=(h-1)*s+o-e,v=(f-1)*i+l-n,x=(m-1)*a+c-r,b=Math.floor(y/2),_=y-b,k=Math.floor(v/2),N=v-k,A=Math.floor(x/2),T=x-A;d={top:k,bottom:N,left:A,right:T,front:b,back:_,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:m}}function P2(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function sm(t){const[e,n,r]=E2(t);return e===1&&n===1&&r===1}function Hi(t,e){return sm(t)||sm(e)}function N0(t){return E2(t).every(e=>e>0)}function ff(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ga(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")le(ix(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{le(ix(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2e(t,e){const r={x:de(t,"x","reshape","string_or_numeric")},s={shape:e};return Ne.runKernel(fk,r,s)}const Ie=be({reshape_:B2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e(t,e,n,r,s){const i=de(t,"x","avgPool","float32"),a=1;le(Hi(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),le(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Ga("avgPool",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=Ne.runKernel(I_,c,u);return d=bt(d,i.dtype),l?Ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Ak=be({avgPool_:W2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U2e(t,e,n,r,s,i="NDHWC"){const a=de(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),le(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),le(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),le(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ga("avgPool3d",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=Ne.runKernel(A_,c,u);return d=bt(d,o.dtype),l?Ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const WR=be({avgPool3d_:U2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t,e=0){le(t.length>=1,()=>"Pass at least one tensor to concat");const n=D5(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return $d(n[0]);const r=n,s={axis:e};return Ne.runKernel($_,r,s)}const Ss=be({concat_:V2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H2e(t,e,n=!1,r=!1){let s=de(t,"a","matMul"),i=de(e,"b","matMul");[s,i]=hs(s,i);const a={a:s,b:i},o={transposeA:n,transposeB:r};return Ne.runKernel(E_,a,o)}const kn=be({matMul_:H2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q2e(t){const n={x:de(t,"x","sigmoid","float32")};return Ne.runKernel(Eb,n)}const Eu=be({sigmoid_:q2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G2e(t,e,n){const r=de(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return Ne.runKernel(vk,s,i)}const Tn=be({slice_:G2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t){const n={x:de(t,"x","tanh","float32")};return Ne.runKernel(Lb,n)}const im=be({tanh_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t,e,n,r,s,i){const a=de(t,"forgetBias","basicLSTMCell"),o=de(e,"lstmKernel","basicLSTMCell"),l=de(n,"lstmBias","basicLSTMCell"),c=de(r,"data","basicLSTMCell"),u=de(s,"c","basicLSTMCell"),d=de(i,"h","basicLSTMCell"),h=Ss([c,d],1),f=kn(h,o),m=ot(f,l),y=m.shape[0],v=m.shape[1]/4,x=[y,v],b=Tn(m,[0,0],x),_=Tn(m,[0,v],x),k=Tn(m,[0,v*2],x),N=Tn(m,[0,v*3],x),A=ot(Se(Eu(b),im(_)),Se(u,Eu(ot(a,k)))),T=Se(im(A),Eu(N));return[A,T]}const zQ=be({basicLSTMCell_:X2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2e(t,e,n){const r=de(t,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);le(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),le(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),le(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},a={blockShape:e,crops:n};return Ne.runKernel(P_,i,a)}const Ek=be({batchToSpaceND_:Y2e});function Z2e(t){let e;return t.rank===0||t.rank===1?e=Ie(t,[1,1,1,t.size]):t.rank===2?e=Ie(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(t,e,n,r,s,i){i==null&&(i=.001);const a=de(t,"x","batchNorm"),o=de(e,"mean","batchNorm"),l=de(n,"variance","batchNorm");let c;s!=null&&(c=de(s,"scale","batchNorm"));let u;r!=null&&(u=de(r,"offset","batchNorm")),le(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:Z2e(a),scale:c,offset:u,mean:o,variance:l},f={varianceEpsilon:i},m=Ne.runKernel(U_,h,f);return Ie(m,a.shape)}const Fb=be({batchNorm_:J2e});function Q2e(t,e,n,r,s,i){const a=de(t,"x","batchNorm"),o=de(e,"mean","batchNorm"),l=de(n,"variance","batchNorm");let c;s!=null&&(c=de(s,"scale","batchNorm"));let u;return r!=null&&(u=de(r,"offset","batchNorm")),le(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),le(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),le(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&le(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&le(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Fb(a,o,l,u,c,i)}const UR=be({batchNorm2d_:Q2e});function e_e(t,e,n,r,s,i){const a=de(t,"x","batchNorm"),o=de(e,"mean","batchNorm"),l=de(n,"variance","batchNorm");let c;s!=null&&(c=de(s,"scale","batchNorm"));let u;return r!=null&&(u=de(r,"offset","batchNorm")),le(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),le(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),le(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&le(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&le(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Fb(a,o,l,u,c,i)}const VR=be({batchNorm3d_:e_e});function t_e(t,e,n,r,s,i){const a=de(t,"x","batchNorm"),o=de(e,"mean","batchNorm"),l=de(n,"variance","batchNorm");let c;s!=null&&(c=de(s,"scale","batchNorm"));let u;return r!=null&&(u=de(r,"offset","batchNorm")),le(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),le(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),le(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&le(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&le(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Fb(a,o,l,u,c,i)}const HR=be({batchNorm4d_:t_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_e(t,e,n){const r=de(t,"x","bincount"),s=de(e,"weights","bincount");le(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),le(n>=0,()=>`size must be non-negative, but got ${n}.`),le(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},a={size:n};return Ne.runKernel(VI,i,a)}const qR=be({bincount_:n_e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r_e(t,e){const n=de(t,"x","bitwiseAnd"),r=de(e,"y","bitwiseAnd");if(!jn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return Ne.runKernel(O_,s)}const BQ=be({bitwiseAnd_:r_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(t,e){const n=de(t,"s0","broadcastArgs","int32"),r=de(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return Ne.runKernel(HI,s)}const WQ=be({broadcastArgs_:s_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_e(t,e){let n=de(t,"broadcastTo","x");const r=n.shape;if(Hl(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=Ie(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return $d(n);const o={x:n},l={reps:i};return Ne.runKernel(Rb,o,l)}const Yg=be({broadcastTo_:i_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_e(t){const n={x:de(t,"x","ceil","float32")};return Ne.runKernel(Jx,n)}const GR=be({ceil_:a_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0(t,e,n){Hl(t),n=n||Wx(e);const r={shape:t,value:e,dtype:n};return Ne.runKernel(aA,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o_e(t,e,n){const r=de(t,"x","clipByValue");if(le(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Z0(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return Ne.runKernel(Qx,s,i)}const wo=be({clipByValue_:o_e});function l_e(t){return Ss(t,0)}const KR=be({concat1d_:l_e});function c_e(t,e){return Ss(t,e)}const XR=be({concat2d_:c_e});function u_e(t,e){return Ss(t,e)}const YR=be({concat3d_:u_e});function d_e(t,e){return Ss(t,e)}const ZR=be({concat4d_:d_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_e(t,e,n,r,s="NHWC",i=[1,1],a){const o=de(t,"x","conv2d","float32"),l=de(e,"filter","conv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),le(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),le(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ga("conv2d",r,a);const d=s==="NHWC"?c.shape[3]:c.shape[1];le(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),le(Hi(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),le(N0(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),le(N0(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},m=Ne.runKernel(D_,h,f);return u?Ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const tf=be({conv2d_:h_e});function f_e(t,e,n,r,s="NWC",i=1,a){const o=de(t,"x","conv1d"),l=de(e,"filter","conv1d");let c=o,u=!1;o.rank===2&&(u=!0,c=Ie(o,[1,o.shape[0],o.shape[1]])),le(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),le(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ga("conv1d",r,a),le(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),le(Hi(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),le(N0(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),le(N0(n),()=>"Error in conv1D: Stride should be larger than 0."),le(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=Ie(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Ie(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=tf(h,d,[1,n],r,"NHWC",[1,i],a);return u?Ie(v,[v.shape[2],v.shape[3]]):Ie(v,[v.shape[0],v.shape[2],v.shape[3]])}const KA=be({conv1d_:f_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_e(t,e,n,r,s,i="NHWC",a){le(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),le(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),le(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),le(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?o[3]:o[1],d=i==="NHWC"?l.shape[3]:l.shape[1];le(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),le(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Ga("conv2dDerInput",s,a);const h={dy:l,filter:n},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,inputShape:o},m=Ne.runKernel(L_,h,f);return c?Ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const JR=be({conv2DBackpropInput_:p_e});function m_e(t,e,n,r,s,i){const a=de(t,"x","conv2dTranspose"),o=de(e,"filter","conv2dTranspose");return JR(n,a,o,r,s,"NHWC",i)}const XA=be({conv2dTranspose_:m_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g_e(t,e,n,r,s="NDHWC",i=[1,1,1]){const a=de(t,"x","conv3d"),o=de(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),le(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),le(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),le(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),le(Hi(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),le(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),le(N0(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),le(N0(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},d={strides:n,pad:r,dataFormat:s,dilations:i},h=Ne.runKernel(R_,u,d);return c?Ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const QR=be({conv3d_:g_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t,e,n,r,s){le(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,a=e,o=!1;e.rank===4&&(o=!0,a=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=a.shape[4];le(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),le(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),le(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),le(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),le(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:a,filter:n},d={pad:s,strides:r,inputShape:i},h=Ne.runKernel(XI,u,d);return o?Ie(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const UQ=be({conv3DBackpropInput_:y_e});function v_e(t,e,n,r,s){const i=de(t,"x","conv3dTranspose"),a=de(e,"filter","conv3dTranspose");return UQ(n,i,a,r,s)}const eM=be({conv3dTranspose_:v_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_e(t){const n={x:de(t,"x","cos","float32")};return Ne.runKernel(eb,n)}const Pk=be({cos_:x_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_e(t){const n={x:de(t,"x","cosh","float32")};return Ne.runKernel(tb,n)}const YA=be({cosh_:b_e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_e(t,e=0,n=!1,r=!1){const i={x:de(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return Ne.runKernel(YI,i,a)}const O2=be({cumprod_:w_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function __e(t,e=0,n=!1,r=!1){const i={x:de(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return Ne.runKernel(M_,i,a)}const ZA=be({cumsum_:__e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_e(t,e,n,r=!1){const s=de(t,"x","denseBincount"),i=de(e,"weights","denseBincount");le(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),le(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),le(n>=0,()=>`size must be non-negative, but got ${n}.`),le(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const a={x:s,weights:i},o={size:n,binaryOutput:r};return Ne.runKernel(JI,a,o)}const L5=be({denseBincount_:k_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S_e(t,e,n="NHWC"){const r=de(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];le(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),le(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),le(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),le(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return Ne.runKernel(QI,o,l)}const tM=be({depthToSpace_:S_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_e(t,e,n,r,s="NHWC",i=[1,1],a){const o=de(t,"x","depthwiseConv2d","float32"),l=de(e,"filter","depthwiseConv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),le(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),le(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];le(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ga("depthwiseConv2d",r,a);const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},m=Ne.runKernel(F_,h,f);return u?Ie(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const zb=be({depthwiseConv2d_:N_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(t){const n={x:de(t,"x","diag")};return Ne.runKernel(nA,n)}const VQ=be({diag_:C_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T_e(t,e,n,r,s=[1,1],i="NHWC"){const a=de(t,"x","dilation2d"),o=de(e,"filter","dilation2d");le(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),le(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),le(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=a,c=!1;a.rank===3&&(l=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),le(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const u={x:l,filter:o},d={strides:n,pad:r,dilations:s},h=Ne.runKernel(z_,u,d);return c?Ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const nM=be({dilation2d_:T_e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,a=t[i]||1;(e[e.length-1-s]||1)>1&&a===1&&r.unshift(i)}return r}function ni(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,a=e[i];(s==null||s===1&&a>1)&&n.unshift(i)}return n}function dn(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let a=e[e.length-s-1];if(a==null&&(a=1),i===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=i;else if(i!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_e(t,e){let n=de(t,"a","equal","string_or_numeric"),r=de(e,"b","equal","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(B_,s)}const Lc=be({equal_:I_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(t,e,n){const r=de(e,"a","where"),s=de(n,"b","where"),i=de(t,"condition","where","bool"),a=dn(dn(i.shape,r.shape),s.shape),o=Yg(i,a),l=Yg(r,a),c=Yg(s,a),u={condition:o,t:l,e:c};return Ne.runKernel(yk,u)}const Bi=be({where_:A_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_e(t){const n={x:de(t,"x","zerosLike")};return Ne.runKernel(Ck,n)}const On=be({zerosLike_:E_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_e(t,e){let n=de(t,"a","div"),r=de(e,"b","div");[n,r]=hs(n,r);const s=Wt(n,r),i=On(s),a=Lc(r,i);return Bi(a,i,s)}const rM=be({divNoNan_:P_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_e(t,e){const n=de(t,"t1","dot"),r=de(e,"t2","dot");le((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(le(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const a=Ie(n,[1,-1]),o=Ie(r,[-1,1]),l=kn(a,o);return Ie(l,[])}else if(n.rank===1&&r.rank===2){const a=Ie(n,[1,-1]),o=Ie(r,[r.shape[0],r.shape[1]]),l=kn(a,o);return Ie(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=Ie(r,[-1,1]),o=kn(n,a);return Ie(o,[o.size])}else{const a=Ie(r,[r.shape[0],r.shape[1]]);return kn(n,a)}}const sM=be({dot_:O_e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_e(t,...e){const n=e.map((s,i)=>de(s,`tensors${i}`,"einsum")),r={equation:t};return Ne.runKernel(rA,n,r)}const Ag=be({einsum_:j_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $_e(t){const n={x:de(t,"x","elu","float32")};return Ne.runKernel(rb,n)}const Bb=be({elu_:$_e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D_e(t,e){const n=de(t,"x","ensureShape","string_or_numeric");if(!iwe(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const HQ=be({ensureShape_:D_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L_e(t){let e=de(t,"x","erf");le(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=bt(e,"float32"));const n={x:e};return Ne.runKernel(sb,n)}const JA=be({erf_:L_e});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iM(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function qQ(t,e,n){const r=t.length+e.length,s=[];let i=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?s.push(t[i++]):s.push(e[a++]);return s}function Si(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Ns(t,e){const n=e.map(r=>1);return qQ(t,n,e)}function qi(t,e,n){le(iM(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function rs(t,e){if(iM(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Tm(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Cs(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R_e(t,e=null,n=!1){const s={x:de(t,"x","max")},i={reductionIndices:e,keepDims:n};return Ne.runKernel(Q_,s,i)}const Dl=be({max_:R_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_e(t,e=null,n=!1){const s={x:de(t,"x","min")},i={axis:e,keepDims:n};return Ne.runKernel(rk,s,i)}const cx=be({min_:M_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_e(t,e){let n=de(t,"base","pow"),r=de(e,"exp","pow");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(bb,s)}const Wd=be({pow_:F_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qt(t,e){if((Dc(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Dc(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Nm(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_e(t){const n={x:de(t,"x","sqrt","float32")};return Ne.runKernel(Ob,n)}const _i=be({sqrt_:z_e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B_e(t){const e=de(t,"x","square"),n={};return Ne.runKernel("Square",{x:e},n)}const hr=be({square_:B_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W_e(t,e=null,n=!1){let r=de(t,"x","sum");r.dtype==="bool"&&(r=bt(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return Ne.runKernel(xk,s,i)}const $t=be({sum_:W_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(t,e="euclidean",n=null,r=!1){t=de(t,"x","norm");const s=GQ(t,e,n);let i=s.shape;if(r){const a=Sn(n,t.shape);i=Ns(s.shape,a)}return Ie(s,i)}function GQ(t,e,n=null){if(t.rank===0)return js(t);if(t.rank!==1&&n===null)return GQ(Ie(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return $t(js(t),n);if(e===1/0)return Dl(js(t),n);if(e===-1/0)return cx(js(t),n);if(e==="euclidean"||e===2)return _i($t(Wd(js(t),qt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Dl($t(js(t),n[0]),n[1]-1);if(e===1/0)return Dl($t(js(t),n[1]),n[0]);if(e===-1/0)return cx($t(js(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return _i($t(hr(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Wb=be({norm_:U_e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_e(t,e=null,n=!1){return Wb(t,"euclidean",e,n)}const aM=be({euclideanNorm_:V_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(t){const n={x:de(t,"x","exp")};return Ne.runKernel(ib,n)}const _o=be({exp_:H_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_e(t,e=0){const n=de(t,"x","expandDims","string_or_numeric");le(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return Ne.runKernel(W_,r,s)}const la=be({expandDims_:q_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G_e(t){const n={x:de(t,"x","expm1")};return Ne.runKernel(ab,n)}const oM=be({expm1_:G_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_e(t,e){const n=de(t,"x","tile","string_or_numeric");le(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return Ne.runKernel(Rb,r,s)}const El=be({tile_:K_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t,e,n,r="float32"){e==null&&(e=t);const s=yn([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)s.set(1,o,o);const a=Ie(s.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return El(la(a,0),[n[0],1,1]);if(n.length===2)return El(la(la(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return El(la(la(la(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const QA=be({eye_:X_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t){const n={x:de(t,"x","floor","float32")};return Ne.runKernel(ob,n)}const Ub=be({floor_:Y_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z_e(t,e,n=0,r=0){const s=de(t,"x","gather"),i=de(e,"indices","gather","int32"),a={x:s,indices:i},o={axis:n,batchDims:r};return Ne.runKernel(V_,a,o)}const Vb=be({gather_:Z_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J_e(t,e){let n=de(t,"a","greater","string_or_numeric"),r=de(e,"b","greater","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(H_,s)}const Io=be({greater_:J_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t,e){let n=de(t,"a","greaterEqual","string_or_numeric"),r=de(e,"b","greaterEqual","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(cb,s)}const pf=be({greaterEqual_:Q_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(t){const n={input:de(t,"input","imag")};return Ne.runKernel(uA,n)}const Ok=be({imag_:eke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tke(t){const n={x:de(t,"x","isFinite")};return Ne.runKernel(db,n)}const lM=be({isFinite_:tke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nke(t){const n={x:de(t,"x","isInf")};return Ne.runKernel(hb,n)}const cM=be({isInf_:nke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const n={x:de(t,"x","isNaN")};return Ne.runKernel(fb,n)}const uM=be({isNaN_:rke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ske(t,e=.2){const r={x:de(t,"x","leakyRelu")},s={alpha:e};return Ne.runKernel(q_,r,s)}const jk=be({leakyRelu_:ske});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t,e){let n=de(t,"a","less","string_or_numeric"),r=de(e,"b","less","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(G_,s)}const ux=be({less_:ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(t,e){let n=de(t,"a","lessEqual","string_or_numeric"),r=de(e,"b","lessEqual","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(K_,s)}const Im=be({lessEqual_:ake});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return Ne.runKernel(dA,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oke(t,e=5,n=1,r=1,s=.5){const i=de(t,"x","localResponseNormalization");le(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),le(ix(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,o=!1;i.rank===3&&(o=!0,a=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:a},c={depthRadius:e,bias:n,alpha:r,beta:s},u=Ne.runKernel(J_,l,c);return o?Ie(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const dM=be({localResponseNormalization_:oke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lke(t){const n={x:de(t,"x","log","float32")};return Ne.runKernel(pb,n)}const al=be({log_:lke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const n={x:de(t,"x","log1p")};return Ne.runKernel(mb,n)}const $k=be({log1p_:cke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQ(t,e){le($j(t),()=>"The f passed in variableGrads(f) must be a function"),le(e==null||Array.isArray(e)&&e.every(c=>c instanceof I2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in Ne.registeredVariables)e.push(Ne.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),le(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:a,grads:o}=Ne.gradients(t,e,null,i);le(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),le(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:a,grads:l}}function Ud(t){return Ne.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(t){const n={x:de(t,"x","neg")};return Ne.runKernel(ik,n)}const Cr=be({neg_:uke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dke(t){const n={x:de(t,"x","softplus")};return Ne.runKernel(Pb,n)}const J0=be({softplus_:dke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t){const e=de(t,"x","logSigmoid");return Ud(r=>({value:Cr(J0(Cr(r))),gradFunc:a=>Se(a,Eu(Cr(r)))}))(e)}const hM=be({logSigmoid_:hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fke(t,e){let n=de(t,"a","sub"),r=de(e,"b","sub");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel($b,s)}const At=be({sub_:fke});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pke(t,e=-1){const n=de(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ud((s,i)=>{const o=Dl(s,e,!0),l=At(s,o),c=At(bt(l,"float32"),al($t(_o(l),e,!0)));return i([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,m=!0,y=_o(f);return At(d,Se($t(d,e,m),y))}}})(n)}const eE=be({logSoftmax_:pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mke(t,e=null,n=!1){const r=de(t,"x","logSumExp"),s=Sn(e,r.shape),i=Dl(r,s,!0),a=At(r,i),o=_o(a),l=$t(o,s),c=al(l),u=ot(Ie(i,c.shape),c);if(n){const d=Ns(u.shape,s);return Ie(u,d)}return u}const Dk=be({logSumExp_:mke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(t,e){const n=de(t,"a","logicalAnd","bool"),r=de(e,"b","logicalAnd","bool");dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(X_,s)}const Lu=be({logicalAnd_:gke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yke(t){const n={x:de(t,"x","logicalNot","bool")};return Ne.runKernel(Y_,n)}const Lk=be({logicalNot_:yke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vke(t,e){const n=de(t,"a","logicalOr","bool"),r=de(e,"b","logicalOr","bool");dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(Z_,s)}const tE=be({logicalOr_:vke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t,e){const n=de(t,"a","logicalXor","bool"),r=de(e,"b","logicalXor","bool");return dn(n.shape,r.shape),Lu(tE(t,e),Lk(Lu(t,e)))}const fM=be({logicalXor_:xke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yN=2147483648;function bke(t,e,n="left"){const r=de(t,"sortedSequence","searchSorted"),s=de(e,"values","searchSorted"),i=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],o=Ie(r,[-1,i]),l=Ie(s,[-1,a]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Xe(l.shape)>=yN)throw new Error(`values tensor size must less than ${yN}`);if(o.shape[1]>=yN)throw new Error(`trailing dim_size must less than ${yN} for int32 output type, was ${o.shape[1]}`);const c={sortedSequence:o,values:l},u={side:n};return Ne.runKernel(AA,c,u)}const nE=be({searchSorted_:bke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YQ(t,e){return nE(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wke(t,e,n,r,s){const i=de(t,"x","maxPool"),a=1;let o=i,l=!1;i.rank===3&&(l=!0,o=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),le(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),le(Hi(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Ga("maxPool",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=Ne.runKernel(ek,c,u);return l?Ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Rk=be({maxPool_:wke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t,e=[1,1,1],n,r,s,i="NDHWC"){const a=de(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),le(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),le(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ga("maxPool3d",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=Ne.runKernel(tk,c,u);return l?Ie(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const pM=be({maxPool3d_:_ke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(t,e,n,r,s=!1){const a={x:de(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=Ne.runKernel(mA,a,o);return{result:l[0],indexes:l[1]}}const ZQ=be({maxPoolWithArgmax_:kke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ske(t,e){let n=de(t,"a","maximum"),r=de(e,"b","maximum");[n,r]=hs(n,r),n.dtype==="bool"&&(n=bt(n,"int32"),r=bt(r,"int32")),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(gb,s)}const Zd=be({maximum_:Ske});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nke(t,e=null,n=!1){const s={x:de(t,"x","mean")},i={axis:e,keepDims:n};return Ne.runKernel(nk,s,i)}const Jr=be({mean_:Nke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(t,e="float32"){if(Hl(t),e==="complex64"){const r=ws(t,"float32"),s=ws(t,"float32");return ef(r,s)}const n=pa(Xe(t),e);return Ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function po(t,e="float32"){if(Hl(t),e==="complex64"){const r=po(t,"float32"),s=ws(t,"float32");return ef(r,s)}const n=_R(Xe(t),e);return Ne.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JQ(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=de(t,"x","meshgrid",t instanceof Or?t.dtype:"float32");if(e===void 0)return[r];let s=de(e,"y","meshgrid",e instanceof Or?e.dtype:"float32");const i=Xe(r.shape),a=Xe(s.shape);return n==="xy"?(r=Ie(r,[1,-1]),s=Ie(s,[-1,1]),[kn(po([a,1],r.dtype),r),kn(s,po([1,i],s.dtype))]):(r=Ie(r,[-1,1]),s=Ie(s,[1,-1]),[kn(r,po([1,a],r.dtype)),kn(po([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t,e){let n=de(t,"a","minimum"),r=de(e,"b","minimum");[n,r]=hs(n,r),n.dtype==="bool"&&(n=bt(n,"int32"),r=bt(r,"int32")),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(yb,s)}const am=be({minimum_:Cke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tke(t,e,n){le(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=de(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");le(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)le(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),le(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},a={x:r};return Ne.runKernel(sk,a,i)}const mM=be({mirrorPad_:Tke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t,e){let n=de(t,"a","mod"),r=de(e,"b","mod");[n,r]=hs(n,r);const s={a:n,b:r};return Ne.runKernel(vb,s)}const gM=be({mod_:Ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ake(t,e=null,n=!1){t=de(t,"x","moments");const r=Sn(e,t.shape),s=Jr(t,r,n);let i=s.shape;n||(i=Ns(s.shape,r));const a=hr(At(bt(t,"float32"),Ie(s,i))),o=Jr(a,r,n);return{mean:s,variance:o}}const Mk=be({moments_:Ake});function Eke(t,e,n,r){const s=de(e,"data","multiRNNCell"),i=D5(n,"c","multiRNNCell"),a=D5(r,"h","multiRNNCell");let o=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](o,i[d],a[d]);l.push(h[0]),l.push(h[1]),o=h[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const QQ=be({multiRNNCell_:Eke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pke(t,e,n,r=!1){const s=de(t,"logits","multinomial"),i=s.size,a=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?Ie(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},u=Ne.runKernel(gA,l,c);return a===1?Ie(u,[u.size]):u}const eee=be({multinomial_:Pke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oke(t,e){let n=de(t,"a","notEqual","string_or_numeric"),r=de(e,"b","notEqual","string_or_numeric");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r};return Ne.runKernel(ak,s)}const C0=be({notEqual_:Oke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jke(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:de(t,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:n,offValue:r};return Ne.runKernel(lk,a,o)}const rE=be({oneHot_:jke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ke(t){const n={x:de(t,"x","onesLike")};return Ne.runKernel(ok,n)}const ol=be({onesLike_:$ke});function Dke(t,e){const n=de(t,"v1","outerProduct"),r=de(e,"v2","outerProduct");le(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=Ie(n,[-1,1]),i=Ie(r,[1,-1]);return kn(s,i)}const tee=be({outerProduct_:Dke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t,e,n=0){const r=de(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return Ne.runKernel(uk,i,s)}const mf=be({pad_:Lke});function Rke(t,e,n=0){return le(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),mf(t,[e],n)}const nee=be({pad1d_:Rke});function Mke(t,e,n=0){return le(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mf(t,e,n)}const ree=be({pad2d_:Mke});function Fke(t,e,n=0){return le(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mf(t,e,n)}const see=be({pad3d_:Fke});function zke(t,e,n=0){return le(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),mf(t,e,n)}const iee=be({pad4d_:zke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bke(t,e,n){const r=de(t,"x","spaceToBatchND");le(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),le(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),le(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return Ne.runKernel(bk,s,i)}const Fk=be({spaceToBatchND_:Bke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t,e,n,r,s,i,a){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=de(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),le(Hi(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=Vc(l.shape,e,i,s,r),d=[u.dilationHeight,u.dilationWidth];let h;r==="same"?h=Vke([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[m,y]=Uke([u.inHeight,u.inWidth],d,h),v=f?r:"valid",x=f?l:Fk(l,d,m),_=(n==="avg"?()=>Ak(x,e,i,v,a):()=>Rk(x,e,i,v,a))(),k=f?_:Ek(_,d,y);return c?Ie(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function Uke(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),a=e.map((u,d)=>(u-i[d]%u)%u),o=s.map((u,d)=>u+a[d]),l=e.map((u,d)=>[r[d],o[d]]),c=e.map((u,d)=>[0,a[d]]);return[l,c]}function Vke(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),i=r.map((a,o)=>a-s[o]);return r.map((a,o)=>[s[o],i[o]])}const yM=be({pool_:Wke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hke(t,e){const n=de(t,"x","prelu"),r=de(e,"alpha","prelu"),s={x:n,alpha:r};return Ne.runKernel(dk,s)}const zk=be({prelu_:Hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qke(t,e=null,n=!1){let r=de(t,"x","prod");r.dtype==="bool"&&(r=bt(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return Ne.runKernel(hk,s,i)}const vM=be({prod_:qke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gke(t,e,n,r){const s=t.map((u,d)=>de(u,`tensors${d}`,"raggedGather","int32")),i=de(e,"paramsDenseValues","raggedGather"),a=de(n,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:i,indices:a},l={outputRaggedRank:r},c=Ne.runKernel(bA,o,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const aee=be({raggedGather_:Gke});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kke(t,e,n){const r=de(t,"starts","raggedRange"),s=de(e,"limits","raggedRange",r.dtype),i=de(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:i},o=Ne.runKernel(wA,a);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const oee=be({raggedRange_:Kke});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xke(t,e,n,r,s){const i=de(t,"shape","raggedTensorToTensor","int32"),a=de(e,"values","raggedTensorToTensor"),o=de(n,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((d,h)=>de(d,`tensors${h}`,"raggedTensorToTensor","int32")),c={shape:i,values:a,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:s};return Ne.runKernel(_A,c,u)}const lee=be({raggedTensorToTensor_:Xke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yke(t,e,n){Hl(t);const r=Xe(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return Ne.makeTensor(s,t,n)}const cee=be({rand_:Yke});var xM={exports:{}};xM.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var u=new s(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}function o(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(Ac,t)})(xM);var Zke=xM.exports,bM={exports:{}};bM.exports;(function(t){(function(e,n,r){function s(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(Ac,t)})(bM);var Jke=bM.exports,wM={exports:{}};wM.exports;(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(Ac,t)})(wM);var Qke=wM.exports,_M={exports:{}};_M.exports;(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(Ac,t)})(_M);var eSe=_M.exports,kM={exports:{}};kM.exports;(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,m;return l.w=u=u+1640531527|0,m=d[h+34&127],f=d[h=h+1&127],m^=m<<13,f^=f<<17,m^=m>>>15,f^=f>>>12,m=d[h]=m^f,l.i=h,m+(u^u>>>16)|0};function c(u,d){var h,f,m,y,v,x=[],b=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,b=Math.max(b,d.length)),m=0,y=-32;y<b;++y)d&&(f^=d.charCodeAt((y+32)%d.length)),y===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,y>=0&&(v=v+1640531527|0,h=x[y&127]^=f+v,m=h==0?m+1:0);for(m>=128&&(x[(d&&d.length||0)&127]=-1),m=127,y=4*128;y>0;--y)f=x[m+34&127],h=x[m=m+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,x[m]=f^h;u.w=v,u.X=x,u.i=m}c(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(Ac,t)})(kM);var tSe=kM.exports,SM={exports:{}};SM.exports;(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,m=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^m,m=m-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^m,l.a=m-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,m=(h+f)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(Ac,t)})(SM);var nSe=SM.exports,uee={exports:{}};const rSe={},sSe=Object.freeze(Object.defineProperty({__proto__:null,default:rSe},Symbol.toStringTag,{value:"Module"})),iSe=cI(sSe);(function(t){(function(e,n,r){var s=256,i=6,a=52,o="random",l=r.pow(s,i),c=r.pow(2,a),u=c*2,d=s-1,h;function f(k,N,A){var T=[];N=N==!0?{entropy:!0}:N||{};var C=x(v(N.entropy?[k,_(n)]:k??b(),3),T),P=new m(T),$=function(){for(var j=P.g(i),O=l,F=0;j<c;)j=(j+F)*s,O*=s,F=P.g(1);for(;j>=u;)j/=2,O/=2,F>>>=1;return(j+F)/O};return $.int32=function(){return P.g(4)|0},$.quick=function(){return P.g(4)/4294967296},$.double=$,x(_(P.S),n),(N.pass||A||function(j,O,F,B){return B&&(B.S&&y(B,P),j.state=function(){return y(P,{})}),F?(r[o]=j,O):j})($,C,"global"in N?N.global:this==r,N.state)}function m(k){var N,A=k.length,T=this,C=0,P=T.i=T.j=0,$=T.S=[];for(A||(k=[A++]);C<s;)$[C]=C++;for(C=0;C<s;C++)$[C]=$[P=d&P+k[C%A]+(N=$[C])],$[P]=N;(T.g=function(j){for(var O,F=0,B=T.i,Z=T.j,V=T.S;j--;)O=V[B=d&B+1],F=F*s+V[d&(V[B]=V[Z=d&Z+O])+(V[Z]=O)];return T.i=B,T.j=Z,F})(s)}function y(k,N){return N.i=k.i,N.j=k.j,N.S=k.S.slice(),N}function v(k,N){var A=[],T=typeof k,C;if(N&&T=="object")for(C in k)try{A.push(v(k[C],N-1))}catch{}return A.length?A:T=="string"?k:k+"\0"}function x(k,N){for(var A=k+"",T,C=0;C<A.length;)N[d&C]=d&(T^=N[d&C]*19)+A.charCodeAt(C++);return _(N)}function b(){try{var k;return h&&(k=h.randomBytes)?k=k(s):(k=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(k)),_(k)}catch{var N=e.navigator,A=N&&N.plugins;return[+new Date,e,A,e.screen,_(n)]}}function _(k){return String.fromCharCode.apply(0,k)}if(x(r.random(),n),t.exports){t.exports=f;try{h=iSe}catch{}}else r["seed"+o]=f})(typeof self<"u"?self:Ac,[],Math)})(uee);var aSe=uee.exports,oSe=Zke,lSe=Jke,cSe=Qke,uSe=eSe,dSe=tSe,hSe=nSe,Q0=aSe;Q0.alea=oSe;Q0.xor128=lSe;Q0.xorwow=cSe;Q0.xorshift7=uSe;Q0.xor4096=dSe;Q0.tychei=hSe;var sE=Q0;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NM{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=sE.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,a;do s=2*this.random()-1,i=2*this.random()-1,a=s*s+i*i;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class fSe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=sE.alea(i.toString()),this.randn=new NM(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class pSe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=sE.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(t,e,n=1,r="float32",s){if(Hl(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new fSe(e,n,r,s),a=yn(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const dee=be({randomGamma_:mSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(t,e=0,n=1,r,s){if(Hl(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new NM(e,n,r,!1,s),a=yn(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const iE=be({randomNormal_:gSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return iE(t,0,1,e,n)}const hee=be({randomStandardNormal_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(t,e=0,n=1,r="float32",s){Hl(t);const i=yn(t,r),a=new pSe(e,n,null,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const Am=be({randomUniform_:vSe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(t,e,n,r){return Am(t,e,n,"int32",r)}const fee=be({randomUniformInt_:xSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return Ne.runKernel(kA,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSe(t){const n={input:de(t,"input","real")};return Ne.runKernel(SA,n)}const dx=be({real_:bSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(t){const n={x:de(t,"x","reciprocal")};return Ne.runKernel(wb,n)}const CM=be({reciprocal_:wSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(t){const n={x:de(t,"x","relu")};return Ne.runKernel(_b,n)}const Uu=be({relu_:_Se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(t){const n={x:de(t,"x","relu6")};return Ne.runKernel(kb,n)}const aE=be({relu6_:kSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(t,e){const r={x:de(t,"x","reverse")},s={dims:e};return Ne.runKernel(gk,r,s)}const Fl=be({reverse_:SSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(t){const e=de(t,"x","reverse");return le(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Fl(e,0)}const pee=be({reverse1d_:NSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(t,e){const n=de(t,"x","reverse");return le(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Fl(n,e)}const mee=be({reverse2d_:CSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(t,e){const n=de(t,"x","reverse");return le(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Fl(n,e)}const gee=be({reverse3d_:TSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(t,e){const n=de(t,"x","reverse");return le(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Fl(n,e)}const yee=be({reverse4d_:ISe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(t){const n={x:de(t,"x","round")};return Ne.runKernel(Sb,n)}const oE=be({round_:ASe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(t){const n={x:de(t,"x","rsqrt","float32")};return Ne.runKernel(Nb,n)}const lE=be({rsqrt_:ESe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(t){const n={x:de(t,"x","selu")};return Ne.runKernel(Cb,n)}const cE=be({selu_:PSe});function OSe(t,e,n,r,s,i=[1,1],a="NHWC"){const o=de(t,"x","separableConv2d"),l=de(e,"depthwiseFilter","separableConv2d"),c=de(n,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(o.rank===3&&(d=!0,u=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");le(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),le(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),le(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),le(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),le(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],f=l.shape[3];le(c.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${c.shape[2]}.`);const m=zb(u,l,r,s,a,i),v=tf(m,c,1,"valid",a);return d?Ie(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const uE=be({separableConv2d_:OSe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jSe(t,e){const n=de(t,"x","setdiff1d"),r=de(e,"y","setdiff1d");le(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),le(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),le(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),a=new Set(i);let o=0;for(let u=0;u<s.length;u++)a.has(s[u])||o++;const l=new Fs([o],n.dtype),c=new Fs([o],"int32");for(let u=0,d=0;u<s.length;u++)a.has(s[u])||(l.values[d]=s[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const vee=jSe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(t){const n={x:de(t,"x","sign")};return Ne.runKernel(Ab,n)}const TM=be({sign_:$Se});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(t){const n={x:de(t,"x","sin","float32")};return Ne.runKernel(Tb,n)}const dE=be({sin_:DSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(t){const n={x:de(t,"x","sinh")};return Ne.runKernel(Ib,n)}const hE=be({sinh_:LSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(t,e,n){const r=de(t,"x","slice1d");return le(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Tn(r,[e],[n])}const Bk=be({slice1d_:RSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(t,e,n){const r=de(t,"x","slice2d");return le(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Tn(r,e,n)}const fE=be({slice2d_:MSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(t,e,n){const r=de(t,"x","slice3d");return le(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Tn(r,e,n)}const Wk=be({slice3d_:FSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(t,e,n){const r=de(t,"x","slice4d");return le(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Tn(r,e,n)}const hx=be({slice4d_:zSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(t,e=-1){const n=de(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return Ne.runKernel(_k,r,s)}const Hb=be({softmax_:BSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(t){le(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Ne.runKernel(iA,e)}const Uk=be({fft_:WSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USe(t){le(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Ne.runKernel(cA,e)}const fx=be({ifft_:USe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Ie(t,[n,e]);r=fx(s)}else{const s=[n,2*(e-1)],i=Ie(dx(t),[n,e]),a=Ie(Ok(t),[n,e]),o=Fl(Tn(i,[0,1],[n,e-2]),1),l=Se(Fl(Tn(a,[0,1],[n,e-2]),1),qt(-1)),c=Ss([i,o],1),u=Ss([a,l],1),d=Ie(ef(c,u),[s[0],s[1]]);r=fx(d)}if(r=dx(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=Ie(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const pE=be({irfft_:VSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(t,e,n=0){const s={x:de(t,"x","split")},i={numOrSizeSplits:e,axis:n};return Ne.runKernel(wk,s,i)}const vo=be({split_:HSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(t,e){le(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const m=t.shape.map(v=>0),y=t.shape.map(v=>v);y[t.shape.length-1]=e,s=Tn(t,m,y),n=e}else if(e!=null&&e>n){const m=t.shape.map(y=>y);m[t.shape.length-1]=e-n,s=Ss([t,ws(m)],t.shape.length-1),n=e}else s=t;const i=On(s),a=Ie(ef(s,i),[r,n]),o=Uk(a),l=Math.floor(n/2)+1,c=dx(o),u=Ok(o),d=vo(c,[l,n-l],c.shape.length-1),h=vo(u,[l,n-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,Ie(ef(d[0],h[0]),f)}const Vk=be({rfft_:qSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(t,e){let n=de(t,"a","squaredDifference"),r=de(e,"b","squaredDifference");[n,r]=hs(n,r),dn(n.shape,r.shape);const s={a:n,b:r},i={};return Ne.runKernel(jb,s,i)}const mE=be({squaredDifference_:GSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSe(t,e){const n=de(t,"x","squeeze","string_or_numeric");return Ie(n,_m(n.shape,e).newShape)}const gf=be({squeeze_:KSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(t,e=0){const n=D5(t,"tensors","stack","string_or_numeric");le(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&le(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return Ne.runKernel(ck,r,s)}const ko=be({stack_:XSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YSe(t,e=0){const r={x:de(t,"x","step")},s={alpha:e};return Ne.runKernel(Mb,r,s)}const ey=be({step_:YSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZSe(t,e,n,r,s=0,i=0,a=0,o=0,l=0){const u={x:de(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return Ne.runKernel(LA,u,d)}const IM=be({stridedSlice_:ZSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(t){const n={x:de(t,"x","tan","float32")};return Ne.runKernel(Db,n)}const AM=be({tan_:JSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ca(t,e){Bx(t);const n=Sm(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Nm(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fv(t,e,n){if(Bx(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Sm(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Nm(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EM(t,e,n){if(Bx(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Sm(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Nm(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xee(t,e,n){if(Bx(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Sm(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Nm(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t,e,n){if(Bx(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Sm(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Nm(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(t,e,n){if(Bx(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Sm(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Nm(t,e,r,n)}function _ee(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==t[a+r])throw new Error(i+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${t[a+s]})`)}function PM(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}_ee(n,e,t)}function ty(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let a=1;for(let d=s;d<i;++d)a*=n[d];const o=s<1?1:s,l=Xe(e.shape)/o,c=[...Gt(n.slice(0,s)),1],u=Xe(n);return{sliceRank:s,numUpdates:l,sliceSize:a,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(t,e,n){const r=de(t,"tensor","tensorScatterupdate"),s=de(e,"indices","tensorScatterupdate","int32"),i=de(n,"updates","tensorScatterupdate");if(PM(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const a={tensor:r,indices:s,updates:i},o={};return Ne.runKernel(IA,a,o)}const kee=be({tensorScatterUpdate_:QSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eNe(t,e=1,n=!0){const r=de(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},a={k:e,sorted:n},[o,l]=Ne.runKernel(zA,i,a);return{values:o,indices:l}}const OM=be({topk_:eNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNe(t,e=0,n=1,r,s){if(Hl(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new NM(e,n,r,!0,s),a=yn(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const gE=be({truncatedNormal_:tNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nNe(t,e=0){const n=de(t,"x","unique","string_or_numeric");le(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,a]=Ne.runKernel(WA,r,s);return{values:i,indices:a}}const jM=be({unique_:nNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNe(t,e,n){const r=de(t,"x","unsortedSegmentSum"),s=de(e,"segmentIds","unsortedSegmentSum","int32");le(ix(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},a={numSegments:n};return Ne.runKernel(Nk,i,a)}const yE=be({unsortedSegmentSum_:rNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNe(t,e=0){const n=de(t,"x","unstack","string_or_numeric");le(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return Ne.runKernel(Sk,r,s)}const zl=be({unstack_:sNe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(t,e){return nE(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $M(t,e=!0,n,r){return Ne.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DM(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=yn(t,"int32"),s=yn([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const a=r.indexToLoc(n[i]),o=i*t.length;s.values.set(a,o)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function iNe(t){const e=de(t,"condition","whereAsync","bool"),n=await e.data(),r=DM(e.shape,n);return t!==e&&e.dispose(),r}const LM=iNe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aNe(t,e,n){const r=de(t,"tensor","boolMask"),s=de(e,"mask","boolMask","bool"),i=n??0,a=s.rank,o=r.shape;le(a>0,()=>"mask cannot be scalar"),ul(o.slice(i,i+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=i;y<i+a;y++)l*=o[y];const c=o.slice(0,i).concat([l],o.slice(i+a)),u=Ie(r,c),d=Ie(s,[-1]),h=await LM(d),f=gf(h,[1]),m=Vb(u,f,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),u.dispose(),d.dispose(),h.dispose(),m}const Nee=aNe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oNe(t,e,n){const r=de(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),le(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{le(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?Re(()=>{let a=dx(r),o=Ok(r);return a=Ne.runKernel(Xg,{x:a},i),o=Ne.runKernel(Xg,{x:o},i),n&&(o=Cr(o)),ef(a,o)}):Ne.runKernel(Xg,s,i)}const Pn=be({transpose_:oNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lNe(t,e,n,r,s=!0){const i=de(t,"v","movingAverage"),a=de(e,"x","movingAverage"),o=de(n,"decay","movingAverage");$we(i,a),le(jn(i.shape,a.shape),()=>"Shape mismatch in v and x");const l=qt(1),c=At(l,o);let u=Se(At(a,i),c);if(s){le(r!=null,()=>"When using zeroDebias: true, step is required.");const d=de(r,"step","movingAverage");u=Wt(u,At(l,Wd(o,d)))}return ot(i,u)}const Cee=be({movingAverage_:lNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNe(t,e,n){Hl(n);const r=de(t,"indices","scatterND","int32"),s=de(e,"updates","scatterND");PM(s,r,n);const i={indices:r,updates:s},a={shape:n};return Ne.runKernel(TA,i,a)}const Tee=be({scatterND_:cNe});function uNe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const a=e.size;if(!(e.rank===0||e.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(t,e,n,r=0){Hl(n);const s=de(t,"sparseIndices","sparseToDense","int32"),i=de(e,"sparseValues","sparseToDense","string_or_numeric"),a=de(r,"defaultValue","sparseToDense",i.dtype);uNe(s,i,n,a);const o={sparseIndices:s,sparseValues:i,defaultValue:a},l={outputShape:n};return Ne.runKernel($A,o,l)}const Iee=be({sparseToDense_:dNe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t,e){const n=de(e,"indices","gatherND","int32"),s={params:de(t,"x","gatherND","string_or_numeric"),indices:n};return Ne.runKernel(lA,s)}const Aee=be({gatherND_:hNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fNe(t,e){if(e==null)return t.shape.slice();if(jn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pNe(t,e,n,r){const s=de(t,"x","dropout");if(le(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),le(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Or?s.clone():s;const i=fNe(s,n),a=1-e,o=Wt(Ub(ot(Am(i,0,1,"float32",r),a)),a);return Se(s,o)}const RM=be({dropout_:pNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MM(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function vE(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const a=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(a)}return ca(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mNe(t,e,n=1){const r=de(t,"predictions","inTopK"),s=de(e,"targets","inTopK");le(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),le(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),ul(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];le(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const a=await r.data(),o=await s.data(),[l,c]=[a.length/i,i],u=Ui("bool",l);for(let d=0;d<l;d++){const h=d*c,f=a.subarray(h,h+c),m=[];for(let y=0;y<f.length;y++)m.push({value:f[y],index:y});m.sort((y,v)=>v.value-y.value),u[d]=0;for(let y=0;y<n;y++)if(m[y].index===o[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),Oc(u,s.shape,"bool")}const Eee=mNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(t,e,n,r,s,i="NHWC",a){let o=t;t.rank===3&&(o=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]])),le(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),le(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),le(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?o.shape[3]:o.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];le(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),le(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Ga("conv2dDerFilter",s,a);const d={x:o,dy:l},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,filterShape:n};return Ne.runKernel(GI,d,h)}const FM=be({conv2DBackpropFilter_:gNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xE(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Se(t,ey(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function bE(t,e){let n=e;const r=ni(t.shape,e.shape);return r.length>0&&(n=$t(n,r)),Ie(n,t.shape)}function wE(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Uu(t);if(e==="elu")return Bb(t);if(e==="relu6")return aE(t);if(e==="prelu")return zk(t,n);if(e==="leakyrelu")return jk(t,r);if(e==="sigmoid")return Eu(t);throw new Error(`Unknown fused activation ${e}.`)}const _E=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",_E(Ne.state.gradientDepth,l)===!1){le(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let A=tf(t,e,n,r,s,i,a);return o!=null&&(A=ot(A,o)),wE(A,l,c,u)}const d=de(t,"x","conv2d","float32"),h=de(e,"filter","conv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Ie(d,[1,d.shape[0],d.shape[1],d.shape[2]])),le(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),le(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Ga("fused conv2d",r,a);const y=s==="NHWC"?f.shape[3]:f.shape[1];le(h.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${h.shape[2]}.`),le(Hi(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=ki(f.shape,h.shape,n,i,r,a);let x;o!=null&&(x=de(o,"bias","fused conv2d"),[x]=hs(x,d),s==="NHWC"?dn(v.outShape,x.shape):(le(x.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${x.shape.length}.`),le(x.shape.length===0||x.shape[0]===v.outChannels||x.shape[0]===1,()=>`Error in fused conv2d: bias shape (${x.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let b;if(c!=null){const A=c.shape;if(le(A.length<=1||A.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${A.length}.`),A.length===1)le(A[0]===1||A[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the number of output channels (${v.outChannels}).`);else if(A.length===3)try{dn(A,v.outShape)}catch{const C=`Error in fused conv2d: PReLU activation weights (${A}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(C)}b=de(c,"prelu weights","fused conv2d")}const _=(A,T)=>{le(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[C,P,$,j]=T,O=xE(A,$,l);le(sm(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const F=JR(P.shape,O,C,n,r),B=FM(P,O,C.shape,n,r),Z=[F,B];if(j!=null){const V=bE(j,O);Z.push(V)}return Z},k={x:f,filter:h,bias:x,preluActivationWeights:b},N={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?Ud((T,C,P)=>{let $=Ne.runKernel(C2,k,N);return P([C,T,$]),m&&($=Ie($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:_}})(f,h):Ud((T,C,P,$)=>{let j=Ne.runKernel(C2,k,N);return $([C,T,j,P]),m&&(j=Ie(j,[j.shape[1],j.shape[2],j.shape[3]])),{value:j,gradFunc:_}})(f,h,x)}const Pee=be({fusedConv2d_:yNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vNe(t,e,n,r,s,i=[1,1],a){let o=t;t.rank===3&&(o=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,filterShape:n};return Ne.runKernel(eA,c,u)}const Oee=be({depthwiseConv2dNativeBackpropFilter_:vNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(t,e,n,r,s,i=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,inputShape:t},d=Ne.runKernel(tA,c,u);return l?Ie(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const jee=be({depthwiseConv2dNativeBackpropInput_:xNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(_E(Ne.state.gradientDepth,l)===!1){let N=zb(t,e,n,r,s,i,a);return o!=null&&(N=ot(N,o)),wE(N,l,c,u)}const d=de(t,"x","depthwiseConv2d","float32"),h=de(e,"filter","depthwiseConv2d","float32");let f=d,m=!1;d.rank===3&&(m=!0,f=Ie(d,[1,d.shape[0],d.shape[1],d.shape[2]])),le(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),le(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),le(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),le(Hi(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ga("fused depthwiseConv2d",r,a);const y=ki(f.shape,h.shape,n,i,r,a,!0);let v;o!=null&&(v=de(o,"bias","fused conv2d"),[v]=hs(v,d),dn(y.outShape,v.shape));let x;c!=null&&(x=de(c,"prelu weights","fused depthwiseConv2d"));const b=(N,A)=>{le(sm(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[T,C,P,$]=A,j=xE(N,P,l),O=jee(C.shape,j,T,n,r,i,a),F=Oee(C,j,T.shape,n,r,i,a);if($!=null){const B=bE(v,j);return[O,F,B]}return[O,F]},_={x:f,filter:h,bias:v,preluActivationWeights:x},k={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?Ud((A,T,C)=>{let P=Ne.runKernel(T2,_,k);return C([T,A,P]),m&&(P=Ie(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:b}})(f,h):Ud((A,T,C,P)=>{let $=Ne.runKernel(T2,_,k);return P([T,A,$,C]),m&&($=Ie($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(f,h,v)}const wNe=be({fusedDepthwiseConv2d_:bNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ne({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(_E(Ne.state.gradientDepth,i)===!1){let j=kn(t,e,n,r);return s!=null&&(j=ot(j,s)),wE(j,i,a,o)}let l=de(t,"a","fused matMul"),c=de(e,"b","fused matMul");[l,c]=hs(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),y=c.shape.slice(0,-2),v=Xe(m),x=Xe(y);le(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const _=dn(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),k=n?Ie(l,[v,u,h]):Ie(l,[v,h,u]),N=r?Ie(c,[x,f,d]):Ie(c,[x,d,f]);let A;s!=null&&(A=de(s,"bias","fused matMul"),[A]=hs(A,l),dn(_,A.shape));let T;a!=null&&(T=de(a,"prelu weights","fused matMul"));const C=(j,O)=>{const[F,B,Z,V]=O,G=xE(Ie(j,Z.shape),Z,i);let U,K;if(!n&&!r?(U=kn(G,B,!1,!0),K=kn(F,G,!0,!1)):!n&&r?(U=kn(G,B,!1,!1),K=kn(G,F,!0,!1)):n&&!r?(U=kn(B,G,!1,!0),K=kn(F,G,!1,!1)):(U=kn(B,G,!0,!0),K=kn(G,F,!0,!0)),s!=null){const ee=bE(V,G);return[U,K,ee]}else return[U,K]},P={a:k,b:N,bias:A,preluActivationWeights:T},$={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return s==null?Ud((O,F,B)=>{const Z=Ne.runKernel(N2,P,$);return B([O,F,Z]),{value:Ie(Z,_),gradFunc:C}})(k,N):Ud((O,F,B,Z)=>{const V=Ne.runKernel(N2,P,$);return Z([O,F,V,B]),{value:Ie(V,_),gradFunc:C}})(k,N,A)}const Qj=be({fusedMatMul_:_Ne});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ee=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Pee,depthwiseConv2d:wNe,matMul:Qj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNe(t){return vE(t,.54,.46)}const SNe=be({hammingWindow_:kNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NNe(t){return vE(t,.5,.5)}const Dee=be({hannWindow_:NNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CNe(t,e,n,r=!1,s=0){let i=0;const a=[];for(;i+e<=t.size;)a.push(Tn(t,i,e)),i+=n;if(r)for(;i<t.size;){const o=i+e-t.size,l=Ss([Tn(t,i,e-o),Z0([o],s)]);a.push(l),i+=n}return a.length===0?Fv([],[0,e]):Ie(Ss(a),[a.length,e])}const Lee=be({frame_:CNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNe(t,e,n,r,s=Dee){r==null&&(r=MM(e));const i=Lee(t,e,n),a=Se(i,s(e));return Vk(a,r)}const INe=be({stft_:TNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ANe(t,e,n,r,s="bilinear",i=0){const a=de(t,"image","cropAndResize"),o=de(e,"boxes","cropAndResize","float32"),l=de(n,"boxInd","cropAndResize","int32"),c=o.shape[0];le(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),le(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),le(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),le(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),le(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),le(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:a,boxes:o,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return Ne.runKernel(ZI,u,d)}const ENe=be({cropAndResize_:ANe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PNe(t){const e=de(t,"image","flipLeftRight","float32");le(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Ne.runKernel(oA,n,{})}const ONe=be({flipLeftRight_:PNe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(t){const e=de(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];le(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),le(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,El(e,s)}const $Ne=be({grayscaleToRGB_:jNe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DNe(t){const e=de(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];le(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),le(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=bt(e,"float32"),a=ca([.2989,.587,.114]);let o;switch(e.rank){case 2:o=Ag("ij,j->i",i,a);break;case 3:o=Ag("ijk,k->ij",i,a);break;case 4:o=Ag("ijkl,l->ijk",i,a);break;case 5:o=Ag("ijklm,m->ijkl",i,a);break;case 6:o=Ag("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return o=la(o,-1),bt(o,s)}const LNe=be({rgbToGrayscale_:DNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RNe(t,e,n=0,r=.5){const s=de(t,"image","rotateWithOffset","float32");le(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},a={radians:e,fillValue:n,center:r};return Ne.runKernel(UA,i,a)}const MNe=be({rotateWithOffset_:RNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qb(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=t.shape[0];return n=Math.min(n,a),le(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),le(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),le(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),le(e.rank===1,()=>"scores must be a 1D tensor"),le(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),le(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FNe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=de(t,"boxes","nonMaxSuppression","float32"),a=de(e,"scores","nonMaxSuppression","float32"),o=qb(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return Ne.runKernel(yA,{boxes:i,scores:a},l)}const zNe=be({nonMaxSuppression_:FNe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(t,e,n){const r=WNe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function WNe(t,e,n){return VNe(t,e,n||UNe)}function UNe(t,e){return t>e?1:t<e?-1:0}function VNe(t,e,n){let r=0,s=t.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(s=i,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zM(t,e,n,r,s){return UM(t,e,n,r,s,0)}function BM(t,e,n,r,s,i){return UM(t,e,n,r,s,0,!1,i,!0)}function WM(t,e,n,r,s,i){return UM(t,e,n,r,s,i,!0)}function UM(t,e,n,r,s,i,a=!1,o=!1,l=!1){const c=[];for(let v=0;v<e.length;v++)e[v]>s&&c.push({score:e[v],boxIndex:v,suppressBeginIndex:0});c.sort(jW);const u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){const v=c.pop(),{score:x,boxIndex:b,suppressBeginIndex:_}=v;if(x<s)break;let k=!1;for(let N=d.length-1;N>=_;--N){const A=HNe(t,b,d[N]);if(A>=r){k=!0;break}if(v.score=v.score*qNe(r,u,A),v.score<=s)break}v.suppressBeginIndex=d.length,k||(v.score===x?(d.push(b),h.push(v.score)):v.score>s&&BNe(c,v,jW))}const f=d.length,m=n-f;o&&m>0&&(d.push(...new Array(m).fill(0)),h.push(...new Array(m).fill(0)));const y={selectedIndices:d};return a&&(y.selectedScores=h),l&&(y.validOutputs=f),y}function HNe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(o-i)*(l-a),m=(d-c)*(h-u);if(f<=0||m<=0)return 0;const y=Math.max(i,c),v=Math.max(a,u),x=Math.min(o,d),b=Math.min(l,h),_=Math.max(x-y,0)*Math.max(b-v,0);return _/(f+m-_)}function qNe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function jW(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function GNe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=de(t,"boxes","nonMaxSuppressionAsync"),a=de(e,"scores","nonMaxSuppressionAsync"),o=qb(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([i.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:d}=zM(c,u,n,r,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),ca(d,"int32")}const KNe=GNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=de(t,"boxes","nonMaxSuppression"),o=de(e,"scores","nonMaxSuppression"),l=qb(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:a,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=Ne.runKernel(xA,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const YNe=be({nonMaxSuppressionWithScore_:XNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ZNe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=de(t,"boxes","nonMaxSuppressionAsync"),o=de(e,"scores","nonMaxSuppressionAsync"),l=qb(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=WM(u,d,n,r,s,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(h,"int32"),selectedScores:ca(f)}}const JNe=ZNe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=de(t,"boxes","nonMaxSuppression"),o=de(e,"scores","nonMaxSuppression"),l=qb(a,o,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:a,scores:o},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},m=Ne.runKernel(vA,h,f);return{selectedIndices:m[0],validOutputs:m[1]}}const eCe=be({nonMaxSuppressionPadded_:QNe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=de(t,"boxes","nonMaxSuppressionAsync"),o=de(e,"scores","nonMaxSuppressionAsync"),l=qb(a,o,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([a.data(),o.data()]),{selectedIndices:m,validOutputs:y}=BM(h,f,c,u,d,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:ca(m,"int32"),validOutputs:qt(y,"int32")}}const nCe=tCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(t,e,n=!1,r=!1){const s=de(t,"images","resizeBilinear");le(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),le(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),le(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=Ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=Ne.runKernel(mk,o,l);return a?Ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Ree=be({resizeBilinear_:rCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(t,e,n=!1,r=!1){const s=de(t,"images","resizeNearestNeighbor");le(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),le(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),le(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),le(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=Ie(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=Ne.runKernel(pk,o,l);return a?Ie(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Mee=be({resizeNearestNeighbor_:sCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t,e="binary",n=!1,r=.5){const s=de(t,"image","threshold"),i=.2989,a=.587,o=.114,l=s.shape[0]*s.shape[1];let c=Se(ca([r]),255),u,d,h,f;if(le(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),le(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),le(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),le(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,d,h]=vo(s,[1,1,1],-1);const v=Se(u,i),x=Se(d,a),b=Se(h,o);f=ot(ot(v,x),b)}else f=t;if(e==="otsu"){const v=qR(bt(oE(f),"int32"),Oc([]),256);c=aCe(v,l)}const m=n?Im(f,c):Io(f,c);return bt(Se(m,255),"int32")}function aCe(t,e){let n=ca([-1]),r=ca([0]),s=ca([0]),i,a,o,l,c,u;for(let d=0;d<t.size-1;d++){i=Tn(t,0,d+1),a=Tn(t,d+1),c=Wt($t(i),e),u=Wt($t(a),e);const h=$t(Se(i,T0(0,i.size)));o=Wt(h,$t(i));const f=Z0(a.shape,i.size),m=ot(T0(0,a.size),f),y=Se(a,m);l=Wt($t(y),$t(a));const v=At(o,l),x=At(o,l),b=Se(c,u);s=Se(Se(b,v),x);const _=Io(s,r);r=Bi(_,s,r),n=Bi(_,ca([d]),n)}return n}const oCe=be({threshold_:iCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e,n="nearest",r="constant",s=0,i){const a=de(t,"image","transform","float32"),o=de(e,"transforms","transform","float32");le(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),le(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),le(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:a,transforms:o},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return Ne.runKernel(BA,l,c)}const cCe=be({transform_:lCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e,n){const r=de(t,"a","bandPart");le(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(le(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),le(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=de(e<0?i:e,"numLower","bandPart")):(le(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Bi(ux(e,0),i,am(e,i))),typeof n=="number"?(le(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),le(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=de(n<0?a:n,"numUpper","bandPart")):(le(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Bi(ux(n,0),a,am(n,a)));const c=Ie(T0(0,i,1,"int32"),[-1,1]),u=T0(0,a,1,"int32"),d=At(c,u),h=Lu(Im(d,o),pf(d,Cr(l))),f=ws([i,a],r.dtype);return Ie(ko(zl(Ie(r,[-1,i,a])).map(m=>Bi(h,m,f))),s)}const dCe=be({bandPart_:uCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(t){let e;if(Array.isArray(t)){e=!1,le(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)le(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=vo(t,t.shape[0],0).map(s=>gf(s,[0]));le(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(Ne.tidy(()=>{let i=r[s];if(s>0)for(let a=0;a<s;++a){const o=Se($t(Se(n[a],i)),n[a]);i=At(i,o)}return Wt(i,Wb(i,"euclidean"))}));return e?ko(n,0):n}const fCe=be({gramSchmidt_:hCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(t,e=!1){if(le(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return $W(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=zl(Ie(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=$W(l,e);s.push(c),i.push(u)});const a=Ie(ko(s,0),t.shape),o=Ie(ko(i,0),t.shape);return[a,o]}}function $W(t,e=!1){return Ne.tidy(()=>{le(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=QA(n),i=$d(t);const a=Fv([[1]],[1,1]);let o=$d(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,d=o,h=s;[o,i,s]=Ne.tidy(()=>{const f=Tn(i,[c,c],[n-c,1]),m=Wb(f),y=Tn(i,[c,c],[1,1]),v=Bi(Io(y,0),Fv([[-1]]),Fv([[1]])),x=At(y,Se(v,m)),b=Wt(f,x);b.shape[0]===1?o=$d(a):o=Ss([a,Tn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const _=Cr(Wt(kn(v,x),m)),k=Tn(i,[c,0],[n-c,r]),N=Se(_,o),A=Pn(o);if(c===0)i=At(k,kn(N,kn(A,k)));else{const P=At(k,kn(N,kn(A,k)));i=Ss([Tn(i,[0,0],[c,r]),P],0)}const T=Pn(N),C=Tn(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=At(C,kn(kn(C,o),T));else{const P=At(C,kn(kn(C,o),T));s=Ss([Tn(s,[0,0],[n,c]),P],1)}return[o,i,s]}),bn([u,d,h])}return!e&&n>r&&(s=Tn(s,[0,0],[n,r]),i=Tn(i,[0,0],[r,r])),[s,i]})}const mCe=be({qr_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ra;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ra||(Ra={}));function gCe(t,e,n=Ra.SUM_BY_NONZERO_WEIGHTS){const r=de(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=de(e,"weights","computeWeightedLoss"));const i=s==null?r:Se(r,s);if(n===Ra.NONE)return i;if(n===Ra.SUM)return $t(i);if(n===Ra.MEAN){if(s==null)return Jr(i);{const a=r.size/s.size,o=Wt($t(i),$t(s));return a>1?Wt(o,qt(a)):o}}if(n===Ra.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Wt($t(i),qt(r.size));{const a=Se(s,po(r.shape)),o=bt($t(C0(a,qt(0))),"float32");return Wt($t(i),o)}}throw Error(`Unknown reduction: ${n}`)}const yf=be({computeWeightedLoss_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){const s=de(t,"labels","absoluteDifference"),i=de(e,"predictions","absoluteDifference");let a=null;n!=null&&(a=de(n,"weights","absoluteDifference")),ul(s.shape,i.shape,"Error in absoluteDifference: ");const o=js(At(s,i));return yf(o,a,r)}const vCe=be({absoluteDifference_:yCe});function xCe(t,e,n,r,s=Ra.SUM_BY_NONZERO_WEIGHTS){const i=de(t,"labels","cosineDistance"),a=de(e,"predictions","cosineDistance");let o=null;r!=null&&(o=de(r,"weights","cosineDistance")),ul(i.shape,a.shape,"Error in cosineDistance: ");const l=qt(1),c=At(l,$t(Se(i,a),n,!0));return yf(c,o,s)}const bCe=be({cosineDistance_:xCe});function wCe(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){let s=de(t,"labels","hingeLoss");const i=de(e,"predictions","hingeLoss");let a=null;n!=null&&(a=de(n,"weights","hingeLoss")),ul(s.shape,i.shape,"Error in hingeLoss: ");const o=qt(1);s=At(Se(qt(2),s),o);const l=Uu(At(o,Se(s,i)));return yf(l,a,r)}const _Ce=be({hingeLoss_:wCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kCe(t,e,n,r=1,s=Ra.SUM_BY_NONZERO_WEIGHTS){const i=de(t,"labels","huberLoss"),a=de(e,"predictions","huberLoss");let o=null;n!=null&&(o=de(n,"weights","huberLoss")),ul(i.shape,a.shape,"Error in huberLoss: ");const l=qt(r),c=js(At(a,i)),u=am(c,l),d=At(c,u),h=ot(Se(qt(.5),hr(u)),Se(l,d));return yf(h,o,s)}const SCe=be({huberLoss_:kCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(t,e,n,r=1e-7,s=Ra.SUM_BY_NONZERO_WEIGHTS){const i=de(t,"labels","logLoss"),a=de(e,"predictions","logLoss");let o=null;n!=null&&(o=de(n,"weights","logLoss")),ul(i.shape,a.shape,"Error in logLoss: ");const l=qt(1),c=qt(r),u=Cr(Se(i,al(ot(a,c)))),d=Se(At(l,i),al(ot(At(l,a),c))),h=At(u,d);return yf(h,o,s)}const CCe=be({logLoss_:NCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(t,e,n,r=Ra.SUM_BY_NONZERO_WEIGHTS){const s=de(t,"labels","meanSquaredError"),i=de(e,"predictions","meanSquaredError");let a=null;n!=null&&(a=de(n,"weights","meanSquaredError")),ul(s.shape,i.shape,"Error in meanSquaredError: ");const o=mE(s,i);return yf(o,a,r)}const ICe=be({meanSquaredError_:TCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ACe(t,e){const n=de(t,"labels","sigmoidCrossEntropyWithLogits"),r=de(e,"logits","sigmoidCrossEntropyWithLogits");ul(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Uu(r),i=Se(r,n),a=$k(_o(Cr(js(r))));return ot(At(s,i),a)}function ECe(t,e,n,r=0,s=Ra.SUM_BY_NONZERO_WEIGHTS){let i=de(t,"multiClassLabels","sigmoidCrossEntropy");const a=de(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=de(n,"weights","sigmoidCrossEntropy")),ul(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=qt(r),u=qt(1),d=qt(.5);i=ot(Se(i,At(u,c)),Se(d,c))}const l=ACe(i,a);return yf(l,o,s)}const PCe=be({sigmoidCrossEntropy_:ECe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ud((s,i,a)=>{const l=Dk(i,[n],!0),c=At(bt(i,"float32"),l);a([s,c]);const u=Cr(Se(c,s));return{value:$t(u,[n]),gradFunc:(f,m)=>{const[y,v]=m,x=Ns(f.shape,[n]);return[Se(Ie(f,x),At(bt(y,"float32"),_o(v))),Se(Ie(f,x),At(_o(v),bt(y,"float32")))]}}})(t,e)}function jCe(t,e,n,r=0,s=Ra.SUM_BY_NONZERO_WEIGHTS){let i=de(t,"onehotLabels","softmaxCrossEntropy");const a=de(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=de(n,"weights","softmaxCrossEntropy")),ul(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=qt(r),u=qt(1),d=qt(i.shape[1]);i=ot(Se(i,At(u,c)),Wt(c,d))}const l=OCe(i,a);return yf(l,o,s)}const $Ce=be({softmaxCrossEntropy_:jCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t,e,n,r){const s=de(t,"indices","sparseFillEmptyRows","int32"),i=de(e,"values","sparseFillEmptyRows"),a=de(n,"denseShape","sparseFillEmptyRows","int32"),o=de(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:i,denseShape:a,defaultValue:o},c=Ne.runKernel(EA,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const LCe=be({sparseFillEmptyRows_:DCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(t,e,n){const r=de(t,"inputIndices","sparseReshape","int32"),s=de(e,"inputShape","sparseReshape","int32"),i=de(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const a={inputIndices:r,inputShape:s,newShape:i},o=Ne.runKernel(PA,a);return{outputIndices:o[0],outputShape:o[1]}}const MCe=be({sparseReshape_:RCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCe(t,e,n){const r=de(t,"data","sparseSegmentMean"),s=de(e,"indices","sparseSegmentMean","int32"),i=de(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return Ne.runKernel(OA,a)}const zCe=be({sparseSegmentMean_:FCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(t,e,n){const r=de(t,"data","sparseSegmentSum"),s=de(e,"indices","sparseSegmentSum","int32"),i=de(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const a={data:r,indices:s,segmentIds:i};return Ne.runKernel(jA,a)}const WCe=be({sparseSegmentSum_:BCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UCe(t,e,n,r,s,i,a,o){const l=de(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=de(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:a,preserveShortSequences:o},d={data:l,dataSplits:c},h=Ne.runKernel(RA,d,u);return{nGrams:h[0],nGramsSplits:h[1]}}const VCe=be({stringNGrams_:UCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(t,e,n=!0){const r=de(t,"input","stringSplit","string"),s=de(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},a={input:r,delimiter:s},o=Ne.runKernel(MA,a,i);return{indices:o[0],values:o[1],shape:o[2]}}const qCe=be({stringSplit_:HCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCe(t,e){const n=de(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return Ne.runKernel(FA,s,r)}const KCe=be({stringToHashBucketFast_:GCe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XCe(t,e,n,r=!0){const s=de(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return Ne.runKernel(kk,{x:s},i)}const YCe=be({staticRegexReplace_:XCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fee={fft:Uk,ifft:fx,rfft:Vk,irfft:pE},zee={hammingWindow:SNe,hannWindow:Dee,frame:Lee,stft:INe},Sc={flipLeftRight:ONe,grayscaleToRGB:$Ne,resizeNearestNeighbor:Mee,resizeBilinear:Ree,rgbToGrayscale:LNe,rotateWithOffset:MNe,cropAndResize:ENe,nonMaxSuppression:zNe,nonMaxSuppressionAsync:KNe,nonMaxSuppressionWithScore:YNe,nonMaxSuppressionWithScoreAsync:JNe,nonMaxSuppressionPadded:eCe,nonMaxSuppressionPaddedAsync:nCe,threshold:oCe,transform:cCe},VM={bandPart:dCe,gramSchmidt:fCe,qr:mCe},Bee={absoluteDifference:vCe,computeWeightedLoss:yf,cosineDistance:bCe,hingeLoss:_Ce,huberLoss:SCe,logLoss:CCe,meanSquaredError:ICe,sigmoidCrossEntropy:PCe,softmaxCrossEntropy:$Ce},Wee={sparseFillEmptyRows:LCe,sparseReshape:MCe,sparseSegmentMean:zCe,sparseSegmentSum:WCe},Uee={stringNGrams:VCe,stringSplit:qCe,stringToHashBucketFast:KCe,staticRegexReplace:YCe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe=new Map,JCe=new Map;class Gb{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class xc{constructor(){this.classNameMap={}}static getMap(){return xc.instance==null&&(xc.instance=new xc),xc.instance}static register(e){xc.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ut(t,e,n){le(t.className!=null,()=>"Class being registered does not have the static className property defined."),le(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),le(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return xc.register(t),ZCe.set(s,t),JCe.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vf extends Gb{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(a)}else this.applyGradients(i);return bn(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return XQ(e,n)}dispose(){this.iterations_!=null&&bn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:qt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(vf,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HM extends vf{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Ne.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ne.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:Re(()=>On(i).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:Re(()=>On(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;Re(()=>{const u=ot(Se(l,this.rho),Se(hr(o),1-this.rho)),d=Se(Wt(_i(ot(c,this.epsilon)),_i(ot(l,this.epsilon))),o),h=ot(Se(c,this.rho),Se(hr(d),1-this.rho));l.assign(u),c.assign(h);const f=ot(Se(d,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(bn(this.accumulatedGrads.map(e=>e.variable)),bn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qM extends vf{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ne.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:Re(()=>Z0(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[s].variable;Re(()=>{const l=ot(o,hr(a));o.assign(l);const c=ot(Se(Wt(a,_i(ot(l,Ne.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&bn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GM extends vf{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Re(()=>{this.accBeta1=qt(n).variable(),this.accBeta2=qt(r).variable()}),s==null&&(this.epsilon=Ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Re(()=>{const r=At(1,this.accBeta1),s=At(1,this.accBeta2);n.forEach((i,a)=>{const o=Ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Re(()=>On(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:Re(()=>On(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,h=ot(Se(u,this.beta1),Se(c,1-this.beta1)),f=ot(Se(d,this.beta2),Se(hr(c),1-this.beta2)),m=Wt(h,r),y=Wt(f,s);u.assign(h),d.assign(f);const v=ot(Se(Wt(m,ot(_i(y),this.epsilon)),-this.learningRate),o);o.assign(v)}),this.accBeta1.assign(Se(this.accBeta1,this.beta1)),this.accBeta2.assign(Se(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&bn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&bn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Re(()=>{this.accBeta1.assign(Wd(this.beta1,this.iterations_+1)),this.accBeta2.assign(Wd(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KM extends vf{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Re(()=>{this.iteration=qt(0).variable(),this.accBeta1=qt(n).variable()}),s==null&&(this.epsilon=Ne.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Re(()=>{const r=At(1,this.accBeta1),s=Wt(-this.learningRate,ot(Se(this.iteration,this.decay),1));n.forEach((i,a)=>{const o=Ne.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:On(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:On(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,h=ot(Se(u,this.beta1),Se(c,1-this.beta1)),f=Se(d,this.beta2),m=js(c),y=Zd(f,m);u.assign(h),d.assign(y);const v=ot(Se(Wt(s,r),Wt(h,ot(y,this.epsilon))),o);o.assign(v)}),this.iteration.assign(ot(this.iteration,1)),this.accBeta1.assign(Se(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&bn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&bn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kE extends vf{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=Ne.registeredVariables[r];Re(()=>{const o=ot(Se(this.c,i),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Ks(qt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XM extends kE{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=qt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ne.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:Re(()=>On(i).variable(!1))});const a=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&Re(()=>{let l;const c=ot(Se(this.m,a),o);this.useNesterov?l=ot(Se(this.c,ot(o,Se(c,this.m))),i):l=ot(Se(this.c,c),i),a.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&bn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YM extends vf{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=Ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Ne.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:Re(()=>On(i).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:Re(()=>On(i).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:Re(()=>On(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;Re(()=>{const u=ot(Se(l,this.decay),Se(hr(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=ot(Se(d,this.decay),Se(o,1-this.decay)),f=Wt(Se(o,this.learningRate),_i(At(u,ot(hr(h),this.epsilon)))),m=ot(Se(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(m);const y=At(i,m);i.assign(y)}else{const d=ot(Se(l,this.decay),Se(hr(o),1-this.decay)),h=ot(Se(c,this.momentum),Wt(Se(o,this.learningRate),_i(ot(d,this.epsilon))));l.assign(d),c.assign(h);const f=At(i,h);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&bn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&bn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&bn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QCe=[HM,qM,GM,KM,XM,YM,kE];function e5e(){for(const t of QCe)ut(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5e="model",n5e=".json",r5e=".weights.bin";function DW(t){return new Promise(e=>setTimeout(e)).then(t)}class I0{constructor(e){if(!We().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(I0.URL_SCHEME)&&(e=e.slice(I0.URL_SCHEME.length)),(e==null||e.length===0)&&(e=t5e),this.modelJsonFileName=e+n5e,this.weightDataFileName=e+r5e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Wu.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=AQ(e,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await DW(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await DW(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Tk(e)}}}}I0.URL_SCHEME="downloads://";class s5e{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:a});return}const l=PR(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const a of e)n.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(i).then(a=>[n,a])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=a=>{const o=a.target.result;r(o)},i.onerror=a=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>OW(i.name)),s={};for(const i of e)i.paths.forEach(a=>{const o=OW(a);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const i5e=t=>We().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(I0.URL_SCHEME)?a5e(t.slice(I0.URL_SCHEME.length)):null;Xr.registerSaveRouter(i5e);function a5e(t="model"){return new I0(t)}function o5e(t){return new s5e(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(t,e,n,r){a(t),n=n??0,r=r??1,o(n,r);let s=0;const i=l=>(l.then(c=>{const u=n+ ++s/t.length*(r-n);return e(u),c}),l);function a(l){le(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,c){le(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),le(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),le(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vee(t,e){e==null&&(e={});const n=e.fetchFunc==null?We().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await LW(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(o):await LW(o,e.onProgress,.5,1)}function l5e(t,e){var n;const r=e.fetchFunc==null?We().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async a=>{for(var o;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/t.length);continue}a.enqueue(c);return}a.close()}})}async function c5e(t,e="",n,r){return Hee(a=>Vee(a,{requestInit:r}))(t,e,n)}function Hee(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},a=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((f,m)=>{let y=0;f.weights.forEach(v=>{const x="quantization"in v?v.quantization.dtype:v.dtype,b=w0[x]*Xe(v.shape),_=()=>{s[m]=!0,i[m]==null&&(i[m]=[]),i[m].push({manifestEntry:v,groupOffset:y,sizeBytes:b})};r!=null?r.forEach((k,N)=>{k===v.name&&(_(),a[N]=!0)}):_(),o.push(v.name),y+=b})}),!a.every(f=>f)){const f=r.filter((m,y)=>!a[y]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((f,m,y)=>(m&&f.push(y),f),[]),c=[];l.forEach(f=>{e[f].paths.forEach(m=>{const y=n+(n.endsWith("/")?"":"/")+m;c.push(y)})});const u=await t(c),d={};let h=0;return l.forEach(f=>{const m=e[f].paths.length,y=new Wu(u.slice(h,h+m));i[f].forEach(x=>{const b=y.slice(x.groupOffset,x.groupOffset+x.sizeBytes),_=NQ(b,[x.manifestEntry]);for(const k in _)d[k]=_[k]}),h+=m}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5e="application/octet-stream",d5e="application/json";class ZM{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(le(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=We().platform.fetch,le(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&le(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=AQ(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:d5e}),"model.json"),e.weightData!=null){const a=Wu.join(e.weightData);n.body.append("model.weights.bin",new Blob([a],{type:u5e}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:Tk(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return PR(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=Kj(e.weightsManifest),s=()=>l5e(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=h5e(n),i=this.weightPathPrefix||r,a=[],o=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(c)):a.push(i+c+s);return this.weightUrlConverter&&a.push(...await Promise.all(o)),a}async loadWeights(e){const n=await this.getWeightUrls(e),r=Kj(e),s=await Vee(n,this.loadOptions);return[r,s]}}ZM.URL_SCHEME_REGEX=/^https?:\/\//;function h5e(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function e$(t){return t.match(ZM.URL_SCHEME_REGEX)!=null}const qee=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>e$(r)):n=e$(t),n)return JM(t,e)}return null};Xr.registerSaveRouter(qee);Xr.registerLoadRouter(qee);function JM(t,e){return new ZM(t,e)}function f5e(t,e){return JM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s3{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class Gee{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class p5e{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function m5e(t,e,n,r){const s=arguments;return new p5e(Kee(...s))}function Kee(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new s3(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new s3({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new s3({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function g5e(t){return new Gee(t)}function y5e(t){return new Gee(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QM=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Wu,browserFiles:o5e,browserHTTPRequest:f5e,concatenateArrayBuffers:IQ,copyModel:h2e,decodeWeights:NQ,decodeWeightsStream:TQ,encodeWeights:Gj,fromMemory:m5e,fromMemorySync:Kee,getLoadHandlers:Jwe,getModelArtifactsForJSON:PR,getModelArtifactsForJSONSync:EQ,getModelArtifactsInfoForJSON:Tk,getSaveHandlers:PQ,getWeightSpecs:Kj,http:JM,isHTTPScheme:e$,listModels:u2e,loadWeights:c5e,moveModel:f2e,registerLoadRouter:Zwe,registerSaveRouter:Ywe,removeModel:d2e,weightsLoaderFactory:Hee,withSaveHandler:g5e,withSaveHandlerSync:y5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ag;function v5e(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(j5(P5,Ne.backendName)!=null){const m={pixels:t},y={numChannels:e};return Ne.runKernel(P5,m,y)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(a)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=t.data;else if(i||s||o){if(ag==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")ag=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ag=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ag.canvas.width=c,ag.canvas.height=u,ag.drawImage(t,0,0,c,u),d=ag.getImageData(0,0,c,u).data}let h;if(e===4)h=new Int32Array(d);else{const m=c*u;h=new Int32Array(m*e);for(let y=0;y<m;y++)for(let v=0;v<e;++v)h[y*e+v]=d[y*4+v]}return EM(h,[u,c,e],"int32")}const x5e=be({fromPixels_:v5e});function eF(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Xe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let a=1;for(let d=0;d<s.length-1;++d)a*=s[d];const o=t.shape,l=s.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=o[d],l.push(o[d]);const u=[...Gt(t.shape).map(d=>d/c),1].slice(0,i);return[l,a,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t$=-2,b5e=-1;function Xee(t,e,n){const r=t.shape.length;le(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),le(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)le(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Yee(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function Zee(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function Jee(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function tF(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(a=>{le(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((a,o)=>a>=0?a:(le(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function Qee(t,e,n,r,s,i,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let _=0;_<d.dims;_++)u&&1<<_&o&&d.numAddAxisAfterEllipsis++,1<<_&a&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};w5e(d,h);let f=!0,m=!0,y=!0;const v=[],x=[];for(let _=0;_<t.length;++_){if(h.strides[_]===0)throw Error(`strides[${_}] must be non-zero`);const k=!!(h.shrinkAxisMask&1<<_),N=t[_];if(N===-1){v.push(k?1:-1);continue}const A=[h.beginMask&1<<_,h.endMask&1<<_],T=[h.strides[_]>0?0:-1,h.strides[_]>0?N:N-1];if(k&&h.strides[_]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&h.strides[_]===1;const C=!!(h.beginMask&1<<_&&h.endMask&1<<_);if(h.beginValid&&h.endValid){if(k){const O=h.begin[_]<0?N+h.begin[_]:h.begin[_];if(h.begin[_]=O,h.end[_]=h.begin[_]+1,O<0||O>=N)throw Error(`slice index ${h.begin[_]} of dimension ${_} out of bounds.`)}else h.begin[_]=RW(h.begin[_],0,h.strides[_],N,A,T),h.end[_]=RW(h.end[_],1,h.strides[_],N,A,T);const j=h.strides[_]===1&&h.begin[_]===0&&h.end[_]===N;f=f&&j,m=m&&(_===0&&h.strides[_]===1||j)}else f=f&&h.strides[_]===1&&C,m=m&&(_===0&&h.strides[_]===1||C);let P,$=!1;if(h.beginValid&&h.endValid?(P=h.end[_]-h.begin[_],$=!0):k?(P=1,$=!0):C&&N>=0&&(h.strides[_]<0?P=-N:P=N,$=!0),$){let j;P===0||P<0!=h.strides[_]<0?j=0:j=Math.trunc(P/h.strides[_])+(P%h.strides[_]!==0?1:0),v.push(j)}else v.push(-1)}for(let _=0;_<h.finalShapeGatherIndices.length;++_){const k=h.finalShapeGatherIndices[_];k>=0?x.push(v[k]):k===t$&&x.push(1)}return{finalShapeSparse:x.filter((_,k)=>h.finalShapeGatherIndices[k]!==t$),finalShape:x,isIdentity:f,sliceDim0:m,isSimpleSlice:y,begin:h.begin,end:h.end,strides:h.strides}}function w5e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(t$),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(b5e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function RW(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const a=t<0?r+t:t;return a<i[0]?i[0]:a>i[1]?i[1]:a}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ete{static sgd(e){return new kE(e)}static momentum(e,n,r=!1){return new XM(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new YM(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new GM(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new HM(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new KM(e,n,r,s,i)}static adagrad(e,n=.1){return new qM(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xg=ete;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function nF(){return new Promise(t=>_5e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rF(t,e){const n=t[0].length;t.forEach((s,i)=>{le(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),le(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let a=0;a<n;a++)le(a===e||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Dd(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var wu;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(wu||(wu={}));function tte(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],a=r[r.length-n.length+s],o=r[a];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${o}`)}else r[a]=i}return r}function nte(t){const e={FIRST_DIM_SIZE:wu.FIRST_DIM_SIZE,VALUE_ROWIDS:wu.VALUE_ROWIDS,ROW_LENGTHS:wu.ROW_LENGTHS,ROW_SPLITS:wu.ROW_SPLITS,ROW_LIMITS:wu.ROW_LIMITS,ROW_STARTS:wu.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function rte(t){return t.length===0?0:t[0]===wu.FIRST_DIM_SIZE?t.length-1:t.length}function ste(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],a=e[s+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sF=30;function SE(t){return t<=sF?t:Dj(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iF(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hk(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let a=0;a<i;++a)s=s.concat([t[a+1]/e[a],e[a]]);s=s.concat(t.slice(i+1))}return s}function qk(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?i.push(a):s.push(a);r.push(...s),r.push(0),r.push(...i)}return r}function Gk(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function aF(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function oF(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NE=1.7580993408473768,CE=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lF=.3275911,cF=.254829592,uF=-.284496736,dF=1.421413741,hF=-1.453152027,fF=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nf(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function ite(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function ate(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function ote(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function pF(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function lte(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function cte(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function ute(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3="->",k5e=/->/g,MW=",",FW="...";function mF(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(k5e,"").length)/i3.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${i3}").`);const[r,s]=t.split(i3);le(r.indexOf(FW)===-1,()=>`The ellipsis notation ("${FW}") is not supported yet.`);const i=r.split(MW),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let h=0;h<s.length;++h){const f=s[h];if(!i.some(m=>m.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);o.indexOf(f)===-1&&o.push(f)}for(let h=0;h<r.length;++h){const f=r[h];o.indexOf(f)===-1&&f!==MW&&o.push(f)}const l=new Array(i.length);for(let h=0;h<a;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<i[h].length;++f)l[h].push(o.indexOf(i[h][f]))}const c=o.length,u=s.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:o,summedDims:d,idDims:l}}function gF(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function yF(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let a=0;a<e[s].length;++a)r[e[s][a]]===void 0?r[e[s][a]]=i[a]:le(r[e[s][a]]===i[a],()=>`Expected dimension ${r[e[s][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function vF(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let a=0;a<s;++a)r.push([]);const i=[];for(let a=0;a<n.length;++a){const o=n[a],l=S5e(e,o);for(const c of l)i.indexOf(c)===-1&&(r[a].push(c),i.push(c))}return{path:n,steps:r}}function xF(t){return t.every((e,n)=>e===n)}function S5e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function bF(t,e,n=0){let r=[];if(typeof e=="number")le(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);le(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[i]=t.shape[n]-a}le(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dte(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function hte(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function fte(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function mte(t,e){return`size ${t} must be non-negative, not ${e}`}function gte(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function yte(t,e){const n=Xe(t),r=Xe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function vte(t,e){const n=Xe(t),r=Xe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$(){return"segment ids must be >= 0"}function xte(){return"segment ids are not increasing"}function bte(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function wte(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5e(t,e){let n=!1,r;for(t<=sF?(r=t,n=!0):r=Dj(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=Dj(t,r+1);return r}function C5e(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function _te(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const a=t.shape[n],o=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<s;d++)o.push(e.shape[d]);for(let d=n+1;d<i;d++)o.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:o}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rf(t){try{return t.map(e=>nm(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function kte(t){return t.map(e=>Vp(e))}const Ste=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:cF,ERF_A2:uF,ERF_A3:dF,ERF_A4:hF,ERF_A5:fF,ERF_P:lF,PARALLELIZE_THRESHOLD:sF,get RowPartitionType(){return wu},SELU_SCALE:CE,SELU_SCALEALPHA:NE,applyActivation:wE,assertAndGetBroadcastShape:dn,assertAxesAreInnerMostDims:qi,assertParamsConsistent:rF,assignToTypedArray:lte,axesAreInnerMostDims:iM,calculateShapes:ty,checkEinsumDimSizes:yF,checkPadOnDimRoundingMode:Ga,combineLocations:qQ,combineRaggedTensorToTensorShapes:tte,complexWithEvenIndex:ate,complexWithOddIndex:ote,computeConv2DInfo:ki,computeConv3DInfo:Cm,computeDefaultPad:BR,computeDilation2DInfo:Ik,computeOptimalWindowSize:SE,computeOutAndReduceShapes:Si,computeOutShape:Dd,computePool2DInfo:Vc,computePool3DInfo:hf,convertConv2DDataFormat:ff,decodeEinsumEquation:mF,eitherStridesOrDilationsAreOne:Hi,expandShapeToKeepDim:Ns,exponent:ute,exponents:cte,fromStringArrayToUint8:kte,fromUint8ToStringArray:rf,getAxesPermutation:rs,getBroadcastDims:lx,getComplexWithIndex:pF,getEinsumComputePath:vF,getEinsumPermutation:gF,getFusedBiasGradient:bE,getFusedDyActivation:xE,getImageCenter:iF,getInnerMostAxes:Cs,getPermuted:qk,getRaggedRank:rte,getReductionAxes:ni,getReshaped:Hk,getReshapedPermuted:Gk,getRowPartitionTypesHelper:nte,getSliceBeginCoords:aF,getSliceSize:oF,getSparseFillEmptyRowsIndicesDenseShapeMismatch:dte,getSparseFillEmptyRowsNegativeIndexErrorMessage:hte,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:fte,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:gte,getSparseReshapeInputOutputMismatchErrorMessage:vte,getSparseReshapeInputOutputMultipleErrorMessage:yte,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:pte,getSparseReshapeNegativeOutputDimErrorMessage:mte,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:wte,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:n$,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:xte,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:bte,getUndoAxesPermutation:Tm,isIdentityPermutation:xF,mergeRealAndImagArrays:nf,prepareAndValidate:eF,prepareSplitSize:bF,shouldFuse:_E,splitRealAndImagArrays:ite,stridesOrDilationsArePositive:N0,tupleValuesAreOne:sm,upcastType:xo,validateDefaultValueShape:ste,validateInput:PM,validateUpdateShape:_ee,warn:Tl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */e5e();const T5e=Object.freeze(Object.defineProperty({__proto__:null,Abs:S_,Acos:Vx,Acosh:Hx,AdadeltaOptimizer:HM,AdagradOptimizer:qM,AdamOptimizer:GM,AdamaxOptimizer:KM,Add:K0,AddN:N_,All:zI,Any:BI,ArgMax:C_,ArgMin:T_,Asin:qx,Asinh:Gx,Atan:Kx,Atan2:Yx,Atanh:Xx,AvgPool:I_,AvgPool3D:A_,AvgPool3DGrad:UI,AvgPoolGrad:WI,BatchMatMul:E_,BatchToSpaceND:P_,Bincount:VI,BitwiseAnd:O_,BroadcastArgs:HI,BroadcastTo:eQ,Cast:Zx,Ceil:Jx,ClipByValue:Qx,Complex:qI,ComplexAbs:j_,Concat:$_,Conv2D:D_,Conv2DBackpropFilter:GI,Conv2DBackpropInput:L_,Conv3D:R_,Conv3DBackpropFilterV2:KI,Conv3DBackpropInputV2:XI,Cos:eb,Cosh:tb,CropAndResize:ZI,Cumprod:YI,Cumsum:M_,DataStorage:xR,DenseBincount:JI,DepthToSpace:QI,DepthwiseConv2dNative:F_,DepthwiseConv2dNativeBackpropFilter:eA,DepthwiseConv2dNativeBackpropInput:tA,Diag:nA,Dilation2D:z_,Dilation2DBackpropFilter:E5,Dilation2DBackpropInput:A5,Draw:tQ,get ENV(){return kR},Einsum:rA,Elu:rb,EluGrad:sA,Environment:JJ,Equal:B_,Erf:sb,Exp:ib,ExpandDims:W_,Expm1:ab,FFT:iA,Fill:aA,FlipLeftRight:oA,Floor:ob,FloorDiv:lb,FromPixels:P5,FusedBatchNorm:U_,FusedConv2D:C2,FusedDepthwiseConv2D:T2,GatherNd:lA,GatherV2:V_,Greater:H_,GreaterEqual:cb,IFFT:cA,Identity:ub,Imag:uA,IsFinite:db,IsInf:hb,IsNan:fb,KernelBackend:FI,LRN:J_,LRNGrad:hA,LeakyRelu:q_,Less:G_,LessEqual:K_,LinSpace:dA,Log:pb,Log1p:mb,LogSoftmax:nQ,LogicalAnd:X_,LogicalNot:Y_,LogicalOr:Z_,Max:Q_,MaxPool:ek,MaxPool3D:tk,MaxPool3DGrad:pA,MaxPoolGrad:fA,MaxPoolWithArgmax:mA,Maximum:gb,Mean:nk,Min:rk,Minimum:yb,MirrorPad:sk,Mod:vb,MomentumOptimizer:XM,Multinomial:gA,Multiply:xb,Neg:ik,NonMaxSuppressionV3:yA,NonMaxSuppressionV4:vA,NonMaxSuppressionV5:xA,NotEqual:ak,OP_SCOPE_SUFFIX:TR,OneHot:lk,OnesLike:ok,Optimizer:vf,OptimizerConstructors:ete,Pack:ck,PadV2:uk,Pow:bb,Prelu:dk,Prod:hk,RMSPropOptimizer:YM,RaggedGather:bA,RaggedRange:wA,RaggedTensorToTensor:_A,Range:kA,get Rank(){return Bj},Real:SA,RealDiv:nb,Reciprocal:wb,get Reduction(){return Ra},Relu:_b,Relu6:kb,Reshape:fk,ResizeBilinear:mk,ResizeBilinearGrad:CA,ResizeNearestNeighbor:pk,ResizeNearestNeighborGrad:NA,Reverse:gk,RotateWithOffset:UA,Round:Sb,Rsqrt:Nb,SGDOptimizer:kE,ScatterNd:TA,SearchSorted:AA,Select:yk,Selu:Cb,Sigmoid:Eb,Sign:Ab,Sin:Tb,Sinh:Ib,Slice:vk,Softmax:_k,Softplus:Pb,SpaceToBatchND:bk,SparseFillEmptyRows:EA,SparseReshape:PA,SparseSegmentMean:OA,SparseSegmentSum:jA,SparseToDense:$A,SplitV:wk,Sqrt:Ob,Square:DA,SquaredDifference:jb,StaticRegexReplace:kk,Step:Mb,StridedSlice:LA,StringNGrams:RA,StringSplit:MA,StringToHashBucketFast:FA,Sub:$b,Sum:xk,Tan:Db,Tanh:Lb,Tensor:Or,TensorBuffer:Fs,TensorScatterUpdate:IA,Tile:Rb,TopK:zA,Transform:BA,Transpose:Xg,Unique:WA,Unpack:Sk,UnsortedSegmentSum:Nk,Variable:I2,ZerosLike:Ck,_FusedMatMul:N2,abs:js,acos:jR,acosh:$R,add:ot,addN:FQ,all:GA,any:A2,argMax:S0,argMin:DR,asin:LR,asinh:RR,atan:MR,atan2:FR,atanh:zR,avgPool:Ak,avgPool3d:WR,backend:AR,backend_util:Ste,basicLSTMCell:zQ,batchNorm:Fb,batchNorm2d:UR,batchNorm3d:VR,batchNorm4d:HR,batchToSpaceND:Ek,bincount:qR,bitwiseAnd:BQ,booleanMaskAsync:Nee,broadcastArgs:WQ,broadcastTo:Yg,buffer:yn,cast:bt,ceil:GR,clipByValue:wo,clone:$d,complex:ef,concat:Ss,concat1d:KR,concat2d:XR,concat3d:YR,concat4d:ZR,conv1d:KA,conv2d:tf,conv2dTranspose:XA,conv3d:QR,conv3dTranspose:eM,cos:Pk,cosh:YA,cosineWindow:vE,cumprod:O2,cumsum:ZA,customGrad:Ud,denseBincount:L5,depthToSpace:tM,depthwiseConv2d:zb,diag:VQ,dilation2d:nM,dispose:bn,div:Wt,divNoNan:rM,dot:sM,dropout:RM,einsum:Ag,elu:Bb,enclosingPowerOfTwo:MM,engine:mu,ensureShape:HQ,env:We,equal:Lc,erf:JA,euclideanNorm:aM,exp:_o,expandDims:la,expm1:oM,eye:QA,fft:Uk,fill:Z0,floor:Ub,floorDiv:qA,fused:$ee,gather:Vb,gatherND:Aee,getBackend:SQ,getGradient:Rj,getKernel:j5,getKernelsForBackend:Mj,greater:Io,greaterEqual:pf,ifft:fx,imag:Ok,image:Sc,inTopKAsync:Eee,io:QM,irfft:pE,isFinite:lM,isInf:cM,isNaN:uM,keep:Ks,leakyRelu:jk,less:ux,lessEqual:Im,linalg:VM,linspace:KQ,localResponseNormalization:dM,log:al,log1p:$k,logSigmoid:hM,logSoftmax:eE,logSumExp:Dk,logicalAnd:Lu,logicalNot:Lk,logicalOr:tE,logicalXor:fM,losses:Bee,lowerBound:YQ,matMul:kn,max:Dl,maxPool:Rk,maxPool3d:pM,maxPoolWithArgmax:ZQ,maximum:Zd,mean:Jr,memory:qj,meshgrid:JQ,min:cx,minimum:am,mirrorPad:mM,mod:gM,moments:Mk,movingAverage:Cee,mul:Se,multiRNNCell:QQ,multinomial:eee,neg:Cr,nextFrame:nF,norm:Wb,notEqual:C0,oneHot:rE,ones:po,onesLike:ol,op:be,outerProduct:tee,pad:mf,pad1d:nee,pad2d:ree,pad3d:see,pad4d:iee,pool:yM,pow:Wd,prelu:zk,print:OR,prod:vM,raggedGather:aee,raggedRange:oee,raggedTensorToTensor:lee,rand:cee,randomGamma:dee,randomNormal:iE,randomStandardNormal:hee,randomUniform:Am,randomUniformInt:fee,range:T0,ready:kQ,real:dx,reciprocal:CM,registerBackend:IR,registerGradient:rQ,registerKernel:NR,relu:Uu,relu6:aE,reshape:Ie,reverse:Fl,reverse1d:pee,reverse2d:mee,reverse3d:gee,reverse4d:yee,rfft:Vk,round:oE,rsqrt:lE,scalar:qt,scatterND:Tee,searchSorted:nE,selu:cE,separableConv2d:uE,setdiff1dAsync:vee,sigmoid:Eu,sign:TM,signal:zee,sin:dE,sinh:hE,slice:Tn,slice1d:Bk,slice2d:fE,slice3d:Wk,slice4d:hx,softmax:Hb,softplus:J0,spaceToBatchND:Fk,sparse:Wee,sparseToDense:Iee,spectral:Fee,split:vo,sqrt:_i,square:hr,squaredDifference:mE,squeeze:gf,stack:ko,step:ey,stridedSlice:IM,string:Uee,sub:At,sum:$t,sumOutType:HA,tan:AM,tanh:im,tensor:Oc,tensor1d:ca,tensor2d:Fv,tensor3d:EM,tensor4d:xee,tensor5d:bee,tensor6d:wee,tensorScatterUpdate:kee,tidy:Re,tile:El,topk:OM,train:xg,transpose:Pn,truncatedNormal:gE,unique:jM,unsortedSegmentSum:yE,unstack:zl,upcastType:xo,upperBound:See,variable:$M,variableGrads:XQ,where:Bi,whereAsync:LM,zeros:ws,zerosLike:On},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nte={kernelName:S_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,ey(bt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5e={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=hr(bt(n,"float32")),s=_i(At(qt(1),r));return Cr(Wt(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5e={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=_i(At(hr(bt(n,"float32")),1));return Wt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5e={kernelName:K0,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{let o=t;const l=ni(n.shape,s);return l.length>0&&(o=$t(o,l)),Ie(o,n.shape)},b:()=>{let o=t;const l=ni(r.shape,s);return l.length>0&&(o=$t(o,l)),Ie(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5e={kernelName:N_,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e={kernelName:C_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>On(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5e={kernelName:T_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>On(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5e={kernelName:qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,_i(At(qt(1),hr(bt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5e={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=_i(ot(qt(1),hr(bt(n,"float32"))));return Wt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5e={kernelName:Yx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{const o=ot(hr(n),hr(r));let l=Se(t,Wt(r,o));const c=ni(n.shape,s);return c.length>0&&(l=$t(l,c)),Ie(l,n.shape)},b:()=>{const o=ot(hr(n),hr(r));let l=Cr(Se(t,Wt(n,o)));const c=ni(r.shape,s);return c.length>0&&(l=$t(l,c)),Ie(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e={kernelName:Kx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,ot(hr(bt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5e={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,At(qt(1),hr(bt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F5e(t,e,n,r,s,i){const a=de(t,"dy","avgPool3dGrad"),o=de(e,"input","avgPool3dGrad");let l=a,c=o,u=!1;o.rank===4&&(u=!0,l=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),le(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),le(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ga("avgPool3dGrad",s,i);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:s,dimRoundingMode:i},f=Ne.runKernel(UI,d,h);return u?Ie(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const z5e=be({avgPool3dGrad_:F5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e={kernelName:A_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:o}=n;return{x:()=>z5e(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5e(t,e,n,r,s){const i=de(t,"dy","avgPoolGrad"),a=de(e,"input","avgPoolGrad");le(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let o=a,l=i,c=!1;a.rank===3&&(c=!0,o=Ie(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=Ie(i,[1,i.shape[0],i.shape[1],i.shape[2]])),le(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),le(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const u={dy:l,input:o},d={filterSize:n,strides:r,pad:s},h=Ne.runKernel(WI,u,d);return c?Ie(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const U5e=be({avgPoolGrad_:W5e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e={kernelName:I_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>U5e(t,r,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e={kernelName:E_,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:a}=n;return!i&&!a?{a:()=>kn(t,s,!1,!0),b:()=>kn(r,t,!0,!1)}:!i&&a?{a:()=>kn(t,s,!1,!1),b:()=>kn(t,r,!0,!1)}:i&&!a?{a:()=>kn(s,t,!1,!0),b:()=>kn(r,t,!1,!1)}:{a:()=>kn(s,t,!0,!0),b:()=>kn(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5e={kernelName:P_,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>Fk(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5e={kernelName:eQ,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,a=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])a[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>$t(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5e={kernelName:Zx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e={kernelName:Jx,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5e={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Bi(Lu(pf(r,s),Im(r,i)),t,On(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5e={kernelName:j_,inputsToSave:["x"],gradFunc:Nte.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e={kernelName:$_,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=Sn(s,e[0].shape)[0],a=r.map(l=>l[i]);return vo(t,a,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e={kernelName:D_,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:a,pad:o,dataFormat:l}=n;return le(sm(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>JR(r.shape,t,s,a,o,l),filter:()=>FM(r,t,s.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eTe={kernelName:L_,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>tf(t,s,i,a,o,1,l),filter:()=>FM(t,r,s.shape,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t,e,n,r,s){let i=t;t.rank===4&&(i=Ie(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=Ie(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),le(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),le(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),le(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),le(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),le(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:a},l={strides:r,pad:s,filterShape:n};return Ne.runKernel(KI,o,l)}const nTe=be({conv3DBackpropFilter_:tTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTe={kernelName:R_,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;le(sm(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>UQ(a.shape,t,o,s,i),filter:()=>nTe(a,t,o.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sTe={kernelName:eb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(Cr(dE(bt(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe={kernelName:tb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(hE(bt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aTe={kernelName:M_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:a}=n;return{x:()=>{const o=rs([s],r.rank);let l=ZA(t,s,i,!a);return o!=null&&(l=Pn(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTe={kernelName:F_,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:a}=n,o=r??[1,1];le(sm(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return le(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),le(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),le(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),le(Hi(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),Ga("depthwiseConv2d",i,a),{x:()=>jee(l.shape,t,c,s,i,o,a),filter:()=>Oee(l,t,c.shape,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lTe={kernelName:z_,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},a={x:r,filter:s,dy:t};return{x:()=>Ne.runKernel(A5,i,n),filter:()=>Ne.runKernel(E5,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe={kernelName:rb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Ne.runKernel(sA,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe={kernelName:sb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Se(_o(Cr(hr(n))),2/Math.sqrt(Math.PI));return{x:()=>Se(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dTe={kernelName:ib,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hTe={kernelName:W_,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fTe={kernelName:ab,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,_o(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTe={kernelName:ob,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mTe={kernelName:lb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{const o=Wt(t,bt(r,"float32")),l=ni(n.shape,s);return l.length>0?Ie($t(o,l),n.shape):o},b:()=>{let o=Se(t,bt(n,"float32"));const l=ni(r.shape,s);l.length>0&&(o=Ie($t(o,l),r.shape));const c=hr(r);return Cr(Wt(o,bt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gTe={kernelName:U_,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,a,o]=e,l=o??qt(1),c=ni(i.shape,s.shape),u=[];if(i.rank===1){for(let k=0;k<s.shape.length-1;++k)u.push(s.shape[k]);u.push(1)}const d=At(s,i),h=Se(t,l),f=lE(ot(a,qt(r))),m=Se(Se(Se(f,f),f),qt(-.5));return{x:()=>i.rank===1?Ie(Se(Se(t,El(Ie(f,[1,1,1,i.shape[0]]),u)),l),s.shape):Ie(Se(Se(t,f),l),s.shape),mean:()=>{let k=Se(Se(f,qt(-1)),h);return i.rank===1&&(k=$t(k,c)),Ie(k,i.shape)},variance:()=>{let k=Se(Se(m,d),h);return i.rank===1&&(k=$t(k,c)),Ie(k,i.shape)},scale:()=>{const k=Se(d,f);let N=Se(t,k);return i.rank===1&&(N=$t(N,c)),Ie(N,i.shape)},offset:()=>{let k=t;return i.rank===1&&(k=$t(k,c)),Ie(k,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yTe={kernelName:V_,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:a}=n,o=Sn(i,r.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,f=u.size,m=h.slice(0,o),y=m.length,v=h.slice(i,h.length).slice(1),x=v.length,b=zW(0,y),_=zW(y+1,y+1+x),k=BW([m,[f],v]),N=Ie(d,k),A=Ie(u,[f]),T=BW([[y],b,_]),C=Pn(N,T);let P=yE(C,A,c.shape[o]);const $=Tm(T);return P=Pn(P,$),P};if(a===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>ko(u.map((f,m)=>l(f,s.slice(m,1),t.slice(m,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function zW(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function BW(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vTe={kernelName:cb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>On(n),b:()=>On(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTe={kernelName:ub,gradFunc:t=>({x:()=>bt(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bTe={kernelName:db,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTe={kernelName:hb,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Te={kernelName:fb,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kTe={kernelName:q_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Io(r,0);return{x:()=>Bi(i,t,Se(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const STe={kernelName:mb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,ot(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTe={kernelName:pb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,bt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CTe={kernelName:nQ,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const a=_o(r);return At(t,Se($t(t,s,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e,n,r=5,s=1,i=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:a};return Ne.runKernel(hA,o,l)}const ITe=be({localResponseNormalizationBackprop_:TTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe={kernelName:J_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:a,alpha:o,beta:l}=n;return{x:()=>ITe(r,s,t,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t,e,n,r){return e.rank<n.rank&&(e=Ie(e,Ns(e.shape,r))),t.rank<n.rank&&(t=Ie(t,Ns(t.shape,r))),{x:()=>Se(t,bt(Lc(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WW={kernelName:Q_,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],a=e[1],o=Sn(s,i.shape),l=Cte(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ETe={kernelName:gb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Se(t,bt(pf(n,r),"float32")),b:()=>Se(t,bt(ux(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(t,e,n,r,s,i,a){const o=de(t,"dy","maxPool3dGrad"),l=de(e,"input","maxPool3dGrad"),c=de(n,"output","maxPool3dGrad");let u=o,d=l,h=c,f=!1;l.rank===4&&(f=!0,u=Ie(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=Ie(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Ie(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),le(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),le(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),le(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Ga("maxPool3dGrad",i,a);const m={dy:u,input:d,output:h},y={filterSize:r,strides:s,pad:i,dimRoundingMode:a},v=Ne.runKernel(pA,m,y);return f?Ie(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const OTe=be({maxPool3dGrad_:PTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jTe={kernelName:tk,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>OTe(t,r,s,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(t,e,n,r,s,i,a){const o=de(t,"dy","maxPoolGrad"),l=de(e,"input","maxPoolGrad"),c=de(n,"output","maxPoolGrad");le(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),le(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),le(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ga("maxPoolGrad",i,a);const u={dy:o,input:l,output:c},d={filterSize:r,strides:s,pad:i,dimRoundingMode:a};return Ne.runKernel(fA,u,d)}const DTe=be({maxPoolGrad_:$Te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTe={kernelName:ek,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>DTe(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RTe={kernelName:nk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=Sn(s,r.shape),o=Si(r.shape,i)[1],l=Xe(o);return{x:()=>{const u=r.shape.slice();i.forEach(f=>{u[f]=1});const d=Ie(t,u);return Wt(Se(d,po(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MTe={kernelName:rk,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,a]=e,o=Sn(s,i.shape),l=Cte(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FTe={kernelName:yb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Se(t,bt(Im(n,r),"float32")),b:()=>Se(t,bt(Io(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zTe={kernelName:sk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>Tn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTe={kernelName:vb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{const o=ni(n.shape,s);return o.length>0?Ie($t(t,o),n.shape):t},b:()=>{const o=Se(t,Cr(Ub(Wt(n,r)))),l=ni(r.shape,s);return l.length>0?Ie($t(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WTe={kernelName:xb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{const o=Se(t,bt(r,"float32")),l=ni(n.shape,s);return l.length>0?Ie($t(o,l),n.shape):o},b:()=>{const o=Se(t,bt(n,"float32")),l=ni(r.shape,s);return l.length>0?Ie($t(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UTe={kernelName:ik,gradFunc:t=>({x:()=>Cr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VTe={kernelName:lk,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>ws(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTe={kernelName:ok,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qTe={kernelName:ck,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return zl(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UW={kernelName:uk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>Tn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GTe={kernelName:bb,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,a=r,o=dn(i.shape,a.shape);return{a:()=>{const u=bt(a,"float32");let d=Se(t,Se(u,Wd(i,At(u,qt(1)))));const h=ni(i.shape,o);return h.length>0&&(d=$t(d,h)),Ie(d,i.shape)},b:()=>{const u=Io(i,0),d=Bi(u,al(i),On(i));let h=Se(t,Se(s,d));const f=ni(a.shape,o);return f.length>0&&(h=$t(h,f)),Ie(h,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe={kernelName:dk,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Io(n,0);return{x:()=>Bi(s,t,Se(t,r)),alpha:()=>{let i=Bi(s,On(t),Se(t,n));const a=ni(r.shape,t.shape);return a.length>0&&(i=$t(i,a)),Ie(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(t,e,n){const r=t.shape.slice();r[n]=1;const s=Ie(e,r),i=O2(t,n,!0,!1),a=O2(t,n,!0,!0),o=Se(i,a);return Se(s,o)}function YTe(t,e,n){const r=t.shape.length,s=r-n.length,i=rs(n,r);let a=t;i!=null&&(a=Pn(t,i));const o=a.shape.slice(),c=o.splice(r-n.length,n.length).reduce((h,f)=>h*f,1);o.push(c);const u=a.reshape(o);let d=XTe(u,e,s);if(d=d.reshape(a.shape),i!=null){const h=Tm(i);d=Pn(d,h)}return d}const ZTe={kernelName:hk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((a,o)=>o):typeof s=="number"?i=[s]:i=s,{x:()=>YTe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JTe={kernelName:nb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{const o=Wt(t,bt(r,"float32")),l=ni(n.shape,s);return l.length>0?Ie($t(o,l),n.shape):o},b:()=>{let o=Se(t,bt(n,"float32"));const l=ni(r.shape,s);l.length>0&&(o=Ie($t(o,l),r.shape));const c=hr(r);return Cr(Wt(o,bt(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QTe={kernelName:wb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,Cr(hr(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eIe={kernelName:kb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Se(Im(n,6),ey(n));return{x:()=>Se(t,bt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIe={kernelName:_b,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,bt(ey(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe={kernelName:fk,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ie(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe={kernelName:mk,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Ne.runKernel(CA,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe={kernelName:pk,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>Ne.runKernel(NA,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iIe={kernelName:gk,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Sn(r,t.shape);return{x:()=>Fl(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aIe={kernelName:Sb,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe={kernelName:Nb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Cr(Wt(t,Se(Wd(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lIe={kernelName:yk,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>bt(On(n),"float32"),t:()=>Se(t,bt(n,t.dtype)),e:()=>Se(t,bt(Lk(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cIe={kernelName:Cb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Io(n,qt(0)),s=qt(NE),i=qt(CE),a=Se(t,i),o=Se(Se(t,s),_o(bt(n,"float32")));return Bi(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe={kernelName:Eb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,Se(n,At(qt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dIe={kernelName:Ab,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hIe={kernelName:Tb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(Pk(bt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe={kernelName:Ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(YA(bt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pIe={kernelName:vk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,a=r.shape,[o,l]=tF(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([o[u],a[u]-o[u]-l[u]]);return{x:()=>mf(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIe={kernelName:_k,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,a=Se(t,r);return{logits:()=>At(a,Se($t(a,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gIe={kernelName:Pb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,Eu(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VW={kernelName:bk,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>Ek(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HW={kernelName:wk,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ss(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yIe={kernelName:Ob,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,Se(_i(bt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vIe={kernelName:DA,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(t,Se(bt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe={kernelName:jb,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=qt(2);return{a:()=>Se(t,Se(s,At(n,r))),b:()=>Se(t,Se(s,At(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:Mb,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe={kernelName:$b,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=dn(n.shape,r.shape);return{a:()=>{let o=t;const l=ni(n.shape,s);return l.length>0&&(o=$t(o,l)),Ie(o,n.shape)},b:()=>{let o=t;const l=ni(r.shape,s);return l.length>0&&(o=$t(o,l)),Ie(Cr(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ie={kernelName:xk,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;Sn(i,r.shape).forEach(c=>{s[c]=1});const o=Ie(t,s),l=Se(o,po(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIe={kernelName:Db,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Wt(t,hr(Pk(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIe={kernelName:Lb,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Se(At(qt(1),hr(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NIe={kernelName:Rb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let a=On(r);if(r.rank===1)for(let o=0;o<s[0];++o)a=ot(a,Tn(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)a=ot(a,Tn(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)a=ot(a,Tn(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)a=ot(a,Tn(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CIe={kernelName:Xg,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Tm(s);return{x:()=>Pn(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIe={kernelName:Sk,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>ko(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IIe={kernelName:Nk,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>AIe(t,n)}}};function AIe(t,e){const n=Zd(e,On(e)),r=Vb(t,n);let s=pf(e,qt(0,"int32"));const i=r.rank-s.rank;for(let o=0;o<i;++o)s=la(s,o+1);s=Lu(s,po(r.shape,"bool"));const a=On(r);return Bi(s,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe={kernelName:Ck,gradFunc:t=>({x:()=>On(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PIe=[Nte,I5e,A5e,E5e,P5e,O5e,j5e,$5e,D5e,L5e,R5e,M5e,B5e,V5e,H5e,q5e,G5e,K5e,X5e,Y5e,Z5e,J5e,eTe,Q5e,rTe,sTe,iTe,aTe,oTe,lTe,JTe,cTe,uTe,dTe,hTe,fTe,mTe,pTe,gTe,yTe,vTe,xTe,bTe,wTe,_Te,kTe,STe,NTe,CTe,ATe,WW,WW,ETe,jTe,LTe,RTe,MTe,FTe,zTe,BTe,WTe,UTe,VTe,HTe,qTe,UW,UW,GTe,KTe,ZTe,QTe,eIe,tIe,nIe,rIe,sIe,iIe,aIe,oIe,lIe,cIe,uIe,dIe,hIe,fIe,pIe,mIe,gIe,VW,VW,HW,HW,yIe,xIe,vIe,bIe,wIe,_Ie,kIe,SIe,NIe,CIe,TIe,IIe,EIe];for(const t of PIe)rQ(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.abs=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.acos=function(){return this.throwIfDisposed(),jR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.acosh=function(){return this.throwIfDisposed(),$R(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.add=function(t){return this.throwIfDisposed(),ot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.all=function(t,e){return this.throwIfDisposed(),GA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.any=function(t,e){return this.throwIfDisposed(),A2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.argMax=function(t){return this.throwIfDisposed(),S0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.argMin=function(t){return this.throwIfDisposed(),DR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asScalar=function(){return this.throwIfDisposed(),le(this.size===1,()=>"The array must have only 1 element."),Ie(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asType=function(t){return this.throwIfDisposed(),bt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as1D=function(){return this.throwIfDisposed(),Ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as2D=function(t,e){return this.throwIfDisposed(),Ie(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Ie(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Ie(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Ie(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asin=function(){return this.throwIfDisposed(),LR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.asinh=function(){return this.throwIfDisposed(),RR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atan=function(){return this.throwIfDisposed(),MR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atan2=function(t){return this.throwIfDisposed(),FR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.atanh=function(){return this.throwIfDisposed(),zR(this)};Ze().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Ak(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Ek(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Fb(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Yg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cast=function(t){return this.throwIfDisposed(),bt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.ceil=function(){return this.throwIfDisposed(),GR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),wo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Or&&(t=[t]),Ss([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),KA(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),XA(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),tf(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cos=function(){return this.throwIfDisposed(),Pk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cosh=function(){return this.throwIfDisposed(),YA(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),O2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),ZA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),tM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),zb(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),nM(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.divNoNan=function(t){return this.throwIfDisposed(),rM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.div=function(t){return this.throwIfDisposed(),Wt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.dot=function(t){return this.throwIfDisposed(),sM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.elu=function(){return this.throwIfDisposed(),Bb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.equal=function(t){return this.throwIfDisposed(),Lc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.erf=function(){return this.throwIfDisposed(),JA(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),aM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.exp=function(){return this.throwIfDisposed(),_o(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.expandDims=function(t){return this.throwIfDisposed(),la(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.expm1=function(){return this.throwIfDisposed(),oM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.fft=function(){return this.throwIfDisposed(),Uk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.flatten=function(){return this.throwIfDisposed(),Ie(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.floor=function(){return this.throwIfDisposed(),Ub(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.floorDiv=function(t){return this.throwIfDisposed(),qA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Vb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.greaterEqual=function(t){return this.throwIfDisposed(),pf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.greater=function(t){return this.throwIfDisposed(),Io(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.ifft=function(){return this.throwIfDisposed(),fx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.irfft=function(){return this.throwIfDisposed(),pE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isFinite=function(){return this.throwIfDisposed(),lM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isInf=function(){return this.throwIfDisposed(),cM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.isNaN=function(){return this.throwIfDisposed(),uM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.leakyRelu=function(t){return this.throwIfDisposed(),jk(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.lessEqual=function(t){return this.throwIfDisposed(),Im(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.less=function(t){return this.throwIfDisposed(),ux(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),dM(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSigmoid=function(){return this.throwIfDisposed(),hM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSoftmax=function(t){return this.throwIfDisposed(),eE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Dk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.log=function(){return this.throwIfDisposed(),al(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.log1p=function(){return this.throwIfDisposed(),$k(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Lu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalNot=function(){return this.throwIfDisposed(),Lk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalOr=function(t){return this.throwIfDisposed(),tE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.logicalXor=function(t){return this.throwIfDisposed(),fM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),kn(this,t,e,n)};Ze().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Rk(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.max=function(t,e){return this.throwIfDisposed(),Dl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.maximum=function(t){return this.throwIfDisposed(),Zd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mean=function(t,e){return this.throwIfDisposed(),Jr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.min=function(t,e){return this.throwIfDisposed(),cx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.minimum=function(t){return this.throwIfDisposed(),am(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),mM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mod=function(t){return this.throwIfDisposed(),gM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.mul=function(t){return this.throwIfDisposed(),Se(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.neg=function(){return this.throwIfDisposed(),Cr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Wb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.notEqual=function(t){return this.throwIfDisposed(),C0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),rE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.onesLike=function(){return this.throwIfDisposed(),ol(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.pad=function(t,e){return this.throwIfDisposed(),mf(this,t,e)};Ze().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),yM(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.pow=function(t){return this.throwIfDisposed(),Wd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.prelu=function(t){return this.throwIfDisposed(),zk(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.prod=function(t,e){return this.throwIfDisposed(),vM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reciprocal=function(){return this.throwIfDisposed(),CM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.relu=function(){return this.throwIfDisposed(),Uu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.relu6=function(){return this.throwIfDisposed(),aE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Ie(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reshape=function(t){return this.throwIfDisposed(),Ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Ree(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Mee(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.reverse=function(t){return this.throwIfDisposed(),Fl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.rfft=function(){return this.throwIfDisposed(),Vk(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.round=function(){return this.throwIfDisposed(),oE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.rsqrt=function(){return this.throwIfDisposed(),lE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.selu=function(){return this.throwIfDisposed(),cE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),uE(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sigmoid=function(){return this.throwIfDisposed(),Eu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sign=function(){return this.throwIfDisposed(),TM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sin=function(){return this.throwIfDisposed(),dE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sinh=function(){return this.throwIfDisposed(),hE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.slice=function(t,e){return this.throwIfDisposed(),Tn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.softmax=function(t){return this.throwIfDisposed(),Hb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.softplus=function(){return this.throwIfDisposed(),J0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Fk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.split=function(t,e){return this.throwIfDisposed(),vo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sqrt=function(){return this.throwIfDisposed(),_i(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.square=function(){return this.throwIfDisposed(),hr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.squaredDifference=function(t){return this.throwIfDisposed(),mE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.squeeze=function(t){return this.throwIfDisposed(),gf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Or?[this,t]:[this,...t];return ko(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.step=function(t){return this.throwIfDisposed(),ey(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.stridedSlice=function(t,e,n,r,s,i,a,o){return this.throwIfDisposed(),IM(this,t,e,n,r,s,i,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sub=function(t){return this.throwIfDisposed(),At(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.sum=function(t,e){return this.throwIfDisposed(),$t(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tan=function(){return this.throwIfDisposed(),AM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tanh=function(){return this.throwIfDisposed(),im(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.tile=function(t){return this.throwIfDisposed(),El(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toBool=function(){return this.throwIfDisposed(),bt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toFloat=function(){return this.throwIfDisposed(),bt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.toInt=function(){return this.throwIfDisposed(),bt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.topk=function(t,e){return this.throwIfDisposed(),OM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.transpose=function(t){return this.throwIfDisposed(),Pn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unique=function(t){return this.throwIfDisposed(),jM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),yE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.unstack=function(t){return this.throwIfDisposed(),zl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.where=function(t,e){return this.throwIfDisposed(),Bi(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Ze().prototype.zerosLike=function(){return this.throwIfDisposed(),On(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bd extends Error{constructor(e){super(e),Object.setPrototypeOf(this,bd.prototype)}}class Nc extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Nc.prototype)}}class Ee extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ee.prototype)}}class xn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,xn.prototype)}}class wF extends Error{constructor(e){super(e),Object.setPrototypeOf(this,wF.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tte{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function A0(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function wd(t,e){if(!t)throw new wF(e)}function qW(t,e){let n=0;for(const r of t)r===e&&n++;return n}function fo(t){return t.length===1?t[0]:t}function tr(t){return Array.isArray(t)?t:[t]}function Ih(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Eg(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let cc={};function _F(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function r$(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>r$(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:r$(r))}}}function Kk(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let a;if(i in n)a=n[i];else if(i in cc)a=cc[i];else if(a=e[i],a==null)throw new Ee(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=t;if(i.className==null||i.config==null)throw new Ee(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let o,l;if(a in n?[o,l]=n[a]:a in cc?[o,l]=cc.className:a in e&&([o,l]=e[a]),o==null)throw new Ee(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(cc))c[f]=cc[f];for(const f of Object.keys(n))c[f]=n[f];const u=i.config;u.customObjects=c;const d=Object.assign({},cc);for(const f of Object.keys(n))cc[f]=n[f];r$(i.config);const h=l(o,i.config,n,s);return cc=Object.assign({},d),h}else{const c=Object.assign({},cc);for(const d of Object.keys(n))cc[d]=n[d];const u=new o(i.config);return cc=Object.assign({},c),u}}}function OIe(t,e){return t<e?-1:t>e?1:0}function vN(t,e){return-1*OIe(t,e)}function Hp(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function jIe(t){if(t==null)throw new Ee(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ny(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Ee(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function kF(t,e,n=0,r=1/0){return wd(n>=0),wd(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function xi(t,e){Array.isArray(t)?(le(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>xi(n,`element ${r+1} of ${e}`))):le(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${Ite(t)}.`)}function Ite(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>Ite(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function $Ie(t,e,n){let r=n!=null?n():ho(),s;return(...a)=>{const o=n!=null?n():ho();return o-r<e||(r=o,s=t(...a)),s}}function Ate(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let DIe=0;function Ete(){return DIe++}const xN={};function TE(t=""){return t in xN||(xN[t]=0),xN[t]+=1,t+xN[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const LIe=["channelsFirst","channelsLast"],RIe=["nearest","bilinear"],MIe=["valid","same","causal"],FIe=["max","avg"],zIe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Vy=new Map;function Ts(t){ny(LIe,"DataFormat",t)}function BIe(t){ny(RIe,"InterpolationFormat",t)}function ql(t){ny(MIe,"PaddingMode",t)}function Pte(t){ny(FIe,"PoolMode",t)}const Rw=[],GW="/";function Zg(t,e){Rw.push(t);try{const n=e();return Rw.pop(),n}catch(n){throw Rw.pop(),n}}function WIe(){return Rw.length===0?"":Rw.join(GW)+GW}function Ote(t){if(!$te(t))throw new Error("Not a valid tensor name: '"+t+"'");return WIe()+t}function jte(t){if(!$te(t))throw new Error("Not a valid tensor name: '"+t+"'");Vy.has(t)||Vy.set(t,0);const e=Vy.get(t);if(Vy.set(t,Vy.get(t)+1),e>0){const n=`${t}_${e}`;return Vy.set(n,1),n}else return t}const UIe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function $te(t){return!!t.match(UIe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VIe(t){return t===parseInt(t.toString(),10)}function qp(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function px(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function om(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ru(t,e){if(e<t)throw new Ee(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let a3;function Xs(){return a3==null&&(a3=AR().epsilon()),a3}function Mu(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ld(t,e){return bt(t,e)}function Xk(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Ie(t,n)}function HIe(t,e){return Re(()=>{if(t.shape.length!==2)throw new Ee(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Xk(t,1);return s$(n,[1,e,1])})}function qIe(t){const e=[qp(t.shape)];return Ie(t,e)}function GIe(t){if(t.rank<=1)throw new Ee(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],qp(t.shape,1)];return Ie(t,e)}function Jg(t,e,n){return Re(()=>{switch(t.rank){case 1:return Bk(t,e,n);case 2:return fE(t,[e,0],[n,t.shape[1]]);case 3:return Wk(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return hx(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Tn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Tn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ee(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function o3(t,e,n){return Re(()=>{switch(t.rank){case 1:return Bk(t,e,n);case 2:return fE(t,[0,e],[t.shape[0],n]);case 3:return Wk(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return hx(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function bN(t,e,n,r){return Re(()=>{switch(t.rank){case 1:return Bk(t,e,n);case 2:switch(r){case 1:return Jg(t,e,n);case 2:return o3(t,e,n);default:throw new Ee(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Jg(t,e,n);case 2:return Wk(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return o3(t,e,n);default:throw new Ee(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Jg(t,e,n);case 2:return hx(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return hx(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return o3(t,e,n);default:throw new Ee(`The axis is not within the rank of the tensor ${r}`)}default:throw new Ee(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function SF(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Ss(t,e)}function KW(t,e){switch(t.rank){case 1:return KR([t,e]);case 2:return XR([t,e],0);case 3:return YR([t,e],0);case 4:return ZR([t,e],0);default:throw new Ee(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function s$(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Ee(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return El(t,e)}function IE(t,e=0,n=1,r,s){return iE(t,e,n,r,s)}function Rd(t,e,n,r){if(t.rank<2||e.rank<2)throw new xn(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new xn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return Qj({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?i$(t.rank,r,Mu()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=Ie(t,[-1,i]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],u=Array.from({length:e.rank},(m,y)=>y===0?e.rank-2:y<=e.rank-2?y-1:y);e=Ie(Pn(e,u),[l,-1]);const d=[...s,...c];return Ie(Qj({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?i$(t.rank,r,Mu()):null,activation:n}),d)}}function Dte(t,e,n){return Re(()=>(Array.isArray(e)?e=ca(e,"int32"):e=bt(e,"int32"),Vb(t,e,n)))}function Yk(t){return Se(t,t)}function i$(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Ee(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1,1,1]):Ie(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,1,1,r[0]]):Ie(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1,1]):Ie(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,1,r[0]]):Ie(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Ie(e,[1,r[0],1]):Ie(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Ie(e,[1,1,r[0]]):Ie(e,[1].concat(r))}else if(t<3)return e;throw new Ee(`Unsupported input rank by biasAdd: ${e.rank}`)}function Vu(t,e,n){return Re(()=>(n==null&&(n=Mu()),Ts(n),ot(t,i$(t.rank,e,n))))}function KIe(t,e=1){if(e!==1)throw new xn(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Bb(t)}function XIe(t){return Re(()=>Wt(t,ot(js(t),1)))}function Lte(t,e,n,r){return Re(()=>RM(t,e,n,r))}function YIe(t){return Re(()=>{const e=ot(.5,Se(.2,t));return wo(e,0,1)})}function Zk(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ZIe=["fanIn","fanOut","fanAvg"],JIe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QIe(t){ny(ZIe,"FanMode",t)}function eAe(t){ny(JIe,"Distribution",t)}class Hc extends Gb{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Rte extends Hc{apply(e,n){return ws(e,n)}}Rte.className="Zeros";ut(Rte);class NF extends Hc{apply(e,n){return po(e,n)}}NF.className="Ones";ut(NF);class Mte extends Hc{constructor(e){if(super(),typeof e!="object")throw new Ee(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Ee(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Re(()=>Se(qt(this.value),po(e,n)))}getConfig(){return{value:this.value}}}Mte.className="Constant";ut(Mte);class Fte extends Hc{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Am(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Fte.className="RandomUniform";ut(Fte);class zte extends Hc{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new xn(`randomNormal does not support dType ${n}.`);return IE(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}zte.className="RandomNormal";ut(zte);class Bte extends Hc{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new xn(`truncatedNormal does not support dType ${n}.`);return gE(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Bte.className="TruncatedNormal";ut(Bte);class Wte extends Hc{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Re(()=>{if(e.length!==2||e[0]!==e[1])throw new Ee("Identity matrix initializer can only be used for 2D square matrices.");return Se(this.gain,QA(e[0]))})}getConfig(){return{gain:this.gain}}}Wte.className="Identity";ut(Wte);function tAe(t,e="channelsLast"){let n,r;if(Ts(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=qp(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=qp(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=qp(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class ll extends Hc{constructor(e){if(super(),e.scale<0)throw new Ee(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,QIe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,eAe(this.distribution),this.seed=e.seed}apply(e,n){const r=tAe(e),s=r[0],i=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new xn(`${this.getClassName()} does not support dType ${n}.`);return gE(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return Am(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ll.className="VarianceScaling";ut(ll);class CF extends ll{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ll.className}}CF.className="GlorotUniform";ut(CF);class TF extends ll{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ll.className}}TF.className="GlorotNormal";ut(TF);class IF extends ll{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ll.className}}IF.className="HeNormal";ut(IF);class AF extends ll{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ll.className}}AF.className="HeUniform";ut(AF);class EF extends ll{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ll.className}}EF.className="LeCunNormal";ut(EF);class PF extends ll{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ll.className}}PF.className="LeCunUniform";ut(PF);class Ute extends Hc{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Re(()=>{if(e.length<2)throw new xn("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Xe(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(s,r),Math.min(s,r)],o=IE(a,0,1,n,this.seed),l=VM.qr(o,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=Se(c,d.sign()),r<s&&(c=c.transpose()),Se(qt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Ute.className="Orthogonal";ut(Ute);const XW={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function YW(t,e={}){return Kk(t,xc.getMap().classNameMap,e,"initializer")}function es(t){return _F(t)}function Ur(t){if(typeof t=="string"){const e=t in XW?XW[t]:t;if(e==="GlorotNormal")return new TF;if(e==="GlorotUniform")return new CF;if(e==="HeNormal")return new IF;if(e==="HeUniform")return new AF;if(e==="LeCunNormal")return new EF;if(e==="LeCunUniform")return new PF;{const n={};return n.className=e,n.config={},YW(n)}}else return t instanceof Hc?t:YW(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a$(t){return Array.isArray(t)&&Array.isArray(t[0])}function R5(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function en(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Ee(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Un(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ee(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M5(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ZW="Variable";class nAe{constructor(e,n="float32",r=ZW,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Ete(),r=r??ZW,this.originalName=Ote(r),this.name=jte(this.originalName),this.trainable_=s,this.constraint=i,this.val=$M(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),rAe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function rAe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function o$(t){return t.map(e=>e.read())}function OF(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ys{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Vd{constructor(e,n,r,s,i,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=o,this.id=Ete(),a!=null&&(this.originalName=Ote(a),this.name=jte(this.originalName)),this.rank=n.length}}let sAe=0;class AE{constructor(e,n){this.callArgs=n,this.id=sAe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let iAe=0,Nn=class extends Gb{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=iAe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ih(r)+"_"+TE(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Nc(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Ee(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return fo(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return fo(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new bd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new bd(`Layer ${this.name} is not connected, no input to return.`);return fo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new bd(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new bd(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return fo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=tr(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=tr(this.inputSpec);if(n.length!==r.length)throw new Ee(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],a=r[s];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new Ee(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new Ee(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new Ee(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new Ee(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const l=i.shape;for(const c in a.axes){const u=Number(c),d=a.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new Ee(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new Ee(`Input ${s} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=tr(e),s=lAe(e),i=cAe(e);if(s===i)throw new Ee("Arguments to apply() must be all SymbolicTensors or all Tensors");return Zg(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of tr(e))a.push(o.shape);this.build(fo(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const o=tr(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=fo(l),this.activityRegularizer!=null)throw new xn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=aAe(e),o=this.computeOutputShape(a);let l;const c=oAe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((u,d)=>new Vd(c,u,this,tr(e),n,this.name,d)):l=new Vd(c,o,this,tr(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new xn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new bd(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new bd(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Nc(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return M5(this.weights)}build(e){this.built=!0}getWeights(e=!1){return o$(e?this.trainableWeights:this.weights)}setWeights(e){Re(()=>{const n=this.weights;if(n.length!==e.length)throw new Ee(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=o$(n);for(let i=0;i<s.length;++i){const a=s[i],o=n[i],l=e[i];if(!jn(a.shape,l.shape))throw new Ee(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}OF(r)})}addWeight(e,n,r,s,i,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Ee(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Ur("zeros"));const c=s.apply(n,r),u=new nAe(c,r,e,a,o);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=tr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=tr(n),a=tr(s);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=a[o]}addInboundNode(e,n,r,s,i,a,o=null){const l=tr(e);n=tr(n),r=tr(r),s=tr(s),i=R5(i),a=R5(a);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new AE({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:a},o);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function aAe(t){t=tr(t);const e=[];for(const n of t)e.push(n.shape);return fo(e)}function oAe(t){return"float32"}function Vte(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const a=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],c=Vte(a,o,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function lAe(t){let e=!0;for(const n of tr(t))if(!(n instanceof Vd)){e=!1;break}return e}function cAe(t){let e=!0;for(const n of tr(t))if(n instanceof Vd){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Jk extends Nn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:TE("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Ee("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Ee("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Ee("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new Vd(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new AE({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Ee(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Jk.className="InputLayer";ut(Jk);function uAe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ee("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Jk({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dAe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return bt(e,t.dtype)}catch{throw new Ee(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Sp{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Sp)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=dAe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Ee(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Vd){if(this.id2Value[e.id]==null)throw new Ee(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Vd){if(this.id2Value[e.id]==null)throw new Ee(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Ee(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&bn(this.id2Mask)}}const F5=new Tte,z5=new Tte;function hAe(t){F5!=null&&F5.setMaxEntries(t),z5!=null&&z5.setMaxEntries(t)}function uw(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),a=i?t:[t],o=a.map(m=>m.name),l=[],c=e.names();for(const m of o)c.indexOf(m)!==-1?l.push(e.getValue(m)):l.push(null);const u=o.join(",")+"|"+e.names().sort().join(",");let d=F5.get(u),h;if(d==null){const m=fAe(a,e);d=m.sorted,h=m.recipientCounts,F5.put(u,d),z5.put(u,h)}h={},s||Object.assign(h,z5.get(u));const f=new Sp(e);for(let m=0;m<d.length;++m){const y=d[m],v=y.sourceLayer;if(v instanceof Jk)continue;const x=[],b=[],_=[];let k=!1;for(const P of y.inputs){const $=f.getValue(P),j=f.getMask(P);x.push($),b.push(j),j!=null&&(k=!0),s||(h[P.name]--,h[P.name]===0&&!e.hasKey(P)&&o.indexOf(P.name)===-1&&!$.isDisposed&&P.sourceLayer.stateful!==!0&&_.push($))}k&&(n=n||{},n.mask=b[0]);const N=tr(v.apply(x,n));let A=null;v.supportsMasking&&(A=v.computeMask(x,b));const T=mAe(y),C=Array.isArray(T)?T:[T];for(let P=0;P<C.length;++P){f.hasKey(C[P])||f.add(C[P],N[P],Array.isArray(A)?A[0]:A);const $=o.indexOf(C[P].name);$!==-1&&(l[$]=N[P])}s||bn(_)}return f.disposeMasks(),i?l:l[0]}function fAe(t,e){le(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=JW(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:a,recipientMap:o}=JW(i,e);for(const l of a)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:pAe(r)}}function pAe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function JW(t,e){const n=new Set,r=[],s={};for(const o of e.names())n.add(o);const i=[],a=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const l=a[a.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(i.length-1);for(const c of o.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(o.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function mAe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=We();gAe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,hAe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jF(t,e){return Re(()=>_i($t(Se(t,t),e,!0)))}class Qk extends Gb{getConfig(){return{}}}class Hte extends Qk{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Re(()=>{const n=jF(e,this.axis),r=wo(n,0,this.maxValue);return Se(e,Wt(r,ot(Xs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Hte.className="MaxNorm";ut(Hte);class qte extends Qk{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Re(()=>Wt(e,ot(Xs(),jF(e,this.axis))))}getConfig(){return{axis:this.axis}}}qte.className="UnitNorm";ut(qte);class Gte extends Qk{apply(e){return Uu(e)}}Gte.className="NonNeg";ut(Gte);class Kte extends Qk{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Re(()=>{const n=jF(e,this.axis),r=ot(Se(this.rate,wo(n,this.minValue,this.maxValue)),Se(1-this.rate,n));return Se(e,Wt(r,ot(Xs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Kte.className="MinMaxNorm";ut(Kte);const QW={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Qs(t){return _F(t)}function eU(t,e={}){return Kk(t,xc.getMap().classNameMap,e,"constraint")}function ei(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in QW?QW[t]:t,config:{}};return eU(n)}else return t instanceof Qk?t:eU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function og(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const a=i;e.push(a.data()),n.push(s),r.push(a)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];bn(r)}}function Xte(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var tU;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(tU||(tU={}));const yAe=125;class j2{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class vAe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class xAe extends j2{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let a;s in this.totals?a=this.totals[s]:this.totals[s]=0;const o=Re(()=>ot(this.totals[s],Se(i,r)));this.totals[s]=o,a!=null&&a.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Re(()=>{const s=Se(Wt(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),Ks(n[r])}))}}class bAe extends j2{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const a=this.history[i];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(i),r.push(o)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class wAe extends j2{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||nF,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=yAe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");jj(this.yieldEvery)&&(this.maybeWait=$Ie(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await og(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await og(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await og(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await og(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await og(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):jj(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await og(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await og(e),await this.trainEnd(e))}}function Yte(t,e){return t==null&&(t={}),t instanceof j2?[t]:Array.isArray(t)&&t[0]instanceof j2?t:tr(t).map(r=>new wAe(r,e))}class mc{constructor(){}static registerCallbackConstructor(e,n){le(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),mc.checkForDuplicate(n),mc.constructors[e]==null&&(mc.constructors[e]=[]),mc.constructors[e].push(n)}static checkForDuplicate(e){for(const n in mc.constructors)mc.constructors[+n].forEach(s=>{if(s===e)throw new Ee("Duplicate callback constructor.")})}static clear(){mc.constructors={}}static createCallbacks(e){const n=[];for(const r in mc.constructors){const s=+r;e>=s&&n.push(...mc.constructors[s])}return n.map(r=>new r)}}mc.constructors={};function Zte(t,e,n,r,s,i,a,o,l){const c=new bAe,u=[new xAe,...mc.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new vAe(u);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vh(t,e={},n=!1){return Kk(t,xc.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function B5(t,e){return Re(()=>{t.dtype!=="float32"&&(t=bt(t,"float32"));const n=$t(Yk(t),e,!0),r=Z0(n.shape,Xs()),s=_i(Zd(n,r));return Wt(t,s)})}function EE(t,e){return Re(()=>Jr(Yk(At(e,t)),-1))}function $F(t,e){return Re(()=>Jr(js(At(e,t)),-1))}function DF(t,e){return Re(()=>{const n=At(t,e),r=wo(js(t),Xs(),Number.MAX_VALUE),s=js(Wt(n,r));return Se(100,Jr(s,-1))})}function _Ae(t,e){return Re(()=>{const n=wo(e,Xs(),Number.MAX_VALUE),r=al(ot(1,n)),s=wo(t,Xs(),Number.MAX_VALUE),i=al(ot(1,s));return Jr(Yk(At(r,i)),-1)})}function kAe(t,e){return Re(()=>{const n=Zd(0,At(1,Se(t,e)));return Jr(Yk(n),-1)})}function SAe(t,e){return Re(()=>{const n=Zd(0,At(1,Se(t,e)));return Jr(n,-1)})}function NAe(t,e){return Re(()=>{const n=$t(Se(t,e),-1),r=Dl(Se(At(1,t),e),-1);return Zd(0,ot(1,At(r,n)))})}function CAe(t,e){return Re(()=>{const n=Math.log(2),r=At(e,t),s=At(ot(r,J0(Se(-2,r))),n);return Jr(s,-1)})}function $2(t,e,n=!1){return Re(()=>{if(n)e=Hb(e);else{const r=$t(e,e.shape.length-1,!0);e=Wt(e,r)}return e=wo(e,Xs(),1-Xs()),Cr($t(Se(bt(t,"float32"),al(e)),e.shape.length-1))})}function W5(t,e,n=!1){return Re(()=>{const r=bt(Ub(qIe(t)),"int32");e=wo(e,Xs(),1-Xs());const s=e.shape,i=Ie(rE(r,s[s.length-1]),s);return $2(i,e,n)})}function TAe(t,e){if(!jn(t.shape,e.shape))throw new Ee(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Re(()=>{const n=Uu(e),r=Cr(js(e));return ot(At(n,Se(e,t)),$k(_o(r)))})}function PE(t,e){return Re(()=>{let n;return n=wo(e,Xs(),1-Xs()),n=al(Wt(n,At(1,n))),Jr(TAe(t,n),-1)})}function IAe(t,e){return Re(()=>{const n=wo(t,Xs(),1),r=wo(e,Xs(),1);return $t(Se(t,al(Wt(n,r))),-1)})}function AAe(t,e){return Re(()=>{const n=al(ot(Xs(),e));return Jr(At(e,Se(t,n)),-1)})}function Jte(t,e){return Re(()=>{const n=B5(t,-1),r=B5(e,-1),s=Se(n,r);return Cr($t(s,-1))})}const U5={meanSquaredError:EE,meanAbsoluteError:$F,meanAbsolutePercentageError:DF,meanSquaredLogarithmicError:_Ae,squaredHinge:kAe,hinge:SAe,categoricalHinge:NAe,logcosh:CAe,categoricalCrossentropy:$2,sparseCategoricalCrossentropy:W5,binaryCrossentropy:PE,kullbackLeiblerDivergence:IAe,poisson:AAe,cosineProximity:Jte};function l3(t){if(typeof t=="string"){if(t in U5)return U5[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ee(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qte(t,e){return Re(()=>{const n=Se(.5,ol(e)),r=Ld(Io(e,n),t.dtype);return Jr(Lc(t,r),-1)})}function ene(t,e){return Re(()=>Ld(Lc(S0(t,-1),S0(e,-1)),"float32"))}function EAe(t,e){return Re(()=>bt($t(Lu(Lc(t,1),Lc(e,1))),"float32"))}function PAe(t,e){return Re(()=>bt($t(Lu(Lc(t,0),Lc(e,1))),"float32"))}function OAe(t,e){return Re(()=>{const n=EAe(t,e),r=PAe(t,e),s=ot(n,r);return bt(Bi(Io(s,0),Wt(n,s),0),"float32")})}function jAe(t,e){return PE(t,e)}function $Ae(t,e){return t.rank===e.rank&&(t=gf(t,[t.rank-1])),e=S0(e,-1),e.dtype!==t.dtype&&(e=bt(e,t.dtype)),bt(Lc(t,e),"float32")}const DAe=EE,LAe=EE,RAe=$F,MAe=$F,FAe=DF,zAe=DF,tne=$2,BAe=Jte,nne=W5,V5={binaryAccuracy:Qte,categoricalAccuracy:ene,precision:OAe,categoricalCrossentropy:tne,sparseCategoricalCrossentropy:nne,mse:DAe,MSE:LAe,mae:RAe,MAE:MAe,mape:FAe,MAPE:zAe,cosine:BAe};function WAe(t){if(typeof t=="string"&&t in V5)return V5[t];if(typeof t!="string"&&t!=null)return t;throw new Ee(`Unknown metric ${t}`)}function wN(t){if(wd(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(U5))if(U5[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(V5))if(V5[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UAe(t){const e={Adagrad:()=>xg.adagrad(.01),Adadelta:()=>xg.adadelta(1,.95,Xs()),Adam:()=>xg.adam(.001,.9,.999,Xs()),Adamax:()=>xg.adamax(.002,.9,.999,Xs(),0),RMSProp:()=>xg.rmsprop(.001,.9,0,Xs()),SGD:()=>xg.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Ee(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nU=1*1024*1024;function rU(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!l$(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>nU&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${nU}.`)}}function l$(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!l$(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!l$(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VAe(t,e,n,r=console.log){const s=qAe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let a;if(!s){i.push("Receives inputs"),a=[];for(const u in t.nodesByDepth)a.push(...t.nodesByDepth[u])}r("_".repeat(e)),H5(i,n,r),r("=".repeat(e));const o=t.layers;for(let u=0;u<o.length;++u)s?GAe(o[u],n,r):KAe(o[u],n,a,r),r((u===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=HAe(t),c=M5(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function HAe(t){let e;return t.collectedTrainableWeights!=null?e=M5(t.collectedTrainableWeights):e=M5(t.trainableWeights),e}function qAe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const a of s.inboundNodes)if(r.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function H5(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function GAe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,a=t.getClassName(),o=[`${i} (${a})`,s,r,t.countParams().toString()];H5(o,e,n)}function KAe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const a=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,m=d.nodeIndices[h],y=d.tensorIndices[h];a.push(`${f}[${m}][${y}]`)}const o=t.name,l=t.getClassName(),c=a.length===0?"":a[0],u=[`${o} (${l})`,i,s,t.countParams().toString(),c];H5(u,e,r);for(let d=1;d<a.length;++d)H5(["","","","",a[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rne(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function c$(t,e){if(t===null)return null;if(typeof t=="string")return Eg(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];rne(e,s,i)?n.push(i):n.push(c$(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Eg(r);n[i]=c$(s,i)}}return n}}function u$(t,e){if(t==null)return null;if(typeof t=="string")return Ih(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];rne(e,s,i)?n.push(i):n.push(u$(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=Ih(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=u$(s,r)}return n}}/** @license See the LICENSE file. */const sne="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XAe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class hu extends Nn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=TE(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Hp(this.inputs).length!==this.inputs.length)throw new Ee(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Hp(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const _=b.sourceLayer,k=b.nodeIndex,N=b.tensorIndex;this.outputLayers.push(_),this.outputLayersNodeIndices.push(k),this.outputLayersTensorIndices.push(N)}for(const b of this.inputs){const _=b.sourceLayer,k=b.nodeIndex,N=b.tensorIndex;wd(k===0,"input layer has >1 nodes"),wd(N===0,"input layer has >1 tensors"),this.inputLayers.push(_),this.inputLayersNodeIndices.push(k),this.inputLayersTensorIndices.push(N)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const _=this.inputLayers[b];if(!(_ instanceof Jk))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${_.getClassName()}.`);this.inputNames.push(_.name),this.feedInputShapes.push(_.batchInputShape),this.feedInputNames.push(_.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},r={},s={},i={},a={},o=[],l=(b,_,k,N,A,T)=>{(N==null||A==null||T==null)&&(N=b.sourceLayer,A=b.nodeIndex,T=b.tensorIndex);const C=N.inboundNodes[A];if(k.indexOf(C)!==-1)throw new Nc(`The tensor ${b.name} at layer "${N.name}" is part of a cycle.`);if(_.indexOf(C)!==-1)return;this.containerNodes.add(hu.nodeKey(N,A)),N.id in a||(a[N.id]=Object.keys(a).length),k.indexOf(C)===-1&&k.push(C);const P=C.inboundLayers.length;for(let $=0;$<P;$++){const j=C.inputTensors[$],O=C.inboundLayers[$],F=C.nodeIndices[$],B=C.tensorIndices[$];l(j,_,k,O,F,B)}for(_.push(C);k.indexOf(C)>=0;)k.splice(k.indexOf(C),1);o.push(C)},c=[],u=[];for(const b of this.outputs)l(b,c,u);const d=o.slice().reverse();for(const b of d){r[b.id]=b,b.id in n||(n[b.id]=0);let _=n[b.id];const k=s[b.outboundLayer.id]==null?0:s[b.outboundLayer.id];_=Math.max(_,k),s[b.outboundLayer.id]=_,i[b.outboundLayer.id]=b.outboundLayer,n[b.id]=_;for(let N=0;N<b.inboundLayers.length;N++){const A=b.inboundLayers[N],T=b.nodeIndices[N],C=A.inboundNodes[T],P=n[C.id]==null?0:n[C.id];n[C.id]=Math.max(_+1,P),r[C.id]=C}}const h={};for(const b in n){const _=n[b];_ in h||(h[_]=[]),h[_].push(r[b])}const f={};for(const b in s){const _=s[b];_ in f||(f[_]=[]),f[_].push(i[b])}let m=Object.keys(f).map(b=>parseInt(b,10)).sort(vN);this.layers=[];for(const b of m){const _=f[b];_.sort((k,N)=>{const A=a[k.id],T=a[N.id];return A<T?-1:A>T?1:0});for(const k of _)k instanceof hu&&this.internalContainerRefs.push(k),this.layers.push(k)}this.layersByDepth=f,m=Object.keys(h).map(b=>parseInt(b,10)).sort(vN);const y=this.inputs.slice(),v=[];for(const b of m)for(const _ of h[b]){const k=_.outboundLayer;if(k!=null){for(const N of _.inputTensors)if(y.indexOf(N)===-1)throw new Nc(`Graph disconnected: cannot obtain value for tensor ${N} at layer "${k.name}". The following previous layers were accessed without issue: ${v}`);for(const N of _.outputTensors)y.push(N);v.push(k.name)}}this.nodesByDepth=h;const x=this.layers.map(b=>b.name);for(const b of x){const _=x.filter(k=>k===b).length;if(_!==1)throw new Nc(`The name "${b}" is used ${_} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(x))}this.outboundNodes=[],this.inboundNodes=[],new AE({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ee("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=XAe(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new Ee(`Duplicate weight name: ${u}`);r[u]=c,s++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(n)throw new Ee(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new Ee(`${o.length} of ${s} weights are not set: ${o}`)}OF(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!s.includes(a)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${sne}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=u$(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Re(()=>{e=tr(e);const r=new Sp;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return uw(this.outputs,r,n)})}computeMask(e,n){return Re(()=>{e=tr(e);let r;return n==null?r=A0(null,e.length):r=tr(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=R5(e);if(n.length!==this.inputLayers.length)throw new Ee(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(vN);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(y=>y.id).indexOf(u.id)!==-1)continue;const d=[];for(let y=0;y<c.inboundLayers.length;y++){const v=c.inboundLayers[y],x=c.nodeIndices[y],b=c.tensorIndices[y],_=`${v.name}_${x}_${b}`,k=r[_];d.push(k)}const h=u.computeOutputShape(fo(d)),f=R5(h),m=u.inboundNodes.indexOf(c);for(let y=0;y<f.length;y++){const v=`${u.name}_${m}_${y}`;r[v]=f[y]}}}const i=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],u=this.outputLayersTensorIndices[o],d=`${l.name}_${c}_${u}`;a.push(d)}for(let o=0;o<a.length;o++){const l=a[o];wd(l in r),i.push(r[l])}return fo(i)}runInternalGraph(e,n){n==null&&(n=A0(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(vN);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,m=new Array;for(const y of h)y.id in r&&m.push(r[y.id]);if(m.length===h.length){let y={},v,x,b,_;if(u.callArgs!=null&&(y=u.callArgs),m.length===1){const[k,N]=m[0];y.mask==null&&(y.mask=N),b=tr(d.call(k,y)),_=tr(d.computeMask(k,N)),v=[k],x=[N]}else v=m.map(k=>k[0]),x=m.map(k=>k[1]),y.mask==null&&(y.mask=x),b=tr(d.call(v,y)),_=tr(d.computeMask(v,x));if(d.activityRegularizer)throw new xn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let k=0;k<f.length;++k){const N=f[k],A=b[k],T=_[k];r[N.id]=[A,T]}}}}const i=[],a=[],o=[];for(const l of this.outputs){wd(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];o.push(c.shape),i.push(c),a.push(u)}return[i,a,o]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof hu?1:0;for(let i=0;i<s.inboundNodes.length;i++){const a=hu.nodeKey(s,i);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Ee("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Ee(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Ee(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Re(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=hu.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){const h=a.inboundNodes[d],f=hu.nodeKey(a,d);let m={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),m=h.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(h.inboundLayers.length>0){const y=[];for(let v=0;v<h.inboundLayers.length;v++){const x=h.inboundLayers[v],b=h.nodeIndices[v],_=h.tensorIndices[v],k=hu.nodeKey(x,b);let N=n[k];N==null&&(N=0),y.push([x.name,N,_,m])}c.push(y)}}}const u={};u.name=a.name,u.className=o,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=hu.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[a];s.push([o.name,u,d])}e.inputLayers=s;const i=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=hu.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[a];i.push([o.name,u,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},a={};function o(v,x){v.name in a?a[v.name].push(x):a[v.name]=[x]}function l(v,x){const b=[];let _;for(const k of x){const N=k[0],A=k[1],T=k[2];if(_=k[3]==null?{}:k[3],!(N in i)){o(v,x);return}const C=i[N];if(C.inboundNodes.length<=A){o(v,x);return}const P=C.inboundNodes[A];b.push(P.outputTensors[T])}b.length>0&&v.apply(fo(b),_)}function c(v){const x=v.name,b=Vh(v,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(s),i[x]=b,v.inboundNodes.forEach(k=>{if(!(k instanceof Array))throw new Ee(`Corrupted configuration, expected array for nodeData: ${k}`);o(b,k)})}const u=n.name,d=n.layers;for(const v of d)c(v);for(;!jIe(a);)for(const v of d){const x=i[v.name];if(x.name in a){const b=a[x.name];delete a[x.name];for(const _ of b)l(x,_)}}const h=[],f=[],m=n.inputLayers;for(const v of m){const x=v[0],b=v[1],_=v[2];wd(x in i);const N=i[x].inboundNodes[b].outputTensors;h.push(N[_])}const y=n.outputLayers;for(const v of y){const x=v[0],b=v[1],_=v[2];wd(x in i);const N=i[x].inboundNodes[b].outputTensors;f.push(N[_])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new Ee("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Re(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YAe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function ine(t,e){return YAe(t,e,"classWeight")}async function ane(t,e,n,r){if(n!=null){const s=Re(()=>{if(t.shape.length===1)return $d(t);if(t.shape.length===2){if(t.shape[1]>1)return S0(t,1);if(t.shape[1]===1)return Ie(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());bn(s);const a=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),ca(a,"float32")}else return null}function ZAe(t,e){return Se(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const JAe=32;function one(t,e){let n,r;const s=e;n=s.xs,r=s.ys,le(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=sU("input",t.inputNames,n),a=sU("output",t.outputNames,r),o=i[0].shape[0];le(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),le(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)le(i[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)le(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:a}}function sU(t,e,n){if(n instanceof Or)return[n];if(Array.isArray(n))return le(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new Ee(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function QAe(t){if(t.length===3)throw new xn("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function eEe(t,e,n){const r=n.batchesPerEpoch!=null;if(le(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),le(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),le(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),le(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),le(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,a;if(s)if(iU(n.validationData))le(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=QAe(n.validationData);i=v.xs,a=v.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(v=>"val_"+v)):c=l.slice();const u=Yte(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=Zte(u,d,n.epochs,null,null,tEe(e,n),null,s,c);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let m=n.initialEpoch==null?0:n.initialEpoch,y=await e.iterator();for(;m<n.epochs;){const v={};await h.onEpochBegin(m);let x=0,b=0;for(r||(y=await e.iterator());!r||x<n.batchesPerEpoch;){const _=await y.next();if(r&&_.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${x} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(_.value!=null){const{xs:k,ys:N}=one(t,_.value),A={};A.batch=b,A.size=k[0].shape[0],await h.onBatchBegin(b,A);const T=[];if(n.classWeight!=null){const $=ine(n.classWeight,t.outputNames);for(let j=0;j<$.length;++j)T.push(await ane(N[j],null,$[j]))}const C=k.concat(N).concat(T),P=o(C);bn(C);for(let $=0;$<l.length;++$){const j=l[$],O=P[$];A[j]=O,Ks(O)}await h.onBatchEnd(b,A),Xte(A),b++,x++}if(r?x>=n.batchesPerEpoch:_.done){if(s){let k;iU(n.validationData)?k=tr(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):k=tr(t.evaluate(i,a,{batchSize:n.validationBatchSize==null?JAe:n.validationBatchSize,verbose:0}));for(let N=0;N<t.metricsNames.length;++N)v[`val_${t.metricsNames[N]}`]=k[N]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(m,v),m++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function tEe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function iU(t){return typeof t.iterator=="function"}function nEe(t){return typeof t.next=="function"}async function rEe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new xn("Verbose mode is not implemented yet.");le(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=nEe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await a.next();if(i=Re(()=>{if(c.value){const{xs:u,ys:d}=one(t,c.value),h=u.concat(d),f=Re(()=>s(h));if(bn(h),l===0)for(let y=0;y<f.length;++y)i.push(qt(0));const m=h[0].shape[0];for(let y=0;y<f.length;++y){const v=f[y],x=i[y];i[y]=Re(()=>ot(i[y],Se(m,v))),l>0&&bn(x)}bn(f),o+=m,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=Wt(i[c],o),bn(u)}return fo(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c3(t){le(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function R1(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Jg(r,e,n-e)):Jg(t,e,n-e)}function d$(t,e){return Re(()=>t==null?null:Array.isArray(t)?t.map(n=>d$(n,e)):Dte(t,e.dtype==="int32"?e:bt(e,"int32")))}function u3(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function lne(t){const e=[];t instanceof Or&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Xk(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ou(t,e){if(t==null)return;const n=[];if(e instanceof Or)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Or)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sEe(t){return t instanceof Or}function h$(t){return Array.isArray(t)}function aU(t){return!sEe(t)&&!h$(t)}function oU(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(h$(t)&&t.length>0)a=!0;else if(aU(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new Ee(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let i;if(aU(t)){t=t,i=[];for(const a of e){if(t[a]==null)throw new Ee(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(t[a])}}else if(h$(t)){if(t=t,t.length!==e.length)throw new Ee(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new Ee(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=lne(i),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new Ee(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=n[a][l];if(u!=null&&u>=0&&c!==u)throw new Ee(`${s} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function iEe(t,e,n){const r=Hp(t.map(i=>i.shape[0]));r.sort();const s=Hp(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new Ee(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new Ee(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!jn(r,s))throw new Ee(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function aEe(t,e,n){const r=[EE,PE,$2];for(let s=0;s<t.length;++s){const i=t[s],a=e[s],o=n[s];if(a!=null){if(a===$2&&i.shape[i.shape.length-1]===1)throw new Ee(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=i.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new Ee(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function lU(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new Ee(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new Ee(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new Ee(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=n[a][l];if(u!=null&&u!==c)throw new Ee(`Error when checking ${s}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function oEe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const lEe="layers-model";class zv extends hu{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Ee("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");VAe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=UAe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof vf))throw new Ee("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new Ee(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(l3(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ee(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>l3(o))}else{const a=l3(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Zg("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const s=oEe(e.metrics,this.outputNames),i=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};Zg("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=s[a];(c=>{const u="";let d,h,f;for(const m of c){if(typeof m=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(m)!==-1){const v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===PE?["accuracy","acc"].indexOf(m)!==-1?h=Qte:["crossentropy","ce"].indexOf(m)!==-1&&(h=jAe):this.lossFunctions[a]===W5?["accuracy","acc"].indexOf(m)!==-1?h=$Ae:["crossentropy","ce"].indexOf(m)!==-1&&(h=nne):["accuracy","acc"].indexOf(m)!==-1?h=ene:["crossentropy","ce"].indexOf(m)!==-1&&(h=tne);let x;["accuracy","acc"].indexOf(m)!==-1?x="acc":["crossentropy","ce"].indexOf(m)!==-1&&(x="ce"),f=h,d=u+x}else f=WAe(m),d=u+wN(m);let y;Zg(d,()=>{y=f}),i(a,d,y)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;c3(s);const a=this.standardizeUserDataXY(e,n,!0,s);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,s,r.verbose,r.steps);return fo(c)}finally{ou(a[0],e),ou(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),rEe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new Ee(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new Ee(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Ee("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),a=new Sp;if(e instanceof Or&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ee(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Ee(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=uw(i,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=A0(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],a=i.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,a)=>{i==null&&s.push(e[a])}),new Ee(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return Re(()=>{const s=this.checkNumSamples(e);if(r)throw new xn("Verbose predictLoop() is not implemented yet.");const i=u3(s,n),a=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)Re(()=>{const c=i[o][0],u=i[o][1],d=R1(e,c,u),h=[];if(Array.isArray(d))for(let m=0;m<d.length;++m)h.push({key:this.inputs[m],value:d[m]});else h.push({key:this.inputs[0],value:d});const f=new Sp(h);return uw(this.outputs,f)}).forEach((c,u)=>a[u].push(c));return fo(a.map(o=>Ss(o,0)))})}predict(e,n={}){const r=lne(e);lU(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return c3(s),this.predictLoop(r,s)}finally{ou(r,e)}}predictOnBatch(e){lU(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Nc("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===W5?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=oU(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=oU(n,this.feedOutputNames,i,!1,"target"),iEe(e,n),aEe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new Ee(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,i,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=ine(s,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await ane(l[d],null,u[d]))}return[o,l,c]}testLoop(e,n,r,s=0,i){return Re(()=>{const a=this.checkNumSamples(n,r,i,"steps"),o=[];if(s>0)throw new xn("Verbose mode is not implemented yet.");if(i!=null)throw new xn("steps mode in testLoop() is not implemented yet");{const l=u3(a,r),c=ca(Ru(0,a));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],f=Jg(c,d,h-d),m=d$(n,f),y=e(m);if(u===0)for(let v=0;v<y.length;++v)o.push(qt(0));for(let v=0;v<y.length;++v){const x=y[v];o[v]=ot(o[v],Se(h-d,x))}}for(let u=0;u<o.length;++u)o[u]=Wt(o[u],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(qW(e,s)>1){const a=qW(e.slice(0,r),s);i+=`_${a}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const d=[];for(let y=0;y<this.inputs.length;++y)d.push({key:this.inputs[y],value:r[y]});const h=new Sp(d),f=uw(this.outputs,h,{training:!0});let m;for(let y=0;y<this.lossFunctions.length;++y){const v=this.lossFunctions[y];let x=v(s[y],f[y]);i[y]!=null&&(x=ZAe(x,i[y]));const b=Jr(x);n.push(b),y===0?m=x:m=ot(m,x)}for(let y=0;y<this.metricsTensors.length;++y){let v;if(this.outputs.length>1&&y<this.outputs.length)v=n[y];else{const x=this.metricsTensors[y][0],b=this.metricsTensors[y][1];v=Jr(x(s[b],f[b]))}Ks(v),a.push(v)}return m=Jr(m),this.calculateLosses().forEach(y=>{m=ot(m,y)}),m},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>Re(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:s[c]});const o=new Sp(a),l=uw(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Jr(u(i[c],l[c]));c===0?r=d:r=ot(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Jr(u(i[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,a,o,l,c,u,d,h;try{const f=r.batchSize==null?32:r.batchSize;c3(f);const y=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,f);s=y[0],i=y[1],h=y[2];let v=!1,x;if(r.validationData!=null&&r.validationData.length>0){if(v=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new xn("validationData including sample weights is not supported yet."):new Ee(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const $=await this.standardizeUserData(l,c,null,null,!0,f);u=$[0],d=$[1],x=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){v=!0;const P=Math.floor(s[0].shape[0]*(1-r.validationSplit)),$=s[0].shape[0];u=R1(s,P,$),a=s,s=R1(s,0,P),d=R1(i,P,$),o=i,i=R1(i,0,P),x=u.concat(d)}else r.validationSteps!=null&&(v=!0);const b=s.concat(i).concat(h);this.checkTrainableWeightsConsistency();const _=this.makeTrainFunction(),k=this.getDedupedMetricsNames();let N,A;v?(this.makeTestFunction(),N=this.testFunction,A=k.slice().concat(k.map(P=>"val_"+P))):(N=null,x=[],A=k.slice());const T=Yte(r.callbacks,r.yieldEvery);return await this.fitLoop(_,b,k,f,r.epochs,r.verbose,T,N,x,r.shuffle,A,r.initialEpoch,null,null)}finally{this.isTraining=!1,ou(s,e),ou(i,n),ou(a,e),ou(o,n),ou(u,l),ou(d,c),h!=null&&bn(h)}}async fitLoop(e,n,r,s,i,a,o,l,c,u,d,h,f,m){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),h==null&&(h=0);let y=!1;if(l!=null&&c!=null&&(y=!0),m!=null&&(y=!0,f==null))throw new Ee("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,s,f,"steps_per_epoch");let x;v!=null&&(x=Ru(0,v)),a==null&&(a=1);const{callbackList:b,history:_}=Zte(o,a,i,h,v,f,s,y,d);b.setModel(this),this.history=_,await b.onTrainBegin(),this.stopTraining_=!1;for(let k=h;k<i;++k){await b.onEpochBegin(k);const N={};if(f!=null)throw new xn("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new xn("batch shuffling is not implemneted yet");u&&rwe(x);const A=ca(x),T=u3(v,s);for(let C=0;C<T.length;++C){const P={};if(await b.onBatchBegin(C,P),Re(()=>{const $=T[C][0],j=T[C][1],O=Jg(A,$,j-$);P.batch=C,P.size=j-$;const F=d$(n,O),B=e(F);for(let Z=0;Z<r.length;++Z){const V=r[Z],G=B[Z];P[V]=G,Ks(G)}if(C===T.length-1&&y){const Z=this.testLoop(l,c,s);for(let V=0;V<r.length;++V){const G=r[V],U=Z[V];Ks(U),N["val_"+G]=U}}}),await b.onBatchEnd(C,P),Xte(P),this.stopTraining_)break}A.dispose()}if(await b.onEpochEnd(k,N),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return eEe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],o=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of o){const u=await c.data();l.push(u[0])}return bn(o),ou(r[0],e),ou(r[1],n),fo(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let a=0;a<s.length;++a)r&&!s[a].trainable||n.push({name:s[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=qj().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-qj().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ih(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ih(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Ih(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ih(wN(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ih(wN(e)));{const e={};for(const n in this.metrics)e[n]=Ih(wN(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=c$(e.optimizer_config),r=Vh(n);let s;if(typeof e.loss=="string")s=Eg(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>Eg(a));else if(e.loss!=null){s={};for(const a in e.loss)s[a]=Eg(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>Eg(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=Eg(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=PQ(e);if(c.length===0)throw new Ee(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Ee(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Ee("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Gj(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:lEe,generatedBy:`TensorFlow.js tfjs-layers v${sne}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await Gj(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=IQ([r.data,u])}return this.userDefinedMetadata!=null&&(rU(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){rU(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}zv.className="Model";ut(zv);class cne extends zv{}cne.className="Functional";ut(cne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class D2 extends zv{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:TE("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Ee(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof D2||e instanceof zv;let r;if(n){if(r=e,r.outputs.length!==1)throw new Ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Ee("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Ee("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=uAe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Ee(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Ee("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Vte(this.outputs[0])}this.inboundNodes=[],new AE({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:A0(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Un(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new zv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Nc("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Nc("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Nc("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Nc("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Ee("Legacy serialization format not supported yet.");i=n}else le(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof D2))throw new xn(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of i){const u=Vh(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),o.add(u)}return o}set stopTraining(e){if(this.model==null)throw new Ee("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Ee("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}D2.className="Sequential";ut(D2);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ma=class extends Gb{getConfig(){return{}}};class une extends ma{apply(e,n=1){return KIe(e,n)}}une.className="elu";ut(une);class dne extends ma{apply(e){return cE(e)}}dne.className="selu";ut(dne);class hne extends ma{apply(e){return Uu(e)}}hne.className="relu";ut(hne);class fne extends ma{apply(e){return Re(()=>am(6,Uu(e)))}}fne.className="relu6";ut(fne);let pne=class extends ma{apply(e){return e}};pne.className="linear";ut(pne);class mne extends ma{apply(e){return Eu(e)}}mne.className="sigmoid";ut(mne);class gne extends ma{apply(e){return YIe(e)}}gne.className="hardSigmoid";ut(gne);class yne extends ma{apply(e){return J0(e)}}yne.className="softplus";ut(yne);class vne extends ma{apply(e){return XIe(e)}}vne.className="softsign";ut(vne);class xne extends ma{apply(e){return im(e)}}xne.className="tanh";ut(xne);let LF=class extends ma{apply(e,n=-1){return Hb(e,n)}};LF.className="softmax";ut(LF);class bne extends ma{apply(e,n=-1){return eE(e,n)}}bne.className="logSoftmax";ut(bne);class wne extends ma{apply(e){return Re(()=>Re(()=>{const n=Math.sqrt(2),r=Se(.5,ot(1,JA(Wt(e,n))));return Se(e,r)}))}}wne.className="gelu";ut(wne);class _ne extends ma{apply(e){return Re(()=>Se(.5,Se(e,ot(1,im(Se(_i(Wt(2,Math.PI)),ot(e,Se(.044715,Wd(e,3)))))))))}}_ne.className="gelu_new";ut(_ne);class kne extends ma{apply(e){return Re(()=>Se(e,im(J0(e))))}}kne.className="mish";ut(kne);class Sne extends ma{apply(e,n=1){return Re(()=>Se(Eu(Se(e,n)),e))}}Sne.className="swish";ut(Sne);function lm(t){return t.getClassName()}function d3(t,e={}){return Kk(t,xc.getMap().classNameMap,e,"activation")}function cm(t){if(t==null){const e={};return e.className="linear",e.config={},d3(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},d3(e)}else return t instanceof ma?t:d3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cEe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Nne extends Gb{}class Cne extends Nne{constructor(e){super(),cEe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Re(()=>{let n=ws([1]);return this.hasL1&&(n=ot(n,$t(Se(this.l1,js(e))))),this.hasL2&&(n=ot(n,$t(Se(this.l2,Yk(e))))),Ie(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Cne.className="L1L2";ut(Cne);const cU={l1l2:"L1L2"};function vr(t){return _F(t)}function uU(t,e={}){return Kk(t,xc.getMap().classNameMap,e,"regularizer")}function Hr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in cU?cU[t]:t,config:{}};return uU(n)}else return t instanceof Nne?t:uU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tne extends Nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=en(e);let r=Uu(e);return this.maxValue!=null&&(r=wo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Tne.className="ReLU";ut(Tne);class Ine extends Nn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=en(e);return jk(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Ine.className="LeakyReLU";ut(Ine);class Ane extends Nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ur(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Hr(e.alphaRegularizer),this.alphaConstraint=ei(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Ee(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Un(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Ys({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=en(e),zk(e,this.alpha.read())}getConfig(){const e={alphaInitializer:es(this.alphaInitializer),alphaRegularizer:vr(this.alphaRegularizer),alphaConstraint:Qs(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Ane.className="PReLU";ut(Ane);let Ene=class extends Nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new xn(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=en(e);return Bb(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Ene.className="ELU";ut(Ene);class Pne extends Nn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=en(e);return Se(r,bt(Io(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Pne.className="ThresholdedReLU";ut(Pne);class One extends Nn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new LF().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Re(()=>{let r=en(e);const s=n.mask;if(s!=null){const i=Se(At(po(r.shape),bt(s,r.dtype)),qt(-1e9));r=ot(r,i)}return this.axis instanceof Array?this.axis.length>1?_o(At(r,Dk(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}One.className="Softmax";ut(One);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bv(t,e,n){if(typeof t=="number")return A0(t,e);if(t.length!==e)throw new Ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!VIe(s))throw new Ee(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Pu(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let a;return n==="same"?a=t:a=t-i+1,Math.floor((a+r-1)/r)}function _d(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+om([n-e,0]);else if(r==="same")t=t*e;else throw new Ee(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RF(t,e){return Re(()=>(Ts(e),e==="channelsFirst"?Pn(t,[0,2,3,1]):t))}function jne(t,e){return Re(()=>(Ts(e),e==="channelsFirst"?Pn(t,[0,2,3,4,1]):t))}function uEe(t,e,n,r=1,s="valid",i,a=1){return Re(()=>{if(i==null&&(i=Mu()),Ts(i),t.shape.length!==3)throw new Ee(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Ee(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ee(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=Pn(t,[0,2,1])),s==="causal")throw new xn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=KA(t,e,r,s==="same"?"same":"valid","NWC",a);return n!=null&&(o=Vu(o,n)),o})}function dU(t,e,n,r=[1,1],s="valid",i,a,o=null){return Re(()=>{if(i==null&&(i=Mu()),Ts(i),t.rank!==3&&t.rank!==4)throw new Ee(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Ee(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=RF(t,i);if(s==="causal")throw new xn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Pee({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=Pn(l,[0,3,1,2])),l})}function dEe(t,e,n,r=[1,1,1],s="valid",i,a){return Re(()=>{if(i==null&&(i=Mu()),Ts(i),t.rank!==4&&t.rank!==5)throw new Ee(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Ee(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=jne(t,i);if(s==="causal")throw new xn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=QR(o,e,r,s==="same"?"same":"valid","NDHWC",a),n!=null&&(o=Vu(o,n)),i==="channelsFirst"&&(o=Pn(o,[0,4,1,2,3])),o})}class OE extends Nn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",OE.verifyArgs(n),this.rank=e,xi(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new xn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Bv(n.kernelSize,e,"kernelSize"),this.strides=Bv(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ql(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ts(this.dataFormat),this.activation=cm(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Ur(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ei(n.biasConstraint),this.biasRegularizer=Hr(n.biasRegularizer),this.activityRegularizer=Hr(n.activityRegularizer),this.dilationRate=Bv(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ee(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ee(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ee(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(wd("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!kF(e.kernelSize,"number",1,3))throw new Ee(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:lm(this.activation),useBias:this.useBias,biasInitializer:es(this.biasInitializer),biasRegularizer:vr(this.biasRegularizer),activityRegularizer:vr(this.activityRegularizer),biasConstraint:Qs(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Kb extends OE{constructor(e,n){super(e,n),this.kernel=null,Kb.verifyArgs(n),this.filters=n.filters,xi(this.filters,"filters"),this.kernelInitializer=Ur(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ei(n.kernelConstraint),this.kernelRegularizer=Hr(n.kernelRegularizer)}build(e){e=Un(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ee(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Re(()=>{e=en(e);let r;const s=this.bias==null?null:this.bias.read(),i=Ate(this.activation.getClassName());if(i!=null&&this.rank===2)r=dU(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=uEe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=dU(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=dEe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new xn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Un(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const a=Pu(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(a)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:es(this.kernelInitializer),kernelRegularizer:vr(this.kernelRegularizer),kernelConstraint:Qs(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Ee(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class eS extends Kb{constructor(e){super(2,e),eS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!kF(e.kernelSize,"number",1,2))throw new Ee(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}eS.className="Conv2D";ut(eS);class tS extends Kb{constructor(e){super(3,e),tS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Ee(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}tS.className="Conv3D";ut(tS);class $ne extends eS{constructor(e){if(super(e),this.inputSpec=[new Ys({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ee(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Un(e),e.length!==4)throw new Ee("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ys({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Re(()=>{let r=en(e);if(r.shape.length!==4)throw new Ee(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=s[a],c=s[o],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],m=_d(l,h,u,this.padding),y=_d(c,f,d,this.padding),v=[i,m,y,this.filters];this.dataFormat!=="channelsLast"&&(r=Pn(r,[0,2,3,1]));let x=XA(r,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=Pn(x,[0,3,1,2])),this.bias!=null&&(x=Vu(x,this.bias.read(),this.dataFormat)),this.activation!=null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=Un(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=_d(n[s],l,a,this.padding),n[i]=_d(n[i],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}$ne.className="Conv2DTranspose";ut($ne);class Dne extends tS{constructor(e){if(super(e),this.inputSpec=[new Ys({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ee(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Un(e),e.length!==5)throw new Ee("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ee("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ys({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Re(()=>{let r=en(e);if(r.shape.length!==5)throw new Ee(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=s[l],u=s[a],d=s[o],h=this.kernelSize[0],f=this.kernelSize[1],m=this.kernelSize[2],y=this.strides[0],v=this.strides[1],x=this.strides[2],b=_d(c,y,h,this.padding),_=_d(u,v,f,this.padding),k=_d(d,x,m,this.padding),N=[i,b,_,k,this.filters];this.dataFormat!=="channelsLast"&&(r=Pn(r,[0,2,3,4,1]));let A=eM(r,this.kernel.read(),N,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(A=Pn(A,[0,4,1,2,3])),this.bias!==null&&(A=Vu(A,this.bias.read(),this.dataFormat)),this.activation!==null&&(A=this.activation.apply(A)),A})}computeOutputShape(e){e=Un(e);const n=e.slice();let r,s,i,a;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,a=4):(r=4,s=1,i=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=_d(n[s],u,o,this.padding),n[i]=_d(n[i],d,l,this.padding),n[a]=_d(n[a],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Dne.className="Conv3DTranspose";ut(Dne);class Lne extends Kb{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Ee("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Ee("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Ee(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Ur(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Hr(n.depthwiseRegularizer),this.depthwiseConstraint=ei(n.depthwiseConstraint),this.pointwiseInitializer=Ur(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Hr(n.pointwiseRegularizer),this.pointwiseConstraint=ei(n.pointwiseConstraint)}build(e){if(e=Un(e),e.length<this.rank+2)throw new Ee(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Ee(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new Ys({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Re(()=>{e=en(e);let r;if(this.rank===1)throw new xn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Pn(e,[0,2,3,1])),r=uE(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Vu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Pn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=es(this.depthwiseInitializer),e.pointwiseInitializer=es(this.pointwiseInitializer),e.depthwiseRegularizer=vr(this.depthwiseRegularizer),e.pointwiseRegularizer=vr(this.pointwiseRegularizer),e.depthwiseConstraint=Qs(this.depthwiseConstraint),e.pointwiseConstraint=Qs(this.pointwiseConstraint),e}}Lne.className="SeparableConv";class Rne extends Lne{constructor(e){super(2,e)}}Rne.className="SeparableConv2D";ut(Rne);class jE extends Kb{constructor(e){super(1,e),jE.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!kF(e.kernelSize,"number",1,1))throw new Ee(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}jE.className="Conv1D";ut(jE);class Mne extends Nn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Re(()=>{if(e=en(e),this.dataFormat==="channelsLast"){const r=bN(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return bN(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=bN(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return bN(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Mne.className="Cropping2D";ut(Mne);class Fne extends Nn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ts(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,BIe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Re(()=>{let r=en(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Pn(r,[0,2,3,1]);const i=this.size[0]*s[2],a=this.size[1]*s[3],o=this.interpolation==="nearest"?Sc.resizeNearestNeighbor(r,[i,a]):Sc.resizeBilinear(r,[i,a]);return Pn(o,[0,3,1,2])}else{const i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?Sc.resizeNearestNeighbor(r,[i,a]):Sc.resizeBilinear(r,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Fne.className="UpSampling2D";ut(Fne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hEe(t,e,n=[1,1],r="valid",s,i){return Re(()=>{s==null&&(s=Mu()),Ts(s);let a=RF(t,s);if(t.rank!==4)throw new Ee(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Ee(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=zb(a,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(a=Pn(a,[0,3,1,2])),a})}class zne extends OE{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Ur(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ei(e.depthwiseConstraint),this.depthwiseRegularizer=Hr(e.depthwiseRegularizer)}build(e){if(e=Un(e),e.length<4)throw new Ee(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Ee(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Re(()=>{e=en(e);let r=hEe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Vu(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Un(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Pu(n,this.kernelSize[0],this.padding,this.strides[0]),a=Pu(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=es(this.depthwiseInitializer),e.depthwiseRegularizer=vr(this.depthwiseRegularizer),e.depthwiseConstraint=Qs(this.depthwiseRegularizer),e}}zne.className="DepthwiseConv2D";ut(zne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bne(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Ee("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function Wne(t,e,n,r=!1,s,i,a=!1,o=!1){return Re(()=>{const l=e.shape.length;if(l<3)throw new Ee(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Ru(2,l));e=Pn(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=bt(bt(s,"bool"),"float32"),s.rank===l-1&&(s=la(s,-1)),s=Pn(s,c)),r&&(e=Fl(e,0),s!=null&&(s=Fl(s,0)));const u=[];let d,h=n;const f=e.shape[0],m=zl(e);let y;s!=null&&(y=zl(s));for(let x=0;x<f;++x){const b=m[x],_=Re(()=>t(b,h));if(s==null)d=_[0],h=_[1];else{const k=Re(()=>{const N=y[x],A=At(ol(N),N),T=ot(Se(_[0],N),Se(h[0],A)),C=h.map((P,$)=>ot(Se(_[1][$],N),Se(P,A)));return{output:T,newStates:C}});d=k.output,h=k.newStates}o&&u.push(d)}let v;return o&&(v=ko(u,1)),[d,v,h]})}class Em extends Nn{constructor(e){super(e);let n;if(e.cell==null)throw new Ee("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new zF({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Ee("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ys({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ru(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){a$(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const a of n)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,n){return Re(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new xn("Constants support is not implemented in RNN yet.");a$(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ys({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!jn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new Ee(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new Ys({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Re(()=>{if(!this.stateful)throw new bd("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ws([r,s])):this.states_=[ws([r,this.cell.stateSize])];else if(e==null)bn(this.states_),this.keptStates!=null&&(bn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ws([r,s])):this.states_[0]=ws([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):bn(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,a];if(!jn(i.shape,o))throw new Ee(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>Ks(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=Bne(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Ys({shape:c.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(n.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof Vd){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return Re(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=en(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new Ee(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},c=Wne((m,y)=>{const v=this.cell.call([m].concat(y),o);return[v[0],v.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,s);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return Re(()=>{let n=ws(e.shape);return n=$t(n,[1,2]),n=Xk(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?s$(n,[1,r]):n):this.cell.stateSize>1?[s$(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Em.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=Vh(s,r);return new e(Object.assign(n,{cell:i}))}}Em.className="RNN";ut(Em);class $E extends Nn{}class MF extends $E{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,xi(this.units,"units"),this.activation=cm(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ur(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Hr(e.kernelRegularizer),this.recurrentRegularizer=Hr(e.recurrentRegularizer),this.biasRegularizer=Hr(e.biasRegularizer),this.kernelConstraint=ei(e.kernelConstraint),this.recurrentConstraint=ei(e.recurrentConstraint),this.biasConstraint=ei(e.biasConstraint),this.dropout=px([1,om([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=px([1,om([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Un(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Re(()=>{if(e=e,e.length!==2)throw new Ee(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=um({ones:()=>ol(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=um({ones:()=>ol(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?i=Rd(Se(e,a),this.kernel.read()):i=Rd(e,this.kernel.read()),this.bias!=null&&(i=Vu(i,this.bias.read())),o!=null&&(r=Se(r,o));let l=ot(i,Rd(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lm(this.activation),useBias:this.useBias,kernelInitializer:es(this.kernelInitializer),recurrentInitializer:es(this.recurrentInitializer),biasInitializer:es(this.biasInitializer),kernelRegularizer:vr(this.kernelRegularizer),recurrentRegularizer:vr(this.recurrentRegularizer),biasRegularizer:vr(this.biasRegularizer),activityRegularizer:vr(this.activityRegularizer),kernelConstraint:Qs(this.kernelConstraint),recurrentConstraint:Qs(this.recurrentConstraint),biasConstraint:Qs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}MF.className="SimpleRNNCell";ut(MF);class Une extends Em{constructor(e){e.cell=new MF(e),super(e)}call(e,n){return Re(()=>{this.cell.dropoutMask!=null&&(bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}Une.className="SimpleRNN";ut(Une);class FF extends $E{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Ee("GRUCell does not support reset_after parameter set to true.");this.units=e.units,xi(this.units,"units"),this.activation=cm(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cm(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ur(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Hr(e.kernelRegularizer),this.recurrentRegularizer=Hr(e.recurrentRegularizer),this.biasRegularizer=Hr(e.biasRegularizer),this.kernelConstraint=ei(e.kernelConstraint),this.recurrentConstraint=ei(e.recurrentConstraint),this.biasConstraint=ei(e.biasConstraint),this.dropout=px([1,om([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=px([1,om([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Un(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Re(()=>{if(e=e,e.length!==2)throw new Ee(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=um({ones:()=>ol(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=um({ones:()=>ol(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=Se(e,i[0]));let u=Rd(e,this.kernel.read());this.useBias&&(u=Vu(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Se(s,a[0]));const d=this.recurrentKernel.read(),[h,f]=vo(d,[2*this.units,this.units],d.rank-1),m=Rd(s,h),[y,v,x]=vo(u,3,u.rank-1),[b,_]=vo(m,2,m.rank-1);o=this.recurrentActivation.apply(ot(y,b)),l=this.recurrentActivation.apply(ot(v,_));const k=Rd(Se(l,s),f);c=this.activation.apply(ot(x,k));const N=ot(Se(o,s),Se(ot(1,Cr(o)),c));return[N,N]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lm(this.activation),recurrentActivation:lm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:es(this.kernelInitializer),recurrentInitializer:es(this.recurrentInitializer),biasInitializer:es(this.biasInitializer),kernelRegularizer:vr(this.kernelRegularizer),recurrentRegularizer:vr(this.recurrentRegularizer),biasRegularizer:vr(this.biasRegularizer),activityRegularizer:vr(this.activityRegularizer),kernelConstraint:Qs(this.kernelConstraint),recurrentConstraint:Qs(this.recurrentConstraint),biasConstraint:Qs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}FF.className="GRUCell";ut(FF);class Vne extends Em{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new FF(e),super(e)}call(e,n){return Re(()=>{this.cell.dropoutMask!=null&&(bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Vne.className="GRU";ut(Vne);class DE extends $E{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,xi(this.units,"units"),this.activation=cm(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cm(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ur(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ur(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ur(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Hr(e.kernelRegularizer),this.recurrentRegularizer=Hr(e.recurrentRegularizer),this.biasRegularizer=Hr(e.biasRegularizer),this.kernelConstraint=ei(e.kernelConstraint),this.recurrentConstraint=ei(e.recurrentConstraint),this.biasConstraint=ei(e.biasConstraint),this.dropout=px([1,om([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=px([1,om([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Un(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;s=new(n=class extends Hc{apply(l,c){const u=i.apply([a]),d=new NF().apply([a]),h=i.apply([a*2]);return KW(KW(u,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Re(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Ee(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=um({ones:()=>ol(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=um({ones:()=>ol(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=Se(e,a[0]));let h=Rd(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Se(s,o[0])),h=ot(h,Rd(s,this.recurrentKernel.read())),this.useBias&&(h=Vu(h,this.bias.read()));const[f,m,y,v]=vo(h,4,h.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(m),u=ot(Se(c,i),Se(l,this.activation.apply(y))),d=this.recurrentActivation.apply(v);const x=Se(d,this.activation.apply(u));return[x,x,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:lm(this.activation),recurrentActivation:lm(this.recurrentActivation),useBias:this.useBias,kernelInitializer:es(this.kernelInitializer),recurrentInitializer:es(this.recurrentInitializer),biasInitializer:es(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:vr(this.kernelRegularizer),recurrentRegularizer:vr(this.recurrentRegularizer),biasRegularizer:vr(this.biasRegularizer),activityRegularizer:vr(this.activityRegularizer),kernelConstraint:Qs(this.kernelConstraint),recurrentConstraint:Qs(this.recurrentConstraint),biasConstraint:Qs(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}DE.className="LSTMCell";ut(DE);class Hne extends Em{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new DE(e),super(e)}call(e,n){return Re(()=>{this.cell.dropoutMask!=null&&(bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Hne.className="LSTM";ut(Hne);class zF extends $E{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Re(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),i.push(a.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){a$(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Zg(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(Vh(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return o$(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],i[a]])}OF(n)}}zF.className="StackedRNNCells";ut(zF);function um(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,a=()=>i!=null?i(e(),n):Lte(e(),n),o=()=>Zk(a,e,r);return!s||s<=1?Ks(o().clone()):Array(s).fill(void 0).map(o).map(c=>Ks(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var fEe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class qne extends Em{constructor(e){if(e.unroll)throw new xn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new xn("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ys({ndim:5})]}call(e,n){return Re(()=>{if(this.cell.dropoutMask!=null&&(bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Ee("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Re(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],a=ws(i);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){Re(()=>{if(!this.stateful)throw new bd("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new Ee("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ws(i)):this.states_=[ws(i)];else if(e==null)bn(this.states_),this.keptStates!=null&&(bn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ws(i)):this.states_[0]=ws(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ee(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):bn(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=i;if(!jn(l.shape,c))throw new Ee(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>Ks(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Pu(c,s[0],i,a[0],o[0]),h=Pu(u,s[1],i,a[1],o[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}qne.className="ConvRNN2D";class BF extends DE{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,xi(this.filters,"filters"),this.kernelSize=Bv(r,2,"kernelSize"),this.kernelSize.forEach(l=>xi(l,"kernelSize")),this.strides=Bv(s||1,2,"strides"),this.strides.forEach(l=>xi(l,"strides")),this.padding=i||"valid",ql(this.padding),this.dataFormat=a||"channelsLast",Ts(this.dataFormat),this.dilationRate=Bv(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>xi(l,"dilationRate"))}build(e){var n;e=Un(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Ee(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Hc{apply(h,f){const m=c.apply([u]),y=po([u]),v=c.apply([u*2]);return SF([m,y,v])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Re(()=>{if(e.length!==3)throw new Ee(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=um({ones:()=>ol(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ee,oe,W)=>!oe||!oe[W]?ee:Se(oe[W],ee);let u=c(s,l,0),d=c(s,l,1),h=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=um({ones:()=>ol(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const m=this.recurrentDropoutMask;let y=c(i,m,0),v=c(i,m,1),x=c(i,m,2),b=c(i,m,3);const _=3,[k,N,A,T]=vo(this.kernel.read(),o,_),[C,P,$,j]=this.useBias?vo(this.bias.read(),o):[null,null,null,null];u=this.inputConv(u,k,C,this.padding),d=this.inputConv(d,N,P,this.padding),h=this.inputConv(h,A,$,this.padding),f=this.inputConv(f,T,j,this.padding);const[O,F,B,Z]=vo(this.recurrentKernel.read(),o,_);y=this.recurrentConv(y,O),v=this.recurrentConv(v,F),x=this.recurrentConv(x,B),b=this.recurrentConv(b,Z);const V=this.recurrentActivation.apply(ot(u,y)),G=this.recurrentActivation.apply(ot(d,v)),U=ot(Se(G,a),Se(V,this.activation.apply(ot(h,x)))),K=Se(this.recurrentActivation.apply(ot(f,b)),this.activation.apply(U));return[K,K,U]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=fEe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=tf(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Vu(i,r,this.dataFormat):i}recurrentConv(e,n){return tf(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}BF.className="ConvLSTM2DCell";ut(BF);class Gne extends qne{constructor(e){const n=new BF(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Gne.className="ConvLSTM2D";ut(Gne);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class WF extends Nn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Zk(()=>Lte(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}WF.className="Dropout";ut(WF);class Kne extends WF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Kne.className="SpatialDropout1D";ut(Kne);class Xne extends Nn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,xi(this.units,"units"),this.activation=cm(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Ur(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ur(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ei(e.kernelConstraint),this.biasConstraint=ei(e.biasConstraint),this.kernelRegularizer=Hr(e.kernelRegularizer),this.biasRegularizer=Hr(e.biasRegularizer),this.activityRegularizer=Hr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Un(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Un(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e),s=Ate(this.activation.getClassName());let i;return s!=null?i=Rd(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=Rd(r,this.kernel.read()),this.bias!=null&&(i=Vu(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:lm(this.activation),useBias:this.useBias,kernelInitializer:es(this.kernelInitializer),biasInitializer:es(this.biasInitializer),kernelRegularizer:vr(this.kernelRegularizer),biasRegularizer:vr(this.biasRegularizer),activityRegularizer:vr(this.activityRegularizer),kernelConstraint:Qs(this.kernelConstraint),biasConstraint:Qs(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}Xne.className="Dense";ut(Xne);class Yne extends Nn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Un(e);for(const n of e.slice(1))if(n==null)throw new Ee(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],qp(e,1)]}call(e,n){return Re(()=>{this.invokeCallHook(e,n);let r=en(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=Pn(r,s)}return GIe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}Yne.className="Flatten";ut(Yne);class Zne extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.activation=cm(e.activation)}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e);return this.activation.apply(r)})}getConfig(){const e={activation:lm(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}Zne.className="Activation";ut(Zne);class Jne extends Nn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Re(()=>(e=en(e),HIe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}Jne.className="RepeatVector";ut(Jne);class Qne extends Nn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,a=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(a===null)a=l;else throw new Ee("Can only specifiy one unknown dimension.");else i*=c}const o=qp(e);if(a!==null){if(i===0||o%i!==0)throw new Ee(r);s[a]=o/i}else if(o!==i)throw new Ee(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Ie(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}Qne.className="Reshape";ut(Qne);class ere extends Nn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ru(1,e.dims.length+1);if(!jn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ys({ndim:this.dims.length+1})]}computeOutputShape(e){e=Un(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return Pn(en(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}ere.className="Permute";ut(ere);class tre extends Nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=en(e);return A2(C0(r,this.maskValue),-1)}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e),a=A2(C0(r,this.maskValue),-1,!0);return Se(r,bt(a,r.dtype))})}}tre.className="Masking";ut(tre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nre extends Nn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(tr(e.inputLength))}this.inputDim=e.inputDim,xi(this.inputDim,"inputDim"),this.outputDim=e.outputDim,xi(this.outputDim,"outputDim"),this.embeddingsInitializer=Ur(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Hr(e.embeddingsRegularizer),this.activityRegularizer=Hr(e.activityRegularizer),this.embeddingsConstraint=ei(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Re(()=>this.maskZero?(e=en(e),C0(e,On(e))):null)}computeOutputShape(e){if(e=Un(e),this.inputLength==null)return[...e,this.outputDim];const n=tr(this.inputLength);if(n.length!==e.length-1)throw new Ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new Ee(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Re(()=>{this.invokeCallHook(e,n);let r=en(e);r.dtype!=="int32"&&(r=Ld(r,"int32"));const s=Dte(this.embeddings.read(),Ie(r,[r.size]));return Ie(s,Un(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:es(this.embeddingsInitializer),embeddingsRegularizer:vr(this.embeddingsRegularizer),activityRegularizer:vr(this.activityRegularizer),embeddingsConstraint:Qs(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}nre.className="Embedding";ut(nre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ry extends Nn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new xn}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],a=n[s];if(i==null||a==null||i<0||a<0)r.push(null);else if(i===1)r.push(a);else if(a===1)r.push(i);else{if(i!==a)throw new Ee("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Un(e)]),e=e,e.length<2)throw new Ee(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Hp(n),n.length>1)throw new Ee(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Hp(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Re(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=om(s);for(let a of e){const o=a.rank;for(let l=0;l<i-o;++l)a=Xk(a,1);r.push(a)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=Ie(l,[d].concat(qp(u.slice(1))));f=Pn(f,[1,0]),f=Ie(f,h),r.push(f),i=!0}else if(c>1){const u=Ru(1,c).concat([0]);r.push(Pn(l,u)),i=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(i){if(o==null){const l=a.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));a=Ie(Pn(Ie(a,[-1,u]),[1,0]),d)}else if(o>1){const l=[o-1].concat(Ru(0,o-1));a=Pn(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Hp(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Re(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ee("`mask` should be an Array");if(!Array.isArray(e))throw new Ee("`inputs` should be an Array");if(n.length!==e.length)throw new Ee(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:la(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=Lu(r,n[s]);return r})}}class rre extends ry{constructor(e){super(e)}mergeFunction(e){return Re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ot(n,e[r]);return n})}}rre.className="Add";ut(rre);class sre extends ry{constructor(e){super(e)}mergeFunction(e){return Re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Se(n,e[r]);return n})}}sre.className="Multiply";ut(sre);class ire extends ry{constructor(e){super(e)}mergeFunction(e){return Re(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ot(n,e[r]);return Se(1/e.length,n)})}}ire.className="Average";ut(ire);class are extends ry{constructor(e){super(e)}mergeFunction(e){return Re(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Zd(n,e[r]);return n})}}are.className="Maximum";ut(are);class ore extends ry{constructor(e){super(e)}mergeFunction(e){return Re(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=am(n,e[r]);return n})}}ore.className="Minimum";ut(ore);class lre extends ry{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Ee("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let a=!1;for(const o of r)if(jn(o,i)){a=!0;break}a||r.push(i)}if(r.length>1)throw new Ee("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Re(()=>SF(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Ee("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Ee("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Ee("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Ee(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Re(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const s=[];for(let a=0;a<e.length;++a)n[a]==null?s.push(bt(ol(e[a]),"bool")):n[a].rank<e[a].rank?s.push(la(n[a],-1)):s.push(n[a]);const i=Ss(s,this.axis);return GA(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}lre.className="Concatenate";ut(lre);function M1(t,e){for(;t<0;)t+=e;return t}function pEe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new xn("batchDot is not implemented for tensors of 4D or higher rank yet");if(le(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),le(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new xn("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return Re(()=>{let a;if(r>s){a=r-s;const l=[];for(let c=0;c<a;++c)l.push(1);e=Ie(e,e.shape.concat(l))}else if(s>r){a=s-r;const l=[];for(let c=0;c<a;++c)l.push(1);t=Ie(t,t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=$t(Se(t,e),i[0]):o=$t(Se(Pn(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;o=kn(t,e,l,c)}if(a>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+a;++u)c.push(u);o=gf(o,c)}return o.shape.length===1&&(o=la(o,1)),o})}let cre=class extends ry{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){le(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new xn("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new Ee(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Ee(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>M1(i,e[a].shape.length)):s=[M1(this.axes,n.shape.length),M1(this.axes,r.shape.length)],this.normalize&&(n=B5(n,s[0]),r=B5(r,s[1])),pEe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[M1(this.axes,e.length),M1(this.axes,n.length)],r}computeOutputShape(e){le(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new xn("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};cre.className="Dot";ut(cre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ure extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e);return Zk(()=>ot(IE(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}ure.className="GaussianNoise";ut(ure);class dre extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Re(()=>{this.invokeCallHook(e,n);const r=en(e);return this.rate>0&&this.rate<1?Zk(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return Se(r,IE(r.shape,1,i))},()=>r,n.training||!1):r})}}dre.className="GaussianDropout";ut(dre);class hre extends Nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||en(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Re(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Zk(()=>{const i=en(e),o=-1.6732632423543772*1.0507009873554805;let l=pf(Am(r),this.rate);l=Ld(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,u=-c*o*this.rate,d=ot(Se(i,l),Se(ot(l,-1),o));return ot(Se(d,c),u)},()=>en(e),n.training||!1)}return e})}}hre.className="AlphaDropout";ut(hre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function L2(t,e,n,r,s,i=.001){let a;if(t.rank===2)a=UR(t,e,n,r,s,i);else if(t.rank===3)a=VR(t,e,n,r,s,i);else if(t.rank===4)a=HR(t,e,n,r,s,i);else throw new xn(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function mEe(t,e,n,r,s=.001){return Re(()=>{const i=Mk(t,r),a=i.mean,o=i.variance;return[L2(t,a,o,n,e,s),a,o]})}function gEe(t,e,n,r,s=.001){return Re(()=>{const i=Mk(t,r),a=i.mean,o=i.variance,l=[];for(const m of Ru(0,t.rank))r.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);const c=Ie(a,l),u=Ie(o,l),d=e==null?null:Ie(e,l),h=n==null?null:Ie(n,l);return[L2(t,c,u,h,d,s),a,o]})}function yEe(t,e,n,r,s=.001){return jn(r.slice().sort(),Ru(0,t.rank-1))?mEe(t,e,n,r,s):gEe(t,e,n,r,s)}class fre extends Nn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ur(e.betaInitializer||"zeros"),this.gammaInitializer=Ur(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ur(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ur(e.movingVarianceInitializer||"ones"),this.betaConstraint=ei(e.betaConstraint),this.gammaConstraint=ei(e.gammaConstraint),this.betaRegularizer=Hr(e.betaRegularizer),this.gammaRegularizer=Hr(e.gammaRegularizer)}build(e){e=Un(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Ee(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ys({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Re(()=>{const r=n.training==null?!1:n.training,s=en(e),i=s.shape,a=i.length,o=Ru(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=A0(1,a);c[l]=i[l];const u=o.slice();u.sort();const d=!jn(u,Ru(0,a).slice(0,a-1)),h=()=>{if(d){const b=Ie(this.movingMean.read(),c),_=Ie(this.movingVariance.read(),c),k=this.center?Ie(this.beta.read(),c):null,N=this.scale?Ie(this.gamma.read(),c):null;return L2(s,b,_,k,N,this.epsilon)}else return L2(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[f,m,y]=yEe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),v=(b,_,k)=>{Re(()=>{const N=1-k,A=b.read(),T=Se(At(A,_),N);b.write(At(A,T))})};return(()=>{v(this.movingMean,m,this.momentum),v(this.movingVariance,y,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:es(this.betaInitializer),gammaInitializer:es(this.gammaInitializer),movingMeanInitializer:es(this.movingMeanInitializer),movingVarianceInitializer:es(this.movingVarianceInitializer),betaRegularizer:vr(this.betaRegularizer),gammaRegularizer:vr(this.gammaRegularizer),betaConstraint:Qs(this.betaConstraint),gammaConstraint:Qs(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}fre.className="BatchNormalization";ut(fre);class pre extends Nn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ur(e.betaInitializer||"zeros"),this.gammaInitializer=Ur(e.gammaInitializer||"ones"),this.betaRegularizer=Hr(e.betaRegularizer),this.gammaRegularizer=Hr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Un(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Hp(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=en(e),s=r.shape,i=s.length;return Re(()=>{let{mean:o,variance:l}=Mk(r,this.axis,!0);const c=A0(1,i);for(const y of this.axis)c[y]=s[y];const u=y=>y!=null&&y.shape.length!==i?Ie(y,c):y;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],m=[];for(let y=0;y<i;++y)this.axis.indexOf(y)!==-1?(f.push(s[y]),m.push(1)):(f.push(1),m.push(s[y]));return o=El(o,f),l=El(l,f),d!=null&&(d=El(d,m)),h!=null&&(h=El(h,m)),L2(r,o,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:es(this.betaInitializer),gammaInitializer:es(this.gammaInitializer),betaRegularizer:vr(this.betaRegularizer),gammaRegularizer:vr(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}pre.className="LayerNormalization";ut(pre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vEe(t,e,n){return Re(()=>{if(t.rank!==4)throw new Ee(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ee("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Mu()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ee(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],mf(t,r)})}class mre extends Nn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Mu():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Ee(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Ee(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Ee(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ys({ndim:4})]}computeOutputShape(e){e=Un(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Re(()=>vEe(en(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}mre.className="ZeroPadding2D";ut(mre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LE(t,e,n,r,s,i){return Re(()=>{Ts(s),Pte(i),ql(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=Mu()),i==null&&(i="max"),t=RF(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=Rk(t,e,n,o):a=Ak(t,e,n,o),s==="channelsFirst"&&(a=Pn(a,[0,3,1,2])),a})}function gre(t,e,n,r,s,i){return Re(()=>{Ts(s),Pte(i),ql(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Mu()),i==null&&(i="max"),t=jne(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=pM(t,e,n,o):a=WR(t,e,n,o),s==="channelsFirst"&&(a=Pn(a,[0,4,1,2,3])),a})}class yre extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Ee(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(xi(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Ee(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);xi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ql(this.padding),this.inputSpec=[new Ys({ndim:3})]}computeOutputShape(e){e=Un(e);const n=Pu(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Re(()=>{this.invokeCallHook(e,n),e=Xk(en(e),2);const r=this.poolingFunction(en(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return gf(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class vre extends yre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),LE(e,n,r,s,i,"max")}}vre.className="MaxPooling1D";ut(vre);class xre extends yre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),LE(e,n,r,s,i,"avg")}}xre.className="AveragePooling1D";ut(xre);class bre extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Ee(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];xi(this.poolSize,"poolSize"),xi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ts(this.dataFormat),ql(this.padding),this.inputSpec=[new Ys({ndim:4})]}computeOutputShape(e){e=Un(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Pu(n,this.poolSize[0],this.padding,this.strides[0]),r=Pu(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Re(()=>(this.invokeCallHook(e,n),this.poolingFunction(en(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class wre extends bre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),LE(e,n,r,s,i,"max")}}wre.className="MaxPooling2D";ut(wre);class _re extends bre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),LE(e,n,r,s,i,"avg")}}_re.className="AveragePooling2D";ut(_re);class kre extends Nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Ee(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];xi(this.poolSize,"poolSize"),xi(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ts(this.dataFormat),ql(this.padding),this.inputSpec=[new Ys({ndim:5})]}computeOutputShape(e){e=Un(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Pu(n,this.poolSize[0],this.padding,this.strides[0]),r=Pu(r,this.poolSize[1],this.padding,this.strides[1]),s=Pu(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return Re(()=>(this.invokeCallHook(e,n),this.poolingFunction(en(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Sre extends kre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),gre(e,n,r,s,i,"max")}}Sre.className="MaxPooling3D";ut(Sre);class Nre extends kre{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Ts(i),ql(s),gre(e,n,r,s,i,"avg")}}Nre.className="AveragePooling3D";ut(Nre);class Cre extends Nn{constructor(e){super(e),this.inputSpec=[new Ys({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new xn}}class Tre extends Cre{constructor(e){super(e||{})}call(e,n){return Re(()=>{const r=en(e);return Jr(r,1)})}}Tre.className="GlobalAveragePooling1D";ut(Tre);class Ire extends Cre{constructor(e){super(e||{})}call(e,n){return Re(()=>{const r=en(e);return Dl(r,1)})}}Ire.className="GlobalMaxPooling1D";ut(Ire);class Are extends Nn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ts(this.dataFormat),this.inputSpec=[new Ys({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new xn}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Ere extends Are{call(e,n){return Re(()=>{const r=en(e);return this.dataFormat==="channelsLast"?Jr(r,[1,2]):Jr(r,[2,3])})}}Ere.className="GlobalAveragePooling2D";ut(Ere);class Pre extends Are{call(e,n){return Re(()=>{const r=en(e);return this.dataFormat==="channelsLast"?Dl(r,[1,2]):Dl(r,[2,3])})}}Pre.className="GlobalMaxPooling2D";ut(Pre);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ore extends Nn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=Vh(s,r);delete n.layer;const a={layer:i};return Object.assign(a,n),new e(a)}}class jre extends Ore{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Un(e),e.length<3)throw new Ee(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Un(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return Re(()=>(e=en(e),Wne((a,o)=>[en(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}jre.className="TimeDistributed";ut(jre);function xEe(t){ny(zIe,"BidirectionalMergeMode",t)}const bEe="concat";class $re extends Ore{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Vh(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Vh(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?bEe:e.mergeMode,xEe(this.mergeMode),e.weights)throw new xn("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):fo(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=Bne(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new Ee("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const u=r.map(d=>new Ys({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),o.push(...u)}if(s!=null)throw new xn("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof Vd;for(const c of a)if(c instanceof Vd!==l)throw new Ee("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return Re(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Fl(i,1));let o;return this.mergeMode==="concat"?o=SF([s,i]):this.mergeMode==="sum"?o=ot(s,i):this.mergeMode==="ave"?o=Se(.5,ot(s,i)):this.mergeMode==="mul"?o=Se(s,i):this.mergeMode==null&&(o=[s,i]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Zg(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Zg(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Vh(n.layer);if(delete n.layer,n.numConstants!=null)throw new xn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}$re.className="Bidirectional";ut($re);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dre extends Nn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Re(()=>(e=en(e),e.dtype!=="float32"&&(e=Ld(e,"float32")),ot(Se(e,this.scale),this.offset)))}}Dre.className="Rescaling";ut(Dre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:wEe,cropAndResize:_Ee}=Sc;class Lre extends Nn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,a,o,l){return Re(()=>{let c,u=!1;const d=n/a,h=r/o,f=(s+n)/a,m=(i+r)/o,y=[d,h,f,m],v=[];e.rank===3?(u=!0,c=ko([e])):c=e;for(let N=0;N<c.shape[0];N++)v.push(y);const x=Oc(v,[v.length,4]),b=T0(0,v.length,1,"int32"),k=_Ee(c,x,b,[s,i],"nearest");return Ld(u?en(zl(k)):k,l)})}upsize(e,n,r,s){return Re(()=>{const i=wEe(e,[n,r]);return Ld(i,s)})}call(e,n){return Re(()=>{const r=en(e),s=r.dtype,i=r.shape,a=i[i.length-3],o=i[i.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Un(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}Lre.className="CenterCrop";ut(Lre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kEe(t,e,n,r){let s=en(t);if(s.dtype!=="int32"&&(s=Ld(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=la(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=la(s,-1)),s.rank>2)throw new Ee(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const a=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=L5(o,r,n,a):l=L5(o,[],n,a),e!=="tfIdf")return l;if(r)return Se(l,r);throw new Ee("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rre extends Nn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Un(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Re(()=>{e=en(e),e.dtype!=="int32"&&(e=Ld(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Ee(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=en(n.countWeights)}const s=Dl(e),i=cx(e),a=Io(this.numTokens,s).bufferSync().get(0),o=pf(i,0).bufferSync().get(0);if(!(a&&o))throw new Ee(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return kEe(e,this.outputMode,this.numTokens,r)})}}Rre.className="CategoryEncoding";ut(Rre);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const SEe=["bilinear","nearest"],hU=new Set(SEe);class Mre extends Nn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(hU.has(e.interpolation))this.interpolation=e.interpolation;else throw new Ee(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Un(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Re(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Sc.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Sc.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...hU]} are supported`)})}}Mre.className="Resizing";ut(Mre);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fre{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Fre.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zre extends Nn{constructor(e){super(e),this.randomGenerator=new Fre(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}zre.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const NEe=["bilinear","nearest"],fU=new Set(NEe);class Bre extends zre{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ee(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ee(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ee(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(fU.has(r))this.interpolation=r;else throw new Ee(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Un(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Re(()=>{const r=en(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Am([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Sc.resizeBilinear(e,a);case"nearest":return Sc.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...fU]} are supported`)}})}}Bre.className="RandomWidth";ut(Bre);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEe=We();CEe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Ho;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Ho||(Ho={}));var pU;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(pU||(pU={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TEe={};function Wre(t){return TEe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const o=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd,c=o<0?e.inputNames.length+o:o;if(i.type==="tensor")return Ri(e.inputNames[c],n,r,s);if(i.type==="tensors"){const h=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((m,y)=>{var v;return((v=h[y])===null||v===void 0?void 0:v.op)!=="NoOp"}).map(m=>Ri(m,n,r,s))}const u=Ri(e.inputNames[c],n,r,s),d=u.dataSync();return i.type==="number"?d[0]:Pc(u.shape,d)}const a=e.attrParams[t];return a&&a.value}function Ri(t,e,n,r){const[s,i]=qo(t,n);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const a=n.currentContextIds.find(o=>!!e[q5(s,o)]);return a!==void 0?e[q5(s,a)][i]:void 0}function mU(t,e,n){return e[q5(t,n.currentContextId)]}function Ah(t,e){const[n,r,s]=qo(t,e);return[q5(n,e&&e.currentContextId),r,s]}function q5(t,e){return e?`${t}-${e}`:t}function qo(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],a=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[i,o,a]}return n&&e.parseNodeNameCache.set(t,s),s}function NC(t,e,n){let r=q("pad",t,e,n);if(r==="explicit"){r=q("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Eh(t){return t.kept?t:$d(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IEe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],AEe=Object.freeze(Object.defineProperty({__proto__:null,json:IEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EEe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],PEe=Object.freeze(Object.defineProperty({__proto__:null,json:EEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OEe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],jEe=Object.freeze(Object.defineProperty({__proto__:null,json:OEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ee=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],DEe=Object.freeze(Object.defineProperty({__proto__:null,json:$Ee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],REe=Object.freeze(Object.defineProperty({__proto__:null,json:LEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MEe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],FEe=Object.freeze(Object.defineProperty({__proto__:null,json:MEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zEe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],BEe=Object.freeze(Object.defineProperty({__proto__:null,json:zEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],UEe=Object.freeze(Object.defineProperty({__proto__:null,json:WEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VEe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],HEe=Object.freeze(Object.defineProperty({__proto__:null,json:VEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qEe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],GEe=Object.freeze(Object.defineProperty({__proto__:null,json:qEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KEe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],XEe=Object.freeze(Object.defineProperty({__proto__:null,json:KEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YEe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],ZEe=Object.freeze(Object.defineProperty({__proto__:null,json:YEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JEe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],QEe=Object.freeze(Object.defineProperty({__proto__:null,json:JEe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ePe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],tPe=Object.freeze(Object.defineProperty({__proto__:null,json:ePe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nPe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],rPe=Object.freeze(Object.defineProperty({__proto__:null,json:nPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sPe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],iPe=Object.freeze(Object.defineProperty({__proto__:null,json:sPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aPe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],oPe=Object.freeze(Object.defineProperty({__proto__:null,json:aPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lPe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],cPe=Object.freeze(Object.defineProperty({__proto__:null,json:lPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uPe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],dPe=Object.freeze(Object.defineProperty({__proto__:null,json:uPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gU{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[AEe,PEe,jEe,DEe,REe,FEe,BEe,UEe,HEe,GEe,XEe,ZEe,QEe,tPe,rPe,iPe,oPe,cPe,dPe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],a=[],o=r.reduce((y,v)=>(y[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?s.push(y[v.name]):v.op==="Const"?i.push(y[v.name]):(v.input==null||v.input.length===0)&&a.push(y[v.name]),y),{});let l=[];const c=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(o);h.forEach(y=>{const v=o[y];v.inputNames.forEach((x,b)=>{const[_,,k]=Ah(x),N=o[_];if(N.outputs!=null){const A=N.outputs.indexOf(k);if(A!==-1){const T=`${_}:${A}`;v.inputNames[b]=T}}v.inputs.push(N),N.children.push(v)})}),Object.keys(d).length===0?h.forEach(y=>{const v=o[y];v.children.length===0&&c.push(v)}):Object.keys(d).forEach(y=>{const[v]=Ah(y),x=o[v];x!=null&&(x.signatureKey=d[y],c.push(x))}),Object.keys(u).length>0?Object.keys(u).forEach(y=>{const[v]=Ah(y),x=o[v];x&&(x.signatureKey=u[y],l.push(x))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((y,v)=>(y[v.signature.name]=this.mapFunction(v),y),{}));const m={nodes:o,inputs:l,outputs:c,weights:i,placeholders:s,signature:n,functions:f};return a.length>0&&(m.initNodes=a),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=Wre(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const a=i.type;let o;switch(i.type){case"string":o=f$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=f$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":o=b$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=b$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":o=m$(e.attr,i.tfName,i.defaultValue||0),o===void 0&&i.tfDeprecatedName&&(o=m$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":o=x$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=x$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":o=p$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=p$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":o=_$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=_$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":o=v$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=v$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":o=w$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=w$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":o=g$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=g$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":o=y$(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=y$(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":o=yU(e.attr,i.tfName,i.defaultValue),o===void 0&&i.tfDeprecatedName&&(o=yU(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:o,type:a},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&s.push(d[h.name]),d),{}));const a=[],o=[];e.signature.inputArg.forEach(d=>{const[h]=Ah(d.name),f={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:UF(d.type),type:"dtype"}},children:[]};f.signatureKey=d.name,a.push(f),i[h]=f}),Object.keys(i).forEach(d=>{const h=i[d];h.inputNames.forEach((f,m)=>{const[y,,v]=Ah(f),x=i[y];if(x.outputs!=null){const b=x.outputs.indexOf(v);if(b!==-1){const _=`${y}:${b}`;h.inputNames[m]=_}}h.inputs.push(x),x.children.push(h)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[h,f]=Ah(c[d.name]),m=i[h];m!=null&&(m.defaultOutput=f,o.push(m))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:o,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function hPe(t){const e=We().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Ure(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):hPe(t);return e?n:n.toLowerCase()}function f$(t,e,n,r=!1){const s=t[e];return s!=null?Ure(s.s,r):n}function p$(t,e,n){const r=t[e];return r?r.b:n}function m$(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function UF(t){switch(typeof t=="string"&&(t=Ho[t]),t){case Ho.DT_FLOAT:case Ho.DT_HALF:return"float32";case Ho.DT_INT32:case Ho.DT_INT64:case Ho.DT_INT8:case Ho.DT_UINT8:return"int32";case Ho.DT_BOOL:return"bool";case Ho.DT_DOUBLE:return"float32";case Ho.DT_STRING:return"string";case Ho.DT_COMPLEX64:case Ho.DT_COMPLEX128:return"complex64";default:return null}}function yU(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function g$(t,e,n){const r=t[e];return r&&r.type?UF(r.type):n}function y$(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>UF(s)):n}function Vre(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function v$(t,e,n){const r=t[e];return r&&r.shape?Vre(r.shape):n}function x$(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function b$(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>Ure(i,r)):n}function w$(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>Vre(s)):n}function _$(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fPe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return Ri(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Ri(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return m$(this.node.rawAttrs,e,n);if(r.s!=null)return f$(this.node.rawAttrs,e,n);if(r.b!=null)return p$(this.node.rawAttrs,e,n);if(r.shape!=null)return v$(this.node.rawAttrs,e,n);if(r.type!=null)return g$(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return x$(this.node.rawAttrs,e,n);if(r.list.s!=null)return b$(this.node.rawAttrs,e,n);if(r.list.shape!=null)return w$(this.node.rawAttrs,e,n);if(r.list.b!=null)return _$(this.node.rawAttrs,e,n);if(r.list.type!=null)return y$(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gi=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:TR,abs:js,acos:jR,acosh:$R,add:ot,addN:FQ,all:GA,any:A2,argMax:S0,argMin:DR,asin:LR,asinh:RR,atan:MR,atan2:FR,atanh:zR,avgPool:Ak,avgPool3d:WR,basicLSTMCell:zQ,batchNorm:Fb,batchNorm2d:UR,batchNorm3d:VR,batchNorm4d:HR,batchToSpaceND:Ek,bincount:qR,bitwiseAnd:BQ,booleanMaskAsync:Nee,broadcastArgs:WQ,broadcastTo:Yg,buffer:yn,cast:bt,ceil:GR,clipByValue:wo,clone:$d,complex:ef,concat:Ss,concat1d:KR,concat2d:XR,concat3d:YR,concat4d:ZR,conv1d:KA,conv2d:tf,conv2dTranspose:XA,conv3d:QR,conv3dTranspose:eM,cos:Pk,cosh:YA,cosineWindow:vE,cumprod:O2,cumsum:ZA,denseBincount:L5,depthToSpace:tM,depthwiseConv2d:zb,diag:VQ,dilation2d:nM,div:Wt,divNoNan:rM,dot:sM,dropout:RM,einsum:Ag,elu:Bb,enclosingPowerOfTwo:MM,ensureShape:HQ,equal:Lc,erf:JA,euclideanNorm:aM,exp:_o,expandDims:la,expm1:oM,eye:QA,fft:Uk,fill:Z0,floor:Ub,floorDiv:qA,fused:$ee,gather:Vb,gatherND:Aee,greater:Io,greaterEqual:pf,ifft:fx,imag:Ok,image:Sc,inTopKAsync:Eee,irfft:pE,isFinite:lM,isInf:cM,isNaN:uM,leakyRelu:jk,less:ux,lessEqual:Im,linalg:VM,linspace:KQ,localResponseNormalization:dM,log:al,log1p:$k,logSigmoid:hM,logSoftmax:eE,logSumExp:Dk,logicalAnd:Lu,logicalNot:Lk,logicalOr:tE,logicalXor:fM,losses:Bee,lowerBound:YQ,matMul:kn,max:Dl,maxPool:Rk,maxPool3d:pM,maxPoolWithArgmax:ZQ,maximum:Zd,mean:Jr,meshgrid:JQ,min:cx,minimum:am,mirrorPad:mM,mod:gM,moments:Mk,movingAverage:Cee,mul:Se,multiRNNCell:QQ,multinomial:eee,neg:Cr,norm:Wb,notEqual:C0,oneHot:rE,ones:po,onesLike:ol,op:be,outerProduct:tee,pad:mf,pad1d:nee,pad2d:ree,pad3d:see,pad4d:iee,pool:yM,pow:Wd,prelu:zk,print:OR,prod:vM,raggedGather:aee,raggedRange:oee,raggedTensorToTensor:lee,rand:cee,randomGamma:dee,randomNormal:iE,randomStandardNormal:hee,randomUniform:Am,randomUniformInt:fee,range:T0,real:dx,reciprocal:CM,relu:Uu,relu6:aE,reshape:Ie,reverse:Fl,reverse1d:pee,reverse2d:mee,reverse3d:gee,reverse4d:yee,rfft:Vk,round:oE,rsqrt:lE,scalar:qt,scatterND:Tee,searchSorted:nE,selu:cE,separableConv2d:uE,setdiff1dAsync:vee,sigmoid:Eu,sign:TM,signal:zee,sin:dE,sinh:hE,slice:Tn,slice1d:Bk,slice2d:fE,slice3d:Wk,slice4d:hx,softmax:Hb,softplus:J0,spaceToBatchND:Fk,sparse:Wee,sparseToDense:Iee,spectral:Fee,split:vo,sqrt:_i,square:hr,squaredDifference:mE,squeeze:gf,stack:ko,step:ey,stridedSlice:IM,string:Uee,sub:At,sum:$t,tan:AM,tanh:im,tensor:Oc,tensor1d:ca,tensor2d:Fv,tensor3d:EM,tensor4d:xee,tensor5d:bee,tensor6d:wee,tensorScatterUpdate:kee,tile:El,topk:OM,transpose:Pn,truncatedNormal:gE,unique:jM,unsortedSegmentSum:yE,unstack:zl,upperBound:See,variable:$M,where:Bi,whereAsync:LM,zeros:ws,zerosLike:On},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=(t,e,n,r=Gi)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(q("a",t,e,n),q("b",t,e,n))];case"AddN":return[r.addN(q("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(q("a",t,e,n),q("b",t,e,n))];case"Mul":return[r.mul(q("a",t,e,n),q("b",t,e,n))];case"RealDiv":case"Div":return[r.div(q("a",t,e,n),q("b",t,e,n))];case"DivNoNan":return[r.divNoNan(q("a",t,e,n),q("b",t,e,n))];case"FloorDiv":return[r.floorDiv(q("a",t,e,n),q("b",t,e,n))];case"Sub":return[r.sub(q("a",t,e,n),q("b",t,e,n))];case"Minimum":return[r.minimum(q("a",t,e,n),q("b",t,e,n))];case"Maximum":return[r.maximum(q("a",t,e,n),q("b",t,e,n))];case"Pow":return[r.pow(q("a",t,e,n),q("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(q("a",t,e,n),q("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPe=(t,e,n,r=Gi)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(q("x",t,e,n))];case"Acos":return[r.acos(q("x",t,e,n))];case"Acosh":return[r.acosh(q("x",t,e,n))];case"Asin":return[r.asin(q("x",t,e,n))];case"Asinh":return[r.asinh(q("x",t,e,n))];case"Atan":return[r.atan(q("x",t,e,n))];case"Atan2":return[r.atan2(q("x",t,e,n),q("y",t,e,n))];case"Atanh":return[r.atanh(q("x",t,e,n))];case"Ceil":return[r.ceil(q("x",t,e,n))];case"Complex":return[r.complex(q("real",t,e,n),q("imag",t,e,n))];case"Cos":return[r.cos(q("x",t,e,n))];case"Cosh":return[r.cosh(q("x",t,e,n))];case"Elu":return[r.elu(q("x",t,e,n))];case"Erf":return[r.erf(q("x",t,e,n))];case"Exp":return[r.exp(q("x",t,e,n))];case"Expm1":return[r.expm1(q("x",t,e,n))];case"Floor":return[r.floor(q("x",t,e,n))];case"Log":return[r.log(q("x",t,e,n))];case"Log1p":return[r.log1p(q("x",t,e,n))];case"Imag":return[r.imag(q("x",t,e,n))];case"Neg":return[r.neg(q("x",t,e,n))];case"Reciprocal":return[r.reciprocal(q("x",t,e,n))];case"Real":return[r.real(q("x",t,e,n))];case"Relu":return[r.relu(q("x",t,e,n))];case"Round":return[r.round(q("x",t,e,n))];case"Selu":return[r.selu(q("x",t,e,n))];case"Sigmoid":return[r.sigmoid(q("x",t,e,n))];case"Sin":return[r.sin(q("x",t,e,n))];case"Sign":return[r.sign(q("x",t,e,n))];case"Sinh":return[r.sinh(q("x",t,e,n))];case"Softplus":return[r.softplus(q("x",t,e,n))];case"Sqrt":return[r.sqrt(q("x",t,e,n))];case"Square":return[r.square(q("x",t,e,n))];case"Tanh":return[r.tanh(q("x",t,e,n))];case"Tan":return[r.tan(q("x",t,e,n))];case"ClipByValue":return[r.clipByValue(q("x",t,e,n),q("clipValueMin",t,e,n),q("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(q("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Ri(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(q("x",t,e,n),q("alpha",t,e,n))];case"Prelu":return[r.prelu(q("x",t,e,n),q("alpha",t,e,n))];case"IsNan":return[r.isNaN(Ri(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Ri(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Ri(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){le(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];le(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function vU(t){return!(typeof t=="number"||t.some(e=>e<0))}function F1(t,e,n){let r=k$(t,n);const s=!vU(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=k$(i.shape,r)}),!vU(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function k$(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gPe{constructor(e,n,r,s,i,a,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=qt(0),Ks(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),gc(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Ks(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Oc([],[0].concat(this.elementShape));const r=this.readMany(e);return gc(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ko(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Oc([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return gc(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Ss(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,zl(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,a=[];Re(()=>{n=Ie(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],d=[1,e[l],i];a[l]=Ie(Tn(n,u,d),this.elementShape)}return a});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E0{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);gc(n,i.shape,"TensorList shape mismatch: "),Ks(i)}),this.idTensor=qt(0),this.maxNumElements=s,Ks(this.idTensor)}copy(){return new E0([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);gc(e,this.elementShape,"TensorList shape mismatch: ");const s=F1(this.elementShape,this.tensors,e);return Re(()=>{const i=this.tensors.map(a=>Ie(a,s));return ko(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=F1(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,gc(s.shape,e,"TensorList shape mismatch: "),Ie(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(gc(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ks(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new E0([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);gc(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=F1(this.elementShape,this.tensors,n);return Ie(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);gc(this.elementShape,n.shape,"TensorList shape mismatch: "),Ks(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);gc(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=F1(this.elementShape,this.tensors,r);return e.length===0?Oc([],[0].concat(s)):Re(()=>{const i=e.map(a=>Ie(this.tensors[a],s));return ko(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);gc(this.elementShape,n,"TensorList shape mismatch: ");const r=F1(this.elementShape,this.tensors,n);return this.size()===0?Oc([],[0].concat(r)):Re(()=>{const s=this.tensors.map(i=>Ie(i,r));return Ss(s,0)})}}function yPe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);gc(s,e,"TensorList shape mismatch: ");const i=zl(t);return new E0(i,e,r)}function vPe(t,e,n,r){return new E0([],t,e,r)}function xPe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new E0([],n,t.dtype,r),a=zl(t,0);return e.forEach((o,l)=>{i.setItem(o,a[l])}),i}function bPe(t,e,n){let r=0;const s=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),a=k$(i,n),o=r===0?0:t.size/r,l=Re(()=>{const u=[];t=Ie(t,[1,r,o]);for(let d=0;d<e.length;++d){const f=[0,d===0?0:s[d-1],0],m=[1,e[d],o];u[d]=Ie(Tn(t,f,m),a)}return t.dispose(),u}),c=new E0([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wPe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=q("thenBranch",t,e,n),s=q("elseBranch",t,e,n),i=q("cond",t,e,n),a=q("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=q("body",t,e,n),s=q("cond",t,e,n),i=q("args",t,e,n),a=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(u=>u.id);let l=await a[0].data();a.forEach(u=>{!u.kept&&o.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(f=>f.id);u.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const h=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(f=>{!f.kept&&o.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return c}case"LoopCond":{const r=q("pred",t,e,n);return[Eh(r)]}case"Switch":{const r=q("pred",t,e,n);let s=q("data",t,e,n);return s.kept||(s=Eh(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>Ri(s,e,n)!==void 0);if(r){const s=Ri(r,e,n);return[Eh(s)]}return}case"Enter":{const r=q("frameName",t,e,n),s=q("tensor",t,e,n);return n.enterFrame(r),[Eh(s)]}case"Exit":{const r=q("tensor",t,e,n);return n.exitFrame(),[Eh(r)]}case"NextIteration":{const r=q("tensor",t,e,n);return n.nextIteration(),[Eh(r)]}case"TensorArrayV3":{const r=q("size",t,e,n),s=q("dtype",t,e,n),i=q("elementShape",t,e,n),a=q("dynamicSize",t,e,n),o=q("clearAfterRead",t,e,n),l=q("identicalElementShapes",t,e,n),c=q("name",t,e,n),u=new gPe(c,s,r,i,l,a,o);return n.addTensorArray(u),[u.idTensor,qt(1)]}case"TensorArrayWriteV3":{const r=q("tensorArrayId",t,e,n),s=q("index",t,e,n),i=q("tensor",t,e,n),a=n.getTensorArray(r.id);return a.write(s,i),[a.idTensor]}case"TensorArrayReadV3":{const r=q("tensorArrayId",t,e,n),s=q("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=q("tensorArrayId",t,e,n),s=q("indices",t,e,n),i=q("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=q("tensorArrayId",t,e,n),s=q("indices",t,e,n),i=q("tensor",t,e,n),a=n.getTensorArray(r.id);return a.scatter(s,i),[a.idTensor]}case"TensorArrayConcatV3":{const r=q("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=q("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=q("tensorArrayId",t,e,n),s=q("tensor",t,e,n),i=q("lengths",t,e,n),a=n.getTensorArray(r.id);return a.split(i,s),[a.idTensor]}case"TensorArraySizeV3":{const r=q("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[qt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=q("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=q("tensorListId",t,e,n),s=q("index",t,e,n),i=q("tensor",t,e,n),a=n.getTensorList(r.id);return a.setItem(s,i),[a.idTensor]}case"TensorListGetItem":{const r=q("tensorListId",t,e,n),s=q("index",t,e,n),i=q("elementShape",t,e,n),a=q("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=q("indices",t,e,n),s=q("tensor",t,e,n),i=q("elementShape",t,e,n),a=q("numElements",t,e,n),o=xPe(s,r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=q("elementShape",t,e,n),s=q("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const a=q(i,t,e,n),o=t.op==="TensorListReserve"?-1:a,l=vPe(r,s,a,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=q("tensorListId",t,e,n),s=q("indices",t,e,n),i=q("elementShape",t,e,n),a=q("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,a,i)]}case"TensorListStack":{const r=q("tensorListId",t,e,n),s=q("elementShape",t,e,n),i=q("elementDType",t,e,n),a=q("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,a)]}case"TensorListFromTensor":{const r=q("tensor",t,e,n),s=q("elementShape",t,e,n),i=q("elementDType",t,e,n),a=yPe(r,s,i);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=q("tensorListId",t,e,n),s=n.getTensorList(r.id),i=q("dtype",t,e,n),a=q("elementShape",t,e,n);return[s.concat(i,a)]}case"TensorListPushBack":{const r=q("tensorListId",t,e,n),s=q("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=q("tensorListId",t,e,n),s=q("elementShape",t,e,n),i=q("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=q("tensor",t,e,n),s=q("elementShape",t,e,n),i=q("lengths",t,e,n),a=bPe(r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=q("tensorListId",t,e,n),s=n.getTensorList(r.id);return[qt(s.size(),"int32")]}case"TensorListResize":{const r=q("tensorListId",t,e,n),s=q("size",t,e,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xU(t,e,n){const[r,s]=q("fusedOps",t,e,n),i=r==="biasadd",a=!i,o=s==="prelu",l=r==="fusedbatchnorm",c=q("numArgs",t,e,n);if(i){if(o&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=q("strides",t,e,n),d=NC(t,e,n),h=q("dataFormat",t,e,n).toUpperCase(),f=q("dilations",t,e,n);let[m,y]=q("args",t,e,n);a&&(y=m,m=void 0);const v=q("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:h,dilations:f,biasArg:m,preluArg:y,activationFunc:s,leakyreluAlpha:v}}const _Pe=(t,e,n,r=Gi)=>{switch(t.op){case"Conv1D":{const s=q("stride",t,e,n),i=q("pad",t,e,n),a=q("dataFormat",t,e,n).toUpperCase(),o=q("dilation",t,e,n);return[r.conv1d(q("x",t,e,n),q("filter",t,e,n),s,i,a,o)]}case"Conv2D":{const s=q("strides",t,e,n),i=NC(t,e,n),a=q("dataFormat",t,e,n).toUpperCase(),o=q("dilations",t,e,n);return[r.conv2d(q("x",t,e,n),q("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=xU(t,e,n);return[r.fused.conv2d({x:q("x",t,e,n),filter:q("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:a,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=xU(t,e,n);return[r.fused.depthwiseConv2d({x:q("x",t,e,n),filter:q("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:a,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=q("outputShape",t,e,n),i=q("strides",t,e,n),a=NC(t,e,n);return[r.conv2dTranspose(q("x",t,e,n),q("filter",t,e,n),s,[i[1],i[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=q("strides",t,e,n),i=NC(t,e,n),a=q("dilations",t,e,n),o=q("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(q("input",t,e,n),q("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"Conv3D":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("dataFormat",t,e,n).toUpperCase(),o=q("dilations",t,e,n);return[r.conv3d(q("x",t,e,n),q("filter",t,e,n),[s[1],s[2],s[3]],i,a,[o[1],o[2],o[3]])]}case"AvgPool":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("kernelSize",t,e,n);return[r.avgPool(q("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("kernelSize",t,e,n);return[r.maxPool(q("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("kernelSize",t,e,n),o=q("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(q("x",t,e,n),[a[1],a[2]],[s[1],s[2]],i,o);return[l,c]}case"AvgPool3D":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("kernelSize",t,e,n);return[r.avgPool3d(q("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("kernelSize",t,e,n);return[r.maxPool3d(q("x",t,e,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=q("strides",t,e,n),i=q("pad",t,e,n),a=q("dilations",t,e,n),o=s[1],l=s[2],c=a[1],u=a[2];return[r.dilation2d(q("x",t,e,n),q("filter",t,e,n),[o,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe=(t,e,n,r=Gi)=>{switch(t.op){case"Fill":{const s=q("shape",t,e,n),i=q("dtype",t,e,n),a=q("value",t,e,n);return[r.fill(s,a,i)]}case"LinSpace":{const s=q("start",t,e,n),i=q("stop",t,e,n),a=q("num",t,e,n);return[r.linspace(s,i,a)]}case"Multinomial":{const s=q("logits",t,e,n),i=q("numSamples",t,e,n),a=q("seed",t,e,n);return[r.multinomial(s,i,a)]}case"OneHot":{const s=q("indices",t,e,n),i=q("depth",t,e,n),a=q("onValue",t,e,n),o=q("offValue",t,e,n),l=q("dtype",t,e,n);return[r.oneHot(s,i,a,o,l)]}case"Ones":return[r.ones(q("shape",t,e,n),q("dtype",t,e,n))];case"OnesLike":return[r.onesLike(q("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(q("shape",t,e,n),q("dtype",t,e,n),q("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(q("shape",t,e,n),q("minval",t,e,n),q("maxval",t,e,n),q("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(q("shape",t,e,n),q("minval",t,e,n),q("maxval",t,e,n),q("seed",t,e,n))];case"Range":{const s=q("start",t,e,n),i=q("stop",t,e,n),a=q("step",t,e,n);return[r.range(s,i,a,q("dtype",t,e,n))]}case"TruncatedNormal":{const s=q("shape",t,e,n),i=q("mean",t,e,n),a=q("stdDev",t,e,n),o=q("seed",t,e,n);return[r.truncatedNormal(s,i,a,q("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(q("shape",t,e,n),q("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(q("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3(t,e,n){const r=q("boxes",t,e,n),s=q("scores",t,e,n),i=q("maxOutputSize",t,e,n),a=q("iouThreshold",t,e,n),o=q("scoreThreshold",t,e,n),l=q("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:a,scoreThreshold:o,softNmsSigma:l}}const SPe=async(t,e,n,r,s=Gi)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=h3(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(i,a,o,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=h3(t,e,n),u=q("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(i,a,o,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:a,maxOutputSize:o,iouThreshold:l,scoreThreshold:c}=h3(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,a,o,l,c)]}case"Where":{const i=s.cast(q("condition",t,e,n),"bool"),a=[await s.whereAsync(i)];return i.dispose(),a}case"ListDiff":return s.setdiff1dAsync(q("x",t,e,n),q("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe=(t,e,n,r=Gi)=>{switch(t.op){case"LowerBound":{const s=q("sortedSequence",t,e,n),i=q("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=q("x",t,e,n),i=q("k",t,e,n),a=q("sorted",t,e,n),o=r.topk(s,i,a);return[o.values,o.indices]}case"UpperBound":{const s=q("sortedSequence",t,e,n),i=q("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=q("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=q("x",t,e,n),i=q("axis",t,e,n),a=r.unique(s,i);return[a.values,a.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe=(t,e,n,r=Gi)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=q("default",t,e,n);return[Ri(t.name,e,n)||s];case"Placeholder":return[Ri(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=q("x",t,e,n);return[Eh(u)]}case"IdentityN":return q("x",t,e,n).map(u=>Eh(u));case"Snapshot":const i=q("x",t,e,n);return[Eh(i)];case"Shape":return[r.tensor1d(q("x",t,e,n).shape,"int32")];case"ShapeN":return q("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(q("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(q("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=q("x",t,e,n),o=q("data",t,e,n),l=q("message",t,e,n),c=q("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TPe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=qt(0),this.tensorMap=new Map,Ks(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return qt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),Re(()=>{const s=zl(n),i=r.length,a=s.length;le(i===a,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${a} elements.`);for(let o=0;o<i;o++){const l=r[o],c=s[o];Ks(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return Re(()=>{const s=[];for(let i=0;i<r.length;i++){const a=r[i],o=this.findWithDefault(a,n);s.push(o)}return ko(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=q("keyDType",t,e,n),a=q("valueDType",t,e,n),o=new TPe(i,a);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=q("tableHandle",t,e,n,r),i=q("keys",t,e,n),a=q("values",t,e,n);return[await r.getHashTableById(s.id).import(i,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=q("tableHandle",t,e,n,r),i=q("keys",t,e,n),a=q("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=q("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe=(t,e,n,r=Gi)=>{switch(t.op){case"ResizeBilinear":{const s=q("images",t,e,n),i=q("size",t,e,n),a=q("alignCorners",t,e,n),o=q("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],a,o)]}case"ResizeNearestNeighbor":{const s=q("images",t,e,n),i=q("size",t,e,n),a=q("alignCorners",t,e,n),o=q("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],a,o)]}case"CropAndResize":{const s=q("image",t,e,n),i=q("boxes",t,e,n),a=q("boxInd",t,e,n),o=q("cropSize",t,e,n),l=q("method",t,e,n),c=q("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,a,o,l,c)]}case"ImageProjectiveTransformV3":{const s=q("images",t,e,n),i=q("transforms",t,e,n),a=q("outputShape",t,e,n),o=q("fillValue",t,e,n),l=q("interpolation",t,e,n),c=q("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),o,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe=(t,e,n,r=Gi)=>{switch(t.op){case"Equal":return[r.equal(q("a",t,e,n),q("b",t,e,n))];case"NotEqual":return[r.notEqual(q("a",t,e,n),q("b",t,e,n))];case"Greater":return[r.greater(q("a",t,e,n),q("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(q("a",t,e,n),q("b",t,e,n))];case"Less":return[r.less(q("a",t,e,n),q("b",t,e,n))];case"LessEqual":return[r.lessEqual(q("a",t,e,n),q("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(q("a",t,e,n),q("b",t,e,n))];case"LogicalNot":return[r.logicalNot(q("a",t,e,n))];case"LogicalOr":return[r.logicalOr(q("a",t,e,n),q("b",t,e,n))];case"Select":case"SelectV2":return[r.where(q("condition",t,e,n),q("a",t,e,n),q("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(q("a",t,e,n),q("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe=(t,e,n,r=Gi)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(q("a",t,e,n),q("b",t,e,n),q("transposeA",t,e,n),q("transposeB",t,e,n))];case"Einsum":return[r.einsum(q("equation",t,e,n),...q("tensors",t,e,n))];case"Transpose":return[r.transpose(q("x",t,e,n),q("perm",t,e,n))];case"_FusedMatMul":const[s,i]=q("fusedOps",t,e,n),a=s==="biasadd",o=i==="prelu",l=q("numArgs",t,e,n),c=q("leakyreluAlpha",t,e,n);if(a){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=q("args",t,e,n);return[r.fused.matMul({a:q("a",t,e,n),b:q("b",t,e,n),transposeA:q("transposeA",t,e,n),transposeB:q("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(q("a",t,e,n),q("numLower",t,e,n),q("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPe=(t,e,n,r=Gi)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(q("x",t,e,n),q("axis",t,e,n),q("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(q("x",t,e,n),q("mean",t,e,n),q("variance",t,e,n),q("offset",t,e,n),q("scale",t,e,n),q("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(q("x",t,e,n),q("mean",t,e,n),q("variance",t,e,n),q("offset",t,e,n),q("scale",t,e,n),q("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(q("x",t,e,n),q("radius",t,e,n),q("bias",t,e,n),q("alpha",t,e,n),q("beta",t,e,n))];case"Softmax":return[r.softmax(q("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(q("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe=(t,e,n,r=Gi)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(q("paramsNestedSplits",t,e,n),q("paramsDenseValues",t,e,n),q("indices",t,e,n),q("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(q("starts",t,e,n),q("limits",t,e,n),q("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(q("shape",t,e,n),q("values",t,e,n),q("defaultValue",t,e,n),q("rowPartitionTensors",t,e,n),q("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe=(t,e,n,r=Gi)=>{switch(t.op){case"Max":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.max(q("x",t,e,n),o,l)]}case"Mean":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.mean(q("x",t,e,n),o,l)]}case"Min":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.min(q("x",t,e,n),o,l)]}case"Sum":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.sum(q("x",t,e,n),o,l)]}case"All":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.all(q("x",t,e,n),o,l)]}case"Any":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.any(q("x",t,e,n),o,l)]}case"ArgMax":{const o=q("axis",t,e,n);return[r.argMax(q("x",t,e,n),o)]}case"ArgMin":{const o=q("axis",t,e,n);return[r.argMin(q("x",t,e,n),o)]}case"Prod":{const o=q("axis",t,e,n),l=q("keepDims",t,e,n);return[r.prod(q("x",t,e,n),o,l)]}case"Cumprod":{const o=q("axis",t,e,n),l=q("exclusive",t,e,n),c=q("reverse",t,e,n);return[r.cumprod(q("x",t,e,n),o,l,c)]}case"Cumsum":{const o=q("axis",t,e,n),l=q("exclusive",t,e,n),c=q("reverse",t,e,n);return[r.cumsum(q("x",t,e,n),o,l,c)]}case"Bincount":const s=q("x",t,e,n),i=q("weights",t,e,n),a=q("size",t,e,n);return[r.bincount(s,i,a)];case"DenseBincount":{const o=q("x",t,e,n),l=q("weights",t,e,n),c=q("size",t,e,n),u=q("binaryOutput",t,e,n);return[r.denseBincount(o,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DPe=(t,e,n,r=Gi)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=q("n",t,e,n),i=q("axis",t,e,n);let a=q("tensors",t,e,n);return a=a.slice(0,s),[r.concat(a,i)]}case"Gather":{const s=q("x",t,e,n),i=q("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=q("axis",t,e,n),i=q("batchDims",t,e,n),a=q("x",t,e,n),o=q("indices",t,e,n);return[r.gather(a,r.cast(o,"int32"),s,i)]}case"Reverse":{const s=q("dims",t,e,n),i=[];for(let o=0;o<s.length;o++)s[o]&&i.push(o);const a=q("x",t,e,n);return[r.reverse(a,i)]}case"ReverseV2":{const s=q("axis",t,e,n),i=q("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=q("begin",t,e,n),i=q("size",t,e,n);return[r.slice(q("x",t,e,n),s,i)]}case"StridedSlice":{const s=q("begin",t,e,n),i=q("end",t,e,n),a=q("strides",t,e,n),o=q("beginMask",t,e,n),l=q("endMask",t,e,n),c=q("ellipsisMask",t,e,n),u=q("newAxisMask",t,e,n),d=q("shrinkAxisMask",t,e,n),h=q("x",t,e,n);return[r.stridedSlice(h,s,i,a,o,l,c,u,d)]}case"Pack":return Re(()=>{const s=q("axis",t,e,n),i=q("tensors",t,e,n),a=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(c=>{const u=jn(c.shape,a);if(!u&&!jn(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,a)});return[r.stack(l,s)]});case"Unpack":{const s=q("axis",t,e,n),i=q("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=q("reps",t,e,n);return[r.tile(q("x",t,e,n),s)]}case"Split":case"SplitV":{const s=q("axis",t,e,n),i=q("numOrSizeSplits",t,e,n),a=q("x",t,e,n);return r.split(a,i,s)}case"ScatterNd":{const s=q("indices",t,e,n),i=q("values",t,e,n),a=q("shape",t,e,n);return[r.scatterND(s,i,a)]}case"GatherNd":{const s=q("x",t,e,n),i=q("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=q("sparseIndices",t,e,n),i=q("outputShape",t,e,n),a=q("sparseValues",t,e,n),o=q("defaultValue",t,e,n);return[r.sparseToDense(s,a,i,a.dtype===o.dtype?o:r.cast(o,a.dtype))]}case"TensorScatterUpdate":{const s=q("indices",t,e,n),i=q("values",t,e,n),a=q("tensor",t,e,n);return[r.tensorScatterUpdate(a,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe=(t,e,n,r=Gi)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:a,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(q("indices",t,e,n),q("values",t,e,n),q("denseShape",t,e,n),q("defaultValue",t,e,n));return[s,i,a,o]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(q("inputIndices",t,e,n),q("inputShape",t,e,n),q("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(q("data",t,e,n),q("indices",t,e,n),q("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(q("data",t,e,n),q("indices",t,e,n),q("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPe=(t,e,n,r=Gi)=>{switch(t.op){case"FFT":return[r.fft(q("x",t,e,n))];case"IFFT":return[r.ifft(q("x",t,e,n))];case"RFFT":return[r.rfft(q("x",t,e,n))];case"IRFFT":return[r.irfft(q("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe=(t,e,n,r=Gi)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(q("input",t,e,n),q("pattern",t,e,n),q("rewrite",t,e,n),q("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(q("data",t,e,n),q("dataSplits",t,e,n),q("separator",t,e,n),q("nGramWidths",t,e,n),q("leftPad",t,e,n),q("rightPad",t,e,n),q("padWidth",t,e,n),q("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:a}=r.string.stringSplit(q("input",t,e,n),q("delimiter",t,e,n),q("skipEmpty",t,e,n));return[s,i,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(q("input",t,e,n),q("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPe=(t,e,n,r=Gi)=>{switch(t.op){case"Cast":return[r.cast(q("x",t,e,n),q("dtype",t,e,n))];case"ExpandDims":{const s=q("axis",t,e,n);return[r.expandDims(q("x",t,e,n),s)]}case"Squeeze":{const s=q("axis",t,e,n);return[r.squeeze(q("x",t,e,n),s)]}case"Reshape":return[r.reshape(q("x",t,e,n),q("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(q("x",t,e,n),q("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(q("x",t,e,n),q("padding",t,e,n),q("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(q("x",t,e,n),q("padding",t,e,n),q("constantValue",t,e,n))];case"SpaceToBatchND":{const s=q("blockShape",t,e,n),i=q("paddings",t,e,n);return[r.spaceToBatchND(q("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=q("blockShape",t,e,n),i=q("crops",t,e,n);return[r.batchToSpaceND(q("x",t,e,n),s,i)]}case"DepthToSpace":{const s=q("blockSize",t,e,n),i=q("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(q("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(q("x",t,e,n),q("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(q("s0",t,e,n),q("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bU(t,e,n,r,s=Re){const i=((a,o,l)=>{switch(a.category){case"arithmetic":return s(()=>pPe(a,o,l));case"basic_math":return s(()=>mPe(a,o,l));case"control":return wPe(a,o,l);case"convolution":return s(()=>_Pe(a,o,l));case"creation":return s(()=>kPe(a,o,l));case"dynamic":return SPe(a,o,l);case"evaluation":return s(()=>NPe(a,o,l));case"image":return s(()=>APe(a,o,l));case"graph":return s(()=>CPe(a,o,l));case"logical":return s(()=>EPe(a,o,l));case"matrices":return s(()=>PPe(a,o,l));case"normalization":return s(()=>OPe(a,o,l));case"ragged":return s(()=>jPe(a,o,l));case"reduction":return s(()=>$Pe(a,o,l));case"slice_join":return s(()=>DPe(a,o,l));case"sparse":return s(()=>LPe(a,o,l));case"spectral":return s(()=>RPe(a,o,l));case"string":return s(()=>MPe(a,o,l));case"transformation":return s(()=>FPe(a,o,l));case"hash_table":return IPe(a,o,l,r);case"custom":const c=Wre(a.op);if(c&&c.customExecutor)return c.customExecutor(new fPe(a,o,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return x0(i)?i.then(a=>[].concat(a)):[].concat(i)}class wU{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _U(t,e,n,r){const s=new Set,i=[];let a=null,o=null;const l=new Set,c=new Set(Object.keys(t).map(h=>qo(h)[0]));r=r||[];const u=new Set(r.map(h=>qo(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((Pg(h)||GPe(h)||KPe(h))&&a==null&&(a=h,o=a.children.map(f=>f.name).filter(f=>s.has(f))),s.add(h.name),n[h.name]==null&&!c.has(h.name)&&!u.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:a,syncInputs:o}}function zPe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(v=>qo(v)[0]).map(v=>t.nodes[v]),i=t.initNodes||[],a=v=>n.has(typeof v=="string"?v:v.name);function o(v){return[...new Map(v.map(x=>[x.name,x])).values()]}const l=o([...s,...t.weights,...i]).filter(a),c=o([...l,...Object.values(t.nodes)]).filter(a),u=new Map(c.map(v=>[v.name,v])),d={};for(const v of c){d[v.name]=d[v.name]||0;for(const x of v.children)a(x)||(d[x.name]=Number.POSITIVE_INFINITY),d[x.name]=(d[x.name]||0)+1}const h=Object.entries(d).filter(([,v])=>v===0).map(([v])=>v),f=[...h];for(;h.length>0;){const v=h.pop(),x=u.get(v);for(const b of x.children.filter(a))--d[b.name]===0&&(f.push(b.name),h.push(b.name))}const m=f.map(v=>u.get(v)),y=BPe(m,l);return WPe(y,l),y}function BPe(t,e){const n=new Map(t.map(a=>[a.name,a])),r=e.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),o=n.get(a);for(const l of o.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(a=>s.has(a.name))}class _N extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function WPe(t,e){const n=new Map(t.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),i=new Set(t.map(o=>o.name)),a=o=>i.has(typeof o=="string"?o:o.name);for(const o of t){for(const l of o.children.filter(a)){if(!n.has(l.name))throw new _N(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new _N(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!n.has(l.name))throw new _N(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new _N(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function UPe(t){const e=new Map(t.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,l)=>Pg(o)?n:l),s=o=>{const l=r[e.get(o.name)];return l??-1},i=t.map((o,l)=>o.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),a=new Map;for(let o=0;o<t.length;++o){const l=i[o];if(l===n)continue;const c=t[o],u=t[l];a.has(u.name)||a.set(u.name,[]),a.get(u.name).push(c)}return a}const VPe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),HPe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),qPe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Pg(t){return VPe.has(t.op)}function GPe(t){return HPe.has(t.op)}function KPe(t){return qPe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G5{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new G5(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=_U(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:a}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const c=n.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const o=zPe(this.graph,r),l=UPe(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Ks(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(h=>this.graph.nodes[qo(h)[0]]),i=n.map(h=>qo(h)[0]),a=new Set(i);let o=i.map(h=>this.graph.nodes[h]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=We().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const u={},d={};return Re(()=>{const h=new wU(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(x=>{const[b,_]=qo(x,h),k=[];k[_]=e[x],f[b]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(k))});const m=this.getFrozenTensorIds(f),{orderedNodes:y,nodeLiveUntilMap:v}=c;for(const x of y){if(f[x.name])continue;const b=bU(x,f,h,this._resourceManager);if(x0(b))throw new Error(`The execution of the op '${x.op}' returned a promise. Please use model.executeAsync() instead.`);f[x.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[x.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(x,f,h,m,a,v.get(x.name))}return this.parent==null&&h.dispose(m),n.map(x=>Ri(x,f,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,a,o){if(!(Pg(n)||a.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(const l of n.inputs){if(Pg(l))continue;const c=mU(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const d=o[u.id];d===1?(u.dispose(),delete o[u.id]):d!=null&&o[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,a){function o(l){return Pg(l)||i.has(l.name)}if(!(Pg(e)||a==null))for(const l of a){if(o(l))continue;const c=mU(l.name,n,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=We().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const a=new wU(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,a,n,r),l=n.map(h=>Ri(h,o,a)),c=l.map(h=>h.id),u=Object.keys(e).map(h=>e[h].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(o).forEach(h=>{h.forEach(f=>{f&&!f.isDisposed&&!d.has(f.id)&&f.dispose()})}),this.parent==null&&a.dispose(d),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,a,o)=>(i[this.inputs[o].name]=a,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),a=i.map(k=>this.graph.nodes[qo(k)[0]]),o=r.map(k=>qo(k)[0]),l=new Set(o);let c=o.map(k=>this.graph.nodes[k]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:h,syncInputs:f}=_U(e,c,this.weightMap,this._initNodes),m=[...a,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:n.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(k=>{const[N,A]=qo(k),T=[];T[A]=e[k],y[N]=T});const v={},x=this.getFrozenTensorIds(y),b={};for(;m.length>0;){const k=this.processStack(a,m,n,y,b,x,l,v,u);await Promise.all(k)}h==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const _=c.filter(k=>!Pg(k)&&!Ri(k.name,y,n)).map(k=>k.name);if(_.length>0){let k="";throw h!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${_}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${k}`)}return y}processStack(e,n,r,s,i,a,o,l,c){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&q("isConstant",d.node,s,r)&&([h]=Ah(d.node.name,r)),s[d.node.name]==null){const f=bU(d.node,s,r,this._resourceManager);h||([h]=Ah(d.node.name,r));const m=r.currentContext;x0(f)?u.push(f.then(y=>(s[h]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(y)),r.currentContext=m,this.checkTensorForDisposal(h,d.node,s,r,a,o,l),this.processChildNodes(d.node,n,r,s,i,c),y))):(s[h]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(f)),this.checkTensorForDisposal(h,d.node,s,r,a,o,l),this.processChildNodes(d.node,n,r,s,i,c))}else this.processChildNodes(d.node,n,r,s,i,c)}return u}processChildNodes(e,n,r,s,i,a){e.children.forEach(o=>{const[l]=Ah(o.name,r);i[l]||!a.has(o.name)||(o.op==="Merge"?o.inputNames.some(c=>!!Ri(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!Ri(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=qo(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const a=i.attrParams.shape.value,o=a.length===r.shape.length&&r.shape.every((l,c)=>a[c]===-1||a[c]===l);le(o,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&le(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];a!=null?s[a.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=qo(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=qo(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class XPe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YPe="?tfjs-format=file",ZPe="model.json";class JPe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=QM){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new XPe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return x0(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await TQ(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new G5(gU.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=gU.Instance.transformGraph(e.modelInitializer);this.initializer=new G5(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Or?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Or)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const a in i){const o=i[a];o.resourceId!=null&&(e[a]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,a)=>{var o,l,c;const u=(c=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[a])===null||c===void 0?void 0:c.resourceId;return u!=null?i[a]=this.resourceIdToCapturedInput[u]:i[a]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],a=n[i];this.resourceIdToCapturedInput[a.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&bn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function kU(t,e={},n=QM){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=QPe(t));const r=new JPe(t,e,n);return await r.load(),r}function QPe(t){return t.endsWith("/")||(t=t+"/"),`${t}${ZPe}${YPe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var SU;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(SU||(SU={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&le(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe=DM;class RE extends FI{nextDataId(){return RE.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new xR(this,mu())}write(e,n,r){this.firstUse&&(this.firstUse=!1,We().get("IS_NODE")&&Tl(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&k_(r[0])){const i=r.map(a=>Vp(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return nf(s,i)}return uwe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>nm(s));return yn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return yn(e.shape,e.dtype,n)}makeOutput(e,n,r){return mu().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=ho();return e(),{kernelMs:ho()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Rt([e],"where");const n=this.readSync(e.dataId);return eOe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}RE.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const tOe=t=>{const{x:e}=t.inputs,n=t.backend;Rt(e,"abs");let r=new Float32Array(Xe(e.shape));const s=n.data.get(e.dataId).values;return r=Hre(s),n.makeOutput(r,e.shape,e.dtype)},nOe={kernelName:S_,backendName:"cpu",kernelFunc:tOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Is(t){return(e,n,r,s,i)=>{const a=dn(e,n),o=a.length,l=Gt(a),c=Xe(a),u=Ui(i,c),d=e.length,h=n.length,f=Gt(e),m=Gt(n),y=lx(e,a),v=lx(n,a);if(y.length+v.length===0)for(let x=0;x<u.length;++x)u[x]=t(r[x%r.length],s[x%s.length]);else for(let x=0;x<u.length;++x){const b=Ux(x,o,l),_=b.slice(-d);y.forEach(T=>_[T]=0);const k=jd(_,d,f),N=b.slice(-h);v.forEach(T=>N[T]=0);const A=jd(N,h,m);u[x]=t(r[k],s[A])}return[u,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yo(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",a)},o}const rOe={kernelName:qI,backendName:"cpu",kernelFunc:Yo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(t,e,n="float32"){if(n==="complex64"){const s=K5(t,e,"float32"),i=K5(t,e,"float32");return Yo({inputs:{real:s,imag:i},backend:t})}const r=pa(Xe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const sOe={kernelName:ub,backendName:"cpu",kernelFunc:Hd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const iOe={kernelName:SA,backendName:"cpu",kernelFunc:P0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qre(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Y0([0],n),[i,a]=Is((o,l)=>o!==l?1:0)(e,[],t,s,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function dm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Hd({inputs:{x:s},backend:n});const u=K5(n,s.shape,s.dtype),d=dm({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=Yo({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const u=P0({inputs:{input:s},backend:n}),d=dm({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),d}if(!XJ(s.dtype,i)){const u=Hd({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const a=n.data.get(s.dataId).values,[o,l,c]=qre(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,c)}const aOe={kernelName:Zx,backendName:"cpu",kernelFunc:dm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ri(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;Rt([a,o],t);const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=a.dtype==="string"?rf(c):c,h=a.dtype==="string"?rf(u):u,f=r||a.dtype,[m,y]=e(a.shape,o.shape,d,h,f);return l.makeTensorInfo(y,f,m)}:({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=dm({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(h.dataId).values,y=dm({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(y.dataId),x=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,_=l.data.get(x.dataId).values,k=l.data.get(b.dataId).values,[N,A,T]=n(a.shape,o.shape,f,m,_,k),C=l.makeTensorInfo(T,"float32",N),P=l.makeTensorInfo(T,"float32",A),$=Yo({inputs:{real:C,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(C),l.disposeIntermediateTensorInfo(P),$}else{const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=r||a.dtype,[h,f]=e(a.shape,o.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function VF(t){return(e,n,r,s,i,a)=>{const o=dn(e,n),l=Xe(o),c=o.length,u=Gt(o),d=Ui("float32",l),h=Ui("float32",l),f=lx(e,o),m=lx(n,o),y=nf(r,s),v=nf(i,a),x=e.length,b=Gt(e),_=n.length,k=Gt(n);if(f.length+m.length===0)for(let N=0;N<d.length;N++){const A=N%y.length,T=N%v.length,C=t(y[A*2],y[A*2+1],v[T*2],v[T*2+1]);d[N]=C.real,h[N]=C.imag}else for(let N=0;N<d.length;N++){const A=Ux(N,c,u),T=A.slice(-x);f.forEach(O=>T[O]=0);const C=jd(T,x,b),P=A.slice(-_);m.forEach(O=>P[O]=0);const $=jd(P,_,k),j=t(y[C*2],y[C*2+1],v[$*2],v[$*2+1]);d[N]=j.real,h[N]=j.imag}return[d,h,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gre=Is((t,e)=>t+e),oOe=VF((t,e,n,r)=>({real:t+n,imag:e+r})),mx=ri(K0,Gre,oOe),lOe={kernelName:K0,backendName:"cpu",kernelFunc:mx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HF(t,e,n,r,s){const i=Xe(r),a=pa(s,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?a[l]+=e[o]:a[l]+=1)}return a}function Kre(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],a=yn([s,n],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<i;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xre=Is((t,e)=>t&e),cOe=ri(O_,Xre),uOe={kernelName:O_,backendName:"cpu",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jd(t){return(e,n,r)=>{const s=_s(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(t,e,n){const r=Jd(e);return Pm(t,r,n)}function Pm(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:a}=r;Rt(a,t);const o=i,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=rf(l)}else c=l;const u=n||a.dtype,d=e(c,u,s);return o.makeTensorInfo(a.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yre=Jd(t=>Math.ceil(t)),dOe=Pm(Jx,Yre),hOe={kernelName:Jx,backendName:"cpu",kernelFunc:dOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zre(t,e,n,r){const s=_s(n,Xe(e));if(r&&n!=="string"){let i=0;t.forEach(a=>{const o=Xe(a.shape);s.set(a.vals,i),i+=o})}else{let i=0;t.forEach(a=>{const o=n==="string"?rf(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const u=c*e[1]+i;for(let d=0;d<a.shape[1];++d)s[u+d]=o[l++]}i+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jre=Is((t,e)=>t===e?1:0),Qre=ri(B_,Jre,null,"bool"),fOe={kernelName:B_,backendName:"cpu",kernelFunc:Qre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ese=Jd(t=>Math.exp(t)),tse=Pm(ib,ese,"float32"),pOe={kernelName:ib,backendName:"cpu",kernelFunc:tse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nse=Jd(t=>Math.expm1(t)),mOe=Pm(ab,nse),gOe={kernelName:ab,backendName:"cpu",kernelFunc:mOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rse=Jd(t=>Math.floor(t)),yOe=Pm(ob,rse),vOe={kernelName:ob,backendName:"cpu",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sse=Is((t,e)=>Math.floor(t/e)),xOe=ri(lb,sse,null,"int32"),bOe={kernelName:lb,backendName:"cpu",kernelFunc:xOe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t,e,n,r,s,i,a,o,l){const c=yn([r,i],n);for(let u=0;u<r;u++){const d=[];let h=0;for(let f=0;f<s;f++){const m=t[u*s+f];h+=m*a[f],d.push(m)}if(h<0||h>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let f=0;f<i;f++)c.values[u*i+f]=e.get(...e.indexToLoc(h*i+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ase(t,e,n){const r=yn(n,t.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const u=t.locToIndex(a);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose=Is((t,e)=>t>e?1:0),wOe=ri(H_,ose,null,"bool"),_Oe={kernelName:H_,backendName:"cpu",kernelFunc:wOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lse=Is((t,e)=>t>=e?1:0),kOe=ri(cb,lse,null,"bool"),SOe={kernelName:cb,backendName:"cpu",kernelFunc:kOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cse=Is((t,e)=>t<e?1:0),NOe=ri(G_,cse,null,"bool"),COe={kernelName:G_,backendName:"cpu",kernelFunc:NOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use=Is((t,e)=>t<=e?1:0),TOe=ri(K_,use,null,"bool"),IOe={kernelName:K_,backendName:"cpu",kernelFunc:TOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(t,e,n){const r=(e-t)/(n-1),s=pa(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hse=Jd(t=>Math.log(t)),AOe=Pm(pb,hse),EOe={kernelName:pb,backendName:"cpu",kernelFunc:AOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fse(t,e,n,r){const s=Ui(r,Xe(n));for(let i=0;i<s.length;++i){const a=i*e;let o=t[a];for(let l=0;l<e;++l){const c=t[a+l];(Number.isNaN(c)||c>o)&&(o=c)}s[i]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pse=Is((t,e)=>Math.max(t,e)),POe=ri(gb,pse),OOe={kernelName:gb,backendName:"cpu",kernelFunc:POe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse=Is((t,e)=>Math.min(t,e)),jOe=ri(yb,mse),$Oe={kernelName:yb,backendName:"cpu",kernelFunc:jOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qF=Is((t,e)=>t*e),DOe=VF((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),ME=ri(xb,qF,DOe),LOe={kernelName:xb,backendName:"cpu",kernelFunc:ME};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t,e,n){const r=km(-1,n);return qF([],e,r,t,n)}function ROe(t){const{inputs:e,backend:n}=t,{x:r}=e;Rt(r,"neg");const s=n.data.get(r.dataId).values,[i,a]=gse(s,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}const MOe={kernelName:ik,backendName:"cpu",kernelFunc:ROe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse=Is((t,e)=>t!==e?1:0),FOe=ri(ak,yse,null,"bool"),zOe={kernelName:ak,backendName:"cpu",kernelFunc:FOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GF(t,e,n,r,s){const i=e.length,a=Xe(e),o=Gt(e),l=Gt(s),c=Ui(n,Xe(s));for(let u=0;u<a;++u){const d=Ux(u,i,o),h=new Array(d.length);for(let m=0;m<h.length;m++)h[m]=d[r[m]];const f=jd(h,i,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function So(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Rt(s,"transpose");const a=s.shape.length,o=new Array(a);for(let d=0;d<o.length;d++)o[d]=s.shape[i[d]];const l=r.data.get(s.dataId).values,c=GF(l,s.shape,s.dtype,i,o);return{dataId:r.write(c,o,s.dtype),shape:o,dtype:s.dtype}}const BOe={kernelName:Xg,backendName:"cpu",kernelFunc:So};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t,e,n,r){const[s,i]=Si(t,r),a=xo(e,"int32"),o=pa(Xe(s),a),l=Xe(i);for(let c=0;c<o.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];o[c]=d}return{outVals:o,outShape:s,outDtype:a}}function WOe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Rt(s,"prod");const o=s.shape.length,l=Sn(i,s.shape),c=rs(l,o);let u=l,d=s;const h=[];c!=null&&(d=So({inputs:{x:s},backend:n,attrs:{perm:c}}),h.push(d),u=Cs(u.length,o));const f=n.data.get(d.dataId).values,{outVals:m,outShape:y,outDtype:v}=vse(d.shape,d.dtype,f,u);let x=y;return a&&(x=Ns(y,l)),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(x,v,m)}const UOe={kernelName:hk,backendName:"cpu",kernelFunc:WOe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Ux(s,e.length,Gt(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function HOe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function qOe(t,e,n,r){const s=[];let i=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);HOe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)o[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const f=n[h],m=h+e.length-1;if(m>=0){const y=o[m],v=y[y.length-1]-f[u];for(let x=u;x<d;++x)o[m].push(f[x+1]+v)}u=f[u],d=f[d]}d!==u&&(s.push([u,d]),i+=d-u)}return{outSplits:o,valueSlices:s,numValues:i}}function GOe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=_s("int32",r);e.push(s),t[n].forEach((i,a)=>s[a]=i)}return e}function NU(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function KOe(t,e,n,r,s,i){const a=NU(e,2)[1],o=NU(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)s[l*o+d]=t[u*a+d];++l}}function XOe(t,e,n,r,s){const i=e.slice();i[0]=s;const a=_s(n,Xe(i)),o=t.length,l=o===0?0:o/e[0];return KOe(t,e,r,l,a,i),[a,i]}function xse(t,e,n,r,s,i,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(VOe(i,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:h}=qOe(i,a,t,c),f=GOe(u),m=XOe(n,r,s,d,h);return[f,m[0],m[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CU=2147483647;function bse(t,e,n,r,s,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,c=a.length===0,u=[];o||u.push(e[0]),l||u.push(s[0]),c||u.push(a[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=_s("int32",d+1);h[0]=0;for(let v=0;v<d;++v){const x=o?t[0]:t[v],b=l?r[0]:r[v],_=c?i[0]:i[v];if(_===0)throw new Error("Requires delta != 0");let k;if(_>0&&b<x||_<0&&b>x)k=0;else if(k=Math.ceil(Math.abs((b-x)/_)),k>CU)throw new Error(`Requires ((limit - start) / delta) <= ${CU}`);h[v+1]=h[v]+k}const f=h[d],m=_s(n,f);let y=0;for(let v=0;v<d;++v){const x=h[v+1]-h[v];let b=o?t[0]:t[v];const _=c?i[0]:i[v];for(let k=0;k<x;++k)m[y++]=b,b+=_}return[h,m]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var uc=wu;class X5{constructor(e,n,r,s,i,a,o,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=nte(u),this.raggedRank=rte(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===uc.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===uc.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case uc.VALUE_ROWIDS:return X5.getMaxWidthValueRowID(n);case uc.ROW_SPLITS:return X5.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${uc[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let a=1;a<n;++a){const o=e[a];o!==s&&(s=o,i=Math.max(a-r,i),r=a)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return IU(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;ste(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=tte(this.raggedRank,s,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let a=0;for(let o=0;o<s;++o,a+=n)i.push(a);for(let o=s;o<e;++o)i.push(-1);return le(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,a=[];for(let o=0;o<i-1;++o){const l=e[o+1]-e[o];let c=Math.min(s,l),u=n[o];u===-1&&(c=0);for(let d=0;d<c;++d)a.push(u),u+=r;for(let d=0;d<l-c;++d)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,a=[];if(i===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let u=1;u<i;++u){const d=e[u];if(d===l)c>=0&&(++o,o<s?c+=r:c=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case uc.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case uc.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${uc[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case uc.FIRST_DIM_SIZE:return e[0];case uc.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case uc.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${uc[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=IU(r,!1),a=_s(this.valuesDType,Xe(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,a,i)}return[i,a]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,a=r;let o=s.slice();o=o.slice(e+1);const l=Xe(o),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const m=this.defaultValueShape;Re(()=>{const y=Ie(u,m);u=Yg(y,o).dataSync()})}let d=0,h=0,f=0;for(let m=0;m<=c;++m){let y=m<c?n[m]:-1;if(y===f){++f;continue}if(h<f){const v=i.subarray(d*l),x=a.subarray(h*l),b=(f-h)*l;TU(x,v,b)}if(m>=c){const v=r.length;y=Math.floor(v/l)}if(y>f)if(this.defaultValue.length===1)a.subarray(f*l,y*l).fill(this.defaultValue[0]),f=y;else for(;y>f;){const v=a.slice(f*l);TU(v,u,l),++f}y<0?(d=m+1,h=f):(d=m,h=f,f=h+1)}}}function TU(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function IU(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function wse(t,e,n,r,s,i,a,o,l,c){return new X5(t,e,n,r,s,i,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _se(t,e,n,r){const s=t===e,i=t<e&&n<0,a=e<t&&n>1;if(s||i||a)return pa(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=pa(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kse=Jd(t=>1/Math.sqrt(t)),YOe=Pm(Nb,kse),ZOe={kernelName:Nb,backendName:"cpu",kernelFunc:YOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zg(t,e,n,r,s,i,a,o,l,c){const u=[r/s,s],d=t.values,h=e.values;if(r===0)return yn(n,e.dtype);const f=l instanceof Fs?l:yn(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let m=0;m<i;m++){const y=[];let v=0;for(let x=0;x<a;x++){const b=d[m*a+x];y.push(b),v+=b*o[x]}if(v<0||v>=r/s)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let x=0;x<s;x++)c?f.values[v*s+x]+=h[m*s+x]:f.values[v*s+x]=e.rank===0?h[0]:h[m*s+x]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JOe=Jd(t=>1/(1+Math.exp(-t))),Sse=nr(Eb,t=>1/(1+Math.exp(-t))),QOe={kernelName:Eb,backendName:"cpu",kernelFunc:Sse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t,e,n,r,s){const i=Zee(r,e,n),a=Xe(n),o=Gt(r);if(i){const d=Jee(e,o);return s==="string"?t.slice(d,d+a):t.subarray(d,d+a)}const l=s==="string"?rf(t):t,c=yn(r,s,l),u=yn(n,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((m,y)=>m+e[y]);u.set(c.get(...f),...h)}return s==="string"?kte(u.values):u.values}function O0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r;Rt(s,"slice");const[o,l]=tF(s,i,a);Xee(s,o,l);const c=n.data.get(s.dataId).values,u=Nse(c,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const e3e={kernelName:vk,backendName:"cpu",kernelFunc:O0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t,e,n,r,s,i,a){const o=e[0],l=i[0],c=new Array(l),u=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(dte(o));const v=_s(n,0),x=_s(s,0);return[v,[0,d],x,c,u]}let h=!0,f=0;const m=new Array(l).fill(0);for(let v=0;v<o;++v){const x=t[v*d];if(x<0)throw new Error(hte(v,x));if(x>=l)throw new Error(fte(v,x,l));++m[x],h=h&&x>=f,f=x}let y=!0;for(let v=0;v<l;++v){const x=m[v]===0;c[v]=x,y=y&&!x,m[v]=Math.max(m[v],1),v>0&&(m[v]+=m[v-1])}if(y&&h){const v=t,x=r;for(let b=0;b<o;++b)u[b]=b;return[v,[o,d],x,c,u]}else{const v=m[l-1],x=_s(n,v*d),b=_s(s,v),_=new Array(l).fill(0);for(let k=0;k<o;++k){const N=t[k*d],A=_[N],T=(N===0?0:m[N-1])+A;_[N]++;for(let C=0;C<d;++C)x[T*d+C]=t[k*d+C];b[T]=r[k],u[k]=T}for(let k=0;k<l;++k)if(_[k]===0){const A=k===0?0:m[k-1];x[A*d+0]=k;for(let T=1;T<d;++T)x[A*d+T]=0;b[A]=a}return[x,[v,d],b,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(t,e,n,r,s){const i=Xe(r),a=e[0],o=s.length,l=[];let c=1,u=-1;for(let v=0;v<o;++v){const x=s[v];if(x===-1){if(u!==-1)throw new Error(pte(u,v));u=v,l.push(1)}else{if(x<0)throw new Error(mte(v,x));c*=x,l.push(x)}}if(u!==-1){if(c<=0)throw new Error(gte());const v=Math.trunc(i/c);if(c*v!==i)throw new Error(yte(r,l));l[u]=v}if(Xe(l)!==i)throw new Error(vte(r,l));const h=r.length,f=[];if(h>0){f[h-1]=1;for(let v=h-2;v>=0;--v)f[v]=f[v+1]*r[v+1]}const m=[];if(o>0){m[o-1]=1;for(let v=o-2;v>=0;--v)m[v]=m[v+1]*l[v+1]}const y=_s(n,a*o);for(let v=0;v<a;++v){let x=0;for(let b=0;b<h;++b)x+=t[v*h+b]*f[b];for(let b=0;b<o;++b)y[v*o+b]=Math.trunc(x/m[b]),x%=m[b]}return[y,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KF(t,e,n,r,s,i=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],d=o>0?s[o-1]+1:0;if(d<0)throw new Error(n$());const h=e.slice();h[0]=d;const f=h.reduce((_,k)=>_*k,1),m=_s(n,f);if(o===0)return d>0&&m.fill(a),[m,h];if(d<=0)throw new Error(n$());let y=0,v=1,x=0,b=s[y];for(;;){let _=0;if(v<o){if(_=s[v],b===_){++v;continue}if(b>=_)throw new Error(xte())}if(b<0||b>=d)throw new Error(bte(b,d));b>x&&m.fill(a,x*c,b*c);for(let k=y;k<v;++k){const N=r[k];if(N<0||N>=l[0])throw new Error(wte(k,r[k],l[0]));for(let A=0;A<c;A++)m[b*c+A]+=t[N*c+A]}if(i)for(let k=0;k<c;k++)m[b*c+k]/=v-y;if(y=v,++v,x=b+1,b=_,v>o)break}return x<d&&m.fill(a,x*c,d*c),[m,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e=Jd(t=>Math.sqrt(t)),n3e=nr(Ob,t=>Math.sqrt(t)),r3e={kernelName:Ob,backendName:"cpu",kernelFunc:n3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ise=Is((t,e)=>{const n=t-e;return n*n}),s3e=ri(jb,Ise),i3e={kernelName:jb,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase=Jd((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),a3e=Pm(kk,Ase),o3e={kernelName:kk,backendName:"cpu",kernelFunc:a3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t,e,n,r){const s=yn(t,e.dtype);for(let i=0;i<s.size;i++){const a=s.indexToLoc(i),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];s.set(e.get(...o),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l3e{constructor(e,n,r,s,i,a){this.separator=Vp(e),this.nGramWidths=n,this.leftPad=Vp(r),this.rightPad=Vp(s),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,a){for(let o=0;o<i;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),u=Math.max(0,l-(i-(o+1))),d=a-(c+u),h=n+(c>0?0:o-l);let f=0;f+=c*this.leftPad.length;for(let b=0;b<d;++b)f+=e[h+b].length;f+=u*this.rightPad.length;const m=c+u+d-1;f+=m*this.separator.length,r[s+o]=new Uint8Array(f);const y=r[s+o];let v=0;const x=b=>b.forEach(_=>y[v++]=_);for(let b=0;b<c;++b)x(this.leftPad),x(this.separator);for(let b=0;b<d-1;++b)x(e[h+b]),x(this.separator);if(d>0){x(e[h+d-1]);for(let b=0;b<u;++b)x(this.separator),x(this.rightPad)}else{for(let b=0;b<u-1;++b)x(this.rightPad),x(this.separator);x(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,a=_s("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),a[l]=a[l-1]+u}const o=new Array(a[i]);for(let l=0;l<i;++l){const c=n[l];let u=a[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,c,o,u,f,d),u+=f}),this.preserveShort&&u===a[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,c,o,u,1,h)}}return[o,a]}}function Pse(t,e,n,r,s,i,a,o){return new l3e(n,r,s,i,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=t.indexOf(i);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const a=t.subarray(s,i);(!n||a.length!==0)&&r.push(a),s=i+1}}function Ose(t,e,n){const r=t.length,s=[];let i=0,a=0;const o=new Array(r);for(let h=0;h<r;++h){const f=s.length;c3e(t[h],e,n,s);const m=s.length-f;o[h]=m,i+=m,a=Math.max(a,m)}const l=_s("int32",i*2),c=new Array(i),u=[r,a];let d=0;for(let h=0;h<r;++h)for(let f=0;f<o[h];++f)l[d*2]=h,l[d*2+1]=f,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jse(t,e){const n=_s("int32",t.length);for(let r=0;r<t.length;++r)n[r]=_we(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se=Is((t,e)=>t-e),u3e=VF((t,e,n,r)=>({real:t-n,imag:e-r})),XF=ri($b,$se,u3e),d3e={kernelName:$b,backendName:"cpu",kernelFunc:XF};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dse(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=yn(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=i[l]%t.shape[l];const o=t.locToIndex(a);r.values[s]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dw=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Lse(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),h=Math.max(n,Math.floor(e-l*u/o+d)),f=Math.min(r,Math.floor(e+(o-l)*u/o+d));Lse(t,e,h,f)}const s=t[e];let i=n,a=r;for(sv(t,n,e),dw(t[r],s)>0&&sv(t,n,r);i<a;){for(sv(t,i,a),i++,a--;dw(t[i],s)<0;)i=i+1;for(;dw(t[a],s)>0;)a=a-1}dw(t[n],s)===0?sv(t,n,a):(a=a+1,sv(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function Rse(t,e,n,r,s){const i=e[e.length-1],[a,o]=[t.length/i,i],l=Ui(n,a*r),c=Ui("int32",a*r);for(let d=0;d<a;d++){const h=d*o,f=t.subarray(h,h+o);let m=new Array(f.length);f.forEach((b,_)=>m[_]={value:b,index:_}),r<m.length&&(Lse(m,r),m=m.slice(0,r)),s&&m.sort(dw);const y=d*r,v=l.subarray(y,y+r),x=c.subarray(y,y+r);for(let b=0;b<r;b++)v[b]=m[b].value,x[b]=m[b].index}const u=e.slice();return u[u.length-1]=r,[yn(u,n,l),yn(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t,e,n,r){const s=Sn(e,n)[0],i=[1,n[0],1];for(let m=0;m<s;m++)i[0]*=n[m];i[1]=n[s];for(let m=s+1;m<n.length;m++)i[2]*=n[m];const a=new Map,o=new Int32Array(n[s]),l=new Fs(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let m=0;m<n[s];m++){let y;if(u)y=t[m].toString();else{const x=[];for(let b=0;b<i[0];b++)for(let _=0;_<i[2];_++)x.push(l.get(b,m,_));y=x.join(",")}const v=a.get(y);if(v!=null)o[m]=v;else{const x=a.size;a.set(y,x),o[m]=x,c.push(m)}}const d=i.slice();d[1]=a.size;const h=new Fs(d,r);c.forEach((m,y)=>{for(let v=0;v<i[0];v++)for(let x=0;x<i[2];x++)h.set(l.get(v,m,x),v,y,x)});const f=n.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Gre,bincountImpl:HF,bincountReduceImpl:Kre,bitwiseAndImpl:Xre,castImpl:qre,ceilImpl:Yre,concatImpl:Zre,equalImpl:Jre,expImpl:ese,expm1Impl:nse,floorDivImpl:sse,floorImpl:rse,gatherNdImpl:ise,gatherV2Impl:ase,greaterEqualImpl:lse,greaterImpl:ose,lessEqualImpl:use,lessImpl:cse,linSpaceImpl:dse,logImpl:hse,maxImpl:fse,maximumImpl:pse,minimumImpl:mse,multiplyImpl:qF,negImpl:gse,notEqualImpl:yse,prodImpl:vse,raggedGatherImpl:xse,raggedRangeImpl:bse,raggedTensorToTensorImpl:wse,rangeImpl:_se,rsqrtImpl:kse,scatterImpl:zg,sigmoidImpl:JOe,simpleAbsImpl:Hre,sliceImpl:Nse,sparseFillEmptyRowsImpl:Cse,sparseReshapeImpl:Tse,sparseSegmentReductionImpl:KF,sqrtImpl:t3e,squaredDifferenceImpl:Ise,staticRegexReplaceImpl:Ase,stridedSliceImpl:Ese,stringNGramsImpl:Pse,stringSplitImpl:Ose,stringToHashBucketFastImpl:jse,subImpl:$se,tileImpl:Dse,topKImpl:Rse,transposeImpl:GF,uniqueImpl:Mse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */IR("cpu",()=>new RE,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fse=nr(rb,t=>t>=0?t:Math.exp(t)-1),f3e={kernelName:rb,backendName:"cpu",kernelFunc:Fse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Rt([s],"leakyRelu");const a=Xe(s.shape),o=n.data.get(s.dataId).values,l=Ui("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(s.shape,"float32",l)}const p3e={kernelName:q_,backendName:"cpu",kernelFunc:zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e=Is((t,e)=>t<0?e*t:t);function Bse(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Rt([r,s],"prelu");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,[o,l]=m3e(r.shape,s.shape,i,a,"float32");return n.makeTensorInfo(l,"float32",o)}const g3e={kernelName:dk,backendName:"cpu",kernelFunc:Bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wse=nr(_b,t=>Math.max(0,t)),y3e={kernelName:_b,backendName:"cpu",kernelFunc:Wse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Use=nr(kb,t=>Math.min(Math.max(0,t),6)),v3e={kernelName:kb,backendName:"cpu",kernelFunc:Use};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5(t,e,n,r,s){if(n==="linear")return Hd({inputs:{x:e},backend:t});if(n==="relu")return Wse({inputs:{x:e},backend:t});if(n==="elu")return Fse({inputs:{x:e},backend:t});if(n==="relu6")return Use({inputs:{x:e},backend:t});if(n==="prelu")return Bse({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return zse({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return Sse({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=Xe(s.shape),o=KJ(i,a),l=Xe(o);le(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=o,d.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const x3e={kernelName:fk,backendName:"cpu",kernelFunc:Tr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vse(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;Rt([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=a?s.shape[l-2]:s.shape[l-1],d=o?i.shape[c-1]:i.shape[c-2],h=a?s.shape[l-1]:s.shape[l-2],f=o?i.shape[c-2]:i.shape[c-1],m=s.shape.slice(0,-2),y=i.shape.slice(0,-2),v=Xe(m),x=Xe(y),_=dn(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,f]);le(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${a} and transposeB=${o} must match.`);const k=a?[v,u,h]:[v,h,u],N=o?[x,f,d]:[x,d,f],A=Tr({inputs:{x:s},backend:n,attrs:{shape:k}}),T=Tr({inputs:{x:i},backend:n,attrs:{shape:N}}),C=a?A.shape[1]:A.shape[2],P=a?A.shape[2]:A.shape[1],$=o?T.shape[1]:T.shape[2],j=Math.max(v,x),O=n.data.get(A.dataId).values,F=n.data.get(T.dataId).values,B=Gt(A.shape),Z=Gt(T.shape),[V,G,U]=a?[B[0],1,B[1]]:[B[0],B[1],1],[K,ee,oe]=o?[1,Z[1],Z[0]]:[Z[1],1,Z[0]],W=P*$,Y=yn([j,P,$],A.dtype),Q=Y.values,J=n.blockSize;for(let te=0;te<j;te++){const me=te%v,ge=te%x;for(let ce=0;ce<P;ce+=J){const Ce=Math.min(ce+J,P);for(let _e=0;_e<$;_e+=J){const we=Math.min(_e+J,$);for(let He=0;He<C;He+=J){const Qe=Math.min(He+J,C);for(let Ae=ce;Ae<Ce;Ae++)for(let he=_e;he<we;he++){let ht=0;for(let Me=He;Me<Qe;Me++){const Ve=O[me*V+Ae*G+Me*U],nt=F[Me*K+he*ee+ge*oe];ht+=Ve*nt}Q[te*W+(Ae*$+he)]+=ht}}}}}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(_,Y.dtype,Y.values)}const b3e={kernelName:E_,backendName:"cpu",kernelFunc:Vse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,f,m;const y=[];h=Vse({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(f=mx({inputs:{a:h,b:a},backend:n}),y.push(h),h=f),u&&(m=Y5(n,h,u,o,d),y.push(h),h=m);for(const x of y)n.disposeIntermediateTensorInfo(x);return h}const _3e={kernelName:N2,backendName:"cpu",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k3e=nr(Vx,t=>Math.acos(t)),S3e={kernelName:Vx,backendName:"cpu",kernelFunc:k3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N3e=nr(Hx,t=>Math.acosh(t)),C3e={kernelName:Hx,backendName:"cpu",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t){const{inputs:e,backend:n}=t,r=e;Rt(e,"addN");const s=r.map(o=>n.data.get(o.dataId).values),i=yn(r[0].shape,r[0].dtype),a=i.values;for(let o=0;o<r.length;o++){const l=s[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const I3e={kernelName:N_,backendName:"cpu",kernelFunc:T3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Rt(s,"all");const o=Sn(i,s.shape);let l=o;const c=rs(l,s.shape.length);let u=s;c!=null&&(u=So({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Cs(l.length,s.shape.length)),qi("all",l,u.shape.length);const[d,h]=Si(u.shape,l),f=Xe(h),m=pa(Xe(d),u.dtype),y=n.data.get(u.dataId).values;for(let x=0;x<m.length;++x){const b=x*f;let _=y[b];for(let k=0;k<f;++k){const N=y[b+k];_=_&&N}m[x]=_}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,m);if(a){const x=Ns(d,o),b=Tr({inputs:{x:v},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(v),b}return v}const E3e={kernelName:zI,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Rt(s,"any");const o=Sn(i,s.shape);let l=o;const c=rs(l,s.shape.length);let u=s;c!=null&&(u=So({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Cs(l.length,s.shape.length)),qi("any",l,u.shape.length);const[d,h]=Si(u.shape,l),f=Xe(h),m=pa(Xe(d),u.dtype),y=n.data.get(u.dataId).values;for(let x=0;x<m.length;++x){const b=x*f;let _=y[b];for(let k=0;k<f;++k){const N=y[b+k];_=_||N}m[x]=_}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,m);if(a){const x=Ns(d,o),b=Tr({inputs:{x:v},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(v),b}return v}const O3e={kernelName:BI,backendName:"cpu",kernelFunc:P3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Rt(s,"argMax");let a=Sn(i,s.shape);const o=rs(a,s.shape.length);let l=s;const c=[];o!=null&&(l=So({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=Cs(a.length,l.shape.length)),a=[a[0]],qi("argMax",a,l.shape.length);const[u,d]=Si(l.shape,a),h=Xe(u),f=pa(h,"int32"),m=Xe(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const x=v*m;let b=y[x],_=0;for(let k=0;k<m;++k){const N=y[x+k];N>b&&(b=N,_=k)}f[v]=_}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const $3e={kernelName:C_,backendName:"cpu",kernelFunc:j3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Rt(s,"argMin");let a=Sn(i,s.shape);const o=rs(a,s.shape.length);let l=s;const c=[];o!=null&&(l=So({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=Cs(a.length,l.shape.length)),a=[a[0]],qi("argMin",a,l.shape.length);const[u,d]=Si(l.shape,a),h=Xe(u),f=pa(h,"int32"),m=Xe(d),y=n.data.get(l.dataId).values;for(let v=0;v<f.length;++v){const x=v*m;let b=y[x],_=0;for(let k=0;k<m;++k){const N=y[x+k];N<b&&(b=N,_=k)}f[v]=_}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",f)}const L3e={kernelName:T_,backendName:"cpu",kernelFunc:D3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R3e=nr(qx,t=>Math.asin(t)),M3e={kernelName:qx,backendName:"cpu",kernelFunc:R3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3e=nr(Gx,t=>Math.asinh(t)),z3e={kernelName:Gx,backendName:"cpu",kernelFunc:F3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e=nr(Kx,t=>Math.atan(t)),W3e={kernelName:Kx,backendName:"cpu",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e=Is((t,e)=>Math.atan2(t,e)),V3e=ri(Yx,U3e),H3e={kernelName:Yx,backendName:"cpu",kernelFunc:V3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q3e=nr(Xx,t=>Math.atanh(t)),G3e={kernelName:Xx,backendName:"cpu",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YF(t,e,n,r,s,i){const a=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=yn(s.outShape,n),v=y.values,x=s.outShape[1]*s.outShape[2]*s.outShape[3],b=s.outShape[2]*s.outShape[3],_=s.outShape[3];for(let k=0;k<s.batchSize;++k){const N=k*x,A=k*r[0];for(let T=0;T<s.inChannels;++T)for(let C=0;C<s.outHeight;++C){const P=C*a-h,$=Math.max(0,P),j=Math.min(s.inHeight,u+P),O=N+C*b;for(let F=0;F<s.outWidth;++F){const B=F*o-f,Z=Math.max(0,B),V=Math.min(s.inWidth,d+B);let G=m,U=0,K=0;for(let oe=$;oe<j;oe+=l){const W=A+oe*r[1];for(let Y=Z;Y<V;Y+=c){const Q=W+Y*r[2],J=t[Q+T];i==="max"&&J>G?G=J:i==="avg"&&(U+=J,K++)}if(isNaN(G))break}const ee=O+F*_+T;v[ee]=i==="avg"?U/K:G}}}return y}function Hse(t,e,n,r,s=!1,i=!1){const a=yn(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,m=r.padInfo.left,y=yn(e,n,t);for(let v=0;v<r.batchSize;++v)for(let x=0;x<r.inChannels;++x)for(let b=0;b<r.outHeight;++b){const _=b*o-f;let k=_;for(;k<0;)k+=c;const N=Math.min(r.inHeight,d+_);for(let A=0;A<r.outWidth;++A){const T=A*l-m;let C=T;for(;C<0;)C+=u;const P=Math.min(r.inWidth,h+T);let $=Number.NEGATIVE_INFINITY,j=-1;for(let O=k;O<N;O+=c){const F=O-_;for(let B=C;B<P;B+=u){const Z=B-T,V=y.get(v,O,B,x);V>$&&($=V,s?j=i?((v*r.inHeight+O)*r.inWidth+B)*r.inChannels+x:(O*r.inWidth+B)*r.inChannels+x:j=F*h+Z)}}a.set(j,v,b,A,x)}}return a}function qse(t,e,n,r,s,i){const a=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,m=s.effectiveFilterWidth,y=s.padInfo.front,v=s.padInfo.top,x=s.padInfo.left,b=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=yn(s.outShape,n),k=_.values,N=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],A=s.outShape[2]*s.outShape[3]*s.outShape[4],T=s.outShape[3]*s.outShape[4],C=s.outShape[4];for(let P=0;P<s.batchSize;++P){const $=P*N,j=P*r[0];for(let O=0;O<s.inChannels;++O)for(let F=0;F<s.outDepth;++F){const B=F*a-y;let Z=B;for(;Z<0;)Z+=c;const V=Math.min(s.inDepth,h+B),G=$+F*A;for(let U=0;U<s.outHeight;++U){const K=U*o-v;let ee=K;for(;ee<0;)ee+=u;const oe=Math.min(s.inHeight,f+K),W=G+U*T;for(let Y=0;Y<s.outWidth;++Y){const Q=Y*l-x;let J=Q;for(;J<0;)J+=d;const te=Math.min(s.inWidth,m+Q),me=W+Y*C;let ge=b,ce=0,Ce=0;for(let we=Z;we<V;we+=c){const He=j+we*r[1];for(let Qe=ee;Qe<oe;Qe+=u){const Ae=He+Qe*r[2];for(let he=J;he<te;he+=d){const ht=Ae+he*r[3],Me=t[ht+O];if(i==="max"&&Me>ge?ge=Me:i==="avg"&&(ce+=Me,Ce++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}const _e=me+O;k[_e]=i==="avg"?ce/Math.max(Ce,1):ge}}}}return _}function K3e(t,e){const n=yn(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let v=0;v<e.inChannels;++v)for(let x=0;x<e.outDepth;++x){const b=x*r-h;let _=b;for(;_<0;)_+=a;const k=Math.min(e.inDepth,c+b);for(let N=0;N<e.outHeight;++N){const A=N*s-f;let T=A;for(;T<0;)T+=o;const C=Math.min(e.inHeight,u+A);for(let P=0;P<e.outWidth;++P){const $=P*i-m;let j=$;for(;j<0;)j+=l;const O=Math.min(e.inWidth,d+$);let F=Number.NEGATIVE_INFINITY,B=-1;for(let Z=_;Z<k;Z+=a){const V=Z-b;for(let G=T;G<C;G+=o){const U=G-A;for(let K=j;K<O;K+=l){const ee=K-$,oe=t.get(y,Z,G,K,v);oe>=F&&(F=oe,B=V*u*d+U*u+ee)}}}n.set(B,y,x,N,P,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Rt(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;le(Hi(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=Vc(s.shape,i,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&jn(u.inShape,u.outShape))d=Hd({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Gt(s.shape),m=YF(h,s.shape,s.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return d}const Y3e={kernelName:I_,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Rt(s,"avgPool3d");const u=hf(s.shape,i,a,1,o,l,c),d=n.data.get(s.dataId).values,h=qse(d,s.shape,s.dtype,Gt(s.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const J3e={kernelName:A_,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q3e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Rt([s,i],"avgPool3DGrad");const u=hf(i.shape,a,o,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,m=u.filterDepth,y=u.filterHeight,v=u.filterWidth,x=u.dilationDepth,b=u.dilationHeight,_=u.dilationWidth,k=u.effectiveFilterDepth,N=u.effectiveFilterHeight,A=u.effectiveFilterWidth,T=k-1-u.padInfo.front,C=A-1-u.padInfo.left,P=N-1-u.padInfo.top,$=yn(i.shape,"float32"),j=1/(m*y*v),O=n.bufferSync(s);for(let F=0;F<u.batchSize;++F)for(let B=0;B<u.inChannels;++B)for(let Z=0;Z<u.inDepth;++Z)for(let V=0;V<u.inHeight;++V)for(let G=0;G<u.inWidth;++G){const U=Z-T,K=V-P,ee=G-C;let oe=0;for(let W=0;W<k;W+=x){const Y=(U+W)/d;if(!(Y<0||Y>=u.outDepth||Math.floor(Y)!==Y))for(let Q=0;Q<N;Q+=b){const J=(K+Q)/h;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let te=0;te<A;te+=_){const me=(ee+te)/f;if(me<0||me>=u.outWidth||Math.floor(me)!==me)continue;const ge=O.get(F,Y,J,me,B);oe+=ge}}}$.set(oe*j,F,Z,V,G,B)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const e4e={kernelName:UI,backendName:"cpu",kernelFunc:Q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;Rt([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=Vc(a.shape,o,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,m=u.filterWidth,y=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterHeight,b=u.effectiveFilterWidth,_=b-1-u.padInfo.left,k=x-1-u.padInfo.top,N=yn(a.shape,"float32"),A=1/(f*m),T=n.data.get(s.dataId).values,C=yn(s.shape,"float32",T);for(let P=0;P<u.batchSize;++P)for(let $=0;$<u.inChannels;++$)for(let j=0;j<u.inHeight;++j)for(let O=0;O<u.inWidth;++O){const F=j-k,B=O-_;let Z=0;for(let V=0;V<x;V+=y){const G=(F+V)/d;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let U=0;U<b;U+=v){const K=(B+U)/h;if(K<0||K>=u.outWidth||Math.floor(K)!==K)continue;const ee=C.get(P,G,K,$);Z+=ee}}N.set(Z*A,P,j,O,$)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const n4e={kernelName:WI,backendName:"cpu",kernelFunc:t4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:a,mean:o,variance:l}=e;le(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Rt([s,o,l,i,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),m=a?n.data.get(a.dataId).values:new Float32Array([0]),y=new Float32Array(u.length),v=m.length,x=f.length,b=h.length,_=d.length;let k=0,N=0,A=0,T=0;for(let C=0;C<u.length;++C)y[C]=m[k++]+(u[C]-d[N++])*f[A++]/Math.sqrt(h[T++]+c),k>=v&&(k=0),N>=_&&(N=0),A>=x&&(A=0),T>=b&&(T=0);return n.makeTensorInfo(s.shape,s.dtype,y)}const s4e={kernelName:U_,backendName:"cpu",kernelFunc:r4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;Rt([s],"batchToSpaceND");const o=i.reduce((x,b)=>x*b),l=Hk(s.shape,i,o),c=qk(l.length,i.length),u=Gk(s.shape,i,o),d=aF(a,i.length),h=oF(u,a,i.length),f=Tr({inputs:{x:s},backend:n,attrs:{shape:l}}),m=So({inputs:{x:f},backend:n,attrs:{perm:c}}),y=Tr({inputs:{x:m},backend:n,attrs:{shape:u}}),v=O0({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const a4e={kernelName:P_,backendName:"cpu",kernelFunc:i4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=HF(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}const l4e={kernelName:VI,backendName:"cpu",kernelFunc:o4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=dn(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const u4e={kernelName:HI,backendName:"cpu",kernelFunc:c4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e=nr(Qx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),h4e={kernelName:Qx,backendName:"cpu",kernelFunc:d4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Xe(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const u=o[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},p4e={kernelName:j_,backendName:"cpu",kernelFunc:f4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gx(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const m4e={kernelName:uA,backendName:"cpu",kernelFunc:gx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yx(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Sn(s,e[0].shape)[0],a=e.map(y=>y.shape);rF(a,i);let o=Dd(e.map(y=>y.shape),i);if(Xe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(y=>Xe(y.shape)>0);if(l.length===1)return Hd({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(k=>P0({inputs:{input:k},backend:n})),v=l.map(k=>gx({inputs:{input:k},backend:n})),x=yx({inputs:y,backend:n,attrs:{axis:i}}),b=yx({inputs:v,backend:n,attrs:{axis:i}}),_=Yo({inputs:{real:x,imag:b},backend:n});return y.forEach(k=>n.disposeIntermediateTensorInfo(k)),v.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),_}const c=l.map(y=>{const x=[-1,Xe(y.shape.slice(i))];return Tr({inputs:{x:y},backend:n,attrs:{shape:x}})}),u=c.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));o=Dd(c.map(y=>y.shape),1);const d=c[0].shape[0]===1,h=Zre(u,o,e[0].dtype,d),f=Dd(l.map(y=>y.shape),i),m=n.makeTensorInfo(f,e[0].dtype,h);return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const g4e={kernelName:$_,backendName:"cpu",kernelFunc:yx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gse(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Rt([s,i],"conv2d");const d=ff(l),h=ki(s.shape,i.shape,a,c,o,u,!1,d),f=h.filterHeight,m=h.filterWidth,y=h.dilationHeight,v=h.dilationWidth,x=h.padInfo.left,b=h.padInfo.top,_=h.dataFormat==="channelsLast",k=new Fs(h.outShape,s.dtype),N=Gt(s.shape),A=Gt(i.shape),T=N[0],C=_?N[1]:N[2],P=_?N[2]:1,$=_?1:N[1],j=k.strides[0],O=_?k.strides[1]:k.strides[2],F=_?k.strides[2]:1,B=_?1:k.strides[1],Z=n.data.get(s.dataId).values,V=n.data.get(i.dataId).values,G=k.values;for(let U=0;U<h.batchSize;++U){const K=U*T,ee=U*j;for(let oe=0;oe<h.outHeight;++oe){const W=ee+oe*O,Y=oe*h.strideHeight-b;for(let Q=0;Q<f;++Q){const J=Y+Q*y;if(J<0||J>=h.inHeight)continue;const te=Q*A[0],me=K+J*C;for(let ge=0;ge<h.outWidth;++ge){const ce=W+ge*F,Ce=ge*h.strideWidth-x;for(let _e=0;_e<m;++_e){const we=Ce+_e*v;if(we<0||we>=h.inWidth)continue;const He=te+_e*A[1],Qe=me+we*P;let Ae=He;for(let he=0;he<h.inChannels;++he){const ht=Z[Qe+he*$];for(let Me=0;Me<h.outChannels;++Me)G[ce+Me*B]+=ht*V[Ae+Me];Ae+=h.outChannels}}}}}}return n.makeTensorInfo(k.shape,k.dtype,G)}const y4e={kernelName:D_,backendName:"cpu",kernelFunc:Gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Rt([s,i],"conv2dBackpropFilter");const d=ff(l),h=ki(s.shape,u,a,1,o,c,!1,d),{strideHeight:f,strideWidth:m,filterHeight:y,filterWidth:v}=h,x=h.dataFormat==="channelsLast",b=new Fs(h.filterShape,"float32"),_=h.padInfo.left,k=h.padInfo.top,N=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,T=new Fs(s.shape,s.dtype,N),C=new Fs(i.shape,i.dtype,A);for(let P=0;P<y;++P){const $=Math.max(0,Math.ceil((k-P)/f)),j=Math.min(h.outHeight,(h.inHeight+k-P)/f);for(let O=0;O<v;++O){const F=Math.max(0,Math.ceil((_-O)/m)),B=Math.min(h.outWidth,(h.inWidth+_-O)/m);for(let Z=0;Z<h.inChannels;++Z)for(let V=0;V<h.outChannels;++V){let G=0;for(let U=0;U<h.batchSize;++U)for(let K=$;K<j;++K){const ee=P+K*f-k;for(let oe=F;oe<B;++oe){const W=O+oe*m-_;x?G+=T.get(U,ee,W,Z)*C.get(U,K,oe,V):G+=T.get(U,Z,ee,W)*C.get(U,V,K,oe)}}b.set(G,P,O,Z,V)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const x4e={kernelName:GI,backendName:"cpu",kernelFunc:v4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;Rt([s,i],"conv2dBackpropInput");const d=Gt(i.shape),h=Gt(s.shape);let f=ff(c);const m=ki(a,i.shape,o,1,l,u,!1,f),y=new Fs(m.inShape,"float32"),v=y.values,x=n.data.get(s.dataId).values,b=n.data.get(i.dataId).values,[_,k,N]=d,{batchSize:A,filterHeight:T,filterWidth:C,inChannels:P,inHeight:$,inWidth:j,outChannels:O,outHeight:F,outWidth:B,strideHeight:Z,strideWidth:V}=m;f=m.dataFormat;const G=T-1-m.padInfo.top,U=C-1-m.padInfo.left,K=f==="channelsLast",ee=y.strides[0],oe=K?y.strides[1]:y.strides[2],W=K?y.strides[2]:1,Y=K?1:y.strides[1],Q=h[0],J=K?h[1]:h[2],te=K?h[2]:1,me=K?1:h[1];for(let ge=0;ge<A;++ge)for(let ce=0;ce<P;++ce)for(let Ce=0;Ce<$;++Ce){const _e=Ce-G,we=Math.max(0,Math.ceil(_e/Z)),He=Math.min(F,(T+_e)/Z);for(let Qe=0;Qe<j;++Qe){const Ae=Qe-U,he=Math.max(0,Math.ceil(Ae/V)),ht=Math.min(B,(C+Ae)/V);let Me=0;for(let nt=we;nt<He;++nt){const pe=nt*Z-_e;for(let xe=he;xe<ht;++xe){const je=xe*V-Ae,qe=Q*ge+J*nt+te*xe,Ge=_*(T-1-pe)+k*(C-1-je)+N*ce;for(let Ue=0;Ue<O;++Ue){const st=x[qe+me*Ue],wt=b[Ge+Ue];Me+=st*wt}}}const Ve=ee*ge+oe*Ce+W*Qe+Y*ce;v[Ve]=Me}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const w4e={kernelName:L_,backendName:"cpu",kernelFunc:b4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r;Rt([s,i],"conv3d");const c=Cm(s.shape,i.shape,a,l,o),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:m,dilationWidth:y,padInfo:v}=c,x=v.front,b=v.left,_=v.top,k=new Fs(c.outShape,s.dtype),N=n.data.get(s.dataId).values,A=n.data.get(i.dataId).values,T=k.values,C=Gt(s.shape),P=Gt(i.shape);for(let $=0;$<c.batchSize;++$){const j=$*C[0],O=$*k.strides[0];for(let F=0;F<c.outDepth;++F){const B=O+F*k.strides[1],Z=F*c.strideDepth-x;for(let V=0;V<u;++V){const G=Z+V*f;if(G<0||G>=c.inDepth)continue;const U=V*P[0],K=j+G*C[1];for(let ee=0;ee<c.outHeight;++ee){const oe=B+ee*k.strides[2],W=ee*c.strideHeight-_;for(let Y=0;Y<d;++Y){const Q=W+Y*m;if(Q<0||Q>=c.inHeight)continue;const J=U+Y*P[1],te=K+Q*C[2];for(let me=0;me<c.outWidth;++me){const ge=oe+me*c.outChannels,ce=me*c.strideWidth-b;for(let Ce=0;Ce<h;++Ce){const _e=ce+Ce*y;if(_e<0||_e>=c.inWidth)continue;const we=J+Ce*P[2],He=te+_e*c.inChannels;let Qe=we;for(let Ae=0;Ae<c.inChannels;++Ae){const he=N[He+Ae];for(let ht=0;ht<c.outChannels;++ht)T[ge+ht]+=he*A[Qe+ht];Qe+=c.outChannels}}}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const k4e={kernelName:R_,backendName:"cpu",kernelFunc:_4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r;Rt([s,i],"conv3dBackpropFilterV2");const c=Gt(s.shape),u=Gt(i.shape),d=Cm(s.shape,l,a,1,o),h=d.strideDepth,f=d.strideHeight,m=d.strideWidth,y=d.filterDepth,v=d.filterHeight,x=d.filterWidth,b=new Fs(d.filterShape,"float32"),_=b.values,[k,N,A,T]=b.strides,C=n.data.get(i.dataId).values,[P,$,j,O]=u,F=n.data.get(s.dataId).values,[B,Z,V,G]=c,U=d.padInfo.front,K=d.padInfo.left,ee=d.padInfo.top;for(let oe=0;oe<y;++oe){const W=Math.max(0,Math.ceil((U-oe)/h)),Y=Math.min(d.outDepth,(d.inDepth+U-oe)/h),Q=oe*k;for(let J=0;J<v;++J){const te=Math.max(0,Math.ceil((ee-J)/f)),me=Math.min(d.outHeight,(d.inHeight+ee-J)/f),ge=J*N+Q;for(let ce=0;ce<x;++ce){const Ce=Math.max(0,Math.ceil((K-ce)/m)),_e=Math.min(d.outWidth,(d.inWidth+K-ce)/m),we=ce*A+ge;for(let He=0;He<d.inChannels;++He){const Qe=He*T+we;for(let Ae=0;Ae<d.outChannels;++Ae){let he=0;for(let ht=0;ht<d.batchSize;++ht){const Me=ht*B,Ve=ht*P;for(let nt=W;nt<Y;++nt){const xe=(oe+nt*h-U)*Z+Me,je=nt*$+Ve;for(let qe=te;qe<me;++qe){const Ue=(J+qe*f-ee)*V+xe,st=qe*j+je;for(let wt=Ce;wt<_e;++wt){const zt=(ce+wt*m-K)*G+Ue,ft=wt*O+st;he+=F[zt+He]*C[ft+Ae]}}}}_[Qe+Ae]=he}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const N4e={kernelName:KI,backendName:"cpu",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r;Rt([s],"conv3dBackpropInputV2");const c=Gt(s.shape),u=Gt(i.shape),d=Cm(l,i.shape,o,1,a),h=new Fs(d.inShape,"float32"),f=h.values,[m,y,v,x]=h.strides,b=n.data.get(s.dataId).values,[_,k,N,A]=c,T=n.data.get(i.dataId).values,[C,P,$,j]=u,{batchSize:O,filterDepth:F,filterHeight:B,filterWidth:Z,inChannels:V,inDepth:G,inHeight:U,inWidth:K,outChannels:ee,outDepth:oe,outHeight:W,outWidth:Y,strideDepth:Q,strideHeight:J,strideWidth:te}=d,me=F-1-d.padInfo.front,ge=B-1-d.padInfo.top,ce=Z-1-d.padInfo.left;for(let Ce=0;Ce<O;++Ce)for(let _e=0;_e<V;++_e)for(let we=0;we<G;++we){const He=we-me,Qe=Math.max(0,Math.ceil(He/Q)),Ae=Math.min(oe,(F+He)/Q);for(let he=0;he<U;++he){const ht=he-ge,Me=Math.max(0,Math.ceil(ht/J)),Ve=Math.min(W,(B+ht)/J);for(let nt=0;nt<K;++nt){const pe=nt-ce,xe=Math.max(0,Math.ceil(pe/te)),je=Math.min(Y,(Z+pe)/te);let qe=0;for(let Ge=Qe;Ge<Ae;++Ge){const Ue=Ge*Q-He;for(let st=Me;st<Ve;++st){const wt=st*J-ht;for(let gt=xe;gt<je;++gt){const zt=gt*te-pe,ft=_*Ce+k*Ge+N*st+A*gt,wn=C*(F-1-Ue)+P*(B-1-wt)+$*(Z-1-zt)+j*_e;for(let nn=0;nn<ee;++nn){const qr=b[ft+nn],Dn=T[wn+nn];qe+=qr*Dn}}}}f[m*Ce+y*we+v*he+x*nt+_e]=qe}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const T4e={kernelName:XI,backendName:"cpu",kernelFunc:C4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e=nr(eb,t=>Math.cos(t)),A4e={kernelName:eb,backendName:"cpu",kernelFunc:I4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e=nr(tb,t=>Math.cosh(t)),P4e={kernelName:tb,backendName:"cpu",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,h,f]=s.shape,m=i.shape[0],[y,v]=o,x=yn([m,y,v,f],"float32"),b=n.data.get(i.dataId).values,_=n.data.get(a.dataId).values,k=n.data.get(s.dataId).values,N=Gt(s.shape),A=Gt(x.shape);for(let T=0;T<m;T++){const C=T*4,P=b[C],$=b[C+1],j=b[C+2],O=b[C+3],F=_[T];if(F>=u)continue;const B=y>1?(j-P)*(d-1)/(y-1):0,Z=v>1?(O-$)*(h-1)/(v-1):0;for(let V=0;V<y;V++){const G=y>1?P*(d-1)+V*B:.5*(P+j)*(d-1);if(G<0||G>d-1){for(let U=0;U<v;U++)for(let K=0;K<f;K++){const ee=K+U*A[2]+V*A[1]+T*A[0];x.values[ee]=c}continue}if(l==="bilinear"){const U=Math.floor(G),K=Math.ceil(G),ee=G-U;for(let oe=0;oe<v;oe++){const W=v>1?$*(h-1)+oe*Z:.5*($+O)*(h-1);if(W<0||W>h-1){for(let te=0;te<f;te++){const me=te+oe*A[2]+V*A[1]+T*A[0];x.values[me]=c}continue}const Y=Math.floor(W),Q=Math.ceil(W),J=W-Y;for(let te=0;te<f;te++){let me=te+Y*N[2]+U*N[1]+F*N[0];const ge=k[me];me=te+Q*N[2]+U*N[1]+F*N[0];const ce=k[me];me=te+Y*N[2]+K*N[1]+F*N[0];const Ce=k[me];me=te+Q*N[2]+K*N[1]+F*N[0];const _e=k[me],we=ge+(ce-ge)*J,He=Ce+(_e-Ce)*J;me=te+oe*A[2]+V*A[1]+T*A[0],x.values[me]=we+(He-we)*ee}}}else for(let U=0;U<v;++U){const K=v>1?$*(h-1)+U*Z:.5*($+O)*(h-1);if(K<0||K>h-1){for(let W=0;W<f;W++){const Y=W+U*A[2]+V*A[1]+T*A[0];x.values[Y]=c}continue}const ee=Math.round(K),oe=Math.round(G);for(let W=0;W<f;W++){const Y=W+ee*N[2]+oe*N[1]+F*N[0],Q=W+U*A[2]+V*A[1]+T*A[0];x.values[Q]=k[Y]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const j4e={kernelName:ZI,backendName:"cpu",kernelFunc:O4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;Rt(s,"cumprod");const l=rs([i],s.shape.length);let c=s;l!=null&&(c=So({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Cs(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=xo(c.dtype,"int32"),h=_R(Xe(c.shape),d),f=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],y=o?(x,b)=>x+m-b-1:(x,b)=>x+b;for(let x=0;x<f.length;x+=m)for(let b=0;b<m;b++){const _=y(x,b);if(b===0)h[_]=a?1:f[_];else{const k=y(x,b-1);h[_]=a?f[k]*h[k]:f[_]*h[k]}}const v=n.makeTensorInfo(c.shape,d,h);if(l!=null){const x=Tm(l),b=So({inputs:{x:v},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),b}return v}const D4e={kernelName:YI,backendName:"cpu",kernelFunc:$4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;Rt(s,"cumsum");const l=rs([i],s.shape.length);let c=s;l!=null&&(c=So({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=Cs(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=xo(c.dtype,"int32"),h=pa(Xe(c.shape),d),f=n.data.get(c.dataId).values,m=c.shape[c.shape.length-1],y=o?(x,b)=>x+m-b-1:(x,b)=>x+b;for(let x=0;x<f.length;x+=m)for(let b=0;b<m;b++){const _=y(x,b);if(b===0)h[_]=a?0:f[_];else{const k=y(x,b-1);h[_]=a?f[k]+h[k]:f[_]+h[k]}}const v=n.makeTensorInfo(c.shape,d,h);if(l!=null){const x=Tm(l),b=So({inputs:{x:v},backend:n,attrs:{perm:x}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),b}return v}const R4e={kernelName:M_,backendName:"cpu",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=HF(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=Kre(l,c,a,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const F4e={kernelName:JI,backendName:"cpu",kernelFunc:M4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r;le(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*i,h=c*i,f=u/(i*i),m=n.data.get(s.dataId).values,y=new Float32Array(o*d*h*f);let v=0;for(let x=0;x<o;++x)for(let b=0;b<d;++b){const _=Math.floor(b/i),k=b%i;for(let N=0;N<h;++N){const A=Math.floor(N/i),T=N%i,C=(k*i+T)*f;for(let P=0;P<f;++P){const j=P+C+u*(A+c*(_+l*x));y[v++]=m[j]}}}return n.makeTensorInfo([o,d,h,f],s.dtype,y)}const B4e={kernelName:QI,backendName:"cpu",kernelFunc:z4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kse(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Rt([s,i],"depthwiseConv2DNative");const u=Gt(s.shape),d=Gt(i.shape);let h=l;h==null&&(h=[1,1]),le(Hi(a,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${h}'`);const f=ki(s.shape,i.shape,a,h,o,c,!0),{filterHeight:m,filterWidth:y,dilationHeight:v,dilationWidth:x,padInfo:b}=f,_=b.left,k=b.top,N=f.outChannels/f.inChannels,A=new Fs(f.outShape,s.dtype),T=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,P=A.values;for(let $=0;$<f.batchSize;++$){const j=$*u[0],O=$*A.strides[0];for(let F=0;F<f.outHeight;++F){const B=O+F*A.strides[1],Z=F*f.strideHeight-k;for(let V=0;V<m;++V){const G=Z+V*v;if(G<0||G>=f.inHeight)continue;const U=V*d[0],K=j+G*u[1];for(let ee=0;ee<f.outWidth;++ee){const oe=B+ee*A.strides[2],W=ee*f.strideWidth-_;for(let Y=0;Y<y;++Y){const Q=W+Y*x;if(Q<0||Q>=f.inWidth)continue;const J=U+Y*d[1],te=K+Q*f.inChannels;let me=oe,ge=J;for(let ce=0;ce<f.inChannels;++ce){const Ce=T[te+ce];for(let _e=0;_e<N;++_e)P[me+_e]+=Ce*C[ge+_e];me+=N,ge+=N}}}}}}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const W4e={kernelName:F_,backendName:"cpu",kernelFunc:Kse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;Rt([s,i],"depthwiseConv2dNativeBackpropFilter");const d=ki(s.shape,u,a,o,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:y}=d,v=new Fs(d.filterShape,"float32"),x=d.padInfo.left,b=d.padInfo.top,_=d.outChannels/d.inChannels,k=n.data.get(s.dataId).values,N=new Fs(s.shape,s.dtype,k),A=n.data.get(i.dataId).values,T=new Fs(i.shape,i.dtype,A);for(let C=0;C<m;++C){const P=Math.max(0,Math.ceil((b-C)/h)),$=Math.min(d.outHeight,(d.inHeight+b-C)/h);for(let j=0;j<y;++j){const O=Math.max(0,Math.ceil((x-j)/f)),F=Math.min(d.outWidth,(d.inWidth+x-j)/f);for(let B=0;B<d.outChannels;++B){const Z=Math.trunc(B/_),V=B%_;let G=0;for(let U=0;U<d.batchSize;++U)for(let K=P;K<$;++K){const ee=C+K*h-b;for(let oe=O;oe<F;++oe){const W=j+oe*f-x;G+=N.get(U,ee,W,Z)*T.get(U,K,oe,B)}}v.set(G,C,j,Z,V)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const V4e={kernelName:eA,backendName:"cpu",kernelFunc:U4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;Rt([s,i],"depthwiseConv2DNativeBackpropInput");const d=Gt(s.shape),h=Gt(i.shape),f=ki(u,i.shape,a,o,l,c,!0),m=new Fs(f.inShape,"float32"),y=m.values,[v,x,b]=m.strides,_=n.data.get(s.dataId).values,[k,N,A]=d,T=n.data.get(i.dataId).values,[C,P,$]=h,{batchSize:j,filterHeight:O,filterWidth:F,inChannels:B,inHeight:Z,inWidth:V,outChannels:G,outHeight:U,outWidth:K,strideHeight:ee,strideWidth:oe}=f,W=O-1-f.padInfo.top,Y=F-1-f.padInfo.left,Q=G/B;for(let J=0;J<j;++J)for(let te=0;te<B;++te)for(let me=0;me<Z;++me){const ge=me-W,ce=Math.max(0,Math.ceil(ge/ee)),Ce=Math.min(U,(O+ge)/ee);for(let _e=0;_e<V;++_e){const we=_e-Y,He=Math.max(0,Math.ceil(we/oe)),Qe=Math.min(K,(F+we)/oe);let Ae=0;for(let he=ce;he<Ce;++he){const ht=he*ee-ge;for(let Me=He;Me<Qe;++Me){const Ve=Me*oe-we,nt=k*J+N*he+A*Me,pe=C*(O-1-ht)+P*(F-1-Ve)+$*te;for(let xe=0;xe<Q;++xe){const je=te*Q+xe,qe=_[nt+je],Ge=T[pe+xe];Ae+=qe*Ge}}}y[v*J+x*me+b*_e+te]=Ae}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const q4e={kernelName:tA,backendName:"cpu",kernelFunc:H4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=Xe(r.shape),i=n.data.get(r.dataId).values,a=yn([s,s],r.dtype),o=a.values;for(let c=0;c<i.length;c++)o[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const K4e={kernelName:nA,backendName:"cpu",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:z_,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:a,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:m,inWidth:y,inChannels:v,outHeight:x,outWidth:b,padInfo:_,strideHeight:k,strideWidth:N,filterHeight:A,filterWidth:T,dilationHeight:C,dilationWidth:P,outShape:$}=Ik(r.shape,s.shape,i,a,"NHWC",o),j=Xe($),O=$.length,F=_s(r.dtype,j);for(let Z=0;Z<f;++Z)for(let V=0;V<x;++V){const G=V*k-_.top;for(let U=0;U<b;++U){const K=U*N-_.left;for(let ee=0;ee<v;++ee){let oe=Number.MIN_SAFE_INTEGER;for(let Y=0;Y<A;++Y){const Q=G+Y*C;if(Q>=0&&Q<m)for(let J=0;J<T;++J){const te=K+J*P;if(te>=0&&te<y){const me=jd([Z,Q,te,ee],u,Gt(r.shape)),ge=jd([Y,J,ee],h,Gt(s.shape)),ce=c[me]+d[ge];ce>oe&&(oe=ce)}}}const W=jd([Z,V,U,ee],O,Gt($));F[W]=oe}}}return{dataId:l.write(Y0(F,r.dtype),$,r.dtype),shape:$,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:E5,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=Pc(r.shape,c.data.get(r.dataId).values),d=Pc(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:x,padInfo:b,strideHeight:_,strideWidth:k,filterHeight:N,filterWidth:A,dilationHeight:T,dilationWidth:C,outShape:P}=Ik(r.shape,s.shape,a,o,"NHWC",l);le(i.rank===P.length,()=>`Error in ${E5}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);const $=Pc(P,c.data.get(i.dataId).values),j=ZJ(s.shape,s.dtype);for(let F=0;F<h;++F)for(let B=0;B<v;++B){const Z=B*_-b.top;for(let V=0;V<x;++V){const G=V*k-b.left;for(let U=0;U<y;++U){let K=Number.MIN_SAFE_INTEGER,ee=0,oe=0;for(let W=0;W<N;++W){const Y=Z+W*T;if(Y>=0&&Y<f)for(let Q=0;Q<A;++Q){const J=G+Q*C;if(J>=0&&J<m){const te=u[F][Y][J][U]+d[W][Q][U];te>K&&(K=te,ee=W,oe=Q)}}}j[ee][oe][U]+=$[F][B][V][U]}}}return{dataId:c.write(Y0(j,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={kernelName:A5,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=Pc(r.shape,c.data.get(r.dataId).values),d=Pc(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:m,inChannels:y,outHeight:v,outWidth:x,padInfo:b,strideHeight:_,strideWidth:k,filterHeight:N,filterWidth:A,dilationHeight:T,dilationWidth:C,outShape:P}=Ik(r.shape,s.shape,a,o,"NHWC",l);le(i.rank===P.length,()=>`Error in ${A5}, dy must have the same rank as output ${P.length}, but got ${i.rank}`);const $=Pc(P,c.data.get(i.dataId).values),j=ZJ(r.shape,r.dtype);for(let F=0;F<h;++F)for(let B=0;B<v;++B){const Z=B*_-b.top;for(let V=0;V<x;++V){const G=V*k-b.left;for(let U=0;U<y;++U){let K=Number.MIN_SAFE_INTEGER,ee=Z<0?0:Z,oe=G<0?0:G;for(let W=0;W<N;++W){const Y=Z+W*T;if(Y>=0&&Y<f)for(let Q=0;Q<A;++Q){const J=G+Q*C;if(J>=0&&J<m){const te=u[F][Y][J][U]+d[W][Q][U];te>K&&(K=te,ee=Y,oe=J)}}}j[F][ee][oe][U]+=$[F][B][V][U]}}}return{dataId:c.write(Y0(j,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=(l==null?void 0:l.alpha)||1,u=(o==null?void 0:o.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=i.getContext(u,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=s.shape.slice(0,2),m=s.shape.length===2?1:s.shape[2],y=n.data.get(s.dataId).values,v=s.dtype==="float32"?255:1,x=new Uint8ClampedArray(f*h*4);for(let _=0;_<h*f;++_){const k=[0,0,0,255*c];for(let A=0;A<m;A++){const T=y[_*m+A];if(s.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(s.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);m===1?(k[0]=T*v,k[1]=T*v,k[2]=T*v):k[A]=T*v}const N=_*4;x[N+0]=Math.round(k[0]),x[N+1]=Math.round(k[1]),x[N+2]=Math.round(k[2]),x[N+3]=Math.round(k[3])}i.width=f,i.height=h;const b=new ImageData(x,f,h);return d.putImageData(b,0,0),s}const Q4e={kernelName:tQ,backendName:"cpu",kernelFunc:J4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nS(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Rt(s,"sum");let o;s.dtype==="bool"?o=dm({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):o=Hd({inputs:{x:s},backend:n});const l=o.shape.length,c=Sn(i,o.shape),u=rs(c,l);let d=c,h=o;u!=null&&(h=So({inputs:{x:o},backend:n,attrs:{perm:u}}),d=Cs(d.length,l)),qi("sum",d,h.shape.length);const[f,m]=Si(h.shape,d),y=xo(h.dtype,"int32");let v=K5(n,f,y);const x=Xe(m),b=n.data.get(v.dataId).values,_=n.data.get(h.dataId).values;for(let k=0;k<b.length;++k){const N=k*x;let A=0;for(let T=0;T<x;++T)A+=_[N+T];b[k]=A}if(a){const k=Ns(v.shape,c),N=v;v=Tr({inputs:{x:v},backend:n,attrs:{shape:k}}),n.disposeIntermediateTensorInfo(N)}return n.disposeIntermediateTensorInfo(o),u!=null&&n.disposeIntermediateTensorInfo(h),v}const eje={kernelName:xk,backendName:"cpu",kernelFunc:nS};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tje(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=mF(s,i.length);yF(a.length,l,i);const{path:c,steps:u}=vF(o,l),d=u.length;let h=null,f=a.length;const m=[];for(let y=0;y<d;++y){for(const v of u[y]){const{permutationIndices:x,expandDims:b}=gF(f,l[v]);let _;xF(x)?_=i[v]:(_=So({inputs:{x:i[v]},backend:n,attrs:{perm:x}}),m.push(_));const k=_.shape.slice();for(let N=0;N<b.length;++N)k.splice(b[N],0,1);jn(_.shape,k)||(_=Tr({inputs:{x:_},backend:n,attrs:{shape:k}}),m.push(_)),h===null?h=_:(h=ME({inputs:{a:_,b:h},backend:n}),m.push(h))}y<d-1&&(c[y]>=0&&(h=nS({inputs:{x:h},backend:n,attrs:{axis:c[y]-(a.length-f),keepDims:!1}}),m.push(h)),f--)}for(const y of m)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const nje={kernelName:rA,backendName:"cpu",kernelFunc:tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rje(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Rt([r,s],"eluGrad");const i=new Float32Array(Xe(s.shape)),a=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?i[l]=o[l]:i[l]=o[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const sje={kernelName:sA,backendName:"cpu",kernelFunc:rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ije=lF,aje=cF,oje=uF,lje=dF,cje=hF,uje=fF,dje=nr(sb,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+ije*n);return e*(1-((((uje*r+cje)*r+lje)*r+oje)*r+aje)*r*Math.exp(-n*n))}),hje={kernelName:sb,backendName:"cpu",kernelFunc:dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(le(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Tr({inputs:{x:s},backend:n,attrs:{shape:o}})}const fje={kernelName:W_,backendName:"cpu",kernelFunc:Z5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pje=Is((t,e)=>t/e),ZF=ri(nb,pje),S$={kernelName:nb,backendName:"cpu",kernelFunc:ZF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xse(t,e,n){const r=t.shape,s=r[0],i=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[s,i],u=Xe(c),d=Ui("float32",u),h=Ui("float32",u);for(let v=0;v<s;v++){const x=O0({inputs:{x:o},backend:n,attrs:{begin:[v,0],size:[1,i]}}),b=O0({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),_=Yo({inputs:{real:x,imag:b},backend:n}),{real:k,imag:N}=mje(_,e,n),A=nf(k,N);for(let T=0;T<i;T++){const C=pF(A,T);d[v*i+T]=C.real,h[v*i+T]=C.imag}n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(_)}const f=n.makeTensorInfo(c,"float32",d),m=n.makeTensorInfo(c,"float32",h),y=Yo({inputs:{real:f,imag:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}function mje(t,e,n){const r=Xe(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,a=n.data.get(s.complexTensorInfos.imag.dataId).values;if(gje(r)){const o=N$(i,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),u=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",km(r,"float32")),h=Hd({inputs:{x:d},backend:n}),f=S$.kernelFunc({inputs:{a:c,b:d},backend:n}),m=S$.kernelFunc({inputs:{a:u,b:h},backend:n}),y=n.data.get(f.dataId).values,v=n.data.get(m.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),{real:y,imag:v}}return o}else{const o=nf(i,a),l=yje(o,r,e);return ite(l)}}function gje(t){return(t&t-1)===0}function N$(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=nf(t,e),a=n/2,o=ate(i),l=o.real,c=o.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),f=Yo({inputs:{real:d,imag:h},backend:s}),m=ote(i),y=m.real,v=m.imag,x=[y.length],b=s.makeTensorInfo(x,"float32",y),_=s.makeTensorInfo(x,"float32",v),k=Yo({inputs:{real:b,imag:_},backend:s}),N=N$(l,c,a,r,s),A=N.real,T=N.imag,C=[A.length],P=s.makeTensorInfo(C,"float32",A),$=s.makeTensorInfo(C,"float32",T),j=Yo({inputs:{real:P,imag:$},backend:s}),O=N$(y,v,a,r,s),F=O.real,B=O.imag,Z=[F.length],V=s.makeTensorInfo(Z,"float32",F),G=s.makeTensorInfo(Z,"float32",B),U=Yo({inputs:{real:V,imag:G},backend:s}),K=cte(n,r),ee=[K.real.length],oe=s.makeTensorInfo(ee,"float32",K.real),W=s.makeTensorInfo(ee,"float32",K.imag),Y=Yo({inputs:{real:oe,imag:W},backend:s}),Q=ME({inputs:{a:Y,b:U},backend:s}),J=mx({inputs:{a:j,b:Q},backend:s}),te=XF({inputs:{a:j,b:Q},backend:s}),me=P0({inputs:{input:J},backend:s}),ge=P0({inputs:{input:te},backend:s}),ce=gx({inputs:{input:J},backend:s}),Ce=gx({inputs:{input:te},backend:s}),_e=yx({inputs:[me,ge],backend:s,attrs:{axis:0}}),we=yx({inputs:[ce,Ce],backend:s,attrs:{axis:0}}),He=s.data.get(_e.dataId).values,Qe=s.data.get(we.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(_),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(U),s.disposeIntermediateTensorInfo(oe),s.disposeIntermediateTensorInfo(W),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(me),s.disposeIntermediateTensorInfo(ce),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(we),{real:He,imag:Qe}}function yje(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,a=0;for(let o=0;o<e;o++){const l=ute(s*o,e,n),c=pF(t,o);i+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}n&&(i/=e,a/=e),lte(r,i,a,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Xe(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Tr({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=Xse(o,!1,n),c=Tr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const xje={kernelName:iA,backendName:"cpu",kernelFunc:vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,a=i||Wx(s),o=_s(a,Xe(r));return wje(o,s,a),e.makeTensorInfo(r,a,o)}const bje={kernelName:aA,backendName:"cpu",kernelFunc:JF};function wje(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _je={kernelName:oA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=Ui(r.dtype,Xe(r.shape)),[a,o,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let h=0;h<a;h++){const f=h*l*o*c;for(let m=0;m<o;m++){const y=m*(l*c);for(let v=0;v<l;v++){const x=v*c;for(let b=0;b<c;b++){const _=Math.round(l-v-1),k=f+y+x+b;let N=u[k];if(_>=0&&_<l){const A=_*c,T=f+y+A+b;N=u[T]}i[k]=N}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r;let y=Gse({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const v=y;if(u==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const x=Tr({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});y=mx({inputs:{a:y,b:x},backend:n}),n.disposeIntermediateTensorInfo(x)}else y=mx({inputs:{a:y,b:a},backend:n});n.disposeIntermediateTensorInfo(v)}if(f){const v=y;if(u==="NCHW"&&f==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const x=Tr({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=Y5(n,y,f,x,m),n.disposeIntermediateTensorInfo(x)}else y=Y5(n,y,f,o,m);n.disposeIntermediateTensorInfo(v)}return y}const Sje={kernelName:C2,backendName:"cpu",kernelFunc:kje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r;let y=Kse({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(a){const v=y;y=mx({inputs:{a:y,b:a},backend:n}),n.disposeIntermediateTensorInfo(v)}if(f){const v=y;y=Y5(n,y,f,o,m),n.disposeIntermediateTensorInfo(v)}return y}const Cje={kernelName:T2,backendName:"cpu",kernelFunc:Nje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tje(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=Xe(r.shape),a=s.shape,o=a[a.length-1],[l,c,u,d]=eF(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(s.dataId).values,f=n.bufferSync(r),m=ise(h,f,r.dtype,c,o,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,m.values)}const Ije={kernelName:lA,backendName:"cpu",kernelFunc:Tje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r;Rt([s,i],"gatherV2");const l=Sn(a,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let k=0;k<c.length;++k){const N=c[k];le(N<=u-1&&N>=0,()=>`GatherV2: the index value ${N} is not in [0, ${u-1}]`)}let d=o;o==null&&(d=0);const h=Xe(i.shape),f=_te(s,i,l,d),m=Tr({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),y=Tr({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),v=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],x=n.bufferSync(y),b=n.bufferSync(m),_=ase(b,x,v);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(f.outputShape,_.dtype,_.values)}const Eje={kernelName:V_,backendName:"cpu",kernelFunc:Aje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pje(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Xe(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Tr({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=Xse(o,!0,n),c=Tr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const Oje={kernelName:cA,backendName:"cpu",kernelFunc:Pje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jje=nr(db,t=>Number.isFinite(t)?1:0,"bool"),$je={kernelName:db,backendName:"cpu",kernelFunc:jje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dje=nr(hb,t=>Math.abs(t)===1/0?1:0,"bool"),Lje={kernelName:hb,backendName:"cpu",kernelFunc:Dje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rje=nr(fb,t=>Number.isNaN(t)?1:0,"bool"),Mje={kernelName:fb,backendName:"cpu",kernelFunc:Rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=dse(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const zje={kernelName:dA,backendName:"cpu",kernelFunc:Fje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bje=nr(mb,t=>Math.log1p(t)),Wje={kernelName:mb,backendName:"cpu",kernelFunc:Bje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uje=Is((t,e)=>t&&e),Vje=ri(X_,Uje,null,"bool"),Hje={kernelName:X_,backendName:"cpu",kernelFunc:Vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje=nr(Y_,t=>t?0:1,"bool"),Gje={kernelName:Y_,backendName:"cpu",kernelFunc:qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kje=Is((t,e)=>t||e),Xje=ri(Z_,Kje,null,"bool"),Yje={kernelName:Z_,backendName:"cpu",kernelFunc:Xje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r;Rt(s,"LRN");const c=s.shape[3],u=c-1,d=n.data.get(s.dataId).values,h=Xe(s.shape),f=new Float32Array(h);function m(y){const v=y%c;let x=y-v+Math.max(0,v-i);const b=y-v+Math.min(v+i,u);let _=0;for(;x<=b;x++){const k=d[x];_+=k*k}return _}for(let y=0;y<h;y++){const v=m(y),x=d[y]*Math.pow(a+o*v,-l);f[y]=x}return n.makeTensorInfo(s.shape,s.dtype,f)}const Jje={kernelName:J_,backendName:"cpu",kernelFunc:Zje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r;Rt(a,"LRNGrad");const d=Xe(a.shape),h=a.shape[3],f=n.data.get(a.dataId).values,m=n.data.get(s.dataId).values,y=n.data.get(i.dataId).values,v=new Float32Array(d),x=d;for(let b=0;b<x;b++){const _=b%h,k=b-_+Math.max(0,_-o),N=b-_+Math.min(h,_+o+1);let A=0;for(let T=k;T<N;T++)A+=Math.pow(m[T],2);A=c*A+l;for(let T=k;T<N;T++){let C=-2*c*u*m[T]*y[b]/A;b===T&&(C+=Math.pow(A,-u)),C*=f[b],v[T]+=C}}return n.makeTensorInfo(a.shape,s.dtype,v)}const e$e={kernelName:hA,backendName:"cpu",kernelFunc:Qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=n;let l=s.shape;const c=l.length,u=Sn(i,l);let d=u;const h=rs(d,c);let f=o.data.get(s.dataId).values;if(h!=null){const k=new Array(c);for(let N=0;N<k.length;N++)k[N]=l[h[N]];f=GF(f,l,s.dtype,h,k),d=Cs(d.length,c),l=k}Rt(s,"max"),qi("max",d,c);const[m,y]=Si(l,d),v=Xe(y),x=fse(f,v,m,s.dtype),b=o.write(x,m,s.dtype);let _=m;return a&&(_=Ns(m,u)),{dataId:b,shape:_,dtype:s.dtype}}const t$e={kernelName:Q_,backendName:"cpu",kernelFunc:Yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Rt(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;le(Hi(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=Vc(s.shape,i,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&jn(u.inShape,u.outShape))d=Hd({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Gt(s.shape),m=YF(h,s.shape,s.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,s.dtype,m.values)}return d}const r$e={kernelName:ek,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Rt(s,"maxPool3d");const u=hf(s.shape,i,a,1,o,l,c),d=n.data.get(s.dataId).values,h=qse(d,s.shape,s.dtype,Gt(s.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const i$e={kernelName:tk,backendName:"cpu",kernelFunc:s$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Rt([s,i],"maxPool3DGrad");const u=hf(i.shape,a,o,1,l,c),d=n.bufferSync(i),h=K3e(d,u),f=u.strideDepth,m=u.strideHeight,y=u.strideWidth,v=u.dilationDepth,x=u.dilationHeight,b=u.dilationWidth,_=u.effectiveFilterDepth,k=u.effectiveFilterHeight,N=u.effectiveFilterWidth,A=_-1-u.padInfo.front,T=N-1-u.padInfo.left,C=k-1-u.padInfo.top,P=yn(i.shape,"float32"),$=n.bufferSync(s);for(let j=0;j<u.batchSize;++j)for(let O=0;O<u.inChannels;++O)for(let F=0;F<u.inDepth;++F)for(let B=0;B<u.inHeight;++B)for(let Z=0;Z<u.inWidth;++Z){const V=F-A,G=B-C,U=Z-T;let K=0;for(let ee=0;ee<_;ee+=v){const oe=(V+ee)/f;if(!(oe<0||oe>=u.outDepth||Math.floor(oe)!==oe))for(let W=0;W<k;W+=x){const Y=(G+W)/m;if(!(Y<0||Y>=u.outHeight||Math.floor(Y)!==Y))for(let Q=0;Q<N;Q+=b){const J=(U+Q)/y;if(J<0||J>=u.outWidth||Math.floor(J)!==J)continue;const te=_*k*N-1-h.get(j,oe,Y,J,O),me=ee*k*N+W*N+Q,ge=te===me?1:0;if(ge===0)continue;const ce=$.get(j,oe,Y,J,O);K+=ce*ge}}}P.set(K,j,F,B,Z,O)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const o$e={kernelName:pA,backendName:"cpu",kernelFunc:a$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;Rt([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Vc(o.shape,l,c,1,u,d),f=n.data.get(o.dataId).values,m=yn(h.outShape,o.dtype,Hse(f,o.shape,o.dtype,h).values),y=h.strideHeight,v=h.strideWidth,x=h.dilationHeight,b=h.dilationWidth,_=h.effectiveFilterHeight,k=h.effectiveFilterWidth,N=k-1-h.padInfo.left,A=_-1-h.padInfo.top,T=yn(o.shape,"float32"),C=n.data.get(s.dataId).values,P=yn(s.shape,"float32",C);for(let $=0;$<h.batchSize;++$)for(let j=0;j<h.inChannels;++j)for(let O=0;O<h.inHeight;++O)for(let F=0;F<h.inWidth;++F){const B=O-A,Z=F-N;let V=0;for(let G=0;G<_;G+=x){const U=(B+G)/y;if(!(U<0||U>=h.outHeight||Math.floor(U)!==U))for(let K=0;K<k;K+=b){const ee=(Z+K)/v;if(ee<0||ee>=h.outWidth||Math.floor(ee)!==ee)continue;const oe=_*k-1-m.get($,U,ee,j),W=G*k+K,Y=oe===W?1:0;if(Y===0)continue;const Q=P.get($,U,ee,j);V+=Q*Y}}T.set(V,$,O,F,j)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const c$e={kernelName:fA,backendName:"cpu",kernelFunc:l$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$e(t,e,n,r,s){const i=Gt(e),a=YF(t,e,n,i,s,"max"),o=Hse(t,e,n,s,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d$e={kernelName:mA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;Rt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Vc(r.shape,s,i,[1,1],a),[d,h]=u$e(c,r.shape,r.dtype,o,u),f=l.write(d,u.outShape,r.dtype),m=l.write(h,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:m,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=Sn(i,s.shape),c=Si(s.shape,o)[1],u=Xe(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=dm({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(f);const m=ZF({inputs:{a:f,b:h},backend:n});d.push(m);const y=nS({inputs:{x:m},backend:n,attrs:{axis:i,keepDims:a}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const f$e={kernelName:nk,backendName:"cpu",kernelFunc:h$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Rt(s,"min");const o=Sn(i,s.shape);let l=o;const c=rs(l,s.shape.length);let u=s;c!=null&&(u=So({inputs:{x:s},backend:n,attrs:{perm:c}}),l=Cs(l.length,s.shape.length)),qi("min",l,u.shape.length);const[d,h]=Si(u.shape,l),f=Xe(h),m=pa(Xe(d),u.dtype),y=n.data.get(u.dataId).values;for(let x=0;x<m.length;++x){const b=x*f;let _=y[b];for(let k=0;k<f;++k){const N=y[b+k];(Number.isNaN(N)||N<_)&&(_=N)}m[x]=_}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,m);if(a){const x=Ns(d,o),b=Tr({inputs:{x:v},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(v),b}return v}const m$e={kernelName:rk,backendName:"cpu",kernelFunc:p$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:a}=r;Rt(s,"mirrorPad");const o=i.map((_,k)=>_[0]+s.shape[k]+_[1]),l=i.map(_=>_[0]),c=i.map((_,k)=>_[0]+s.shape[k]),u=a==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,f=Gt(s.shape),m=Xe(o),y=o.length,v=Gt(o),x=Ui(s.dtype,m);for(let _=0;_<m;_++){let k=Ux(_,y,v);for(let A=0;A<y;A++)k[A]<l[A]?k[A]=l[A]*2-k[A]-u:k[A]>=c[A]&&(k[A]=(c[A]-1)*2-k[A]+u);k=k.map((A,T)=>A-l[T]);const N=jd(k,h,f);x[_]=d[N]}return{dataId:n.write(x,o,s.dtype),shape:o,dtype:s.dtype}}const y$e={kernelName:sk,backendName:"cpu",kernelFunc:g$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e=Is((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),x$e=ri(vb,v$e),b$e={kernelName:vb,backendName:"cpu",kernelFunc:x$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zse(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=s.shape.length;let o=i;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=Sn([o],s.shape),c=Yse({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Ns(c.shape,l),d=Tr({inputs:{x:c},backend:n,attrs:{shape:u}}),h=XF({inputs:{a:s,b:d},backend:n}),f=tse({inputs:{x:h},backend:n}),m=nS({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),y=Tr({inputs:{x:m},backend:n,attrs:{shape:u}}),v=ZF({inputs:{a:f,b:y},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const w$e={kernelName:_k,backendName:"cpu",kernelFunc:Zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r;Rt(s,"multinomial");const l=o?s:Zse({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],f=pa(Xe(h),"int32");for(let m=0;m<c;++m){const y=m*u,v=new Float32Array(u-1);v[0]=d[y];for(let _=1;_<v.length;++_)v[_]=v[_-1]+d[y+_];const x=sE.alea(a.toString()),b=m*i;for(let _=0;_<i;++_){const k=x();f[b+_]=v.length;for(let N=0;N<v.length;N++)if(k<v[N]){f[b+_]=N;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const k$e={kernelName:gA,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S$e=zM;function N$e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Rt(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=S$e(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const C$e={kernelName:yA,backendName:"cpu",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T$e=BM;function I$e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Rt(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:f}=T$e(u,d,a,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const A$e={kernelName:vA,backendName:"cpu",kernelFunc:I$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E$e=WM;function P$e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Rt(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,h=a,f=o,m=l,y=c,{selectedIndices:v,selectedScores:x}=E$e(u,d,h,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const O$e={kernelName:xA,backendName:"cpu",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r;Rt(s,"oneHot");const c=Xe(s.shape),u=new Float32Array(c*a);u.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<a&&(u[h*a+d[h]]=o);return n.makeTensorInfo([...s.shape,a],i,u)}const $$e={kernelName:lk,backendName:"cpu",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J5(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=P0({inputs:{input:r},backend:n}),i=J5({inputs:{x:s},backend:n}),a=gx({inputs:{input:r},backend:n}),o=J5({inputs:{x:a},backend:n}),l=Yo({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return JF({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const D$e={kernelName:Ck,backendName:"cpu",kernelFunc:J5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=P0({inputs:{input:r},backend:n}),i=Jse({inputs:{x:s},backend:n}),a=gx({inputs:{input:r},backend:n}),o=J5({inputs:{x:a},backend:n}),l=Yo({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return JF({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const L$e={kernelName:ok,backendName:"cpu",kernelFunc:Jse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Z5({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{ul(i,u.shape,"All tensors passed to stack must have matching shapes"),le(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=Z5({inputs:{input:u},backend:n,attrs:{dim:s}});return o.push(d),d}),c=yx({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const R$e={kernelName:ck,backendName:"cpu",kernelFunc:Qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;Rt(s,"pad");const o=i.map((b,_)=>b[0]+s.shape[_]+b[1]),l=i.map(b=>b[0]),c=n.data.get(s.dataId).values,u=Xe(s.shape),d=s.shape.length,h=Gt(s.shape),f=Xe(o),m=o.length,y=Gt(o),v=Ui(s.dtype,f);a!==0&&v.fill(a);for(let b=0;b<u;b++){const k=Ux(b,d,h).map((A,T)=>A+l[T]),N=jd(k,m,y);v[N]=c[b]}return{dataId:n.write(v,o,s.dtype),shape:o,dtype:s.dtype}}const eie={kernelName:uk,backendName:"cpu",kernelFunc:M$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F$e=Is((t,e)=>Math.pow(t,e)),z$e=ri(bb,F$e),B$e={kernelName:bb,backendName:"cpu",kernelFunc:z$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(x=>n.data.get(x.dataId).values),c=s.map(x=>x.shape),u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,[h,f,m]=xse(l,c,u,i.shape,i.dtype,d,a.shape),y=h.map(x=>n.makeTensorInfo([x.length],"int32",x)),v=n.makeTensorInfo(m,i.dtype,f);return y.concat([v])}const U$e={kernelName:bA,backendName:"cpu",kernelFunc:W$e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=bse(a,r.shape,r.dtype,o,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const H$e={kernelName:wA,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,h=o.map(v=>n.data.get(v.dataId).values),f=o.map(v=>v.shape),[m,y]=wse(c,s.shape,u,i.shape,i.dtype,d,a.shape,h,f,l);return n.makeTensorInfo(m,i.dtype,y)}const G$e={kernelName:_A,backendName:"cpu",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K$e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:a}=n,o=_se(r,s,a,i);return e.makeTensorInfo([o.length],i,o)}const X$e={kernelName:kA,backendName:"cpu",kernelFunc:K$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$e=nr(wb,t=>1/t),Z$e={kernelName:wb,backendName:"cpu",kernelFunc:Y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;Rt(s,"resizeBilinear");const l=Gt(s.shape),[c,u]=o,[d,h,f,m]=s.shape,y=n.data.get(s.dataId).values,v=new Float32Array(Xe([d,c,u,m])),x=[i&&c>1?h-1:h,i&&u>1?f-1:f],b=[i&&c>1?c-1:c,i&&u>1?u-1:u];let _=0;const k=x[0]/b[0],N=x[1]/b[1];for(let A=0;A<d;A++)for(let T=0;T<c;T++){let C;a?C=k*(T+.5)-.5:C=k*T;const P=Math.max(0,Math.floor(C)),$=C-P,j=Math.min(h-1,Math.ceil(C)),O=A*l[0]+P*l[1],F=A*l[0]+j*l[1];for(let B=0;B<u;B++){let Z;a?Z=N*(B+.5)-.5:Z=N*B;const V=Math.max(0,Math.floor(Z)),G=Z-V,U=Math.min(f-1,Math.ceil(Z)),K=O+V*l[2],ee=F+V*l[2],oe=O+U*l[2],W=F+U*l[2];for(let Y=0;Y<m;Y++){const Q=y[K+Y],J=y[ee+Y],te=y[oe+Y],me=y[W+Y],ge=Q+(te-Q)*G,ce=J+(me-J)*G,Ce=ge+(ce-ge)*$;v[_++]=Ce}}}return n.makeTensorInfo([d,c,u,m],"float32",v)}const Q$e={kernelName:mk,backendName:"cpu",kernelFunc:J$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;Rt([i,s],"resizeBilinearGrad");const o=Gt(s.shape),[l,c,u,d]=s.shape,[,h,f]=i.shape,m=new Float32Array(l*c*u*d),y=[a&&h>1?c-1:c,a&&f>1?u-1:u],v=[a&&h>1?h-1:h,a&&f>1?f-1:f],x=y[0]/v[0],b=y[1]/v[1],_=n.data.get(i.dataId).values;let k=0;for(let N=0;N<l;N++){const A=N*o[0];for(let T=0;T<h;T++){const C=T*x,P=Math.floor(C),$=Math.min(Math.ceil(C),c-1),j=A+P*o[1],O=A+$*o[1],F=C-P,B=1-F;for(let Z=0;Z<f;Z++){const V=Z*b,G=Math.floor(V),U=Math.min(Math.ceil(V),u-1),K=V-G,ee=1-K,oe=j+G*o[2],W=j+U*o[2],Y=O+G*o[2],Q=O+U*o[2],J=B*ee,te=B*K,me=F*ee,ge=F*K;for(let ce=0;ce<d;ce++){const Ce=_[k++];m[oe+ce]+=Ce*J,m[W+ce]+=Ce*te,m[Y+ce]+=Ce*me,m[Q+ce]+=Ce*ge}}}}return n.makeTensorInfo([l,u,c,d],"float32",m)}const tDe={kernelName:CA,backendName:"cpu",kernelFunc:eDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;Rt(s,"resizeNearestNeighbor");const l=Gt(s.shape),[c,u]=o,[d,h,f,m]=s.shape,y=n.data.get(s.dataId).values,v=new Float32Array(d*c*u*m),x=[i&&c>1?h-1:h,i&&u>1?f-1:f],b=[i&&c>1?c-1:c,i&&u>1?u-1:u],_=x[0]/b[0],k=x[1]/b[1];let N=0;for(let A=0;A<d;A++){const T=A*l[0];for(let C=0;C<c;C++){const P=a?_*(C+.5):_*C;let $=Math.min(h-1,i?Math.round(P):Math.floor(P));a&&($=Math.max(0,$));const j=T+$*l[1];for(let O=0;O<u;O++){const F=a?k*(O+.5):k*O;let B=Math.min(f-1,i?Math.round(F):Math.floor(F));a&&(B=Math.max(0,B));const Z=j+B*l[2];for(let V=0;V<m;V++){const G=y[Z+V];v[N++]=G}}}}return n.makeTensorInfo([d,c,u,m],s.dtype,v)}const rDe={kernelName:pk,backendName:"cpu",kernelFunc:nDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;Rt([i,s],"resizeNearestNeighborGrad");const o=Gt(s.shape),l=Gt(i.shape),[c,u,d,h]=s.shape,[,f,m]=i.shape,y=new Float32Array(c*u*d*h),v=n.data.get(i.dataId).values,x=[a&&f>1?u-1:u,a&&m>1?d-1:d],b=[a&&f>1?f-1:f,a&&m>1?m-1:m],_=x[0]/b[0],k=x[1]/b[1],N=1/_,A=1/k,T=Math.ceil(N)*2+2,C=Math.ceil(A)*2+2;for(let P=0;P<c;P++){const $=P*o[0];for(let j=0;j<u;j++){const O=$+j*o[1],F=Math.floor(j*N),B=Math.floor(F-T/2);for(let Z=0;Z<d;Z++){const V=O+Z*o[2],G=Math.floor(Z*A),U=Math.floor(G-C/2);for(let K=0;K<h;K++){let ee=0;for(let oe=0;oe<T;oe++){const W=oe+B;if(W<0||W>=f)continue;const Y=$+W*l[1],Q=W*_,J=Math.min(u-1,a?Math.round(Q):Math.floor(Q));if(j===J)for(let te=0;te<C;te++){const me=te+U;if(me<0||me>=m)continue;const ge=Y+me*l[2],ce=me*k,Ce=Math.min(d-1,a?Math.round(ce):Math.floor(ce));Z===Ce&&(ee+=v[ge+K])}}y[V+K]=ee}}}}return n.makeTensorInfo(s.shape,s.dtype,y)}const iDe={kernelName:NA,backendName:"cpu",kernelFunc:sDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Rt(s,"reverse");const a=s.shape.length,o=Sn(i,s.shape);if(a===0)return Hd({inputs:{x:s},backend:n});const l=new Fs(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();o.forEach(f=>h[f]=s.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const oDe={kernelName:gk,backendName:"cpu",kernelFunc:aDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe={kernelName:UA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=Ui(r.dtype,Xe(r.shape)),[c,u,d,h]=r.shape,[f,m]=iF(a,u,d),y=255,v=Math.sin(s),x=Math.cos(s),b=o.data.get(r.dataId).values;for(let k=0;k<c;k++){const N=k*d*u*h;for(let A=0;A<u;A++){const T=A*(d*h);for(let C=0;C<d;C++){const P=C*h;for(let $=0;$<h;$++){const j=[c,A,C,$],O=j[2],F=j[1];let B=(O-f)*x-(F-m)*v,Z=(O-f)*v+(F-m)*x;B=Math.round(B+f),Z=Math.round(Z+m);let V=i;if(typeof i!="number"&&($===3?V=y:V=i[$]),B>=0&&B<d&&Z>=0&&Z<u){const U=Z*(d*h),K=B*h,ee=N+U+K+$;V=b[ee]}const G=N+T+P+$;l[G]=V}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=nr(Sb,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),uDe={kernelName:Sb,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ty(i,s,a),h=!0,f=n.bufferSync(s),m=n.bufferSync(i),y=zg(f,m,a,d,c,l,o,u,0,h);return n.makeTensorInfo(a,y.dtype,y.values)}const hDe={kernelName:TA,backendName:"cpu",kernelFunc:dDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function pDe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function mDe(t,e,n,r,s,i){const a=_s("int32",n*s);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*s;for(let u=0;u<s;++u)a[c+u]=i==="left"?fDe(l,e[u+c]):pDe(l,e[u+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=mDe(o,l,s.shape[0],s.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",c)}const yDe={kernelName:AA,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Rt([r,s,i],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=xo(s.dtype,i.dtype),d=pa(Xe(s.shape),u);let h=0;const f=a===0||a>1||s.shape.length===1?1:Xe(s.shape.slice(1));for(let m=0;m<o.length;m++)for(let y=0;y<f;y++)o[m]===1?d[h++]=l[m]:d[h++]=c[m];return n.makeTensorInfo(s.shape,u,d)}const xDe={kernelName:yk,backendName:"cpu",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bDe=NE,wDe=CE,_De=nr(Cb,t=>t>=0?wDe*t:bDe*(Math.exp(t)-1)),kDe={kernelName:Cb,backendName:"cpu",kernelFunc:_De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SDe=nr(Ab,t=>t<0?-1:t>0?1:0),NDe={kernelName:Ab,backendName:"cpu",kernelFunc:SDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CDe=nr(Tb,t=>Math.sin(t)),TDe={kernelName:Tb,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IDe=nr(Ib,t=>Math.sinh(t)),ADe={kernelName:Ib,backendName:"cpu",kernelFunc:IDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EDe=11920928955078125e-23,AU=Math.log(EDe)+2,PDe=nr(Pb,t=>{const e=t>-AU,n=t<AU,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),ODe={kernelName:Pb,backendName:"cpu",kernelFunc:PDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;Rt([s],"spaceToBatchND");const o=Xe(i),l=[[0,0]];l.push(...a);for(let A=1+i.length;A<s.shape.length;++A)l.push([0,0]);const c=eie.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=Hk(c.shape,i,o,!1),d=qk(u.length,i.length,!1),h=Gk(c.shape,i,o,!1),y=Tr({inputs:{x:c},backend:n,attrs:{shape:u}}),b=So({inputs:{x:y},backend:n,attrs:{perm:d}}),N=Tr({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),N}const $De={kernelName:bk,backendName:"cpu",kernelFunc:jDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values[0],[d,h,f,m,y]=Cse(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const LDe={kernelName:EA,backendName:"cpu",kernelFunc:DDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=Tse(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const MDe={kernelName:PA,backendName:"cpu",kernelFunc:RDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=KF(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const zDe={kernelName:OA,backendName:"cpu",kernelFunc:FDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=KF(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const WDe={kernelName:jA,backendName:"cpu",kernelFunc:BDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=ty(i,s,o),f=!1,m=n.bufferSync(s);let y;switch(i.dtype){case"bool":{const v=n.bufferSync(i),x=!!n.data.get(a.dataId).values[0];y=zg(m,v,o,h,u,c,l,d,x,f);break}case"float32":{const v=n.bufferSync(i),x=n.data.get(a.dataId).values[0];y=zg(m,v,o,h,u,c,l,d,x,f);break}case"int32":{const v=n.bufferSync(i),x=n.data.get(a.dataId).values[0];y=zg(m,v,o,h,u,c,l,d,x,f);break}case"string":{const v=n.bufferSync(i),x=nm(n.data.get(a.dataId).values[0]);y=zg(m,v,o,h,u,c,l,d,x,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,y.dtype,y.values)}const VDe={kernelName:$A,backendName:"cpu",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Sn(a,s.shape)[0],l=bF(s,i,o),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[o]=d;const f=O0({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[o]+=d,f})}const qDe={kernelName:wk,backendName:"cpu",kernelFunc:HDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe={kernelName:DA,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Rt(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];i[o]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KDe=nr(Mb,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),XDe={kernelName:Mb,backendName:"cpu",kernelFunc:KDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;Rt(s,"stridedSlice");const{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:x,begin:b,end:_,strides:k}=Qee(s.shape,i,a,o,l,c,u,d,h);let N;if(y)N=Tr({inputs:{x:s},backend:n,attrs:{shape:m}});else if(v||x){le(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const A=Yee(b,_,k),T=O0({inputs:{x:s},backend:n,attrs:{begin:b,size:A}});N=Tr({inputs:{x:T},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(T)}else{const A=n.bufferSync(s),T=Ese(f,A,k,b);N=n.makeTensorInfo(m,T.dtype,T.values)}return N}const ZDe={kernelName:LA,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[m,y]=Pse(h,f,s,i,a,o,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const QDe={kernelName:RA,backendName:"cpu",kernelFunc:JDe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eLe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values[0],[c,u,d]=Ose(o,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const tLe={kernelName:MA,backendName:"cpu",kernelFunc:eLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nLe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(i.dataId).values,o=jse(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const rLe={kernelName:FA,backendName:"cpu",kernelFunc:nLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe=nr(Db,t=>Math.tan(t)),iLe={kernelName:Db,backendName:"cpu",kernelFunc:sLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe=nr(Lb,t=>Math.tanh(t)),oLe={kernelName:Lb,backendName:"cpu",kernelFunc:aLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=ty(i,s,r.shape),d=!1,h=n.bufferSync(s),f=n.bufferSync(i),m=n.bufferSync(r),y=zg(h,f,r.shape,u,l,o,a,c,m,d);return n.makeTensorInfo(r.shape,y.dtype,y.values)}const cLe={kernelName:IA,backendName:"cpu",kernelFunc:lLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Rt(s,"tile");const a=Dse(n.bufferSync(s),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const dLe={kernelName:Rb,backendName:"cpu",kernelFunc:uLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r;Rt(s,"topk");const o=n.data.get(s.dataId).values,[l,c]=Rse(o,s.shape,s.dtype,i,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const fLe={kernelName:zA,backendName:"cpu",kernelFunc:hLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,h,f]=s.shape,[m,y]=c??[d,h],v=[u,m,y,f],x=Gt(s.shape),b=x[0],_=x[1],k=x[2],N=Gt(v),A=N[0],T=N[1],C=N[2],P=Ui(s.dtype,Xe(v));P.fill(l);const $=r.data.get(s.dataId).values,j=r.data.get(i.dataId).values;for(let F=0;F<u;++F){const B=i.shape[0]===1?j:j.subarray(F*8,F*8+8);for(let Z=0;Z<m;++Z)for(let V=0;V<y;++V)for(let G=0;G<f;++G){let U;const K=B[6]*V+B[7]*Z+1;if(K===0)continue;const ee=(B[0]*V+B[1]*Z+B[2])/K,oe=(B[3]*V+B[4]*Z+B[5])/K,W=EU(ee,h,o),Y=EU(oe,d,o);switch(a){case"nearest":U=bLe($,d,h,b,_,k,F,Y,W,G,l);break;case"bilinear":U=wLe($,d,h,b,_,k,F,Y,W,G,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const Q=F*A+Z*T+V*C+G;P[Q]=U}return r.makeTensorInfo(v,s.dtype,P)}return{dataId:r.write(P,v,s.dtype),shape:s.shape,dtype:s.dtype}}const mLe={kernelName:BA,backendName:"cpu",kernelFunc:pLe};function EU(t,e,n){switch(n){case"reflect":return gLe(t,e);case"wrap":return yLe(t,e);case"nearest":return xLe(t,e);case"constant":default:return vLe(t)}}function gLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return bR(0,n,e-1)}function yLe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return bR(0,n,e-1)}function vLe(t,e){return t}function xLe(t,e){return bR(0,t,e-1)}function hw(t,e,n,r,s,i,a,o,l,c,u){const d=a*r+o*s+l*i+c;return 0<=o&&o<e&&0<=l&&l<n?t[d]:u}function bLe(t,e,n,r,s,i,a,o,l,c,u){const d=Math.round(o),h=Math.round(l);return hw(t,e,n,r,s,i,a,d,h,c,u)}function wLe(t,e,n,r,s,i,a,o,l,c,u){const d=Math.floor(o),h=Math.floor(l),f=d+1,m=h+1,y=(m-l)*hw(t,e,n,r,s,i,a,d,h,c,u)+(l-h)*hw(t,e,n,r,s,i,a,d,m,c,u),v=(m-l)*hw(t,e,n,r,s,i,a,f,h,c,u)+(l-h)*hw(t,e,n,r,s,i,a,f,m,c,u);return(f-o)*y+(o-d)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Rt(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=Mse(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const kLe={kernelName:WA,backendName:"cpu",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s.shape.length,o=s.shape[i],l=new Array(a-1);let c=0;for(let f=0;f<a;f++)f!==i&&(l[c++]=s.shape[f]);const u=new Array(a).fill(0),d=s.shape.slice();d[i]=1;const h=new Array(o);for(let f=0;f<h.length;f++){u[i]=f;const m=O0({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});h[f]=Tr({inputs:{x:m},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(m)}return h}const NLe={kernelName:Sk,backendName:"cpu",kernelFunc:SLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r;Rt(s,"unsortedSegmentSum");const o=s.shape.length,l=i.shape.length,c=[],u=[],d=o-l;let h=i;for(let m=0;m<d;++m){const y=Z5({inputs:{input:h},backend:n,attrs:{dim:m+1}});h=y,u.push(y)}for(let m=0;m<a;++m){const y=km(m,"int32"),v=n.makeTensorInfo([],"int32",y),x=Qre({inputs:{a:v,b:h},backend:n}),b=dm({inputs:{x},backend:n,attrs:{dtype:"float32"}}),_=ME({inputs:{a:b,b:s},backend:n}),k=nS({inputs:{x:_},backend:n,attrs:{axis:0,keepDims:!1}});c.push(k),u.push(v),u.push(x),u.push(b),u.push(_),u.push(k)}const f=Qse({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const TLe={kernelName:Nk,backendName:"cpu",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ILe=[_3e,nOe,S3e,C3e,lOe,I3e,E3e,O3e,$3e,L3e,M3e,z3e,W3e,H3e,G3e,Y3e,J3e,e4e,n4e,b3e,s4e,a4e,l4e,uOe,u4e,aOe,hOe,h4e,rOe,p4e,g4e,y4e,x4e,w4e,k4e,N4e,T4e,A4e,P4e,j4e,D4e,R4e,F4e,B4e,W4e,V4e,q4e,K4e,X4e,Y4e,Z4e,Q4e,nje,f3e,sje,fOe,hje,pOe,fje,gOe,xje,bje,_je,vOe,bOe,Sje,Cje,Ije,Eje,_Oe,SOe,sOe,Oje,m4e,$je,Lje,Mje,p3e,COe,IOe,zje,EOe,Wje,Hje,Gje,Yje,Jje,e$e,t$e,OOe,r$e,i$e,o$e,c$e,d$e,f$e,m$e,$Oe,y$e,b$e,k$e,LOe,MOe,C$e,A$e,O$e,zOe,$$e,L$e,R$e,eie,B$e,g3e,UOe,U$e,H$e,G$e,X$e,iOe,S$,Z$e,y3e,v3e,x3e,Q$e,tDe,rDe,iDe,oDe,lDe,uDe,ZOe,hDe,yDe,xDe,kDe,QOe,NDe,TDe,ADe,e3e,w$e,ODe,$De,LDe,MDe,zDe,WDe,VDe,qDe,r3e,GDe,i3e,o3e,XDe,ZDe,QDe,tLe,rLe,d3e,eje,iLe,oLe,cLe,dLe,fLe,mLe,BOe,kLe,NLe,TLe,D$e];for(const t of ILe)NR(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Og={},kN={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ALe(t,e){Og[t]=e}function Fu(t,e){if(!(t in Og)||e!=null){const r=PLe(t,e);if(r!==null)Og[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Og[t];return n==null||n.isContextLost()?(delete Og[t],Fu(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Og[t])}function ELe(t){if(!We().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function PLe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??ELe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Og[t]},!1),We().getBool("SOFTWARE_WEBGL_ENABLED")&&(kN.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",kN)||n.getContext("experimental-webgl",kN):n.getContext("webgl2",kN)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var R2;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(R2||(R2={}));var Pl;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Pl||(Pl={}));var Mi;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Mi||(Mi={}));function rS(t,e){return[e,t]}function OLe(t,e){return t*e}function SN(t){const e=Xe(t),n=Math.ceil(e/4);return Oj(n)}function Xb(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function jLe(t,e){const[n,r]=Xb(t,e);return n*r*4}function QF(t,e){const n=t;let r,s,i,a,o,l,c,u,d,h;return We().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,a=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,a=n.RGBA,o=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(t,e){const n=e();return We().getBool("DEBUG")&&$Le(t),n}function $Le(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+MLe(t,e))}const DLe=596e-10,LLe=65504;function RLe(t){return!!(We().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||DLe<Math.abs(t)&&Math.abs(t)<LLe)}function MLe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function NN(t,e){return xf(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function FLe(t,e){const n=xf(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(It(t,()=>t.shaderSource(n,e)),It(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zLe(t,e){const n=xf(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(It(t,()=>t.shaderSource(n,e)),It(t,()=>t.compileShader(n)),We().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw tie(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const BLe=/ERROR: [0-9]+:([0-9]+):/g;function tie(t,e){const n=BLe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,a=s.map((d,h)=>Lv((h+1).toString(),i)+d);let o=0;for(let d=0;d<a.length;d++)o=Math.max(a[d].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Lv(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function WLe(t){return xf(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function ULe(t,e){if(It(t,()=>t.linkProgram(e)),!We().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function f3(t,e){if(It(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function VLe(t,e){const n=xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return It(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),It(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function HLe(t,e){const n=xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return It(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),It(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function qLe(t){return xf(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function GLe(t,e){const n=We().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function KLe(t){return xf(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function PU(t,e,n,r,s,i,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(It(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),It(t,()=>t.vertexAttribPointer(o,s,t.FLOAT,!1,i,a)),It(t,()=>t.enableVertexAttribArray(o)),!0)}function XLe(t,e,n){eRe(t,n),It(t,()=>t.activeTexture(t.TEXTURE0+n)),It(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function YLe(t,e,n){return xf(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function ZLe(t,e,n){return t.getUniformLocation(e,n)}function JLe(t,e,n,r){It(t,()=>XLe(t,e,r)),It(t,()=>t.uniform1i(n,r))}function p3(t,e,n){It(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),It(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function OU(t,e){It(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),It(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function CN(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+QLe(t,e))}function QLe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function xf(t,e,n){const r=It(t,()=>e());if(r==null)throw new Error(n);return r}function eRe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function vx(t,e=2){return Xe(t.slice(0,t.length-e))}function xx(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function TN(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[vx(t),...xx(t)]),e}function tRe(t,e=!1){let n=We().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=We().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&We().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?wR(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=_m(t).newShape);let s=Xe(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const a=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const o=vx(t);let l=2,c=2;t.length&&([l,c]=xx(t)),s=o*(l/2)*(c/2),i=Oj(s).map(u=>u*2)}else i=Oj(s);return i}function IN(t){return t%2===0}function Q5(t,e){if(t=t.slice(-2),e=e.slice(-2),jn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||IN(n)&&IN(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&IN(t[0])&&IN(e[0])}let m3,g3;function nRe(t){if(m3==null){const e=Fu(t);m3=e.getParameter(e.MAX_TEXTURE_SIZE)}return m3}function rRe(t){if(g3==null){const e=Fu(t);g3=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,g3)}function sRe(t){if(t===0)return 0;let e;const n=Fu(t);return Cc(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Cc(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Cc(t,e){return t.getExtension(e)!=null}function jU(t){try{if(Fu(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function iRe(t){if(t===0)return!1;const e=Fu(t);if(t===1){if(!Cc(e,"OES_texture_float"))return!1}else if(!Cc(e,"EXT_color_buffer_float"))return!1;return C$(e)}function aRe(t){if(t===0)return!1;const e=Fu(t);if(t===1){if(!Cc(e,"OES_texture_float")||!Cc(e,"WEBGL_color_buffer_float"))return!1}else{if(Cc(e,"EXT_color_buffer_float"))return C$(e);const r="EXT_color_buffer_half_float";if(Cc(e,r)){const s=e.getExtension(r);return oRe(e,s)}return!1}return C$(e)}function C$(t){const e=QF(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),a}function oRe(t,e){const n=QF(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function lRe(t){return t!==2?!1:Fu(t).fenceSync!=null}function sS(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&le(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ft=We();Ft.registerFlag("HAS_WEBGL",()=>Ft.getNumber("WEBGL_VERSION")>0);Ft.registerFlag("WEBGL_VERSION",()=>jU(2)?2:jU(1)?1:0);Ft.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ft.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ft.get("WEBGL_VERSION")===2);Ft.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ft.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ft.registerFlag("WEBGL_PACK",()=>Ft.getBool("HAS_WEBGL"));Ft.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CLIP",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_REDUCE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_CONV_IM2COL",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ft.getBool("WEBGL_PACK"));Ft.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>nRe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>rRe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Ft.getNumber("WEBGL_VERSION");return t===0?0:sRe(t)});Ft.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ft.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!bQ());Ft.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>iRe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ft.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ft.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ft.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>aRe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_FENCE_API_ENABLED",()=>lRe(Ft.getNumber("WEBGL_VERSION")));Ft.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ft.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ft.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ft.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>bQ()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ft.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ft.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ft.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ft.registerFlag("WEBGL_EXP_CONV",()=>!1);Ft.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ft.getBool("IS_TEST"));Ft.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ft.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ft.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ft.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ka(){let t,e,n,r,s,i,a,o,l,c;return We().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",a="out vec4 outputColor;",o=We().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sy(t,e,n="index"){const r=Gt(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${s}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${a}; ${o};`}).join("")}function FE(t,e,n="index"){const r=Gt(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${o};`}).join("")}function cRe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function uRe(t,e,n="index"){const r=t.map((i,a)=>a),s=cRe(r,e);return s.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${s[a]}`,l=a===s.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s[a]}`:`index -= ${t[a]} * ${s[a]}`;return`${o}; ${l};`}).join("")}function e6(t){const e=Gt(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function t6(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const nie=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:rie}=Ste;function dRe(t,e,n){const r=[];if(t.forEach(f=>{const m=Xe(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${m>1?`[${m}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:y}=n6(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(f=>hRe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=Ka(),l=mRe(o);let c,u,d=vRe(o);return e.isPacked?(c=fRe(e.logicalShape,a,n.enableShapeUniforms),u=yRe(o)):(c=pRe(e.logicalShape,a,n.enableShapeUniforms),u=gRe(o)),n.packedInputs&&(d+=_Re),[d,l,u,s,c,i,n.userCode].join(`
`)}function Yb(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return $Re(t,e);case 1:return LRe(t,e);case 2:return MRe(t,e);case 3:return zRe(t,e);case 4:return WRe(t,e);case 5:return URe(t);case 6:return VRe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function sie(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return jRe(t);case 1:return DRe(t,e);case 2:return RRe(t,e);case 3:return FRe(t,e);default:return BRe(t,e)}}function hRe(t,e,n=!1,r){let s="";n?s+=sie(t,r):s+=Yb(t,r);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(n?s+=HRe(t,e):s+=qRe(t,e)),s}function fRe(t,e,n){switch(t.length){case 0:return iie();case 1:return kRe(t,e,n);case 2:return PRe(t,e,n);case 3:return NRe(t,e,n);default:return TRe(t,e,n)}}function pRe(t,e,n){switch(t.length){case 0:return iie();case 1:return SRe(t,e,n);case 2:return ORe(t,e,n);case 3:return CRe(t,e,n);case 4:return IRe(t,e,n);case 5:return ARe(t,e);case 6:return ERe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function mRe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function gRe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function yRe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function vRe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${xRe}
    ${bRe}
    ${wRe}
  `}const xRe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bRe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wRe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Re=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function iie(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function kRe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function SRe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function NRe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function CRe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${FE(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=sy(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function TRe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let a=i,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function IRe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${FE(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=sy(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function ARe(t,e){const n=sy(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function ERe(t,e){const n=sy(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function PRe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(jn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function ORe(t,e,n){return jn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function iy(t){return`offset${t}`}function jRe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ka();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function $Re(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=iy(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function DRe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Ka();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function LRe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Zb(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=iy(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function RRe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=i[0],o=i[1],l=Ka();if(i!=null&&jn(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function MRe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&jn(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=_m(n),l=a;if(l.length<n.length){const h=Jb(t,l),f=["row","col"];return`
      ${Yb(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${Qb(f,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Zb(t)}
      }
    `;const c=i[0],u=i[1],d=iy(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function FRe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],m=Jb(t,h),y=["b","row","col"];return`
        ${sie(m,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Qb(y,f)});
        }
      `}const o=Ka();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function zRe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=_m(n),c=o;if(c.length<n.length){const y=Jb(t,c),v=["row","col","depth"];return`
        ${Yb(y,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Qb(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${Zb(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===a&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const m=iy(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function BRe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Ka();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,a=i.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[a-1]/2);let h=d*Math.ceil(i[a-2]/2),f="int b, int row, int col",m=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<a-1;y++)f=`int b${y}, `+f,h*=i[a-y-1],m=`b${y} * ${h} + `+m;return`
    vec4 ${r}(${f}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function WRe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,o=n[1]*a,{newShape:l,keptDims:c}=_m(n);if(l.length<n.length){const b=Jb(t,l),_=["row","col","depth","depth2"];return`
      ${Yb(b,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Qb(_,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${i}, 1)));
        ${Zb(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],m=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(f===o&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${m}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const x=iy(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${y}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${x});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${x});
      return sampleTexture(${r}, uv);
    }
  `}function URe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,a=e[2]*i,o=e[1]*a,{newShape:l,keptDims:c}=_m(e);if(l.length<e.length){const y=Jb(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${Yb(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Qb(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${i}, ${s})) +
          depth3;
        ${Zb(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=iy(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${i} +
          depth2 * ${s} + depth3 + ${m};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function VRe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=_m(e);if(s.length<e.length){const v=Jb(t,s),x=["row","col","depth","depth2","depth3","depth4"];return`
      ${Yb(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Qb(x,i)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Zb(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],m=h[1];if(m===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===a&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=iy(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${y};
      vec2 uv = uvFromFlat(${f}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Zb(t){const e=t.name,n=Xe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function HRe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=rie(t.shapeInfo.logicalShape,e.logicalShape),l=mr(a),c=a-i;let u;const d=["x","y","z","w","u","v"];i===0?u="":a<2&&o.length>=1?u="coords = 0;":u=o.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let h="";a<2&&i>0?h="coords":h=t.shapeInfo.logicalShape.map((b,_)=>`coords.${d[_+c]}`).join(", ");let f="return outputValue;";const y=Xe(t.shapeInfo.logicalShape)===1,x=Xe(e.logicalShape)===1;if(i===1&&!y&&!x)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!x)a===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(o.length){const b=i-2,_=i-1;o.indexOf(b)>-1&&o.indexOf(_)>-1?f="return vec4(outputValue.x);":o.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(_)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function qRe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&jn(a,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=mr(l),u=rie(t.shapeInfo.logicalShape,e.logicalShape),d=l-o;let h;const f=["x","y","z","w","u","v"];o===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(y=>`coords.${f[y+d]} = 0;`).join(`
`);let m="";return l<2&&o>0?m="coords":m=t.shapeInfo.logicalShape.map((y,v)=>`coords.${f[v+d]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${m});
    }
  `}function mr(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function n6(t,e,n){const{newShape:r,keptDims:s}=_m(e),i=e.length,a=t&&i===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&i>1&&!jn(e,n)&&r.length<i||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function Jb(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Qb(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GRe(t,e,n,r){const s=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),i=s.map(u=>u.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=dRe(s,a,e),l=zLe(t.gl,o),c=t.createProgram(l);return We().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a},aie(t,e,c)))}function aie(t,e,n){const r=[],s=[];let i,a,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),We().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(h)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),o=t.getUniformLocation(n,"outShapeStrides",u),a=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:a}}function $U(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],a=i.shape;if(!jn(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!jn(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function KRe(t,e,n,r,s){e.program.enableShapeUniforms||($U(e.inShapeInfos,n),$U([e.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):t.setOutputMatrixTexture(i.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),We().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:m}=n6(e.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(h,new Int32Array(m));break;case 2:t.gl.uniform2iv(h,new Int32Array(m));break;case 3:t.gl.uniform3iv(h,new Int32Array(m));break;case 4:t.gl.uniform4iv(h,new Int32Array(m));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Xe(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Gt(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function XRe(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=n6(t.packedInputs,a.shape,l);let h="",f="",m="";if(u.length===1&&t.packedInputs){const N=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${N[0]>1}_${N[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const N=Gt(u);m=`${N[0]===l[1]}_${N[N.length-1]===l[1]}`}const y=a.shape.length,v=u.length===2&&jn(a.shape,l),x=Xe(a.shape)===1,b=lx(a.shape,n.shape),_=!t.packedInputs&&y===n.shape.length&&jn(l,n.texData.texShape),k=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${_}_${c?d:""}_${u.length}_${x}_${b}_${v}_${h}_${f}_${m}_${k}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${We().getNumber("WEBGL_VERSION")}`,i}function ga(t){return We().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YRe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=R2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ka();this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?FE(["r","c","d"],e):sy(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZRe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=R2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ka();this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?FE(["r","c","d"],e):sy(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JRe{constructor(e){this.variableNames=["A"],this.outTexUsage=Pl.DOWNLOAD;const n=Ka();this.outputShape=e,this.userCode=`
      ${nie}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QRe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Pl.DOWNLOAD;const n=Ka();this.outputShape=e,this.userCode=`
      ${nie}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eMe={R:0,G:1,B:2,A:3};class DU{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Ka();this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${eMe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?t6():e6(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tMe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ka();this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?t6():e6(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t){const e=Ka(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return FLe(t,n)}function rMe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return VLe(t,e)}function sMe(t){const e=new Uint16Array([0,1,2,2,1,3]);return HLe(t,e)}function iS(t,e,n,r,s,i){GLe(e,n);const a=qLe(t),o=t.TEXTURE_2D;return It(t,()=>t.bindTexture(o,a)),It(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),It(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),It(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),It(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),We().getNumber("WEBGL_VERSION")===1?It(t,()=>t.texImage2D(o,0,r,e,n,0,s,i,null)):It(t,()=>t.texStorage2D(o,1,r,e,n)),It(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function oie(t){return t.internalFormatFloat}function iMe(t,e,n,r){const[s,i]=rS(e,n);return iS(t,s,i,oie(r),r.textureFormatFloat,t.FLOAT)}function lie(t){return t.internalFormatHalfFloat}function aMe(t,e,n,r){const[s,i]=rS(e,n);return iS(t,s,i,lie(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function cie(t){return t.downloadTextureFormat}function oMe(t,e,n,r){const[s,i]=rS(e,n);return iS(t,s,i,cie(r),t.RGBA,t.UNSIGNED_BYTE)}function uie(t){return t.internalFormatPackedFloat}function lMe(t,e,n,r){const[s,i]=Xb(e,n);return iS(t,s,i,uie(r),t.RGBA,t.FLOAT)}function die(t){return t.internalFormatPackedHalfFloat}function cMe(t,e,n,r){const[s,i]=Xb(e,n);return iS(t,s,i,die(r),t.RGBA,r.textureTypeHalfFloat)}function uMe(t,e,n){return It(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),PU(t,e,"clipSpacePos",n,3,20,0)&&PU(t,e,"uv",n,2,20,12)}function dMe(t,e,n,r,s,i){It(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;s instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=i.internalFormatPackedFloat),a.set(s),We().getNumber("WEBGL_VERSION")===2?It(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):It(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),It(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function hMe(t,e,n){It(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?We().getNumber("WEBGL_VERSION")===2?It(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):It(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):We().getNumber("WEBGL_VERSION")===2?It(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):It(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),It(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function fMe(t,e,n,r){const s=t.createBuffer();It(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=4*4*e*n;return It(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),It(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),It(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function pMe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function mMe(t,e,n,r){const[s,i]=rS(e,n),a=4,o=new Uint8Array(OLe(e*n,a));return It(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function gMe(t,e,n,r,s,i,a,o){const l=t,c=new Float32Array(jLe(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function yMe(t,e,n){const r=new Float32Array(e*n*4);return It(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y3{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=We().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,ALe(n,e)):this.gl=Fu(n),e=this.gl,We().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>It(i,()=>i.createVertexArray()),this.bindVertexArray=a=>It(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>It(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>It(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>It(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>It(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>It(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>It(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),We().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=NN(this.gl,i),Cc(this.gl,a))this.textureHalfFloatExtension=NN(this.gl,a);else if(We().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Cc(this.gl,s))this.colorBufferHalfFloatExtension=NN(this.gl,s);else if(We().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Cc(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Cc(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=rMe(this.gl),this.indexBuffer=sMe(this.gl),this.framebuffer=KLe(this.gl),this.textureConfig=QF(this.gl,this.textureHalfFloatExtension)}get debug(){return We().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;It(e,()=>e.finish()),It(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),It(e,()=>e.deleteFramebuffer(this.framebuffer)),It(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),It(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),It(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),iMe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),aMe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),oMe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),hMe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),dMe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),cMe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),lMe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(OU(this.gl,this.framebuffer),this.outputTexture=null),It(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>mMe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,a){return gMe(this.gl,e,n,r,s,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return pMe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=fMe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(We().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=i}else We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>yMe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=nMe(n));const r=WLe(n);It(n,()=>n.attachShader(r,this.vertexShader)),It(n,()=>n.attachShader(r,e)),ULe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&f3(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;It(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),uMe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(It(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&f3(this.gl,this.program),It(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?YLe(this.gl,e,n):ZLe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),It(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),JLe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Xb(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&f3(this.gl,this.program),CN(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}It(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),It(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=NN(this.gl,We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await xW(()=>this.disposed||this.isQueryAvailable(e,We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=vMe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in We().platform&&(r=We().platform.setTimeoutCustom.bind(We().platform)),xW(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),p3(this.gl,e,this.framebuffer),this.debug&&CN(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(p3(this.gl,this.outputTexture,this.framebuffer),this.debug&&CN(this.gl)):OU(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;p3(s,e,this.framebuffer),this.debug&&CN(s),this.outputTexture=e,It(s,()=>s.viewport(0,0,n,r)),It(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),It(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vMe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:xMe,bincountImpl:hie,bincountReduceImpl:bMe,bitwiseAndImpl:wMe,castImpl:_Me,ceilImpl:kMe,concatImpl:SMe,equalImpl:NMe,expImpl:CMe,expm1Impl:TMe,floorImpl:IMe,gatherNdImpl:AMe,gatherV2Impl:EMe,greaterImpl:PMe,greaterEqualImpl:OMe,lessImpl:jMe,lessEqualImpl:$Me,linSpaceImpl:DMe,logImpl:LMe,maxImpl:RMe,maximumImpl:MMe,minimumImpl:FMe,multiplyImpl:zMe,negImpl:BMe,notEqualImpl:WMe,prodImpl:UMe,raggedGatherImpl:VMe,raggedRangeImpl:HMe,raggedTensorToTensorImpl:qMe,rangeImpl:GMe,rsqrtImpl:KMe,scatterImpl:XMe,sigmoidImpl:YMe,simpleAbsImpl:fie,sliceImpl:ZMe,sparseFillEmptyRowsImpl:JMe,sparseReshapeImpl:QMe,sparseSegmentReductionImpl:pie,sqrtImpl:eFe,staticRegexReplaceImpl:tFe,stridedSliceImpl:nFe,stringNGramsImpl:rFe,stringSplitImpl:sFe,stringToHashBucketFastImpl:iFe,subImpl:aFe,tileImpl:oFe,topKImpl:lFe,transposeImpl:r6,uniqueImpl:cFe}=h3e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ma(t,e){return e===1?[t]:mie(t,e)}function uFe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dFe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ga(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ma("rc",this.rank),r=mr(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gie{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${hFe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?t6():e6(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function hFe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?uRe(["r","c","d"],"inputShape"):sy(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fFe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=RU(n,r),i=MU(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=LU(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let o;return s===Mi.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Mi.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Mi.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Mi.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Mi.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=RU(r,s),a=MU(n,i,s);a in this.freeTextures||(this.freeTextures[a]=[]);const o=LU(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=We().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function pFe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function LU(t,e,n,r,s){const i=mFe(e,r);let a;if(s){const[l,c]=Xb(t[0],t[1]);a=l*c}else{const[l,c]=rS(t[0],t[1]);a=l*c}const o=pFe(n,i);return a*o}function mFe(t,e){switch(t){case Mi.PACKED_2X2_FLOAT32:return uie(e);case Mi.PACKED_2X2_FLOAT16:return die(e);case Mi.UNPACKED_FLOAT32:return oie(e);case Mi.UNPACKED_FLOAT16:return lie(e);case Mi.PACKED_4X1_UNSIGNED_BYTE:return cie(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function gFe(t){return We().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Mi.PACKED_2X2_FLOAT32:Mi.UNPACKED_FLOAT32:t?Mi.PACKED_2X2_FLOAT16:Mi.UNPACKED_FLOAT16}function RU(t,e){if(t===Pl.UPLOAD)return Mi.PACKED_2X2_FLOAT32;if(t===Pl.RENDER||t==null)return gFe(e);if(t===Pl.DOWNLOAD||t===Pl.PIXELS)return Mi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function MU(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nd{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const qc="if (isnan(x)) return x;",yFe="return x;",FU="return abs(x);",vFe="return (x >= 0.0) ? x : (exp(x) - 1.0);",xFe=qc+`
  return (x < 0.0) ? 0.0 : x;
`,bFe=qc+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,up="return x;",wFe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Fe="return x;",kFe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,SFe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NFe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,CFe="return 1.0 / (1.0 + exp(-1.0 * x));";class Np{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TFe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length);const n=e.length,r=Ma("rc",n),s=mr(n),i=uFe(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IFe=DM,AFe=1e-7,EFe=1e-4,AN={};function PFe(t){return t in AN||(AN[t]={}),AN[t]}const OFe=We().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),jFe=600;function $Fe(){return We().global.screen==null?1024:We().global.screen.height*We().global.screen.width*window.devicePixelRatio*jFe/1024/1024}class zE extends FI{nextDataId(){return zE.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!We().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof y3)n=e;else{const r=Fu(We().getNumber("WEBGL_VERSION"),e);n=new y3(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Fu(We().getNumber("WEBGL_VERSION"));n=new y3(r),this.binaryCache=PFe(We().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new fFe(this.gpgpu),this.numMBBeforeWarning=$Fe(),this.texData=new xR(this,mu())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=TN(n),u=new DU(c,!1,a),d=this.runWebGLProgram(u,[o],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(e,n,r){if((We().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||We().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Pl.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(We().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Pl.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:a,shape:o,isPacked:l}=n;if(a!=null){let h;l?h=new Np(o,up):h=new Nd(o,up);const f=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:s}],s),m=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=ho());let d;if(s==="complex64"){const h=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=nf(h,f)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=ho()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const m=this.pendingRead.get(e);return new Promise(y=>m.push(y))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(i!=null){let m;l?m=new Np(s,up):m=new Nd(s,up);const y=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:a}],a),v=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(We().getBool("DEBUG")&&!We().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&We().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(a!=="complex64"&&We().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const m=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(m.texture.texture,...SN(s))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const m=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),y=m[0],v=m[1];d=nf(y,v)}else if(c==null)d=this.getValuesFromTexture(e);else{const m=Xe(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,m)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const m=this.gpgpu.gl;It(m,()=>m.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(m=>m(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&mu().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let f;l?f=new Np(i,up):f=new Nd(i,up);const m=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:o}],o),y=this.readToGPU(m,n);return this.disposeIntermediateTensorInfo(m),y}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=mu().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>nm(s));return yn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return yn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!RLe(r))throw We().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=Xe(n);if(We().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),m=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...SN(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(h),m}const a=We().getBool("WEBGL_PACK")&&s===!0,o=a?TN(n):n,l=a?new QRe(o):new JRe(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=b0(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=b0(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);o.kernelMs=swe(l),o.getExtraProfileInfo=()=>l.map((c,u)=>({name:a[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ho(),endMs:null}}endTimer(e){return We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ho(),e)}async getQueryTime(e){if(We().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=OFe){return We().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Xe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Tl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return IFe(e.shape,n)}packedUnaryOp(e,n,r){const s=new Np(e.shape,n),i=this.compileAndRun(s,[e],r);return mu().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=fie(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(We().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,FU,e.dtype);const n=new Nd(e.shape,FU),r=this.compileAndRun(n,[e]);return mu().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&k_(r[0])){const i=r.map(a=>Vp(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return mu().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new TFe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new dFe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[vx(e.shape),...xx(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[vx(n),...xx(n)],a=new gie(i,r),o=!0,l=[r],c=this.runWebGLProgram(a,[s],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=r;if(n!=null){const h=Xe(i),f=n[0]*n[1]*4;le(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=TN(i);let l;s?l=new ZRe(o):l=new YRe(o);const c=!0,u=[n??SN(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,u,c,n);return{dtype:a,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===R2.DENSE){const x=a??SN(e.outputShape);l.texShape=x.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Xe(o.shape)===0)return l.values=Ui(o.dtype,0),o;const c=[],u=n.map(x=>{if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(x.dataId);if(b.texture==null){if(!e.packedInputs&&Xe(x.shape)<=We().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=x.shape)}if(this.uploadToGPU(x.dataId),!!b.isPacked!=!!e.packedInputs)x=b.isPacked?this.unpackTensor(x):this.packTensor(x),c.push(x),b=this.texData.get(x.dataId);else if(b.isPacked&&!Q5(b.shape,x.shape)){const _=x,k=x.shape;x.shape=b.shape,x=this.packedReshape(x,k),c.push(x),b=this.texData.get(x.dataId),_.shape=k}return{shape:x.shape,texData:b,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},h=XRe(e,u,d),f=this.getAndSaveBinary(h,()=>GRe(this.gpgpu,e,u,d)),m=this.activeTimers!=null;let y;m&&(y=this.startTimer()),We().get("ENGINE_COMPILE_ONLY")||KRe(this.gpgpu,f,u,d,s),c.forEach(x=>this.disposeIntermediateTensorInfo(x)),m&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const v=We().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const x=ho();x-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=x)}if(!We().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const x=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),x}return o}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(We().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Re(()=>{if(!We().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=We().getBool("DEBUG");We().set("DEBUG",!1);const n=this.abs(qt(1e-8)).dataSync()[0];if(We().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?AFe:EFe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let u;c&&(u=ho());let d=n.texShape;if(d==null&&(d=tRe(r,l),n.texShape=d),i!=null){const h=TN(r);let f,m=d[1],y=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([m,y]=Xb(d[0],d[1])),l?f=new tMe(h,v):f=new DU(h,v);const x=v?[y,m]:d,b=this.makeTensorInfo(x,s),_=this.texData.get(b.dataId);v?_.usage=Pl.PIXELS:_.usage=Pl.UPLOAD,_.texShape=x,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,y,i);const k=[[y,m]],A=this.runWebGLProgram(f,[b],s,k,!0),T=this.texData.get(A.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,We().get("ENGINE_COMPILE_ONLY")?this.disposeData(A.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(A.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=ho()-u)}else{const h=this.acquireTexture(d,o,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=DFe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*I5(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await nF(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(tie(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=aie(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:a,channels:o}=e,l=mu().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,a,o);return mu().makeTensorFromDataId(c,n,r,l)}}zE.nextDataId=0;function DFe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */wQ()&&IR("webgl",()=>new zE,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s6=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class j0{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=dn(n,r),this.enableShapeUniforms=ga(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ay=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class e1{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dn(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ga(i);let a="";if(s)if(i===0||Xe(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${mr(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ma("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const LFe={kernelName:ub,backendName:"webgl",kernelFunc:cl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Om(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(i.dataId),o=cl({inputs:{x:r},backend:n}),l=cl({inputs:{x:s},backend:n});return a.complexTensorInfos={real:o,imag:l},i}const RFe={kernelName:qI,backendName:"webgl",kernelFunc:Om};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie="return (a < 0.) ? b * a : a;",vie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function MFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,a=n.makeTensorInfo([],"float32",km(i,"float32")),o=We().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new e1(vie,s.shape,a.shape):new j0(yie,s.shape,a.shape),l=n.runWebGLProgram(o,[s,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const FFe={kernelName:q_,backendName:"webgl",kernelFunc:MFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xie="return (a < 0.) ? b * a : a;",bie=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function zFe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=We().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new e1(bie,r.shape,s.shape):new j0(xie,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const BFe={kernelName:dk,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t1="if (isnan(x)) return x;";function Bn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:a}=s,o=i,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const d=o.texData.get(a.dataId),h=n(d.values,l);return o.makeTensorInfo(a.shape,l,h)}const c=We().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Np(a.shape,e):u=new Nd(a.shape,t),o.runWebGLProgram(u,[a],l)}}function Ki({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,u=o;if(r&&l.dtype==="complex64"){const m=u.texData.get(l.dataId),y=u.texData.get(c.dataId),[v,x]=[[m.complexTensorInfos.real,y.complexTensorInfos.real],[m.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(_=>{const[k,N]=_,A={dataId:k.dataId,dtype:k.dtype,shape:l.shape},T={dataId:N.dataId,dtype:N.dtype,shape:c.shape},C=new j0(t,l.shape,c.shape);return u.runWebGLProgram(C,[A,T],xo(k.dtype,N.dtype))}),b=Om({inputs:{real:v,imag:x},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(x),b}const d=i||xo(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const m=u.texData.get(l.dataId).values,y=u.texData.get(c.dataId).values,v=l.dtype==="string"?rf(m):m,x=l.dtype==="string"?rf(y):y,[b,_]=s(l.shape,c.shape,v,x,d),k=u.makeTensorInfo(_,d),N=u.texData.get(k.dataId);return N.values=b,k}const h=We().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new e1(e,l.shape,c.shape,n):f=new j0(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function M2(t,e=!1){if(t==="linear")return e?_Fe:yFe;if(t==="relu")return e?SFe:xFe;if(t==="elu")return e?kFe:vFe;if(t==="relu6")return e?NFe:bFe;if(t==="prelu")return e?bie:xie;if(t==="leakyrelu")return e?vie:yie;if(t==="sigmoid")return e?CFe:wFe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wie{constructor(e,n,r,s=!1,i=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ga(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",m=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",x="";o&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:v=`vec4 activation(vec4 x) {
          ${o}
        }`,x="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let _="rc.x",k="rc.x";e[0]<n[0]?_=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(k=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${_};
        int batchB = ${k};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${y[0]});
          result += (${m[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${x}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zU={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BU{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dn(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WU="return a * b;";function i6(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=xo(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new BU(zU.REAL,r.shape,s.shape),u=new BU(zU.IMAG,r.shape,s.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),m=Om({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}if(n.shouldExecuteOnCPU([r,s])){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=zMe(r.shape,s.shape,o.values,l.values,i),d=n.makeTensorInfo(u,i),h=n.texData.get(d.dataId);return h.values=c,d}let a;return We().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new e1(WU,r.shape,s.shape):a=new j0(WU,r.shape,s.shape),n.runWebGLProgram(a,[r,s],i)}const WFe={kernelName:xb,backendName:"webgl",kernelFunc:i6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t,e,n){const r=[vx(t.shape),...xx(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[vx(e),...xx(e)],a=new gie(i,r),o=!0,l=[r],c=n.runWebGLProgram(a,[s],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=n,o=Xe(s.shape),l=KJ(i,o),c=Xe(l);le(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const u=a.texData.get(s.dataId);return u.isPacked&&!Q5(s.shape,l)&&!(u.texture!==null&&Q5(u.shape,l))?UFe(s,l,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const VFe={kernelName:fk,backendName:"webgl",kernelFunc:xt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UU{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${ix(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HFe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=SE(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function oy(t,e,n,r){const s=qFe(t.shape);let i=t;for(let a=0;a<s.length;a++){const{inSize:o,windowSize:l,outSize:c}=s[a];let u,d;n==="mean"?u=a===0?new UU({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new UU({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):u=new HFe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GFe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const s=mr(this.rank),i=KFe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function KFe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XFe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=mr(this.rank),i=mie("rc",this.rank),a=new Array(this.rank);for(let u=0;u<n.length;u++)a[n[u]]=i[u];const o=`vec2(${a.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BE(t,e,n){const r=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XFe(t.shape,e):new GFe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(t,e,n,r){const s=e,i=t.shape.length,a=Sn(s,t.shape);let o=a;const l=rs(o,i),c=l!=null;let u=t;c&&(u=BE(t,l,r),o=Cs(o.length,i)),qi("sum",o,i);const[d,h]=Si(u.shape,o);let f=d;n&&(f=Ns(d,a));const m=Xe(h),v=Xe(t.shape)/m,x=xt({inputs:{x:u},attrs:{shape:[v,m]},backend:r}),b=HA(t.dtype),_=oy(x,b,"sum",r),k=xt({inputs:{x:_},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(_),c&&r.disposeIntermediateTensorInfo(u),k}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WE(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;return YFe(s,i,a,n)}const ZFe={kernelName:xk,backendName:"webgl",kernelFunc:WE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Va(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,a=n,o=s.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(a.shouldExecuteOnCPU([s])){const d=a.texData.get(s.dataId).values,h=r6(d,s.shape,s.dtype,i,l);c=a.makeTensorInfo(l,s.dtype);const f=a.texData.get(c.dataId);f.values=h}else c=BE(s,i,a);return c}const JFe={kernelName:Xg,backendName:"webgl",kernelFunc:Va};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie=1e3;function eT({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=r?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],m=r?e.shape[u-2]:e.shape[u-1],y=t.shape.slice(0,-2),v=e.shape.slice(0,-2),x=Xe(y),b=Xe(v),k=dn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,m]);le(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const N=n?[x,d,f]:[x,f,d],A=r?[b,m,h]:[b,h,m],T=xt({inputs:{x:t},backend:s,attrs:{shape:N}}),C=xt({inputs:{x:e},backend:s,attrs:{shape:A}}),P=[T,C],$=Math.max(x,b),j=n?T.shape[1]:T.shape[2],O=i!=null,F=a!=null,B=l==="leakyrelu",Z=l!=null?M2(l,!0):null,V=O||F||B||Z!=null;let G;if((f===1||m===1)&&j>_ie&&V===!1){let K=T,ee=C;n&&(K=Va({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),P.push(K)),r&&(ee=Va({inputs:{x:C},backend:s,attrs:{perm:[0,2,1]}}),P.push(ee));const oe=m!==1,W=m===1;let Y=K;oe&&(Y=xt({inputs:{x:K},backend:s,attrs:{shape:[$,j,1]}}),P.push(Y));const Q=m===1?2:1;let J=ee;W&&(J=xt({inputs:{x:ee},backend:s,attrs:{shape:[$,1,j]}}),P.push(J));const te=i6({inputs:{a:Y,b:J},backend:s});G=WE({inputs:{x:te},backend:s,attrs:{axis:Q,keepDims:!0}}),P.push(te)}else{const K=xo(t.dtype,e.dtype),ee=new wie(N,A,[$,f,m],n,r,O,Z,F,B),oe=[T,C];if(i!=null&&oe.push(i),F&&oe.push(a),B){const W=s.makeTensorInfo([],"float32",km(o,"float32"));oe.push(W),P.push(W)}G=s.runWebGLProgram(ee,oe,K)}const U=xt({inputs:{x:G},backend:s,attrs:{shape:k}});P.push(G);for(const K of P)s.disposeIntermediateTensorInfo(K);return U}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return eT({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}const e6e={kernelName:N2,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VU="return abs(x);";function t6e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),a=fie(i.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let s;return We().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Np(r.shape,VU):s=new Nd(r.shape,VU),n.runWebGLProgram(s,[r],r.dtype)}const n6e={kernelName:S_,backendName:"webgl",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r6e=qc+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,s6e=Bn({opSnippet:r6e}),i6e={kernelName:Vx,backendName:"webgl",kernelFunc:s6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e=qc+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,o6e=Bn({opSnippet:a6e}),l6e={kernelName:Hx,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HU="return a + b;",c6e=Ki({opSnippet:HU,packedOpSnippet:HU,supportsComplex:!0,cpuKernelImpl:xMe}),u6e={kernelName:K0,backendName:"webgl",kernelFunc:c6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d6e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h6e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CC(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return cl({inputs:{x:r[0]},backend:n});if(r.length>We().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=CC({inputs:r.slice(0,l),backend:n}),u=CC({inputs:r.slice(l),backend:n});return CC({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>xo(l,c)),i=r.map(l=>l.shape),o=We().getBool("WEBGL_PACK")?new h6e(r[0].shape,i):new d6e(r[0].shape,i);return n.runWebGLProgram(o,r,s)}const f6e={kernelName:N_,backendName:"webgl",kernelFunc:CC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Sn(i,s.shape);let c=l;const u=rs(c,o);let d=s;u!=null&&(d=Va({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Cs(c.length,o)),qi("all",c,o);const[h,f]=Si(d.shape,c),m=Xe(f),y=xt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=oy(y,y.dtype,"all",n);let x;if(a){const b=Ns(h,l);x=xt({inputs:{x:v},backend:n,attrs:{shape:b}})}else x=xt({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),x}const m6e={kernelName:zI,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Sn(i,s.shape);let c=l;const u=rs(c,o);let d=s;u!=null&&(d=Va({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Cs(c.length,o)),qi("any",c,o);const[h,f]=Si(d.shape,c),m=Xe(f),y=xt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=oy(y,y.dtype,"any",n);let x;if(a){const b=Ns(h,l);x=xt({inputs:{x:v},backend:n,attrs:{shape:b}})}else x=xt({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),x}const y6e={kernelName:BI,backendName:"webgl",kernelFunc:g6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v6e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x6e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,le(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=mr(l),u=Ma("coords",l);let d,h;if(a===1){h=l+1;const C=mr(h);d=`
        ${C} sourceLocR = ${C}(${u.join()}, 0);
        ++${u[l-1]};
        ${C} sourceLocG = ${C}(${u.join()}, 0);
        ++${u[l-2]};
        ${C} sourceLocA = ${C}(${u.join()}, 0);
        --${u[l-1]};
        ${C} sourceLocB = ${C}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),m="."+f[h-1],y=f.map(C=>"int "+C),v=Ma("sourceLocR",h-1).concat("inIdx.r"),x=Ma("sourceLocG",h-1).concat("inIdx.g"),b=Ma("sourceLocB",h-1).concat("inIdx.b"),_=Ma("sourceLocA",h-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",N=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${_.join()})));`,A=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${x.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${_.join()}) : 0.)`,T=s?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${A};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${N}
          vec4 candidate = ${A};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${k}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const a=SE(i),o={windowSize:a,inSize:i,batchSize:s,outSize:Math.ceil(i/a)},l=new v6e(o,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=kie(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Sie(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],a=SE(i),o=new x6e(s,a,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const u=Sie(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Nie(t,e,n,r){const s=[n];if(qi("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!We().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Si(l.shape,s),d=Xe(u),h=xt({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(h);const f=kie(t,h,r);i.push(f);const m=xt({inputs:{x:f},backend:t,attrs:{shape:c}});return i.forEach(y=>t.disposeIntermediateTensorInfo(y)),m}return Sie(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Sn(i,s.shape);const o=rs(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Va({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=Cs(a.length,l.shape.length)),qi("argMax",[a[0]],l.shape.length);const u=Nie(n,l,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const w6e={kernelName:C_,backendName:"webgl",kernelFunc:b6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=Sn(i,s.shape);const o=rs(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Va({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=Cs(a.length,l.shape.length)),qi("argMin",[a[0]],l.shape.length);const u=Nie(n,l,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const k6e={kernelName:T_,backendName:"webgl",kernelFunc:_6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S6e=qc+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,N6e=Bn({opSnippet:S6e}),C6e={kernelName:qx,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e=qc+"return log(x + sqrt(x * x + 1.0));",I6e=Bn({opSnippet:T6e}),A6e={kernelName:Gx,backendName:"webgl",kernelFunc:I6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6e=qc+`
  return atan(x);
`,P6e=Bn({opSnippet:E6e}),O6e={kernelName:Kx,backendName:"webgl",kernelFunc:P6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j6e=s6+`
  return atan(a, b);
`,$6e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ay+`
  return result;
`,D6e=Ki({opSnippet:j6e,packedOpSnippet:$6e}),L6e={kernelName:Yx,backendName:"webgl",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6e=qc+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,M6e=Bn({opSnippet:R6e}),F6e={kernelName:Xx,backendName:"webgl",kernelFunc:M6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class F2{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,x=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(y||(b="-1.0 / 1e-20"),r){const C=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${f}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${C} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?v:x:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const N=Math.floor(a/4)*4,A=a%4,T=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${f}, ${m});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${N}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${N};
          if (${A===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${A===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${A===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${k});
      }
    `}}class a6{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,m=e.effectiveFilterHeight,y=e.effectiveFilterWidth,v=e.padInfo.front,x=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const _=n==="avg";let k="0.0";if(_||(k="-1.0 / 1e-20"),r){const $=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${v}, ${x}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${$} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${m} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const N="max";let A=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(A="avgValue / max(count, 1.0)");const T=Math.floor(a/4)*4,C=a%4,P=`
      if (${_}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${N}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${v}, ${x}, ${b});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${T};
            if (${C===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${C===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${C===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${A});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;sS(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;le(Hi(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=Vc(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&jn(u.inShape,u.outShape))return cl({inputs:{x:s},backend:n});const d=new F2(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const B6e={kernelName:I_,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=hf(s.shape,i,a,u,o,l,c),h=new a6(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const U6e={kernelName:A_,backendName:"webgl",kernelFunc:W6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class H6e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=d-1-e.padInfo.front,y=h-1-e.padInfo.top,v=f-1-e.padInfo.left,x=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${y}, ${v});
      const float avgMultiplier = float(${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=hf(a.shape,o,l,d,c,u),f=new H6e(h);return n.runWebGLProgram(f,[s],a.dtype)}const G6e={kernelName:UI,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;sS([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=Vc(a.shape,o,l,1,c),d=new V6e(u);return n.runWebGLProgram(d,[s],a.dtype)}const X6e={kernelName:WI,backendName:"webgl",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;return eT({a:s,b:i,transposeA:a,transposeB:o,backend:n})}const Z6e={kernelName:E_,backendName:"webgl",kernelFunc:Y6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J6e{constructor(e,n,r,s,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],dn(e,n),dn(e,r);let o="0.0";s!=null&&(dn(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";i!=null&&(dn(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q6e{constructor(e,n,r,s,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dn(e,n),dn(e,r);let o="vec4(0.0)";s!=null&&(dn(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(dn(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eze=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:a,scale:o}=t;le(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),le(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),le(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;a!=null&&(u=a.shape,c.push(a));let d=null;o!=null&&(d=o.shape,c.push(o));const h=We().getBool("WEBGL_PACK_NORMALIZATION")?new Q6e(r.shape,s.shape,i.shape,u,d,l):new J6e(r.shape,s.shape,i.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},tze={kernelName:U_,backendName:"webgl",kernelFunc:eze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nze{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=mr(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=rze(this.rank);let s;const i=e.map((a,o)=>`sourceLoc.${T$[o]} = start[${o}] + coords.${T$[o]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const T$=["x","y","z","w","u","v"];function rze(t){if(t===1)return"sourceLoc";if(t<=6)return T$.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sze{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=mr(this.rank),r=Ma("coords",this.rank),s=Ma("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${i})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ize(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),a=r.texData.get(i.dataId);Object.assign(a,s),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=Jee(e,Gt(t.shape));s.slice&&(o+=s.slice.flatOffset),a.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),i}function n1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r,[o,l]=tF(s,i,a);if(Xee(s,o,l),Xe(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=ZMe(d.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=n.texData.get(s.dataId),u=Zee(s.shape,o,l);if(c||!u){const d=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sze(l):new nze(l),h=[o];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),ize(s,o,l,n)}const aze={kernelName:vk,backendName:"webgl",kernelFunc:n1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;le(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((b,_)=>b*_),l=Hk(s.shape,i,o),c=qk(l.length,i.length),u=Gk(s.shape,i,o),d=aF(a,i.length),h=oF(u,a,i.length),f=[],m=xt({inputs:{x:s},backend:n,attrs:{shape:l}}),y=Va({inputs:{x:m},backend:n,attrs:{perm:c}}),v=xt({inputs:{x:y},backend:n,attrs:{shape:u}}),x=n1({inputs:{x:v},backend:n,attrs:{begin:d,size:h}});return f.push(m),f.push(y),f.push(v),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),x},lze={kernelName:P_,backendName:"webgl",kernelFunc:oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.readSync(s.dataId),l=n.readSync(i.dataId),c=hie(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}const uze={kernelName:VI,backendName:"webgl",kernelFunc:cze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,hze=`
  return float(int(a.r) & int(b.r));
`;function fze(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=We().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=We().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||a===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=wMe(r.shape,s.shape,l,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let o;return i?o=new e1(dze,r.shape,s.shape,!1):o=new j0(hze,r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}const pze={kernelName:O_,backendName:"webgl",kernelFunc:fze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mze(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),o=dn(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const gze={kernelName:HI,backendName:"webgl",kernelFunc:mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yze="return float(a != b);",Cie=Ki({opSnippet:yze,cpuKernelImpl:WMe,dtype:"bool"}),vze={kernelName:ak,backendName:"webgl",kernelFunc:Cie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aS(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return cl({inputs:{x:s.complexTensorInfos.real},backend:n})}const xze={kernelName:SA,backendName:"webgl",kernelFunc:aS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bze="return float(int(x));";function wze(t,e){const n=new Nd(t.shape,bze),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I$(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return cl({inputs:{x:s},backend:n});const a=ws(s.shape),o=I$({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Om({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const a=aS({inputs:{input:s},backend:n}),o=I$({inputs:{x:a},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(a),o}if(!XJ(s.dtype,i)){const a=cl({inputs:{x:s},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const a=n.texData.get(s.dataId).values,[o,l,c]=_Me(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,c)}if(i==="int32")return wze(s,n);if(i==="bool"){const a=n.makeTensorInfo([],"bool",Ui("bool",1)),l=Cie({inputs:{a:s,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const _ze={kernelName:Zx,backendName:"webgl",kernelFunc:I$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qU="return ceil(x);",kze=Bn({opSnippet:qU,packedOpSnippet:qU,cpuKernelImpl:kMe}),Sze={kernelName:Jx,backendName:"webgl",kernelFunc:kze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nze{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cze{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:a}=r;let o;We().getBool("WEBGL_PACK_CLIP")?o=new Cze(s.shape):o=new Nze(s.shape);const l=[[i],[a]];return n.runWebGLProgram(o,[s],s.dtype,l)}const Ize={kernelName:Qx,backendName:"webgl",kernelFunc:Tze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aze{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function Eze(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new Aze(r.shape),a=[GU(r,s.complexTensorInfos.real),GU(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}const Pze={kernelName:j_,backendName:"webgl",kernelFunc:Eze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oze{constructor(e){this.outputShape=[],this.outputShape=Dd(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jze{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Dd(e,n);const r=this.outputShape,s=r.length,i=mr(s),a=Ma("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((y,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const c=o[n],u=o.slice(-2),d=o.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let y=1;y<l.length;y++){const v=l[y-1];h+=`
        if (${c} < ${l[y]}  && ${c} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${EN(o,c,v)}),
            vec2(${EN(u,c,v)}));
        }`}const f=l.length,m=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${EN(o,c,m)}),
          vec2(${EN(u,c,m)}));`,this.userCode=`
      float getValue(${o.map(y=>"int "+y)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function EN(t,e,n){const r=t.indexOf(e);return t.map((i,a)=>a===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UE(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return cl({inputs:{x:s.complexTensorInfos.imag},backend:n})}const $ze={kernelName:uA,backendName:"webgl",kernelFunc:UE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fw(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(b=>aS({inputs:{input:b},backend:n})),m=t.map(b=>UE({inputs:{input:b},backend:n})),y=fw(f,e,n),v=fw(m,e,n),x=Om({inputs:{real:y,imag:v},backend:n});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),m.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(k=>{const A=[-1,Xe(k.shape.slice(e))];return xt({inputs:{x:k},backend:n,attrs:{shape:A}})}),m=f.map(k=>({vals:n.readSync(k.dataId),shape:k.shape})),y=Dd(f.map(k=>k.shape),1),v=f[0].shape[0]===1,x=SMe(m,y,r,v),b=Dd(t.map(k=>k.shape),e),_=n.makeTensorInfo(b,r,x);return f.forEach(k=>n.disposeIntermediateTensorInfo(k)),_}const i=t.filter(f=>Xe(f.shape)>0),a=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=a?new Nd(t[0].shape,up):new Np(t[0].shape,up);return n.runWebGLProgram(f,t,r)}const o=We().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const f=[];for(let y=0;y<i.length;y+=o){const v=i.slice(y,y+o);f.push(fw(v,e,n))}const m=fw(f,e,n);for(const y of f)n.disposeIntermediateTensorInfo(y);return m}if(a){const f=new jze(i.map(m=>m.shape),e);return n.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:c}=Dze(i,e,n),u=new Oze(l.map(f=>f.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=xt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function Dze(t,e,n){const r=Dd(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>xt({inputs:{x:i},attrs:{shape:[-1,Xe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Sn(s,e[0].shape)[0],a=e.map(c=>c.shape);rF(a,i);const o=Dd(e.map(c=>c.shape),i);if(Xe(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>Xe(c.shape)>0);return l.length===1?cl({inputs:{x:l[0]},backend:n}):fw(l,i,n)}const Lze={kernelName:$_,backendName:"webgl",kernelFunc:Tie};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iie{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,v=e.dataFormat==="channelsLast",x=v?1:2,b=v?2:3,_=v?3:1;let k="",N="";r&&(s?k=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?k=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:k=`
          float activation(float x) {
            ${r}
          }
        `,N="result = activation(result);");const A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${k}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${_}];

        ivec2 xRCCorner =
            ivec2(coords[${x}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${A}
        ${N}
        setOutput(result);
      }
    `}}class Rze{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,m=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aie{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ga(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<u;v++)h+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<u;v++)h+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const x=v*2;if(h+=`
           xC = xCCorner + ${x*l};
           `,o===1){if(x<u&&(a%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }
               `,l===1&&x>0?h+=`
                 xC${x} = vec4(xTexelC${x-2}.zw, xTexelC${x}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${x} = vec4(previous.zw, xTexelC${x}.xy);
                   } else {
                     xC${x} = vec4(0.0, 0.0, xTexelC${x}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xC${x} = xTexelC${x};
                 `,x+1<u)){const b=a%2===0?wR(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                     xTexelC${x+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${x+1}.zw = vec2(0.0);
                     }
                     xTexelC${x+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${x+1} = vec4(previous.zw, xTexelC${x+1}.xy);
                     } else {
                      xC${x+1} = vec4(0.0, 0.0, xTexelC${x+1}.xy);
                     }
                     `:h+=`
                     xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.xy);
                     `):b===1?h+=`
                     xC${x+1} = xTexelC${x};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                       xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${x+1}.zw = vec2(0.0);
                       }
                       xTexelC${x+1}Ready = 1;
                     }

                     xC${x+1} = xTexelC${x+1};
                     `}}else x<u&&(a%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.0);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
               `,x+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${x+1} = vec4(xTexelC${x+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${x}Ready == 0) {
                   xTexelC${x} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${x}.zw = vec2(0.0);
                   }
                   xTexelC${x}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${x+1}Ready == 0) {
                   xTexelC${x+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${x+1}.zw = vec2(0.);
                   }
                   xTexelC${x+1}Ready = 1;
                 }

                 xC${x} = vec4(
                   xTexelC${x}.xy, xTexelC${x+1}.xy);
               `,x+1<u&&(h+=`
                   xC${x+1} = vec4(xTexelC${x}.zw, xTexelC${x+1}.zw);
                 `)));x<u&&(h+=`
             wTexel = getW(r, ${x}, d1, d2);
             dotProd += xC${x}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${x}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,x+1<u&&(h+=`
               wTexel = getW(r, ${x+1}, d1, d2);
               dotProd += xC${x+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${x+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",m="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${m}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mze{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ga(this.outputShape.length);const{dataFormat:r}=n,s=Ka(),i=r==="channelsLast",a=i?1:2,o=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tT(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Eie({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",m=!1,y=!1;let v;const x=[];if(i!=null){const k=tT(i.shape,f);k!=null&&(i=xt({inputs:{x:i},backend:r,attrs:{shape:k}}),x.push(i))}if(s!=null){const k=tT(s.shape,f);k!=null&&(s=xt({inputs:{x:s},backend:r,attrs:{shape:k}}),x.push(s))}if(!((d===1||h===1)&&u>_ie)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&jn(c.shape.slice(-3),l.slice(-3))){const k=l[0]*l[1]*(l[2]+1),N={dataId:t.dataId,shape:[1,k,n.inChannels],dtype:t.dtype},A=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,le(Q5(c.shape,N.shape),()=>`packed reshape ${c.shape} to ${N.shape} isn't free`);const T=xt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});x.push(T);const C=eT({a:N,b:T,backend:r,transposeA:m,transposeB:y,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a}),P=r.texData.get(C.dataId);le(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=A,P.shape=n.outShape,v=cl({inputs:{x:C},backend:r}),v.shape=n.outShape,x.push(C)}else{const k=n.outHeight*n.outWidth,N=xt({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,k,n.inChannels]:[n.batchSize,n.inChannels,k]}}),A=xt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=eT({a:f?N:A,b:f?A:N,transposeA:!f,transposeB:y,backend:r,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a});v=xt({inputs:{x:T},backend:r,attrs:{shape:n.outShape}}),x.push(N),x.push(A),x.push(T)}for(const k of x)r.disposeIntermediateTensorInfo(k);return v}function Pie({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,m=f==="channelsLast",y=l*c*u,v=h*d,x=[n.batchSize,y,v],b=!0,_=!1,k=[];if(i!=null){const U=tT(i.shape,m);U!=null&&(i=xt({inputs:{x:i},backend:r,attrs:{shape:U}}),k.push(i))}if(s!=null){const U=tT(s.shape,m);U!=null&&(s=xt({inputs:{x:s},backend:r,attrs:{shape:U}}),k.push(s))}const N=xt({inputs:{x:e},backend:r,attrs:{shape:[1,y,Xe(e.shape)/y]}});k.push(N);const A=new Mze(x,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=r.runWebGLProgram(A,[t],"float32",T),P=xt({inputs:{x:C},backend:r,attrs:{shape:x}});k.push(C),k.push(P);const $=s!=null,j=i!=null,O=o==="leakyrelu",F=o?M2(o,!0):null,B=new wie(m?P.shape:N.shape,m?N.shape:P.shape,m?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],b,_,$,F,j,O),Z=m?[P,N]:[N,P];if(s&&Z.push(s),j&&Z.push(i),O){const U=r.makeTensorInfo([],"float32",km(a,"float32"));Z.push(U),k.push(U)}const V=r.runWebGLProgram(B,Z,"float32"),G=xt({inputs:{x:V},backend:r,attrs:{shape:n.outShape}});k.push(V);for(const U of k)r.disposeIntermediateTensorInfo(U);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=ff(l),h=ki(s.shape,i.shape,a,c,o,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=Eie({x:s,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&We().getBool("WEBGL_EXP_CONV")){const y=new Aie(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(y,[s,i],"float32",v)}else if(We().getBool("WEBGL_CONV_IM2COL"))f=Pie({x:s,filter:i,convInfo:h,backend:n});else{const y=new Iie(h);f=n.runWebGLProgram(y,[s,i],"float32")}const m=xt({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),m}const zze={kernelName:D_,backendName:"webgl",kernelFunc:Fze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bze{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Wze{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,u=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Uze{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Vze{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=ff(l),h=ki(s.shape,u,a,1,o,c,!1,d),f=new Bze(h);return n.runWebGLProgram(f,[s,i],"float32")}const qze={kernelName:GI,backendName:"webgl",kernelFunc:Hze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gze{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ga(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=ff(c),h=ki(a,i.shape,o,1,l,u,!1,d);if(We().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],m=new Gze(h);return n.runWebGLProgram(m,[s,i],"float32",f)}else{const f=new Wze(h);return n.runWebGLProgram(f,[s,i],"float32")}}const Xze={kernelName:L_,backendName:"webgl",kernelFunc:Kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=Cm(s.shape,i.shape,a,l,o),u=new Rze(c);return n.runWebGLProgram(u,[s,i],"float32")}const Zze={kernelName:R_,backendName:"webgl",kernelFunc:Yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r,c=Cm(s.shape,l,a,1,o),u=new Uze(c);return n.runWebGLProgram(u,[s,i],"float32")}const Qze={kernelName:KI,backendName:"webgl",kernelFunc:Jze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r,c=Cm(l,i.shape,o,1,a),u=new Vze(c);return n.runWebGLProgram(u,[s,i],"float32")}const t8e={kernelName:XI,backendName:"webgl",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8e=t1+`
  return cos(x);
`,r8e=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${ay}
  return result;
`,s8e=Bn({opSnippet:n8e,packedOpSnippet:r8e}),i8e={kernelName:eb,backendName:"webgl",kernelFunc:s8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,o8e=Bn({opSnippet:a8e}),l8e={kernelName:tb,backendName:"webgl",kernelFunc:o8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8e{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[u]=n,[d,h]=r;this.outputShape=[u,d,h,c];const f=s==="bilinear"?1:0,[m,y]=[`${o-1}.0`,`${l-1}.0`],[v,x,b]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[_,k,N]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${_});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${x};
        float width_scale = ${k};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${N};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u8e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,u=new c8e(s.shape,i.shape,o,l,c);return n.runWebGLProgram(u,[s,i,a],"float32")},d8e={kernelName:ZI,backendName:"webgl",kernelFunc:u8e};var z2;(function(t){t.Prod="*",t.Sum="+"})(z2||(z2={}));class KU{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===z2.Prod?"1.0":"0.0",o=r?a:`getX(${XU(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${mr(i)} coords = getOutputCoords();
        int end = ${YU(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${YU(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${XU(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function XU(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function YU(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oie(t,e,n,r,s,i){const a=e.shape.length,o=rs([r],a);let l=e;o!=null&&(l=Va({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=Cs(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=cl({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new KU(t,l.shape,!1,i),m=[[h]],y=d;d=n.runWebGLProgram(f,[d],d.dtype,m),n.disposeIntermediateTensorInfo(y)}if(s){const h=new KU(t,l.shape,s,i),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(o!=null){const h=Tm(o),f=Va({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Oie(z2.Prod,s,n,i,a,o)}const f8e={kernelName:YI,backendName:"webgl",kernelFunc:h8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Oie(z2.Sum,s,n,i,a,o)}const m8e={kernelName:M_,backendName:"webgl",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=hie(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=bMe(l,c,a,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const y8e={kernelName:JI,backendName:"webgl",kernelFunc:g8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v8e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r,o=s.shape[0],l=a==="NHWC"?s.shape[1]:s.shape[2],c=a==="NHWC"?s.shape[2]:s.shape[3],u=a==="NHWC"?s.shape[3]:s.shape[1],d=l*i,h=c*i,f=u/(i*i),m=a==="NHWC"?[o,d,h,f]:[o,f,d,h],y=new v8e(m,i,a);return n.runWebGLProgram(y,[s],s.dtype)}const b8e={kernelName:QI,backendName:"webgl",kernelFunc:x8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jie{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ga(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ie{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ga(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let x=0;x<d;x++)f+=`
          vec4 xTexelC${x*2};
          int xTexelC${x*2}Ready;
          vec4 xTexelC${x*2+1};
          int xTexelC${x*2+1}Ready;
          vec4 xC${x};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let x=0;x<d;x++)f+=`
          xTexelC${x*2} = vec4(0.0);
          xTexelC${x*2}Ready = 0;
          xTexelC${x*2+1} = vec4(0.0);
          xTexelC${x*2+1}Ready = 0;
          xC${x} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let x=0;x<(h+1)/2;x++){const b=x*2;if(f+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(o%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?f+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const _=o%2===0?wR(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${_};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:f+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):_===1?f+=`
                    xC${b+1} = xTexelC${b};
                    `:f+=`
                    xCOffset = xC + ${_};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(o%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(f+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(f+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(f+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let m="",y="";r&&(s?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:m=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),le(Hi(a,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=ki(s.shape,i.shape,a,u,o,c,!0);let h;We().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new $ie(d):h=new jie(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,i],"float32",f)}const _8e={kernelName:F_,backendName:"webgl",kernelFunc:w8e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8e{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class S8e{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=ki(s.shape,u,a,o,l,c,!0),h=new k8e(d);return n.runWebGLProgram(h,[s,i],"float32")}const C8e={kernelName:eA,backendName:"webgl",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=ki(u,i.shape,a,o,l,c,!0),h=new S8e(d);return n.runWebGLProgram(h,[s,i],"float32")}const I8e={kernelName:tA,backendName:"webgl",kernelFunc:T8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A8e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=Xe(r.shape),a=xt({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new A8e(i),l=n.runWebGLProgram(o,[a],a.dtype),c=xt({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const P8e={kernelName:nA,backendName:"webgl",kernelFunc:E8e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O8e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=Ik(s.shape,i.shape,a,o,"NHWC",l);let u;const d=new O8e(c);u=n.runWebGLProgram(d,[s,i],"float32");const h=xt({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const $8e={kernelName:z_,backendName:"webgl",kernelFunc:j8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=mF(s,i.length);yF(a.length,l,i);const{path:c,steps:u}=vF(o,l),d=u.length;let h=null,f=a.length;const m=[];for(let y=0;y<d;++y){for(const v of u[y]){const{permutationIndices:x,expandDims:b}=gF(f,l[v]);let _;xF(x)?_=i[v]:(_=Va({inputs:{x:i[v]},backend:n,attrs:{perm:x}}),m.push(_));const k=_.shape.slice();for(let N=0;N<b.length;++N)k.splice(b[N],0,1);jn(_.shape,k)||(_=xt({inputs:{x:_},backend:n,attrs:{shape:k}}),m.push(_)),h===null?h=_:(h=i6({inputs:{a:_,b:h},backend:n}),m.push(h))}y<d-1&&(c[y]>=0&&(h=WE({inputs:{x:h},backend:n,attrs:{axis:c[y]-(a.length-f),keepDims:!1}}),m.push(h)),f--)}for(const y of m)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const L8e={kernelName:rA,backendName:"webgl",kernelFunc:D8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R8e="return (x >= 0.0) ? x : (exp(x) - 1.0);",M8e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,F8e=Bn({opSnippet:R8e,packedOpSnippet:M8e}),z8e={kernelName:rb,backendName:"webgl",kernelFunc:F8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8e="return (b >= 0.0) ? a : a * (b + 1.0);",W8e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,U8e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=We().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new e1(W8e,r.shape,s.shape):new j0(B8e,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},V8e={kernelName:sA,backendName:"webgl",kernelFunc:U8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e=`
  return vec4(equal(a, b));
`,q8e="return float(a == b);",G8e=Ki({opSnippet:q8e,packedOpSnippet:H8e,dtype:"bool",cpuKernelImpl:NMe}),K8e={kernelName:B_,backendName:"webgl",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${lF};
  float a1 = ${cF};
  float a2 = ${uF};
  float a3 = ${dF};
  float a4 = ${hF};
  float a5 = ${fF};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Y8e=Bn({opSnippet:X8e}),Z8e={kernelName:sb,backendName:"webgl",kernelFunc:Y8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J8e=t1+`
  return exp(x);
`,Q8e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Die=Bn({opSnippet:J8e,packedOpSnippet:Q8e,cpuKernelImpl:CMe,dtype:"float32"}),eBe={kernelName:ib,backendName:"webgl",kernelFunc:Die};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(le(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),xt({inputs:{x:i},backend:r,attrs:{shape:o}})}const tBe={kernelName:W_,backendName:"webgl",kernelFunc:A$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZU="return exp(x) - 1.0;",nBe=Bn({opSnippet:ZU,packedOpSnippet:ZU,cpuKernelImpl:TMe}),rBe={kernelName:ab,backendName:"webgl",kernelFunc:nBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JU{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lie(t,e,n){const r=n.texData.get(t.dataId),s=Xe(t.shape),i=t.shape[t.shape.length-1],a=s/i,o=xt({inputs:{x:t},backend:n,attrs:{shape:[a,i]}}),l=o.shape,c=new JU("real",l,e),u=new JU("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),m=Om({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const y=xt({inputs:{x:m},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(m),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sBe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lie(r,!1,n)}const iBe={kernelName:iA,backendName:"webgl",kernelFunc:sBe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aBe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oS(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Wx(s),i==="string"){const a=_s(i,Xe(r));return a.fill(s),e.makeTensorInfo(r,i,a)}else{const a=new aBe(r,s),o=[[s]];return e.runWebGLProgram(a,[],i,o)}}const oBe={kernelName:aA,backendName:"webgl",kernelFunc:oS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lBe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe={kernelName:oA,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new lBe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QU="return floor(x);",uBe=Bn({opSnippet:QU,packedOpSnippet:QU,cpuKernelImpl:IMe}),dBe={kernelName:ob,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,fBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,pBe=Ki({opSnippet:hBe,packedOpSnippet:fBe,dtype:"int32"}),mBe={kernelName:lb,backendName:"webgl",kernelFunc:pBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gBe{constructor(e){this.variableNames=["A"];const n=Ka(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yBe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ka(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vBe={kernelName:P5,backendName:"webgl",kernelFunc:xBe};let Hy,v3=We().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function xBe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,i];if(o||a){const y=We().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Hy==null||y!==v3)&&(v3=y,Hy=document.createElement("canvas").getContext("2d",{willReadFrequently:v3})),Hy.canvas.width=l,Hy.canvas.height=c,Hy.drawImage(s,0,0,l,c),s=Hy.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=Pl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=We().getBool("WEBGL_PACK")?new yBe(d):new gBe(d),m=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=r,y=ff(u),v=ki(s.shape,i.shape,l,d,c,h,!1,y);let x;const b=[],_=a!=null,k=o!=null,N=f==="leakyrelu",A=()=>{const C=[s,i],P=($,j)=>{if(j==="NCHW"&&$.shape.length===1&&$.shape[0]!==1){const O=xt({inputs:{x:$},backend:n,attrs:{shape:[$.shape[0],1,1]}});return b.push(O),O}return $};if(_&&C.push(P(a,u)),k&&C.push(P(o,u)),N){const $=n.makeTensorInfo([],"float32",km(m,"float32"));C.push($),b.push($)}return C};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))x=Eie({x:s,filter:i,convInfo:v,backend:n,bias:a,activation:f,preluActivationWeights:o,leakyreluAlpha:m});else if(v.strideWidth<=2&&y==="channelsLast"&&We().getBool("WEBGL_EXP_CONV")){const C=f?M2(f,!0):null,P=new Aie(v,_,C,k,N),$=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],j=A();x=n.runWebGLProgram(P,j,"float32",$)}else if(We().getBool("WEBGL_CONV_IM2COL"))x=Pie({x:s,filter:i,convInfo:v,backend:n,bias:a,activation:f,preluActivationWeights:o,leakyreluAlpha:m});else{const C=f?M2(f,!1):null,P=new Iie(v,_,C,k,N),$=A();x=n.runWebGLProgram(P,$,"float32")}const T=xt({inputs:{x},backend:n,attrs:{shape:v.outShape}});return b.push(x),b.forEach(C=>n.disposeIntermediateTensorInfo(C)),T}const wBe={kernelName:C2,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,m=[];let y=u;y==null&&(y=[1,1]),le(Hi(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const v=ki(s.shape,i.shape,l,y,c,d,!0),x=We().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=h?M2(h,x):null,_=[s,i],k=a!=null,N=o!=null,A=h==="leakyrelu";if(k&&_.push(a),N&&_.push(o),A){const $=n.makeTensorInfo([],"float32",km(f,"float32"));_.push($),m.push($)}let T;x?T=new $ie(v,k,b,N,A):T=new jie(v,k,b,N,A);const C=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],P=n.runWebGLProgram(T,_,"float32",C);return m.forEach($=>n.disposeIntermediateTensorInfo($)),P}const kBe={kernelName:T2,backendName:"webgl",kernelFunc:_Be};class SBe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=mr(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NBe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,a=i[i.length-1],o=Xe(r.shape),[l,c,u,d]=eF(r,s),h=xt({inputs:{x:s},backend:n,attrs:{shape:[c,a]}}),f=xt({inputs:{x:r},backend:n,attrs:{shape:[Xe(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const x=n.readSync(s.dataId),b=n.bufferSync(r),_=AMe(x,b,r.dtype,c,a,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,_.values)}const m=new SBe(a,d,[c,u],r.shape),y=n.runWebGLProgram(m,[f,h],f.dtype),v=xt({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),v}const CBe={kernelName:lA,backendName:"webgl",kernelFunc:NBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TBe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=mr(this.rank),s=IBe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function IBe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r,l=Sn(a,s.shape)[0];if(We().get("DEBUG")){const b=n.readSync(i.dataId),_=s.shape[l];for(let k=0;k<b.length;++k){const N=b[k];le(N<=_-1&&N>=0,()=>`GatherV2: the index value ${N} is not in [0, ${_-1}]`)}}const c=_te(s,i,l,o),u=Xe(i.shape),d=[],h=xt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=xt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const b=n.bufferSync(f),_=n.bufferSync(h),k=EMe(_,b,m);return d.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.makeTensorInfo(c.outputShape,k.dtype,k.values)}const y=new TBe(h.shape,m),v=n.runWebGLProgram(y,[h,f],h.dtype);d.push(v);const x=xt({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const ABe={kernelName:V_,backendName:"webgl",kernelFunc:Rie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe="return float(a > b);",PBe=`
  return vec4(greaterThan(a, b));
`,OBe=Ki({opSnippet:EBe,packedOpSnippet:PBe,cpuKernelImpl:PMe,dtype:"bool"}),jBe={kernelName:H_,backendName:"webgl",kernelFunc:OBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be="return float(a >= b);",DBe=`
  return vec4(greaterThanEqual(a, b));
`,LBe=Ki({opSnippet:$Be,packedOpSnippet:DBe,dtype:"bool",cpuKernelImpl:OMe}),RBe={kernelName:cb,backendName:"webgl",kernelFunc:LBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lie(r,!0,n)}const FBe={kernelName:cA,backendName:"webgl",kernelFunc:MBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zBe="return float(!isnan(x) && !isinf(x));",BBe=Bn({opSnippet:zBe,dtype:"bool"}),WBe={kernelName:db,backendName:"webgl",kernelFunc:BBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UBe="return float(isinf(x));",VBe=Bn({opSnippet:UBe,dtype:"bool"}),HBe={kernelName:hb,backendName:"webgl",kernelFunc:VBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qBe="return float(isnan(x));",GBe=Bn({opSnippet:qBe,dtype:"bool"}),KBe={kernelName:fb,backendName:"webgl",kernelFunc:GBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XBe="return float(a < b);",YBe=`
  return vec4(lessThan(a, b));
`,ZBe=Ki({opSnippet:XBe,packedOpSnippet:YBe,cpuKernelImpl:jMe,dtype:"bool"}),JBe={kernelName:G_,backendName:"webgl",kernelFunc:ZBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe="return float(a <= b);",e7e=`
  return vec4(lessThanEqual(a, b));
`,t7e=Ki({opSnippet:QBe,packedOpSnippet:e7e,cpuKernelImpl:$Me,dtype:"bool"}),n7e={kernelName:K_,backendName:"webgl",kernelFunc:t7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=DMe(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const s7e={kernelName:dA,backendName:"webgl",kernelFunc:r7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7e=t1+`
  return x < 0.0 ? 0./0. : log(x);
`,a7e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,o7e=Bn({opSnippet:i7e,packedOpSnippet:a7e,cpuKernelImpl:LMe}),l7e={kernelName:pb,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e=t1+`
  return log(1.0 + x);
`,u7e=Bn({opSnippet:c7e}),d7e={kernelName:mb,backendName:"webgl",kernelFunc:u7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7e="return float(a >= 1.0 && b >= 1.0);",f7e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,p7e=Ki({opSnippet:h7e,packedOpSnippet:f7e,dtype:"bool"}),m7e={kernelName:X_,backendName:"webgl",kernelFunc:p7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g7e="return float(!(x >= 1.0));",y7e=Bn({opSnippet:g7e}),v7e={kernelName:Y_,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7e="return float(a >= 1.0 || b >= 1.0);",b7e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,w7e=Ki({opSnippet:x7e,packedOpSnippet:b7e,dtype:"bool"}),_7e={kernelName:Z_,backendName:"webgl",kernelFunc:w7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k7e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S7e{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r,c=We().getBool("WEBGL_PACK_NORMALIZATION")?new S7e(s.shape,i,a,o,l):new k7e(s.shape,i,a,o,l);return n.runWebGLProgram(c,[s],s.dtype)},C7e={kernelName:J_,backendName:"webgl",kernelFunc:N7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T7e{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new T7e(s.shape,o,l,c,u);return n.runWebGLProgram(d,[s,i,a],s.dtype)},A7e={kernelName:hA,backendName:"webgl",kernelFunc:I7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E7e(t,e,n,r){const s=Xe(e),a=Xe(t.shape)/s,o=xt({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=oy(o,t.dtype,"max",r),c=xt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=s.shape.length,l=Sn(i,s.shape);let c=l;const u=rs(c,o),d=u!=null,h=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const _=n.texData.get(f.dataId).values,k=new Array(o);for(let T=0;T<k.length;T++)k[T]=s.shape[u[T]];const N=r6(_,s.shape,s.dtype,u,k);f=n.makeTensorInfo(k,s.dtype);const A=n.texData.get(f.dataId);A.values=N}else f=BE(s,u,n);c=Cs(c.length,o)}qi("max",c,o);const[m,y]=Si(f.shape,c);let v=m;a&&(v=Ns(m,l));let x;if(h){const _=n.texData.get(f.dataId).values,k=RMe(_,Xe(y),v,s.dtype);x=n.makeTensorInfo(v,s.dtype);const N=n.texData.get(x.dataId);N.values=k}else x=E7e(f,y,v,n);return d&&n.disposeIntermediateTensorInfo(f),x}const P7e={kernelName:Q_,backendName:"webgl",kernelFunc:Mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O7e=s6+`
  return max(a, b);
`,j7e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ay+`
  return result;
`,$7e=Ki({opSnippet:O7e,packedOpSnippet:j7e,cpuKernelImpl:MMe}),D7e={kernelName:gb,backendName:"webgl",kernelFunc:$7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;sS(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;le(Hi(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=Vc(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&jn(u.inShape,u.outShape))return cl({inputs:{x:s},backend:n});const d=new F2(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const R7e={kernelName:ek,backendName:"webgl",kernelFunc:L7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=hf(s.shape,i,a,u,o,c,l),h=new a6(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const F7e={kernelName:tk,backendName:"webgl",kernelFunc:M7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z7e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,l=a-1-e.padInfo.left,c=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class B7e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=u-1-e.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=hf(a.shape,o,l,d,c,u),f=new a6(h,"max",!0),m=n.runWebGLProgram(f,[a],a.dtype),y=new B7e(h),v=n.runWebGLProgram(y,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),v}const U7e={kernelName:pA,backendName:"webgl",kernelFunc:W7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;sS([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=Vc(o.shape,l,c,1,u,d),f=!0,m=new F2(h,"max",f),y=n.runWebGLProgram(m,[o],o.dtype),v=new z7e(h),x=n.runWebGLProgram(v,[s,y],o.dtype);return n.disposeIntermediateTensorInfo(y),x}const H7e={kernelName:fA,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7e(t,e,n,r){let s=new F2(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new F2(n,"max",!0,!0,e);const a=r.runWebGLProgram(s,[t],"float32");return[i,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7e={kernelName:mA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;le(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];le(Hi(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Vc(r.shape,s,i,c,a),[d,h]=q7e(r,o,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7e(t,e,n,r){const s=Xe(e),a=Xe(t.shape)/s,o=xt({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=oy(o,"float32","mean",r),c=xt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7e={kernelName:nk,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,a=n,o=r.shape.length,l=Sn(i,r.shape);let c=l;const u=rs(c,o),d=u!=null,h=a.shouldExecuteOnCPU([r]),f=[];let m=r;if(d){if(h){const k=a.texData.get(m.dataId).values,N=new Array(o);for(let C=0;C<N.length;C++)N[C]=r.shape[u[C]];const A=r6(k,r.shape,r.dtype,u,N);m=a.makeTensorInfo(N,r.dtype);const T=a.texData.get(m.dataId);T.values=A}else m=BE(r,u,a);f.push(m),c=Cs(c.length,o)}qi("sum",c,o);const[y,v]=Si(m.shape,c);let x=y;s&&(x=Ns(y,l));const b=K7e(m,v,x,a);for(const _ of f)a.disposeIntermediateTensorInfo(_);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=Sn(i,s.shape);let c=l;const u=rs(c,o);let d=s;u!=null&&(d=Va({inputs:{x:s},backend:n,attrs:{perm:u}}),c=Cs(c.length,s.shape.length)),qi("min",c,o);const[h,f]=Si(d.shape,c),m=Xe(f),y=xt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}}),v=oy(y,y.dtype,"min",n);let x;if(a){const b=Ns(h,l);x=xt({inputs:{x:v},backend:n,attrs:{shape:b}})}else x=xt({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),x}const Z7e={kernelName:rk,backendName:"webgl",kernelFunc:Y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7e=s6+`
  return min(a, b);
`,Q7e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+ay+`
  return result;
`,eWe=Ki({opSnippet:J7e,packedOpSnippet:Q7e,cpuKernelImpl:FMe}),tWe={kernelName:yb,backendName:"webgl",kernelFunc:eWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nWe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=mr(s),a=n.map(u=>u[0]).join(","),o=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rWe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const s=e.length,i=mr(s),a=n.map(m=>m[0]).join(","),o=n.map((m,y)=>m[0]+e[y]).join(","),l=Ma("rc",s),c=Ma("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(s===1){const m=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const m=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[s-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sWe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,a=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rWe(r.shape,s,i):new nWe(r.shape,s,i);return e.runWebGLProgram(a,[r],r.dtype)},iWe={kernelName:sk,backendName:"webgl",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe=`if (b == 0.0) return NAN;
  return mod(a, b);`,oWe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+ay+`
  return result;
`,lWe=Ki({opSnippet:aWe,packedOpSnippet:oWe}),cWe={kernelName:vb,backendName:"webgl",kernelFunc:lWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uWe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe=`
if (a == b) {
  return 1.0;
};
return a / b;`,hWe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Fie=Ki({opSnippet:dWe,packedOpSnippet:hWe,checkOutOfBounds:!0}),fWe={kernelName:nb,backendName:"webgl",kernelFunc:Fie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eV="return a - b;",zie=Ki({opSnippet:eV,packedOpSnippet:eV,supportsComplex:!0,cpuKernelImpl:aFe}),pWe={kernelName:$b,backendName:"webgl",kernelFunc:zie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=Sn([i],s.shape),o=Mie({inputs:{x:s},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=Ns(o.shape,a),c=xt({inputs:{x:o},backend:n,attrs:{shape:l}}),u=zie({inputs:{a:s,b:c},backend:n}),d=Die({inputs:{x:u},backend:n}),h=WE({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),f=xt({inputs:{x:h},backend:n,attrs:{shape:l}}),m=Fie({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}const mWe={kernelName:_k,backendName:"webgl",kernelFunc:Bie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gWe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r,l=o?s:Bie({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new uWe(c,u,i),h=[[a]],f=n.runWebGLProgram(d,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),f}const yWe={kernelName:gA,backendName:"webgl",kernelFunc:gWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vWe=qc+`
  return -x;
`,xWe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function bWe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[a,o]=BMe(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let s;return We().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Np(r.shape,xWe):s=new Nd(r.shape,vWe),n.runWebGLProgram(s,[r],r.dtype)}const wWe={kernelName:ik,backendName:"webgl",kernelFunc:bWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _We=zM;function kWe(t){Tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=_We(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const SWe={kernelName:yA,backendName:"webgl",kernelFunc:kWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NWe=BM;function CWe(t){Tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:f}=NWe(u,d,a,o,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const TWe={kernelName:vA,backendName:"webgl",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IWe=WM;function AWe(t){Tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),h=a,f=o,m=l,y=c,{selectedIndices:v,selectedScores:x}=IWe(u,d,h,f,m,y);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([x.length],"float32",new Float32Array(x))]}const EWe={kernelName:xA,backendName:"webgl",kernelFunc:AWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PWe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r,c=Xe(s.shape),u=new PWe(c,a,o,l),d=xt({inputs:{x:s},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...s.shape,a],m=xt({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),m},jWe={kernelName:lk,backendName:"webgl",kernelFunc:OWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nT(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=aS({inputs:{input:r},backend:n}),i=nT({inputs:{x:s},backend:n}),a=UE({inputs:{input:r},backend:n}),o=nT({inputs:{x:a},backend:n}),l=Om({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return oS({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const $We={kernelName:Ck,backendName:"webgl",kernelFunc:nT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=aS({inputs:{input:r},backend:n}),i=Wie({inputs:{x:s},backend:n}),a=UE({inputs:{input:r},backend:n}),o=nT({inputs:{x:a},backend:n}),l=Om({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return oS({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const DWe={kernelName:ok,backendName:"webgl",kernelFunc:Wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LWe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return A$({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{ul(i,u.shape,"All tensors passed to stack must have matching shapes"),le(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=A$({inputs:{input:u},backend:n,attrs:{dim:s}});return o.push(d),d}),c=Tie({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const RWe={kernelName:ck,backendName:"webgl",kernelFunc:LWe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MWe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=mr(s),a=n.map(c=>c[0]).join(","),o=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FWe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,v)=>y[0]+e[v]+y[1]);const s=e.length,i=mr(s),a=n.map(y=>y[0]).join(","),o=n.map((y,v)=>y[0]+e[v]).join(","),l=Ma("rc",s),c=Ma("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let m="";for(let y=0,v=s===1?2:4;y<v;y++)m+=`
        ${h[y]}
        if (${f}) {
          result[${y}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${y}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uie=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;if(Xe(s.shape)===0){const c=i.map((u,d)=>u[0]+s.shape[d]+u[1]);return oS({backend:n,attrs:{shape:c,value:a,dtype:s.dtype}})}const o=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FWe(s.shape,i,a):new MWe(s.shape,i,a),l=[[a]];return n.runWebGLProgram(o,[s],s.dtype,l)},zWe={kernelName:uk,backendName:"webgl",kernelFunc:Uie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BWe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,WWe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+ay+`
  return result;
`,UWe=Ki({opSnippet:BWe,packedOpSnippet:WWe}),VWe={kernelName:bb,backendName:"webgl",kernelFunc:UWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=[],c=Sn(i,s.shape);let u=c;const d=rs(u,o);let h=s;d!=null&&(h=Va({inputs:{x:s},backend:n,attrs:{perm:d}}),u=Cs(u.length,o),l.push(h)),qi("prod",u,o);let f;if(n.shouldExecuteOnCPU([h])){const m=n.texData.get(h.dataId).values,{outVals:y,outShape:v,outDtype:x}=UMe(h.shape,h.dtype,m,u);f=n.makeTensorInfo(v,x,y)}else{const[m,y]=Si(h.shape,u),v=Xe(y),x=xt({inputs:{x:h},backend:n,attrs:{shape:[-1,v]}}),b=HA(s.dtype),_=oy(x,b,"prod",n);f=xt({inputs:{x:_},backend:n,attrs:{shape:m}}),l.push(x),l.push(_)}if(a){l.push(f);const m=Ns(f.shape,c);f=xt({inputs:{x:f},backend:n,attrs:{shape:m}})}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),f}const qWe={kernelName:hk,backendName:"webgl",kernelFunc:HWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GWe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(x=>n.readSync(x.dataId)),c=s.map(x=>x.shape),u=n.readSync(i.dataId),d=n.readSync(a.dataId),[h,f,m]=VMe(l,c,u,i.shape,i.dtype,d,a.shape,o),y=h.map(x=>n.makeTensorInfo([x.length],"int32",x)),v=n.makeTensorInfo(m,i.dtype,f);return y.concat([v])}const KWe={kernelName:bA,backendName:"webgl",kernelFunc:GWe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=HMe(a,r.shape,r.dtype,o,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const YWe={kernelName:wA,backendName:"webgl",kernelFunc:XWe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZWe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(a.dataId),h=o.map(v=>n.readSync(v.dataId)),f=o.map(v=>v.shape),[m,y]=qMe(c,s.shape,u,i.shape,i.dtype,d,a.shape,h,f,l);return n.makeTensorInfo(m,i.dtype,y)}const JWe={kernelName:_A,backendName:"webgl",kernelFunc:ZWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vie=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:a}=n,o=GMe(r,s,i,a);return e.makeTensorInfo([o.length],a,o)},QWe={kernelName:kA,backendName:"webgl",kernelFunc:Vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eUe="return 1.0 / x;",tUe=Bn({opSnippet:eUe}),nUe={kernelName:wb,backendName:"webgl",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rUe=qc+`
  return (x < 0.0) ? 0.0 : x;
`,sUe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,iUe=Bn({opSnippet:rUe,packedOpSnippet:sUe}),aUe={kernelName:_b,backendName:"webgl",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oUe=qc+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lUe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cUe=Bn({opSnippet:oUe,packedOpSnippet:lUe}),uUe={kernelName:kb,backendName:"webgl",kernelFunc:cUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=We().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new hUe(s.shape,l,c,i,a):new dUe(s.shape,l,c,i,a);return n.runWebGLProgram(u,[s],"float32")}const pUe={kernelName:mk,backendName:"webgl",kernelFunc:fUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mUe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,m=Math.ceil(h)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new mUe(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const yUe={kernelName:CA,backendName:"webgl",kernelFunc:gUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xUe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=We().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xUe(s.shape,l,c,i,a):new vUe(s.shape,l,c,i,a);return n.runWebGLProgram(u,[s],s.dtype)}const wUe={kernelName:pk,backendName:"webgl",kernelFunc:bUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ue{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,m=Math.ceil(h)*2+2,y=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${m});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new _Ue(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const SUe={kernelName:NA,backendName:"webgl",kernelFunc:kUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NUe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,l)=>s(l)).join(","),a=mr(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CUe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Ma("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=mr(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${a}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return h(m)}function c(m){return m[r-1]="("+m[r-1]+" + 1)",h(m)}function u(m){return m[r-2]="("+m[r-2]+" + 1)",h(m)}function d(m){return m[r-1]="("+m[r-1]+" + 1)",m[r-2]="("+m[r-2]+" + 1)",h(m)}function h(m){const y=e.map((b,_)=>f(_,m)),v=y.join(","),x=y.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${x}))`}function f(m,y){return n.indexOf(m)!==-1&&e[m]!==1?`${e[m]} - ${y[m]} - 1`:`${y[m]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,a=s.shape.length,o=Sn(i,s.shape);if(a===0)return cl({inputs:{x:s},backend:n});const l=We().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CUe(s.shape,o):new NUe(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}const IUe={kernelName:gk,backendName:"webgl",kernelFunc:TUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AUe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EUe={kernelName:UA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=new AUe(r.shape,i),[c,u]=iF(a,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PUe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,OUe=Bn({opSnippet:PUe}),jUe={kernelName:Sb,backendName:"webgl",kernelFunc:OUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ue="return inversesqrt(x);",DUe=Bn({opSnippet:$Ue,cpuKernelImpl:KMe}),LUe={kernelName:Nb,backendName:"webgl",kernelFunc:DUe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o6{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=mr(i.length),u=mr(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const m=`getUpdates(${f})`;let y="";l&&(y="coords[0], coords[1]");const v=`getDefaultValue(${y})`,x=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${x};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RUe{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=mr(i.length),u=mr(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const m=`getUpdates(${f})`;let y="";l&&(y="coords[0], coords[1]");const v=`getDefaultValue(${y})`,x=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${x};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ty(i,s,a),h=[d/c,c];if(d===0)return n.makeTensorInfo(a,s.dtype);const f=xt({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),m=xt({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;We().getBool("WEBGL_PACK")?v=new RUe(l,o,f.shape.length,m.shape.length,u,h):v=new o6(l,o,f.shape.length,m.shape.length,u,h);const x=n.runWebGLProgram(v,[m,f,y],m.dtype),b=xt({inputs:{x},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(y),b}const FUe={kernelName:TA,backendName:"webgl",kernelFunc:MUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zUe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=We().getNumber("WEBGL_VERSION")===2?i:a,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BUe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=new zUe(s.shape[0],s.shape[1],i.shape[1],a),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,i],"int32",l)}const WUe={kernelName:AA,backendName:"webgl",kernelFunc:BUe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UUe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${o[u]}`),u<e&&l.push(`${o[u]}`);s=l.join(),i=c.join()}const a=mr(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,a=new UUe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(a,[r,s,i],xo(s.dtype,i.dtype))}const HUe={kernelName:yk,backendName:"webgl",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qUe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${NE};
  float scale = ${CE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,GUe=Bn({opSnippet:qUe}),KUe={kernelName:Cb,backendName:"webgl",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XUe=t1+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,YUe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ZUe=Bn({opSnippet:XUe,packedOpSnippet:YUe,cpuKernelImpl:YMe}),JUe={kernelName:Eb,backendName:"webgl",kernelFunc:ZUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QUe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,eVe=Bn({opSnippet:QUe}),tVe={kernelName:Ab,backendName:"webgl",kernelFunc:eVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nVe=t1+`
  return sin(x);
`,rVe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${ay}
  return result;
`,sVe=Bn({opSnippet:nVe,packedOpSnippet:rVe}),iVe={kernelName:Tb,backendName:"webgl",kernelFunc:sVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,oVe=Bn({opSnippet:aVe}),lVe={kernelName:Ib,backendName:"webgl",kernelFunc:oVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cVe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,uVe=Bn({opSnippet:cVe}),dVe={kernelName:Pb,backendName:"webgl",kernelFunc:uVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;le(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((x,b)=>x*b),l=[[0,0]];l.push(...a);for(let x=1+i.length;x<s.shape.length;++x)l.push([0,0]);const c=[],u=Uie({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=Hk(u.shape,i,o,!1),h=qk(d.length,i.length,!1),f=Gk(u.shape,i,o,!1),m=xt({inputs:{x:u},backend:n,attrs:{shape:d}}),y=Va({inputs:{x:m},backend:n,attrs:{perm:h}}),v=xt({inputs:{x:y},backend:n,attrs:{shape:f}});return c.push(u),c.push(m),c.push(y),c.forEach(x=>n.disposeIntermediateTensorInfo(x)),v},fVe={kernelName:bk,backendName:"webgl",kernelFunc:hVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pVe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(a.dataId)[0],[d,h,f,m,y]=JMe(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(v=>Number(v)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const mVe={kernelName:EA,backendName:"webgl",kernelFunc:pVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gVe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=QMe(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const yVe={kernelName:PA,backendName:"webgl",kernelFunc:gVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=pie(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const xVe={kernelName:OA,backendName:"webgl",kernelFunc:vVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bVe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=pie(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const wVe={kernelName:jA,backendName:"webgl",kernelFunc:bVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=ty(i,s,o),f=!1;if(i.dtype==="string"){const x=n.bufferSync(s),b=n.bufferSync(i),_=nm(n.readSync(a.dataId)[0]),k=XMe(x,b,o,h,u,c,l,d,_,f);return n.makeTensorInfo(o,k.dtype,k.values)}const m=new o6(c,l,s.shape.length,i.shape.length,d,[h,1],f),y=n.runWebGLProgram(m,[i,s,a],i.dtype),v=xt({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(y),v}const kVe={kernelName:$A,backendName:"webgl",kernelFunc:_Ve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=Sn(a,s.shape)[0],l=bF(s,i,o),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(h=>{const f=[...d];f[o]=h;const m=n1({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[o]+=h,m})}const NVe={kernelName:wk,backendName:"webgl",kernelFunc:SVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tV="return sqrt(x);",CVe=Bn({opSnippet:tV,packedOpSnippet:tV,cpuKernelImpl:eFe}),TVe={kernelName:Ob,backendName:"webgl",kernelFunc:CVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe="return x * x;",AVe=Bn({opSnippet:IVe}),EVe={kernelName:DA,backendName:"webgl",kernelFunc:AVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nV="return (a - b) * (a - b);",PVe=Ki({opSnippet:nV,packedOpSnippet:nV}),OVe={kernelName:jb,backendName:"webgl",kernelFunc:PVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),a=rf(i),o=tFe(a,"string",r);return n.makeTensorInfo(s.shape,"string",o)}const $Ve={kernelName:kk,backendName:"webgl",kernelFunc:jVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=qc+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Nd(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const LVe={kernelName:Mb,backendName:"webgl",kernelFunc:DVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RVe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=mr(r.length),a=mr(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:m,isIdentity:y,sliceDim0:v,isSimpleSlice:x,begin:b,end:_,strides:k}=Qee(s.shape,i,a,o,l,c,u,d,h);let N;if(y)N=xt({inputs:{x:s},backend:n,attrs:{shape:m}});else if(v||x){le(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const T=Yee(b,_,k),C=n1({inputs:{x:s},backend:n,attrs:{begin:b,size:T}});N=xt({inputs:{x:C},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(C)}else if(n.shouldExecuteOnCPU([s])){const C=n.readSync(s.dataId),P=yn(s.shape,s.dtype,C),$=nFe(f,P,k,b);N=n.makeTensorInfo(m,s.dtype,$.values)}else{const C=new RVe(b,k,f);N=n.runWebGLProgram(C,[s],s.dtype)}const A=xt({inputs:{x:N},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(N),A}const FVe={kernelName:LA,backendName:"webgl",kernelFunc:MVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zVe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[m,y]=rFe(h,f,s,i,a,o,l,c);return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}const BVe={kernelName:RA,backendName:"webgl",kernelFunc:zVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WVe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(i.dataId),l=n.readSync(a.dataId)[0],[c,u,d]=sFe(o,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const UVe={kernelName:MA,backendName:"webgl",kernelFunc:WVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VVe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),o=iFe(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const HVe={kernelName:FA,backendName:"webgl",kernelFunc:VVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qVe="return tan(x);",GVe=Bn({opSnippet:qVe}),KVe={kernelName:Db,backendName:"webgl",kernelFunc:GVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XVe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,YVe=Bn({opSnippet:XVe}),ZVe={kernelName:Lb,backendName:"webgl",kernelFunc:YVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JVe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ty(a,i,s.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const f=xt({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),m=xt({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),y=xt({inputs:{x:s},backend:n,attrs:{shape:h}}),v=new o6(l,o,f.shape.length,m.shape.length,u,h,!1,!0),x=n.runWebGLProgram(v,[m,f,y],y.dtype),b=xt({inputs:{x},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),b}const QVe={kernelName:IA,backendName:"webgl",kernelFunc:JVe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e9e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const s=mr(this.rank),i=t9e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function t9e(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hie(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(h=>nm(h)):l,u=yn(s.shape,s.dtype,c),d=oFe(u,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new e9e(s.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const n9e={kernelName:Rb,backendName:"webgl",kernelFunc:Hie};class r9e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class s9e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lg(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function rV(t){let e=1;for(;e<t;)e*=2;return e}function i9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r,o=We().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=We().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<o||i>l){const $=n.readSync(s.dataId),[j,O]=lFe($,c,s.dtype,i,a);return[n.makeTensorInfo(j.shape,j.dtype,j.values),n.makeTensorInfo(O.shape,O.dtype,O.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,oS({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(s):s,y=Xe(c)/u,v=xt({inputs:{x:f},attrs:{shape:[y,u]},backend:n});h&&lg(n,f);const x=rV(i),b=rV(u);let _=null;const k=()=>_===null?[v,v]:[v,_],N=($,j,O)=>{const F=k(),B=new r9e(O),V=[[u],[_===null?1:0],[Number.NEGATIVE_INFINITY],[$],[j]],G=_;_=n.runWebGLProgram(B,F,"int32",V),lg(n,G)};for(let $=1;$<x;$*=2){const j=$*2;for(let O=$;O>=1;O/=2)N(j,O,[y,b])}for(let $=b;$>x;$/=2){const j=k(),O=new s9e([y,$/2]),B=[[u],[_===null?1:0],[x]],Z=_;_=n.runWebGLProgram(O,j,"int32",B),lg(n,Z);const V=x/2,G=V*2;for(let U=V;U>=1;U/=2)N(G,U,_.shape)}let A=_;_=n1({inputs:{x:_},backend:n,attrs:{begin:0,size:[y,i]}}),lg(n,A);let T=Rie({inputs:{x:v,indices:_},backend:n,attrs:{axis:1,batchDims:1}});lg(n,v);const C=c.slice(0,-1);C.push(i),A=_,_=xt({inputs:{x:_},attrs:{shape:C},backend:n}),lg(n,A);const P=T;return T=xt({inputs:{x:T},attrs:{shape:C},backend:n}),lg(n,P),[T,_]}const a9e={kernelName:zA,backendName:"webgl",kernelFunc:i9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o9e{constructor(e,n,r,s,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,h,f]=s.shape,[m,y]=c??[d,h],v=[u,m,y,f],x=new o9e(d,h,a,o,l,v);return n.runWebGLProgram(x,[s,i],"float32")}const c9e={kernelName:BA,backendName:"webgl",kernelFunc:l9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u9e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;sS(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=cFe(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const d9e={kernelName:WA,backendName:"webgl",kernelFunc:u9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9e(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s,o=a.shape.length,l=s.shape[i],c=new Array(o-1);let u=0;for(let y=0;y<o;y++)y!==i&&(c[u++]=a.shape[y]);const d=[],h=new Array(o).fill(0),f=a.shape.slice();f[i]=1;const m=new Array(l);for(let y=0;y<m.length;y++){h[i]=y;const v=n1({inputs:{x:a},backend:n,attrs:{begin:h,size:f}}),x=xt({inputs:{x:v},backend:n,attrs:{shape:c}});m[y]=x,d.push(v)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const f9e={kernelName:Sk,backendName:"webgl",kernelFunc:h9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p9e{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/r);this.outputShape=[s,o];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let m="";i%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r,o=s.shape.length,l=[];let c=0;const u=rs([c],o);let d=s;u!=null&&(d=Va({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=Cs(1,o)[0]);const h=C5e(d.shape,c,a),f=Xe([d.shape[c]]),m=xt({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(m);const y=HA(s.dtype),v=(k,N,A,T,C)=>{const P=k.shape[0],$=k.shape[1],j=N5e($,C),O={windowSize:j,inSize:$,batchSize:P,numSegments:C},F=new p9e(O,N),B=n.compileAndRun(F,[k,A],T);if(l.push(B),B.shape[1]===C)return B;const Z=Vie({backend:n,attrs:{start:0,stop:C,step:1,dtype:"float32"}}),V=Hie({inputs:{x:Z},backend:n,attrs:{reps:[$/j]}});return l.push(Z),l.push(V),v(B,N,V,T,C)},x=v(m,"unsortedSegmentSum",i,y,a),b=xt({inputs:{x},backend:n,attrs:{shape:h}});let _=b;if(u!=null){l.push(b);const k=Tm(u);_=Va({inputs:{x:_},backend:n,attrs:{perm:k}})}return l.forEach(k=>n.disposeIntermediateTensorInfo(k)),_}const g9e={kernelName:Nk,backendName:"webgl",kernelFunc:m9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y9e=[e6e,n6e,i6e,l6e,u6e,f6e,m6e,y6e,w6e,k6e,C6e,A6e,O6e,L6e,F6e,B6e,U6e,G6e,X6e,Z6e,tze,lze,uze,pze,gze,_ze,Sze,Ize,RFe,Pze,Lze,zze,qze,Xze,Zze,Qze,t8e,i8e,l8e,d8e,f8e,m8e,y8e,b8e,_8e,C8e,I8e,P8e,$8e,L8e,z8e,V8e,K8e,Z8e,eBe,tBe,rBe,iBe,oBe,cBe,dBe,mBe,vBe,wBe,kBe,CBe,ABe,jBe,RBe,LFe,FBe,$ze,WBe,HBe,KBe,FFe,JBe,n7e,s7e,l7e,d7e,m7e,v7e,_7e,C7e,A7e,P7e,D7e,R7e,F7e,U7e,H7e,G7e,X7e,Z7e,tWe,iWe,cWe,yWe,WFe,wWe,SWe,TWe,EWe,vze,jWe,DWe,RWe,zWe,VWe,BFe,qWe,KWe,YWe,JWe,QWe,xze,fWe,nUe,aUe,uUe,VFe,pUe,yUe,wUe,SUe,IUe,EUe,jUe,LUe,FUe,WUe,HUe,KUe,JUe,tVe,iVe,lVe,aze,mWe,dVe,fVe,mVe,yVe,xVe,wVe,kVe,NVe,TVe,EVe,OVe,$Ve,LVe,FVe,BVe,UVe,HVe,pWe,ZFe,KVe,ZVe,QVe,n9e,a9e,c9e,JFe,d9e,f9e,g9e,$We];for(const t of y9e)NR(t);/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function rT(t,e,n,r){return new(n||(n=Promise))(function(s,i){function a(c){try{l(r.next(c))}catch(u){i(u)}}function o(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?s(c.value):(u=c.value,u instanceof n?u:new n(function(d){d(u)})).then(a,o)}l((r=r.apply(t,[])).next())})}function sT(t,e){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(l){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&u[0]?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){a.label=u[1];break}if(u[0]===6&&a.label<s[1]){a.label=s[1],s=u;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(u);break}s[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(d){u=[6,d],r=0}finally{n=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([l,c])}}}var v9e={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},np=224,x9e={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},ov={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function b9e(t){return t===void 0&&(t={version:1,alpha:1}),rT(this,void 0,void 0,function(){var e,n,r,s,i,a,o;return sT(this,function(l){switch(l.label){case 0:if(T5e==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(e=t.version.toFixed(2),n=t.alpha?t.alpha.toFixed(2):"",r=-1,s=1,t.modelUrl==null){if(!(e in ov))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(ov));if(!(n in ov[e]))throw new Error("MobileNet constructed with invalid alpha "+t.alpha+". Valid multipliers for this version are: "+Object.keys(ov[e])+".");a=ov[e][n].inputRange,r=a[0],s=a[1]}return t.inputRange!=null&&(o=t.inputRange,r=o[0],s=o[1]),[4,(i=new w9e(e,n,t.modelUrl,r,s)).load()];case 1:return l.sent(),[2,i]}})})}var w9e=function(){function t(e,n,r,s,i){s===void 0&&(s=-1),i===void 0&&(i=1),this.version=e,this.alpha=n,this.modelUrl=r,this.inputMin=s,this.inputMax=i,this.normalizationConstant=(i-s)/255}return t.prototype.load=function(){return rT(this,void 0,void 0,function(){var e,n,r,s,i=this;return sT(this,function(a){switch(a.label){case 0:return this.modelUrl?(e=this,[4,kU(this.modelUrl)]):[3,2];case 1:return e.model=a.sent(),[3,4];case 2:return n=ov[this.version][this.alpha].url,r=this,[4,kU(n,{fromTFHub:!0})];case 3:r.model=a.sent(),a.label=4;case 4:return[4,(s=Re(function(){return i.model.predict(ws([1,np,np,3]))})).data()];case 5:return a.sent(),s.dispose(),[2]}})})},t.prototype.infer=function(e,n){var r=this;return n===void 0&&(n=!1),Re(function(){e instanceof Or||(e=x5e(e));var s=ot(Se(bt(e,"float32"),r.normalizationConstant),r.inputMin),i=s;(e.shape[0]!==np||e.shape[1]!==np)&&(i=Sc.resizeBilinear(s,[np,np],!0));var a,o=Ie(i,[-1,np,np,3]);if(n){var l=x9e[r.version],c=r.model.execute(o,l);a=gf(c,[1,2])}else{var u=r.model.predict(o);a=Tn(u,[0,1],[-1,1e3])}return a})},t.prototype.classify=function(e,n){return n===void 0&&(n=3),rT(this,void 0,void 0,function(){var r,s;return sT(this,function(i){switch(i.label){case 0:return[4,_9e(r=this.infer(e),n)];case 1:return s=i.sent(),r.dispose(),[2,s]}})})},t}();function _9e(t,e){return rT(this,void 0,void 0,function(){var n,r,s,i,a,o,l;return sT(this,function(c){switch(c.label){case 0:return[4,(n=Hb(t)).data()];case 1:for(r=c.sent(),n.dispose(),s=[],l=0;l<r.length;l++)s.push({value:r[l],index:l});for(s.sort(function(u,d){return d.value-u.value}),i=new Float32Array(e),a=new Int32Array(e),l=0;l<e;l++)i[l]=s[l].value,a[l]=s[l].index;for(o=[],l=0;l<a.length;l++)o.push({className:v9e[a[l]],probability:i[l]});return[2,o]}})})}function k9e({onClose:t,onScanComplete:e}){const n=R.useRef(null),[r,s]=R.useState(null),[i,a]=R.useState(!1),[o,l]=R.useState([]),[c,u]=R.useState(""),[d,h]=R.useState(!0);R.useEffect(()=>(f(),m(),()=>{y()}),[]);const f=async()=>{try{console.log("Loading MobileNet model..."),await kQ();const x=await b9e();s(x),h(!1),console.log("Model loaded successfully")}catch(x){console.error("Failed to load model:",x),u("Failed to load AI model. Please check your connection."),h(!1)}},m=async()=>{try{const x=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});n.current&&(n.current.srcObject=x)}catch(x){console.error("Error accessing camera:",x),u("Could not access camera. Please allow camera permissions.")}},y=()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(b=>b.stop())},v=async()=>{if(!(!r||!n.current)){a(!0);try{const x=await r.classify(n.current);l(x);const b=["phone","laptop","computer","keyboard","mouse","monitor","screen","electronic","device","battery","cable"],_=x.find(k=>b.some(N=>k.className.toLowerCase().includes(N)));_&&setTimeout(()=>{e(_.className)},1500)}catch(x){console.error("Prediction error:",x),u("Failed to scan object.")}finally{a(!1)}}};return p.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl relative",children:[p.jsx("button",{onClick:t,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/70",children:p.jsx(il,{className:"h-6 w-6"})}),p.jsx("div",{className:"relative aspect-[3/4] bg-gray-900",children:c?p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white p-6 text-center",children:p.jsx("p",{children:c})}):p.jsxs(p.Fragment,{children:[p.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),d&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/50 text-white",children:[p.jsx(v2,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:"Loading AI Model..."})]}),!d&&!o.length&&p.jsx("div",{className:"absolute inset-0 pointer-events-none border-2 border-emerald-500/50 m-8 rounded-lg flex items-center justify-center",children:p.jsx("div",{className:"text-white/80 text-sm bg-black/50 px-3 py-1 rounded-full",children:"Align object within frame"})})]})}),p.jsx("div",{className:"p-6 bg-white dark:bg-gray-800",children:o.length>0?p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Detected Items:"}),p.jsx("div",{className:"space-y-2",children:o.map((x,b)=>p.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[p.jsx("span",{className:"capitalize text-gray-800 dark:text-gray-200",children:x.className}),p.jsxs("span",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:[Math.round(x.probability*100),"%"]})]},b))}),p.jsxs("button",{onClick:()=>l([]),className:"w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center",children:[p.jsx(nR,{className:"h-4 w-4 mr-2"}),"Scan Again"]})]}):p.jsx("button",{onClick:v,disabled:d||c,className:"w-full py-4 bg-emerald-600 text-white rounded-xl font-bold text-lg hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-500/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?p.jsxs(p.Fragment,{children:[p.jsx(v2,{className:"h-5 w-5 animate-spin mr-2"}),"Scanning..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Kge,{className:"h-5 w-5 mr-2"}),"Identify Item"]})})})]})})}function S9e({onClose:t,deviceType:e="laptop"}){const n=R.useRef(null),[r,s]=R.useState(0),i={laptop:[{text:"Locate the 6 screws on the back panel",position:{top:"20%",left:"20%"}},{text:"Use a Phillips #0 screwdriver to remove them",position:{top:"50%",left:"50%"}},{text:"Gently pry open the case starting from the hinge",position:{top:"80%",left:"50%"}},{text:"Disconnect the battery connector first!",position:{top:"40%",left:"60%"}}],phone:[{text:"Heat the edges to soften the adhesive",position:{top:"10%",left:"50%"}},{text:"Use a suction cup to lift the screen",position:{top:"50%",left:"50%"}},{text:"Insert a pick to slice through the adhesive",position:{top:"80%",left:"50%"}}]},a=i[e]||i.laptop;R.useEffect(()=>(o(),()=>l()),[]);const o=async()=>{try{const c=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});n.current&&(n.current.srcObject=c)}catch(c){console.error("Error accessing camera:",c)}},l=()=>{n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(u=>u.stop())};return p.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[p.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover opacity-80"}),p.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[p.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/80 to-transparent pointer-events-auto",children:p.jsxs("div",{className:"flex justify-between items-center text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg backdrop-blur-md",children:p.jsx(ha,{className:"h-5 w-5 text-emerald-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold",children:"AR Repair Assistant"}),p.jsxs("p",{className:"text-xs text-gray-300",children:["Step ",r+1," of ",a.length]})]})]}),p.jsx("button",{onClick:t,className:"p-2 bg-white/10 rounded-full hover:bg-white/20",children:p.jsx(il,{className:"h-6 w-6"})})]})}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("div",{className:"relative w-64 h-64 border-2 border-dashed border-emerald-400/50 rounded-xl animate-pulse",children:p.jsxs("div",{className:"absolute -top-12 left-0 right-0 bg-emerald-600 text-white text-sm p-3 rounded-lg shadow-lg text-center animate-bounce",children:[a[r].text,p.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-emerald-600"})]})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/90 to-transparent pointer-events-auto",children:p.jsxs("div",{className:"flex justify-between items-center gap-4",children:[p.jsx("button",{onClick:()=>s(Math.max(0,r-1)),disabled:r===0,className:"px-6 py-3 rounded-xl bg-white/10 text-white backdrop-blur-md disabled:opacity-30",children:"Back"}),r<a.length-1?p.jsxs("button",{onClick:()=>s(r+1),className:"flex-1 px-6 py-3 rounded-xl bg-emerald-600 text-white font-bold shadow-lg shadow-emerald-500/30 flex items-center justify-center gap-2",children:["Next Step ",p.jsx(JY,{className:"h-5 w-5"})]}):p.jsxs("button",{onClick:t,className:"flex-1 px-6 py-3 rounded-xl bg-green-500 text-white font-bold shadow-lg shadow-green-500/30 flex items-center justify-center gap-2",children:["Complete ",p.jsx(Wi,{className:"h-5 w-5"})]})]})})]})]})}function N9e({points:t=0,wasteRecycled:e=0}){const[n,r]=R.useState(1),[s,i]=R.useState("happy");R.useEffect(()=>{const l=Math.max(1,Math.floor(t/100)+1);r(l)},[t]);const a=()=>n<3?"":n<5?"":n<10?"":n<20?"":"",o=()=>n<3?"Sprout":n<5?"Leafy":n<10?"Groot":n<20?"Rex":"Smaug";return p.jsxs("div",{className:"bg-gradient-to-br from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30 rounded-3xl p-6 relative overflow-hidden shadow-sm border border-emerald-200 dark:border-emerald-800",children:[p.jsx("div",{className:"absolute top-0 right-0 p-4",children:p.jsxs("div",{className:"bg-white/50 dark:bg-black/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-emerald-800 dark:text-emerald-200",children:["Lvl ",n]})}),p.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"text-8xl animate-bounce-slow filter drop-shadow-xl transition-all duration-500 transform hover:scale-110 cursor-pointer",onClick:()=>i(s==="happy"?"excited":"happy"),children:a()}),p.jsxs("div",{className:"absolute -right-4 top-0 flex flex-col gap-2",children:[p.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm animate-pulse",children:p.jsx(i0e,{className:"h-4 w-4 text-red-500 fill-current"})}),p.jsx("div",{className:"bg-white p-1.5 rounded-full shadow-sm",children:p.jsx(fZ,{className:"h-4 w-4 text-yellow-500 fill-current"})})]})]}),p.jsx("h3",{className:"mt-4 text-xl font-bold text-emerald-900 dark:text-emerald-100",children:o()}),p.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 text-center max-w-[200px]",children:s==="happy"?"I'm growing thanks to your recycling!":"Wow! So much e-waste saved!"}),p.jsx("div",{className:"w-full mt-6 bg-white/50 dark:bg-black/20 rounded-full h-3 overflow-hidden",children:p.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-400 h-full rounded-full transition-all duration-1000",style:{width:`${t%100}%`}})}),p.jsxs("div",{className:"flex justify-between w-full mt-1 text-xs text-emerald-600 dark:text-emerald-400 font-medium",children:[p.jsxs("span",{children:[t%100," / 100 XP"]}),p.jsx("span",{children:"Next Level"})]}),p.jsxs("button",{className:"mt-6 flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-xl text-sm font-medium text-emerald-700 dark:text-emerald-300 shadow-sm hover:shadow-md transition-all",children:[p.jsx(v0e,{className:"h-4 w-4"}),"Share Progress"]})]})]})}function C9e(){const[t,e]=R.useState("neighborhood"),s=t==="neighborhood"?[{id:1,name:"Sarah J.",points:2450,avatar:"SJ"},{id:2,name:"Mike T.",points:1890,avatar:"MT"},{id:3,name:"You",points:1250,avatar:"ME",isUser:!0},{id:4,name:"Emma W.",points:980,avatar:"EW"},{id:5,name:"David L.",points:850,avatar:"DL"}]:[{id:1,name:"TechCorp Inc.",points:15400,avatar:"TC"},{id:2,name:"GreenSystems",points:12300,avatar:"GS"},{id:3,name:"EcoSolutions",points:9800,avatar:"ES"}];return p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[p.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[p.jsx(S0e,{className:"h-5 w-5 text-yellow-500"}),"Leaderboard"]})}),p.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-700 rounded-xl",children:[p.jsxs("button",{onClick:()=>e("neighborhood"),className:`flex-1 flex items-center justify-center py-2 text-sm font-medium rounded-lg transition-all ${t==="neighborhood"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[p.jsx(Lx,{className:"h-4 w-4 mr-2"}),"Neighborhood"]}),p.jsxs("button",{onClick:()=>e("corporate"),className:`flex-1 flex items-center justify-center py-2 text-sm font-medium rounded-lg transition-all ${t==="corporate"?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"}`,children:[p.jsx(Gge,{className:"h-4 w-4 mr-2"}),"Corporate"]})]})]}),p.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:s.map((i,a)=>p.jsxs("div",{className:`flex items-center p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${i.isUser?"bg-emerald-50/50 dark:bg-emerald-900/10":""}`,children:[p.jsx("div",{className:"w-8 text-center font-bold text-gray-400 dark:text-gray-500",children:a+1}),p.jsxs("div",{className:"flex-1 flex items-center gap-3 ml-2",children:[p.jsx("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold text-white
                ${a===0?"bg-yellow-400":a===1?"bg-gray-400":a===2?"bg-orange-400":"bg-emerald-500"}
              `,children:i.avatar}),p.jsxs("div",{children:[p.jsxs("p",{className:`font-semibold ${i.isUser?"text-emerald-700 dark:text-emerald-400":"text-gray-900 dark:text-white"}`,children:[i.name," ",i.isUser&&"(You)"]}),p.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Level ",Math.floor(i.points/1e3)+1," Recycler"]})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:i.points.toLocaleString()}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"pts"})]}),a<3&&p.jsx("div",{className:"ml-4",children:p.jsx(h0e,{className:`h-5 w-5 ${a===0?"text-yellow-400":a===1?"text-gray-400":"text-orange-400"}`})})]},i.id))}),p.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/30 text-center",children:p.jsx("button",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300",children:"View Full Rankings"})})]})}function T9e({pickupId:t}){const e=[{id:1,title:"Pickup Scheduled",description:"Request received and driver assigned",date:"2024-03-10 09:00 AM",status:"completed",icon:yo,location:"Your Location"},{id:2,title:"Collected",description:"Item picked up by eco-logistics partner",date:"2024-03-11 02:30 PM",status:"completed",icon:Uh,location:"Transit"},{id:3,title:"Arrived at Facility",description:"Received at certified recycling center",date:"2024-03-11 04:45 PM",status:"completed",icon:eZ,location:"GreenCycle Hub, Sector 4"},{id:4,title:"Processing & Sorting",description:"Dismantling and material separation in progress",date:"2024-03-12 10:00 AM",status:"current",icon:Wa,location:"Processing Unit B"},{id:5,title:"Material Recovery",description:"Metals and plastics recovered for reuse",date:"Estimated: 2024-03-13",status:"pending",icon:Wi,location:"Recovery Zone"}];return p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center justify-between mb-8",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"E-Waste Journey"}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Tracking ID: #EW-",t||"DEMO"]})]}),p.jsx("div",{className:"px-3 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-full text-xs font-bold uppercase tracking-wide",children:"In Progress"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-gray-200 dark:bg-gray-700"}),p.jsx("div",{className:"space-y-8",children:e.map((n,r)=>{const s=n.icon,i=n.status==="completed",a=n.status==="current";return p.jsxs("div",{className:"relative flex gap-6 group",children:[p.jsx("div",{className:`
                  relative z-10 flex items-center justify-center w-12 h-12 rounded-full border-4 transition-all duration-300
                  ${i?"bg-emerald-500 border-emerald-100 dark:border-emerald-900 text-white":a?"bg-white dark:bg-gray-800 border-emerald-500 text-emerald-500 shadow-lg shadow-emerald-500/20":"bg-gray-100 dark:bg-gray-700 border-white dark:border-gray-800 text-gray-400"}
                `,children:p.jsx(s,{className:"h-5 w-5"})}),p.jsxs("div",{className:`flex-1 pt-1 ${a?"opacity-100":i?"opacity-80":"opacity-50"}`,children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1",children:[p.jsx("h4",{className:`text-base font-bold ${a?"text-emerald-600 dark:text-emerald-400":"text-gray-900 dark:text-white"}`,children:n.title}),p.jsx("span",{className:"text-xs font-medium text-gray-400 dark:text-gray-500 flex items-center bg-gray-50 dark:bg-gray-800 px-2 py-1 rounded-md",children:n.date})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:n.description}),p.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-400 dark:text-gray-500",children:[p.jsx(Zh,{className:"h-3 w-3 mr-1"}),n.location]})]})]},n.id)})})]})]})}const sV=["Recycling one smartphone saves enough energy to power a laptop for 44 hours","E-waste contains valuable materials like gold, silver, and rare earth metals that can be recovered","Repairing devices extends their lifespan and reduces environmental impact","Donating working electronics helps bridge the digital divide","Proper e-waste disposal prevents toxic materials from entering landfills"];function I9e(){var he,ht;const t=Wc(),{theme:e,toggleTheme:n}=bJ(),[r,s]=R.useState(null),[i,a]=R.useState(!1),[o,l]=R.useState(!1),[c,u]=R.useState(!1),[d,h]=R.useState(!1),[f,m]=R.useState("dashboard"),[y,v]=R.useState(""),[x,b]=R.useState(0),[_,k]=R.useState(0),[N,A]=R.useState(!1),[T,C]=R.useState([]),[P,$]=R.useState(!1),[j,O]=R.useState(!1),[F,B]=R.useState(window.innerWidth>=1024),[Z,V]=R.useState(0),[G,U]=R.useState(10),[K,ee]=R.useState(15),[oe,W]=R.useState(-5),[Y,Q]=R.useState(0),[J,te]=R.useState([]);R.useEffect(()=>{(async()=>{try{const{data:{user:pe}}=await tt.auth.getUser();if(pe){const{data:xe}=await tt.from("profiles").select("*").eq("id",pe.id).single();xe?(s(xe),me(pe.id),ge(),ce(pe.id),Ce(pe.id),C([{id:1,title:"Pickup Status Update",message:"Your pickup request has been accepted",time:new Date(Date.now()-36e5),read:!1},{id:2,title:"Points Awarded",message:"You earned 50 points for recycling",time:new Date(Date.now()-864e5),read:!0},{id:3,title:"New Educational Content",message:"Learn about proper battery disposal",time:new Date(Date.now()-1728e5),read:!0}]),$(!0)):t("/login")}else t("/login")}catch(pe){console.error("Error fetching user data:",pe),t("/login")}})();const Ve=setInterval(()=>{V(pe=>(pe+1)%sV.length)},1e4),nt=()=>{B(window.innerWidth>=1024)};return window.addEventListener("resize",nt),()=>{clearInterval(Ve),window.removeEventListener("resize",nt)}},[t]);const me=async Me=>{try{const{data:Ve,error:nt}=await tt.from("repair_requests").select("id").eq("user_id",Me).in("status",["pending","assigned","diagnosing","repairing"]);if(nt)throw nt;b((Ve==null?void 0:Ve.length)||0)}catch(Ve){console.error("Error fetching active repairs:",Ve)}},ge=async()=>{try{const{data:Me,error:Ve}=await tt.from("profiles").select("id").eq("role","recycler");if(Ve)throw Ve;k((Me==null?void 0:Me.length)||0)}catch(Me){console.error("Error fetching recyclers count:",Me)}},ce=async Me=>{try{const{data:Ve,error:nt}=await tt.from("pickup_requests").select("quantity").eq("user_id",Me).eq("status","completed");if(nt)throw nt;const pe=(Ve==null?void 0:Ve.reduce((xe,je)=>xe+je.quantity*2,0))||0;Q(pe)}catch(Ve){console.error("Error fetching total waste recycled:",Ve)}},Ce=async Me=>{try{const{data:Ve,error:nt}=await tt.from("pickup_requests").select("*").eq("user_id",Me).in("status",["pending","accepted"]).order("created_at",{ascending:!1}).limit(3);if(nt)throw nt;te(Ve||[])}catch(Ve){console.error("Error fetching upcoming pickups:",Ve)}},_e=()=>{a(!1),v("Pickup request submitted successfully!"),m("pickup-history"),setTimeout(()=>{v("")},5e3)},we=Me=>{l(!1),v("Repair request submitted successfully! A technician will review your request shortly."),m("repair-history"),b(Ve=>Ve+1),setTimeout(()=>{v("")},5e3)},He=()=>{C(Me=>Me.map(Ve=>({...Ve,read:!0}))),$(!1)},Qe=async()=>{try{await tt.auth.signOut(),t("/login")}catch(Me){console.error("Error signing out:",Me)}},Ae=[{id:"dashboard",label:"Dashboard",icon:p.jsx(o0e,{className:"h-5 w-5"})},{id:"pickup-history",label:"Pickup History",icon:p.jsx(a0e,{className:"h-5 w-5"})},{id:"repair-history",label:"Repair History",icon:p.jsx(ha,{className:"h-5 w-5"})},{id:"rewards",label:"Rewards",icon:p.jsx(cj,{className:"h-5 w-5"})},{id:"education",label:"Educational Content",icon:p.jsx(h5,{className:"h-5 w-5"})}];return p.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans text-gray-900 dark:bg-gray-900 dark:text-white transition-colors duration-300",children:[p.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50 dark:bg-gray-900/80 dark:border-gray-800",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:()=>B(!F),className:"lg:hidden p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 focus:outline-none dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-800",children:F?p.jsx(il,{className:"h-6 w-6"}):p.jsx(sZ,{className:"h-6 w-6"})}),p.jsxs(Qn,{to:"/",className:"flex items-center group",children:[p.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-2 rounded-xl shadow-lg group-hover:shadow-emerald-500/30 transition-all duration-300",children:p.jsx(Wa,{className:"h-6 w-6 text-white"})}),p.jsx("span",{className:"ml-3 text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300",children:"E-Waste Manager"})]})]}),p.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[p.jsx("button",{onClick:n,className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-900 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-white transition-all duration-200",children:e==="dark"?p.jsx(x2,{className:"h-5 w-5"}):p.jsx(m0e,{className:"h-5 w-5"})}),p.jsxs(Qn,{to:"/marketplace",className:"hidden sm:inline-flex items-center px-4 py-2 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100 transition-all duration-200 dark:text-gray-200 dark:hover:bg-gray-800",children:[p.jsx(m0,{className:"h-4 w-4 mr-2"}),"Marketplace"]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>{A(!N),N||He()},className:"p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-900 transition-all duration-200 relative",children:[p.jsx(II,{className:"h-5 w-5"}),P&&p.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white animate-pulse"})]}),N&&p.jsxs("div",{className:"absolute right-0 mt-2 w-80 rounded-2xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden z-50 transform origin-top-right transition-all duration-200",children:[p.jsxs("div",{className:"py-3 px-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),p.jsx("button",{onClick:He,className:"text-xs font-medium text-emerald-600 hover:text-emerald-700 transition-colors",children:"Mark all as read"})]}),p.jsx("div",{className:"max-h-[24rem] overflow-y-auto custom-scrollbar",children:T.length>0?p.jsx("div",{className:"divide-y divide-gray-100",children:T.map(Me=>p.jsxs("div",{className:`px-4 py-3 hover:bg-gray-50 transition-colors ${Me.read?"":"bg-emerald-50/50"}`,children:[p.jsx("p",{className:"text-sm font-medium text-gray-900",children:Me.title}),p.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:Me.message}),p.jsxs("p",{className:"text-xs text-gray-400 mt-1.5 flex items-center",children:[p.jsx(Bd,{className:"h-3 w-3 mr-1"}),Me.time.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},Me.id))}):p.jsx("div",{className:"px-4 py-8 text-center text-sm text-gray-500",children:"No new notifications"})})]})]}),p.jsxs("div",{className:"relative ml-2",children:[p.jsxs("button",{onClick:()=>O(!j),className:"flex items-center space-x-3 p-1 pr-3 rounded-full hover:bg-gray-100 transition-all duration-200 border border-transparent hover:border-gray-200",children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-emerald-400 to-teal-500 flex items-center justify-center text-white font-medium shadow-sm",children:((he=r==null?void 0:r.full_name)==null?void 0:he.charAt(0))||p.jsx(g0,{className:"h-4 w-4"})}),p.jsx("span",{className:"hidden sm:inline text-sm font-medium text-gray-700",children:r==null?void 0:r.full_name}),p.jsx(jv,{className:"h-4 w-4 text-gray-400"})]}),j&&p.jsxs("div",{className:"absolute right-0 mt-2 w-56 rounded-2xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden z-50 transform origin-top-right transition-all duration-200",children:[p.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:[p.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r==null?void 0:r.full_name}),p.jsx("p",{className:"text-xs text-gray-500 truncate",children:r==null?void 0:r.email})]}),p.jsxs("div",{className:"py-1",children:[p.jsxs(Qn,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[p.jsx(g0,{className:"h-4 w-4 mr-2 text-gray-400"}),"Profile Settings"]}),p.jsxs("button",{onClick:Qe,className:"flex w-full items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[p.jsx(Dx,{className:"h-4 w-4 mr-2"}),"Sign out"]})]})]})]})]})]})})}),p.jsxs("div",{className:"flex max-w-7xl mx-auto pt-6 px-4 sm:px-6 lg:px-8 gap-8",children:[p.jsx("aside",{className:`
            fixed inset-y-0 left-0 z-40 w-64 bg-white/90 backdrop-blur-xl transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:bg-transparent lg:block
            ${F?"translate-x-0 shadow-2xl lg:shadow-none":"-translate-x-full"}
          `,children:p.jsxs("div",{className:"h-full flex flex-col lg:h-auto lg:sticky lg:top-24",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 lg:hidden border-b border-gray-200",children:[p.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Menu"}),p.jsx("button",{onClick:()=>B(!1),className:"p-2 rounded-md text-gray-500",children:p.jsx(il,{className:"h-6 w-6"})})]}),p.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1",children:[Ae.map(Me=>p.jsxs("button",{onClick:()=>{m(Me.id),window.innerWidth<1024&&B(!1)},className:`
                    group flex items-center px-4 py-3 text-sm font-medium rounded-xl w-full transition-all duration-200
                    ${f===Me.id?"bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-200":"text-gray-600 hover:bg-white hover:text-gray-900 hover:shadow-sm"}
                  `,children:[p.jsx("span",{className:`mr-3 transition-colors ${f===Me.id?"text-emerald-600":"text-gray-400 group-hover:text-gray-600"}`,children:Me.icon}),Me.label]},Me.id)),p.jsxs("div",{className:"mt-8 relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 p-5 text-white shadow-lg",children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-2 -mr-2 h-16 w-16 rounded-full bg-white/20 blur-xl"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-2 -ml-2 h-16 w-16 rounded-full bg-black/10 blur-xl"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex items-center mb-3",children:[p.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:p.jsx(u0e,{className:"h-4 w-4 text-yellow-300"})}),p.jsx("span",{className:"ml-2 text-xs font-bold uppercase tracking-wider text-blue-100",children:"Eco Tip"})]}),p.jsx("p",{className:"text-sm font-medium leading-relaxed text-white/90",children:sV[Z]})]})]})]})]})}),p.jsxs("main",{className:"flex-1 min-w-0 pb-12",children:[F&&p.jsx("div",{className:"fixed inset-0 bg-gray-900/20 backdrop-blur-sm z-30 lg:hidden",onClick:()=>B(!1)}),y&&p.jsxs("div",{className:"mb-8 p-4 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-2xl shadow-sm flex items-center animate-fade-in-up",children:[p.jsx("div",{className:"p-2 bg-emerald-100 rounded-full mr-3",children:p.jsx(Wi,{className:"h-5 w-5 text-emerald-600"})}),p.jsx("span",{className:"font-medium",children:y})]}),f==="dashboard"&&p.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 tracking-tight",children:["Welcome back, ",(ht=r==null?void 0:r.full_name)==null?void 0:ht.split(" ")[0],"! "]}),p.jsx("p",{className:"mt-1 text-gray-500",children:"Here's what's happening with your eco-impact today."})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none transition-all duration-200",children:[p.jsx(Wa,{className:"h-4 w-4 mr-2 text-emerald-500"}),"Smart Scan"]}),p.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2.5 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none transition-all duration-200",children:[p.jsx(ha,{className:"h-4 w-4 mr-2 text-blue-500"}),"AR Guide"]}),p.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5",children:[p.jsx(yo,{className:"h-4 w-4 mr-2"}),"Schedule Pickup"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[p.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 group",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl group-hover:bg-emerald-100 transition-colors",children:p.jsx(yo,{className:"h-6 w-6 text-emerald-600"})}),p.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[G>=0?p.jsx(Hs,{className:"h-3 w-3 mr-1"}):p.jsx(Pd,{className:"h-3 w-3 mr-1"}),Math.abs(G),"%"]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:(r==null?void 0:r.pickups)||0}),p.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Total Pickups"})]})]}),p.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 group",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{className:"p-3 bg-amber-50 rounded-xl group-hover:bg-amber-100 transition-colors",children:p.jsx(ha,{className:"h-6 w-6 text-amber-600"})}),p.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Active"})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:x}),p.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Active Repairs"})]})]}),p.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 group",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{className:"p-3 bg-purple-50 rounded-xl group-hover:bg-purple-100 transition-colors",children:p.jsx(y2,{className:"h-6 w-6 text-purple-600"})}),p.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[K>=0?p.jsx(Hs,{className:"h-3 w-3 mr-1"}):p.jsx(Pd,{className:"h-3 w-3 mr-1"}),Math.abs(K),"%"]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:(r==null?void 0:r.points)||0}),p.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Reward Points"})]})]}),p.jsxs(Qn,{to:"/marketplace",className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-all duration-300 group block",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("div",{className:"p-3 bg-blue-50 rounded-xl group-hover:bg-blue-100 transition-colors",children:p.jsx(m0,{className:"h-6 w-6 text-blue-600"})}),p.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"New Items"})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"Shop"}),p.jsx("p",{className:"text-sm font-medium text-gray-500 mt-1",children:"Visit Marketplace"})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsx("div",{className:"lg:col-span-1",children:p.jsx(N9e,{points:(r==null?void 0:r.points)||0,wasteRecycled:Y})}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx(C9e,{})})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsx(T9e,{pickupId:"12345"}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col",children:[p.jsx("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:p.jsxs("div",{children:[p.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[p.jsx(Zh,{className:"h-5 w-5 text-emerald-500"}),"Nearby Recyclers"]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Find certified collection points near you"})]})}),p.jsx("div",{className:"flex-1 w-full bg-gray-50 dark:bg-gray-900 relative min-h-[400px]",children:p.jsx(BJ,{})})]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-emerald-900 to-teal-900 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white/5 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-64 h-64 bg-emerald-500/20 rounded-full blur-3xl"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"p-1.5 bg-white/10 rounded-lg backdrop-blur-sm",children:p.jsx(nZ,{className:"h-5 w-5 text-emerald-300"})}),p.jsx("h2",{className:"text-lg font-semibold text-emerald-100",children:"Your Environmental Impact"})]}),p.jsxs("p",{className:"text-3xl md:text-4xl font-bold text-white tracking-tight",children:[Y," ",p.jsx("span",{className:"text-emerald-300 text-2xl",children:"kg recycled"})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-sm font-medium text-emerald-200 mb-1",children:"Next Goal: 100kg"}),p.jsx("div",{className:"w-48 md:w-64 h-2 bg-black/20 rounded-full overflow-hidden backdrop-blur-sm",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 to-teal-300 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(100,Y/100*100)}%`}})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10 hover:bg-white/15 transition-colors",children:[p.jsxs("p",{className:"text-2xl font-bold text-white mb-1",children:[Math.round(Y*.85)," kg"]}),p.jsx("p",{className:"text-sm text-emerald-200",children:"CO Emissions Saved"})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10 hover:bg-white/15 transition-colors",children:[p.jsxs("p",{className:"text-2xl font-bold text-white mb-1",children:[Math.round(Y*.4)," L"]}),p.jsx("p",{className:"text-sm text-emerald-200",children:"Water Conserved"})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/10 hover:bg-white/15 transition-colors",children:[p.jsxs("p",{className:"text-2xl font-bold text-white mb-1",children:[Math.round(Y*.25)," kg"]}),p.jsx("p",{className:"text-sm text-emerald-200",children:"Metals Recovered"})]})]})]})]})]}),f==="pickup-history"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(Ube,{})}),f==="repair-history"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(ewe,{userRole:"user"})}),f==="rewards"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(m1e,{})}),f==="education"&&p.jsx("div",{className:"animate-fade-in",children:p.jsx(p1e,{})})]})]}),i&&p.jsx(Exe,{onClose:()=>a(!1),onSuccess:_e}),o&&p.jsx(X1e,{onClose:()=>l(!1),onSuccess:we}),c&&p.jsx(k9e,{onClose:()=>u(!1),onScanComplete:Me=>{u(!1),v(`Identified: ${Me}. Opening pickup request...`),setTimeout(()=>a(!0),1500)}}),d&&p.jsx(S9e,{onClose:()=>h(!1)})]})}function A9e(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1),s=[{id:1,name:"John D.",status:"Available",vehicle:"Van 01"},{id:2,name:"Mike R.",status:"On Route",vehicle:"Truck 03"}],i=[{id:1,address:"123 Green St",items:"2 Laptops",priority:"High"},{id:2,address:"45 Tech Park",items:"50kg E-Waste",priority:"Medium"},{id:3,address:"89 Eco Lane",items:"1 Printer",priority:"Low"}],a=()=>{e(!0),setTimeout(()=>{e(!1),r(!0)},2e3)};return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]",children:[p.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col",children:[p.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[p.jsx(iZ,{className:"h-5 w-5 text-emerald-500"}),"Route Planner"]}),p.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:["Pending Stops (",i.length,")"]}),i.map((o,l)=>p.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-100 dark:border-gray-700 mb-2",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:l+1}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.address}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.items})]})]})},o.id))]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Assign Driver"}),p.jsxs("select",{className:"w-full p-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[p.jsx("option",{children:"Select a driver..."}),s.map(o=>p.jsxs("option",{value:o.id,children:[o.name," (",o.status,")"]},o.id))]})]})]}),p.jsx("button",{onClick:a,disabled:t||n,className:`w-full py-3 rounded-xl font-bold text-white shadow-lg transition-all ${n?"bg-green-500 hover:bg-green-600 shadow-green-500/30":"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/30"}`,children:t?"Calculating Best Route...":n?"Route Optimized!":"Optimize Route"})]}),p.jsxs("div",{className:"lg:col-span-2 bg-gray-100 dark:bg-gray-900 rounded-xl overflow-hidden relative border border-gray-200 dark:border-gray-700",children:[p.jsx(BJ,{}),n&&p.jsxs("div",{className:"absolute top-4 right-4 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 max-w-xs animate-fade-in",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 text-emerald-600 dark:text-emerald-400 font-bold",children:[p.jsx(Wi,{className:"h-5 w-5"}),p.jsx("span",{children:"Optimization Complete"})]}),p.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Est. Time:"}),p.jsx("span",{className:"font-medium",children:"1h 45m"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Distance:"}),p.jsx("span",{className:"font-medium",children:"12.5 km"})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"Fuel Saved:"}),p.jsx("span",{className:"font-medium text-green-500",children:"~1.2 L"})]})]})]})]})]})}function E9e(){const t=[{id:1,name:"Truck 01",type:"Heavy Duty",status:"available",fuel:85,mileage:12500,nextService:"2025-04-15"},{id:2,name:"Van 03",type:"Light Cargo",status:"on_route",fuel:45,mileage:8900,nextService:"2025-03-20"},{id:3,name:"Truck 02",type:"Heavy Duty",status:"maintenance",fuel:0,mileage:15600,nextService:"2025-03-01"},{id:4,name:"Van 01",type:"Light Cargo",status:"available",fuel:92,mileage:5400,nextService:"2025-05-10"}];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Fleet"}),p.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"4 Vehicles"})]}),p.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:p.jsx(Uh,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),p.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Now"}),p.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"1 Vehicle"})]}),p.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:p.jsx(P9e,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),p.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"}),p.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"1 Vehicle"})]}),p.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:p.jsx(f5,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})})]})})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[p.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Vehicle Status"}),p.jsx("button",{className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Add Vehicle"})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Vehicle"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fuel Level"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Next Service"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.map(e=>p.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-lg bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:p.jsx(Uh,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),p.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.type})]})]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.status==="available"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":e.status==="on_route"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:e.status==="available"?"Available":e.status==="on_route"?"On Route":"Maintenance"})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[p.jsx("div",{className:"w-full max-w-[100px] bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:p.jsx("div",{className:`h-2.5 rounded-full ${e.fuel>50?"bg-green-500":e.fuel>20?"bg-yellow-500":"bg-red-500"}`,style:{width:`${e.fuel}%`}})}),p.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 inline-block",children:[e.fuel,"%"]})]}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx(p0,{className:"h-4 w-4 mr-2"}),e.nextService]})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[p.jsx("button",{className:"text-emerald-600 hover:text-emerald-900 dark:text-emerald-400 dark:hover:text-emerald-300 mr-4",children:"Edit"}),p.jsx("button",{className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",children:"History"})]})]},e.id))})]})})]})]})}function P9e(t){return p.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polygon",{points:"3 11 22 2 13 21 11 13 3 11"})})}function O9e(){const[t,e]=R.useState("processing"),n={received:[{id:101,item:"Batch #2024-001",type:"Mixed Electronics",weight:"150kg",date:"2024-03-10"},{id:102,item:"Batch #2024-003",type:"Laptops",weight:"45kg",date:"2024-03-11"}],dismantling:[{id:103,item:"Batch #2024-002",type:"Smartphones",weight:"12kg",date:"2024-03-09"}],sorting:[{id:104,item:"Batch #2023-099",type:"Cables",weight:"200kg",date:"2024-03-08"}],refined:[{id:105,item:"Batch #2023-098",type:"PCBs",weight:"30kg",date:"2024-03-07"}]},r=[{id:1,name:"Gold",stock:"0.5 kg",value:"$32,000",trend:"+2%"},{id:2,name:"Copper",stock:"500 kg",value:"$4,500",trend:"-1%"},{id:3,name:"Aluminum",stock:"1,200 kg",value:"$2,800",trend:"+5%"},{id:4,name:"Plastic (ABS)",stock:"3,000 kg",value:"$1,500",trend:"0%"},{id:5,name:"Rare Earths",stock:"2.1 kg",value:"$8,400",trend:"+12%"}];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex space-x-4 border-b border-gray-200 dark:border-gray-700",children:[p.jsx("button",{onClick:()=>e("processing"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${t==="processing"?"border-emerald-500 text-emerald-600 dark:text-emerald-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Processing Stages"}),p.jsx("button",{onClick:()=>e("materials"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${t==="materials"?"border-emerald-500 text-emerald-600 dark:text-emerald-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Recovered Materials"})]}),t==="processing"?p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 overflow-x-auto pb-4",children:Object.entries(n).map(([s,i])=>p.jsxs("div",{className:"min-w-[250px] bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200 capitalize",children:s}),p.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full",children:i.length})]}),p.jsxs("div",{className:"space-y-3",children:[i.map(a=>p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 cursor-move hover:shadow-md transition-shadow",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("span",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400",children:a.item}),p.jsx("span",{className:"text-[10px] text-gray-400",children:a.date})]}),p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:a.type}),p.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[p.jsx(n0e,{className:"h-3 w-3 mr-1"}),a.weight]})]},a.id)),p.jsx("button",{className:"w-full py-2 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 text-sm hover:border-emerald-500 hover:text-emerald-500 transition-colors",children:"+ Add Batch"})]})]},s))}):p.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Material"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Stock Level"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Est. Value"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Market Trend"}),p.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:r.map(s=>p.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"h-8 w-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 font-bold text-xs",children:s.name.substring(0,2).toUpperCase()}),p.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:s.name})]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.stock}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-white",children:s.value}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${s.trend.startsWith("+")?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":s.trend.startsWith("-")?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s.trend})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:p.jsx("button",{className:"text-emerald-600 hover:text-emerald-900 dark:text-emerald-400 dark:hover:text-emerald-300",children:"Sell"})})]},s.id))})]})})]})}function j9e(){return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white shadow-lg",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:p.jsx(QY,{className:"h-6 w-6 text-white"})}),p.jsx("span",{className:"text-emerald-100 text-sm font-medium",children:"+12.5% vs last month"})]}),p.jsx("h3",{className:"text-3xl font-bold mb-1",children:"$42,500"}),p.jsx("p",{className:"text-emerald-100 text-sm",children:"Total Revenue (This Month)"})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:p.jsx(nZ,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),p.jsx("span",{className:"text-green-500 text-sm font-medium",children:"+8% vs last month"})]}),p.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:"12.8 Tons"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Waste Processed"})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 p-2 rounded-lg",children:p.jsx(Hs,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),p.jsx("span",{className:"text-green-500 text-sm font-medium",children:"+5% Efficiency"})]}),p.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:"94%"}),p.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Recovery Rate"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[p.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[p.jsx(oZ,{className:"h-5 w-5 text-gray-500"}),"Waste Composition"]}),p.jsxs("div",{className:"flex items-center justify-center h-64 relative",children:[p.jsx("div",{className:"w-48 h-48 rounded-full bg-[conic-gradient(var(--color-1)_0_30%,var(--color-2)_30%_55%,var(--color-3)_55%_80%,var(--color-4)_80%_100%)]",style:{"--color-1":"#10b981","--color-2":"#3b82f6","--color-3":"#f59e0b","--color-4":"#6366f1"}}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"w-32 h-32 bg-white dark:bg-gray-800 rounded-full flex flex-col items-center justify-center",children:[p.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Total"}),p.jsx("span",{className:"text-xs text-gray-500",children:"100%"})]})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Laptops (30%)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Phones (25%)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Accessories (25%)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500"}),p.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Other (20%)"})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700",children:[p.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[p.jsx(Hs,{className:"h-5 w-5 text-gray-500"}),"Revenue Trend"]}),p.jsx("div",{className:"h-64 flex items-end justify-between gap-2 px-2",children:[40,65,45,80,55,90,70].map((t,e)=>p.jsxs("div",{className:"w-full bg-emerald-100 dark:bg-emerald-900/20 rounded-t-lg relative group",children:[p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-emerald-500 rounded-t-lg transition-all duration-500 group-hover:bg-emerald-400",style:{height:`${t}%`}}),p.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:["$",t*100]})]},e))}),p.jsxs("div",{className:"flex justify-between mt-4 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("span",{children:"Mon"}),p.jsx("span",{children:"Tue"}),p.jsx("span",{children:"Wed"}),p.jsx("span",{children:"Thu"}),p.jsx("span",{children:"Fri"}),p.jsx("span",{children:"Sat"}),p.jsx("span",{children:"Sun"})]})]})]})]})}function $9e(){const t=[{id:1,title:"Bulk Copper Wire (High Grade)",quantity:"500 kg",price:"$4,500",buyer:"TechMetals Inc.",status:"Active"},{id:2,title:"Sorted PCB Boards (Motherboards)",quantity:"1000 units",price:"$12,000",buyer:"-",status:"Pending"},{id:3,title:"Recycled ABS Plastic Pellets",quantity:"2 Tons",price:"$3,200",buyer:"EcoPlast",status:"Sold"}];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center bg-gradient-to-r from-blue-600 to-indigo-600 p-8 rounded-2xl text-white shadow-lg",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"B2B Material Exchange"}),p.jsx("p",{className:"text-blue-100 max-w-xl",children:"Connect directly with refineries and manufacturers to sell your recovered materials in bulk."})]}),p.jsxs("button",{className:"px-6 py-3 bg-white text-blue-600 rounded-xl font-bold shadow-lg hover:bg-blue-50 transition-colors flex items-center gap-2",children:[p.jsx(b_,{className:"h-5 w-5"}),"Create Listing"]})]}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:t.map(e=>p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:p.jsx(yo,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),p.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${e.status==="Active"?"bg-green-100 text-green-700":e.status==="Pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:e.status})]}),p.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:e.title}),p.jsxs("div",{className:"space-y-2 mb-6",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Quantity:"}),p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.quantity})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Asking Price:"}),p.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:e.price})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Buyer:"}),p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.buyer})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{className:"flex-1 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Edit"}),p.jsx("button",{className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"View Offers"})]})]},e.id))})]})}const x3=({data:t,color:e})=>{const n=Math.max(...t),r=t.map((s,i)=>{const a=i/(t.length-1)*100,o=100-s/n*80;return`${a},${o}`}).join(" ");return p.jsx("div",{className:"h-12 w-full mt-2",children:p.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[p.jsx("polyline",{points:r,fill:"none",stroke:e,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),t.map((s,i)=>{const a=i/(t.length-1)*100,o=100-s/n*80;return p.jsx("circle",{cx:a,cy:o,r:"2",fill:"white",stroke:e,strokeWidth:"1"},i)})]})})},D9e=()=>{const[t,e]=R.useState({temp:24,condition:"Sunny",icon:p.jsx(x2,{className:"h-8 w-8 text-amber-500"})});return R.useEffect(()=>{const n=[{temp:24,condition:"Sunny",icon:p.jsx(x2,{className:"h-8 w-8 text-amber-500"})},{temp:22,condition:"Cloudy",icon:p.jsx(e0e,{className:"h-8 w-8 text-gray-500"})},{temp:18,condition:"Rainy",icon:p.jsx(Qge,{className:"h-8 w-8 text-blue-500"})},{temp:26,condition:"Stormy",icon:p.jsx(fZ,{className:"h-8 w-8 text-amber-600"})}];e(n[Math.floor(Math.random()*n.length)])},[]),p.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 shadow-sm",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Today's Weather"}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("p",{className:"text-2xl font-bold",children:[t.temp,"C"]}),p.jsx("p",{className:"text-sm text-gray-600",children:t.condition})]}),t.icon]})]})},L9e=()=>{const t=[{id:1,name:"Truck 01",status:"available",lastService:"2025-02-15"},{id:2,name:"Van 03",status:"on_route",lastService:"2025-01-28"},{id:3,name:"Truck 02",status:"maintenance",lastService:"2025-03-01"}];return p.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vehicle Status"}),p.jsx("div",{className:"space-y-2",children:t.map(e=>p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Xge,{className:"h-4 w-4 mr-2 text-gray-500"}),p.jsx("span",{className:"text-sm",children:e.name})]}),p.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.status==="available"?"bg-green-100 text-green-800":e.status==="on_route"?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:e.status==="available"?"Available":e.status==="on_route"?"On Route":"Maintenance"})]},e.id))})]})};function R9e(){const t=Wc(),[e,n]=R.useState({name:"Green Recycling Co.",collectionsToday:12,pendingPickups:8,totalCollections:156}),[r,s]=R.useState("overview"),[i,a]=R.useState([]),[o,l]=R.useState(!0),[c,u]=R.useState("all"),[d,h]=R.useState(""),[f,m]=R.useState({start:null,end:null}),[y,v]=R.useState("date"),[x,b]=R.useState("desc"),[_,k]=R.useState(!1),[N,A]=R.useState(!1),[T,C]=R.useState([{id:1,message:"New pickup request from John Doe",time:new Date,read:!1},{id:2,message:"Pickup #1234 has been completed",time:J7(new Date,1),read:!0},{id:3,message:"Vehicle maintenance scheduled for tomorrow",time:J7(new Date,2),read:!0}]),[P,$]=R.useState(!0),[j,O]=R.useState(null),[F,B]=R.useState(!1),[Z]=R.useState({today:[5,8,12,10,15,12,14],pending:[3,5,8,7,10,8,8],total:[120,128,135,142,148,152,156]}),[V]=R.useState({today:15,pending:-5,total:8});R.useEffect(()=>{G();const J=tt.channel("pickup_requests").on("postgres_changes",{event:"INSERT",schema:"public",table:"pickup_requests"},te=>{a(ge=>[te.new,...ge]);const me={id:Date.now(),message:`New pickup request from ${te.new.user_name||"a customer"}`,time:new Date,read:!1};C(ge=>[me,...ge]),$(!0)}).subscribe();return()=>{tt.removeChannel(J)}},[]);const G=async()=>{try{l(!0);const{data:{user:J}}=await tt.auth.getUser();if(!J){t("/login");return}const{data:te}=await tt.from("profiles").select("role").eq("id",J.id).single();if((te==null?void 0:te.role)!=="recycler"){t("/login");return}const{data:me,error:ge}=await tt.from("pickup_requests").select("*").order("created_at",{ascending:!1});if(ge)throw ge;a(me||[])}catch(J){console.error("Error fetching requests:",J)}finally{l(!1)}},U=async(J,te)=>{try{const{error:me}=await tt.from("pickup_requests").update({status:te,updated_at:new Date().toISOString()}).eq("id",J);if(me)throw me;a(ce=>ce.map(Ce=>Ce.id===J?{...Ce,status:te,updated_at:new Date().toISOString()}:Ce));const ge={id:Date.now(),message:`Pickup request #${J.slice(0,4)} updated to ${te}`,time:new Date,read:!1};C(ce=>[ge,...ce]),$(!0)}catch(me){console.error("Error updating request status:",me)}},K=()=>{C(J=>J.map(te=>({...te,read:!0}))),$(!1)},ee=J=>{O(j===J?null:J)},W=[...i.filter(J=>{var te,me,ge,ce;if(c==="today"&&!Bbe(new Date(J.created_at))||c==="week"&&!zbe(new Date(J.created_at)))return!1;if(d){const Ce=d.toLowerCase();return((te=J.items)==null?void 0:te.toLowerCase().includes(Ce))||((me=J.address)==null?void 0:me.toLowerCase().includes(Ce))||((ge=J.user_name)==null?void 0:ge.toLowerCase().includes(Ce))||((ce=J.notes)==null?void 0:ce.toLowerCase().includes(Ce))}return!0})].sort((J,te)=>y==="date"?x==="desc"?new Date(te.created_at)-new Date(J.created_at):new Date(J.created_at)-new Date(te.created_at):y==="status"?x==="desc"?te.status.localeCompare(J.status):J.status.localeCompare(te.status):y==="location"?x==="desc"?te.address.localeCompare(J.address):J.address.localeCompare(te.address):0),Y=J=>{switch(J){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Q=J=>{switch(J){case"pending":return p.jsx(Bd,{className:"h-4 w-4"});case"accepted":return p.jsx(Uh,{className:"h-4 w-4"});case"completed":return p.jsx(Wi,{className:"h-4 w-4"});case"cancelled":return p.jsx($v,{className:"h-4 w-4"});default:return p.jsx(Qp,{className:"h-4 w-4"})}};return p.jsxs("div",{className:`min-h-screen ${F?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:[p.jsx("nav",{className:`${F?"bg-gray-800":"bg-white"} shadow-md sticky top-0 z-10 transition-colors duration-300`,children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 p-2 rounded-lg shadow-md",children:p.jsx(Wa,{className:"h-8 w-8 text-white transform transition-transform hover:rotate-45 duration-300"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-teal-500",children:"E-Waste Manager"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:`text-sm ${F?"text-gray-300":"text-gray-600"}`,children:e.name}),p.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full",children:"Partner"})]})]})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("button",{className:`p-1 rounded-full ${F?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Weather",children:p.jsx(x2,{className:"h-6 w-6"})}),p.jsx("button",{onClick:()=>B(!F),className:`p-1 rounded-full ${F?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,"aria-label":"Toggle dark mode",children:F?p.jsx(x2,{className:"h-6 w-6"}):p.jsx(M9e,{className:"h-6 w-6"})}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>{k(!_),_||K()},className:`p-1 rounded-full ${F?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 relative`,"aria-label":"Notifications",children:[p.jsx(II,{className:"h-6 w-6"}),P&&p.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),_&&p.jsxs("div",{className:`origin-top-right absolute right-0 mt-2 w-80 rounded-lg shadow-lg ${F?"bg-gray-800":"bg-white"} ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden z-20`,children:[p.jsxs("div",{className:`py-2 px-3 border-b ${F?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[p.jsx("h3",{className:`text-sm font-medium ${F?"text-white":"text-gray-900"}`,children:"Notifications"}),p.jsx("button",{onClick:K,className:"text-xs text-emerald-600 hover:text-emerald-800",children:"Mark all as read"})]}),p.jsx("div",{className:"max-h-96 overflow-y-auto",children:T.length>0?p.jsx("div",{className:`divide-y ${F?"divide-gray-700":"divide-gray-200"}`,children:T.map(J=>p.jsxs("div",{className:`px-4 py-3 ${F?"hover:bg-gray-700":"hover:bg-gray-50"} ${J.read?"":F?"bg-emerald-900/20":"bg-emerald-50"}`,children:[p.jsx("p",{className:`text-sm font-medium ${F?"text-white":"text-gray-900"}`,children:J.message}),p.jsx("p",{className:`text-xs ${F?"text-gray-400":"text-gray-500"} mt-1`,children:gi(new Date(J.time),"MMM d, h:mm a")})]},J.id))}):p.jsx("div",{className:`px-4 py-6 text-center text-sm ${F?"text-gray-400":"text-gray-500"}`,children:"No notifications"})})]})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>A(!N),className:`flex items-center space-x-2 ${F?"text-white hover:text-gray-300":"text-gray-700 hover:text-gray-900"} focus:outline-none`,children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 flex items-center justify-center text-white",children:p.jsx(g0,{className:"h-5 w-5"})}),p.jsx(jv,{className:"h-4 w-4"})]}),N&&p.jsx("div",{className:`origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg ${F?"bg-gray-800":"bg-white"} ring-1 ring-black ring-opacity-5 focus:outline-none z-20`,children:p.jsxs("div",{className:"py-1",children:[p.jsx(Qn,{to:"/profile",className:`block px-4 py-2 text-sm ${F?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Your Profile"}),p.jsx(Qn,{to:"/settings",className:`block px-4 py-2 text-sm ${F?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Settings"}),p.jsx(Qn,{to:"/login",className:`block px-4 py-2 text-sm ${F?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Sign out"})]})})]})]})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"flex overflow-x-auto space-x-4 mb-6 pb-2",children:[p.jsxs("button",{onClick:()=>s("overview"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${r==="overview"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(d5,{className:"h-4 w-4 mr-2"}),"Overview"]}),p.jsxs("button",{onClick:()=>s("logistics"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${r==="logistics"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(d0e,{className:"h-4 w-4 mr-2"}),"Logistics & Fleet"]}),p.jsxs("button",{onClick:()=>s("facility"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${r==="facility"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(eZ,{className:"h-4 w-4 mr-2"}),"Facility & Inventory"]}),p.jsxs("button",{onClick:()=>s("analytics"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${r==="analytics"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(oZ,{className:"h-4 w-4 mr-2"}),"Analytics"]}),p.jsxs("button",{onClick:()=>s("b2b"),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${r==="b2b"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(qge,{className:"h-4 w-4 mr-2"}),"B2B Market"]})]}),r==="overview"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6",children:[p.jsx("div",{className:`${F?"bg-gray-800":"bg-white"} overflow-hidden shadow-lg rounded-lg border ${F?"border-gray-700":"border-gray-200"} transition-all duration-200 hover:shadow-xl group`,children:p.jsxs("div",{className:"p-5 bg-gradient-to-br from-transparent to-emerald-50 dark:to-emerald-900/10",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-md p-3 shadow-md group-hover:scale-105 transition-transform",children:p.jsx(yo,{className:"h-6 w-6 text-white"})}),p.jsx("div",{className:"flex items-center",children:V.today>0?p.jsxs("div",{className:"flex items-center text-green-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:["+",V.today,"%"]})]}):p.jsxs("div",{className:"flex items-center text-red-600",children:[p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:[V.today,"%"]})]})})]}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("dl",{children:[p.jsx("dt",{className:`text-sm font-medium ${F?"text-gray-400":"text-gray-500"} truncate`,children:"Collections Today"}),p.jsx("dd",{className:`mt-1 text-3xl font-semibold ${F?"text-white":"text-gray-900"}`,children:e.collectionsToday})]}),p.jsx(x3,{data:Z.today,color:"#10b981"}),p.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Last 7 days"})]})]})}),p.jsx("div",{className:`${F?"bg-gray-800":"bg-white"} overflow-hidden shadow-lg rounded-lg border ${F?"border-gray-700":"border-gray-200"} transition-all duration-200 hover:shadow-xl group`,children:p.jsxs("div",{className:"p-5 bg-gradient-to-br from-transparent to-amber-50 dark:to-amber-900/10",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-amber-400 to-yellow-500 rounded-md p-3 shadow-md group-hover:scale-105 transition-transform",children:p.jsx(Uh,{className:"h-6 w-6 text-white"})}),p.jsx("div",{className:"flex items-center",children:V.pending>0?p.jsxs("div",{className:"flex items-center text-green-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:["+",V.pending,"%"]})]}):p.jsxs("div",{className:"flex items-center text-red-600",children:[p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:[V.pending,"%"]})]})})]}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("dl",{children:[p.jsx("dt",{className:`text-sm font-medium ${F?"text-gray-400":"text-gray-500"} truncate`,children:"Pending Pickups"}),p.jsx("dd",{className:`mt-1 text-3xl font-semibold ${F?"text-white":"text-gray-900"}`,children:e.pendingPickups})]}),p.jsx(x3,{data:Z.pending,color:"#f59e0b"}),p.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Last 7 days"})]})]})}),p.jsx("div",{className:`${F?"bg-gray-800":"bg-white"} overflow-hidden shadow-lg rounded-lg border ${F?"border-gray-700":"border-gray-200"} transition-all duration-200 hover:shadow-xl group`,children:p.jsxs("div",{className:"p-5 bg-gradient-to-br from-transparent to-blue-50 dark:to-blue-900/10",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-md p-3 shadow-md group-hover:scale-105 transition-transform",children:p.jsx(d5,{className:"h-6 w-6 text-white"})}),p.jsx("div",{className:"flex items-center",children:V.total>0?p.jsxs("div",{className:"flex items-center text-green-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:["+",V.total,"%"]})]}):p.jsxs("div",{className:"flex items-center text-red-600",children:[p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-xs font-medium",children:[V.total,"%"]})]})})]}),p.jsxs("div",{className:"mt-4",children:[p.jsxs("dl",{children:[p.jsx("dt",{className:`text-sm font-medium ${F?"text-gray-400":"text-gray-500"} truncate`,children:"Total Collections"}),p.jsx("dd",{className:`mt-1 text-3xl font-semibold ${F?"text-white":"text-gray-900"}`,children:e.totalCollections})]}),p.jsx(x3,{data:Z.total,color:"#3b82f6"}),p.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Last 7 days"})]})]})}),p.jsx("div",{className:`${F?"bg-gray-800":"bg-white"} overflow-hidden shadow-lg rounded-lg border ${F?"border-gray-700":"border-gray-200"} transition-all duration-200 hover:shadow-xl`,children:p.jsxs("div",{className:"p-5",children:[p.jsx("h3",{className:`text-sm font-medium ${F?"text-gray-300":"text-gray-700"} mb-3`,children:"Quick Tools"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{className:"flex items-center justify-center p-2 bg-emerald-100 text-emerald-700 rounded-md hover:bg-emerald-200 transition-colors",children:[p.jsx(p0,{className:"h-4 w-4 mr-2"}),p.jsx("span",{className:"text-xs",children:"Schedule"})]}),p.jsxs("button",{className:"flex items-center justify-center p-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors",children:[p.jsx(nR,{className:"h-4 w-4 mr-2"}),p.jsx("span",{className:"text-xs",children:"Sync"})]})]}),p.jsx(D9e,{}),p.jsx(L9e,{})]})]})})]}),p.jsxs("div",{className:`${F?"bg-gray-800":"bg-white"} shadow-lg rounded-lg p-6 mb-6 border ${F?"border-gray-700":"border-gray-200"}`,children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[p.jsx("h2",{className:`text-xl font-semibold ${F?"text-white":"text-gray-900"} mb-4 md:mb-0`,children:"Pickup Requests"}),p.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:space-y-0 sm:space-x-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx(q0,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${F?"text-gray-400":"text-gray-500"} h-5 w-5`}),p.jsx("input",{type:"text",placeholder:"Search requests...",value:d,onChange:J=>h(J.target.value),className:`pl-10 pr-4 py-2 ${F?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"} border rounded-md focus:ring-emerald-500 focus:border-emerald-500 w-full`})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:()=>u("all"),className:`px-3 py-2 rounded-md text-sm font-medium ${c==="all"?"bg-emerald-100 text-emerald-800 border border-emerald-200":`${F?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-700 border-gray-200"} border hover:bg-gray-200`}`,children:"All Requests"}),p.jsx("button",{onClick:()=>u("today"),className:`px-3 py-2 rounded-md text-sm font-medium ${c==="today"?"bg-emerald-100 text-emerald-800 border border-emerald-200":`${F?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-700 border-gray-200"} border hover:bg-gray-200`}`,children:"Today"}),p.jsx("button",{onClick:()=>u("week"),className:`px-3 py-2 rounded-md text-sm font-medium ${c==="week"?"bg-emerald-100 text-emerald-800 border border-emerald-200":`${F?"bg-gray-700 text-gray-300 border-gray-600":"bg-gray-100 text-gray-700 border-gray-200"} border hover:bg-gray-200`}`,children:"This Week"})]}),p.jsx("div",{className:"relative",children:p.jsxs("button",{className:`flex items-center px-3 py-2 border ${F?"bg-gray-700 text-gray-300 border-gray-600":"bg-white text-gray-700 border-gray-300"} rounded-md hover:bg-gray-50`,children:[p.jsx(b0e,{className:"h-4 w-4 mr-2"}),p.jsx("span",{className:"text-sm",children:"Sort"}),p.jsx(jv,{className:"h-4 w-4 ml-2"})]})})]})]}),o?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):W.length>0?p.jsx("div",{className:"space-y-4",children:W.map(J=>p.jsx("div",{className:`${F?"bg-gray-700":"bg-white"} rounded-lg shadow-md overflow-hidden transition-all duration-200 hover:shadow-lg ${J.status==="pending"?"border-l-4 border-yellow-400":J.status==="accepted"?"border-l-4 border-blue-400":J.status==="completed"?"border-l-4 border-green-400":"border-l-4 border-red-400"}`,children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[p.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[p.jsx("div",{className:"flex-shrink-0 mr-4",children:p.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${J.status==="pending"?"bg-yellow-100 text-yellow-600":J.status==="accepted"?"bg-blue-100 text-blue-600":J.status==="completed"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:J.status==="pending"?p.jsx(Bd,{className:"h-6 w-6"}):J.status==="accepted"?p.jsx(Uh,{className:"h-6 w-6"}):J.status==="completed"?p.jsx(Wi,{className:"h-6 w-6"}):p.jsx($v,{className:"h-6 w-6"})})}),p.jsxs("div",{children:[p.jsxs("h3",{className:`text-lg font-semibold ${F?"text-white":"text-gray-900"}`,children:["Pickup Request from ",J.user_name||"Customer"]}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y(J.status)}`,children:[Q(J.status),p.jsx("span",{className:"ml-1 capitalize",children:J.status})]}),p.jsx("span",{className:`ml-2 text-sm ${F?"text-gray-400":"text-gray-500"}`,children:gi(new Date(J.created_at),"MMM d, h:mm a")})]})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs("select",{value:J.status,onChange:te=>U(J.id,te.target.value),className:`rounded-md px-3 py-1.5 text-sm font-medium ${F?"bg-gray-600 text-white border-gray-500":"bg-white text-gray-700 border-gray-300"} border shadow-sm focus:ring-emerald-500 focus:border-emerald-500`,children:[p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"accepted",children:"Accepted"}),p.jsx("option",{value:"completed",children:"Completed"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]}),p.jsx("button",{onClick:()=>ee(J.id),className:`p-1.5 rounded-md ${F?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j===J.id?p.jsx(F9e,{className:"h-5 w-5"}):p.jsx(jv,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(yo,{className:`w-5 h-5 ${F?"text-gray-400":"text-gray-500"} mt-0.5`}),p.jsxs("div",{children:[p.jsx("p",{className:`text-sm ${F?"text-gray-400":"text-gray-500"}`,children:"Items"}),p.jsx("p",{className:`font-medium ${F?"text-white":"text-gray-900"}`,children:J.items}),p.jsxs("p",{className:`text-sm ${F?"text-gray-400":"text-gray-500"}`,children:["Quantity: ",J.quantity]})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Zh,{className:`w-5 h-5 ${F?"text-gray-400":"text-gray-500"} mt-0.5`}),p.jsxs("div",{children:[p.jsx("p",{className:`text-sm ${F?"text-gray-400":"text-gray-500"}`,children:"Pickup Address"}),p.jsx("p",{className:`font-medium ${F?"text-white":"text-gray-900"}`,children:J.address})]})]}),p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(rZ,{className:`w-5 h-5 ${F?"text-gray-400":"text-gray-500"} mt-0.5`}),p.jsxs("div",{children:[p.jsx("p",{className:`text-sm ${F?"text-gray-400":"text-gray-500"}`,children:"Contact"}),p.jsx("p",{className:`font-medium ${F?"text-white":"text-gray-900"}`,children:J.user_email||"No email provided"})]})]})]}),j===J.id&&p.jsx("div",{className:`mt-4 pt-4 border-t ${F?"border-gray-600":"border-gray-200"}`,children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[J.notes&&p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:`text-sm font-medium ${F?"text-gray-300":"text-gray-700"} mb-1`,children:"Notes"}),p.jsx("p",{className:`${F?"text-gray-400":"text-gray-600"} text-sm`,children:J.notes})]}),p.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[p.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 bg-emerald-100 text-emerald-700 rounded-md text-sm hover:bg-emerald-200 transition-colors",children:[p.jsx(p0,{className:"h-4 w-4 mr-1.5"}),"Schedule Pickup"]}),p.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 bg-blue-100 text-blue-700 rounded-md text-sm hover:bg-blue-200 transition-colors",children:[p.jsx(aZ,{className:"h-4 w-4 mr-1.5"}),"Contact Customer"]}),p.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 bg-red-100 text-red-700 rounded-md text-sm hover:bg-red-200 transition-colors",children:[p.jsx($v,{className:"h-4 w-4 mr-1.5"}),"Cancel Request"]})]})]}),p.jsx("div",{className:"bg-gray-100 rounded-lg p-2 h-40 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Zh,{className:"h-8 w-8 text-emerald-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Map view would appear here"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Showing pickup location"})]})})]})})]})},J.id))}):p.jsxs("div",{className:`text-center py-12 ${F?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:[p.jsx(yo,{className:`mx-auto h-12 w-12 ${F?"text-gray-500":"text-gray-400"}`}),p.jsx("h3",{className:`mt-2 text-sm font-medium ${F?"text-gray-300":"text-gray-900"}`,children:"No pickup requests"}),p.jsx("p",{className:`mt-1 text-sm ${F?"text-gray-400":"text-gray-500"}`,children:"New requests will appear here when users schedule pickups."})]})]}),p.jsxs("div",{className:`${F?"bg-gray-800":"bg-white"} shadow-lg rounded-lg p-6 border ${F?"border-gray-700":"border-gray-200"}`,children:[p.jsx("h2",{className:`text-lg font-semibold ${F?"text-white":"text-gray-900"} mb-4`,children:"Environmental Impact"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:`${F?"bg-gray-700":"bg-emerald-50"} rounded-lg p-4`,children:[p.jsx("h3",{className:`text-sm font-medium ${F?"text-gray-300":"text-gray-700"} mb-2`,children:"E-Waste Collected"}),p.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:"1,250 kg"}),p.jsxs("div",{className:"mt-2 flex items-center text-sm text-emerald-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsx("span",{children:"12% increase from last month"})]})]}),p.jsxs("div",{className:`${F?"bg-gray-700":"bg-blue-50"} rounded-lg p-4`,children:[p.jsx("h3",{className:`text-sm font-medium ${F?"text-gray-300":"text-gray-700"} mb-2`,children:"CO Emissions Saved"}),p.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"875 kg"}),p.jsxs("div",{className:"mt-2 flex items-center text-sm text-blue-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsx("span",{children:"8% increase from last month"})]})]}),p.jsxs("div",{className:`${F?"bg-gray-700":"bg-amber-50"} rounded-lg p-4`,children:[p.jsx("h3",{className:`text-sm font-medium ${F?"text-gray-300":"text-gray-700"} mb-2`,children:"Recycling Efficiency"}),p.jsx("p",{className:"text-2xl font-bold text-amber-600",children:"94%"}),p.jsxs("div",{className:"mt-2 flex items-center text-sm text-amber-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsx("span",{children:"3% increase from last month"})]})]})]})]})]}),r==="logistics"&&p.jsxs("div",{className:"space-y-8",children:[p.jsx(A9e,{}),p.jsx(E9e,{})]}),r==="facility"&&p.jsx(O9e,{}),r==="analytics"&&p.jsx(j9e,{}),r==="b2b"&&p.jsx($9e,{})]}),p.jsx("div",{className:"fixed bottom-6 right-6",children:p.jsx("button",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 p-4 rounded-full shadow-lg hover:shadow-xl transition-shadow",children:p.jsx(b_,{className:"h-6 w-6 text-white"})})})]})}function M9e({className:t}){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:p.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}function F9e({className:t}){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:p.jsx("polyline",{points:"18 15 12 9 6 15"})})}function z9e({activeTab:t,setActiveTab:e,onLogout:n,technicianName:r}){const s=[{id:"overview",label:"Overview",icon:c0e},{id:"kanban",label:"Repair Board",icon:Jge},{id:"diagnostics",label:"AI Diagnostics",icon:a7},{id:"inventory",label:"Parts Inventory",icon:yo},{id:"analytics",label:"Performance",icon:d5}];return p.jsxs("div",{className:"h-screen w-64 bg-white/80 backdrop-blur-xl border-r border-white/20 shadow-xl flex flex-col fixed left-0 top-0 z-50 transition-all duration-300",children:[p.jsx("div",{className:"p-6 border-b border-gray-100/50",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:p.jsx(a7,{className:"h-6 w-6 text-white"})}),p.jsxs("div",{children:[p.jsx("h1",{className:"font-bold text-gray-800 text-lg tracking-tight",children:"TechHub"}),p.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Pro Workspace"})]})]})}),p.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:s.map(i=>{const a=i.icon,o=t===i.id;return p.jsxs("button",{onClick:()=>e(i.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group ${o?"bg-emerald-50 text-emerald-600 shadow-sm ring-1 ring-emerald-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[p.jsx(a,{className:`h-5 w-5 transition-colors ${o?"text-emerald-600":"text-gray-400 group-hover:text-gray-600"}`}),p.jsx("span",{className:"font-medium text-sm",children:i.label}),o&&p.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-sm"})]},i.id)})}),p.jsxs("div",{className:"p-4 border-t border-gray-100/50 bg-gray-50/50",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4 px-2",children:[p.jsx("div",{className:"h-9 w-9 rounded-full bg-emerald-100 flex items-center justify-center border border-emerald-200",children:p.jsx(g0,{className:"h-5 w-5 text-emerald-600"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:r}),p.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Technician"})]})]}),p.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg border border-gray-200 text-gray-600 hover:bg-red-50 hover:text-red-600 hover:border-red-100 transition-all duration-200 text-sm font-medium",children:[p.jsx(Dx,{className:"h-4 w-4"}),"Sign Out"]})]})]})}const B9e={Smartphone:p.jsx(w0e,{className:"h-4 w-4"}),Laptop:p.jsx(l0e,{className:"h-4 w-4"}),Desktop:p.jsx(s0e,{className:"h-4 w-4"}),Tablet:p.jsx(_0e,{className:"h-4 w-4"}),Monitor:p.jsx(p0e,{className:"h-4 w-4"}),Printer:p.jsx(g0e,{className:"h-4 w-4"}),Other:p.jsx(ha,{className:"h-4 w-4"})},W9e={high:"bg-red-100 text-red-700 border-red-200",medium:"bg-orange-100 text-orange-700 border-orange-200",low:"bg-blue-100 text-blue-700 border-blue-200"};function iV({repairs:t,onStatusUpdate:e}){const n=[{id:"pending",title:"Pending",color:"bg-yellow-500/10 text-yellow-700 border-yellow-200"},{id:"diagnosing",title:"Diagnosing",color:"bg-purple-500/10 text-purple-700 border-purple-200"},{id:"repairing",title:"In Repair",color:"bg-blue-500/10 text-blue-700 border-blue-200"},{id:"completed",title:"Completed",color:"bg-emerald-500/10 text-emerald-700 border-emerald-200"}],r=s=>t.filter(i=>i.status===s);return p.jsx("div",{className:"h-full overflow-x-auto pb-4",children:p.jsx("div",{className:"flex gap-6 min-w-[1000px] h-full",children:n.map(s=>p.jsxs("div",{className:"flex-1 min-w-[300px] flex flex-col h-full",children:[p.jsxs("div",{className:`flex items-center justify-between p-3 rounded-t-xl border-b-2 ${s.color.replace("bg-","border-").split(" ")[2]} bg-white shadow-sm mb-3`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`w-2.5 h-2.5 rounded-full ${s.color.replace("/10","").split(" ")[0]}`}),p.jsx("h3",{className:"font-semibold text-gray-700",children:s.title}),p.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-100 text-xs font-medium text-gray-600",children:r(s.id).length})]}),p.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:p.jsx(QB,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex-1 bg-gray-50/50 rounded-xl p-2 space-y-3 overflow-y-auto custom-scrollbar border border-gray-100",children:[r(s.id).map(i=>p.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200 group cursor-pointer relative",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold uppercase tracking-wider border ${W9e[i.priority||"medium"]}`,children:i.priority||"Medium"}),p.jsx("button",{className:"text-gray-300 hover:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(QB,{className:"h-4 w-4"})})]}),p.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[p.jsx("div",{className:"p-2 rounded-lg bg-gray-50 text-gray-500 border border-gray-100",children:B9e[i.device_type]||p.jsx(ha,{className:"h-5 w-5"})}),p.jsxs("div",{children:[p.jsxs("h4",{className:"font-semibold text-gray-800 text-sm line-clamp-1",children:[i.device_type," ",i.device_model]}),p.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:i.user_name||"Customer"})]})]}),p.jsx("p",{className:"text-xs text-gray-600 mb-4 line-clamp-2 bg-gray-50 p-2 rounded-lg border border-gray-100/50",children:i.issue_description}),p.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-50",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[p.jsx(Bd,{className:"h-3 w-3"}),p.jsx("span",{children:new Date(i.created_at).toLocaleDateString()})]}),p.jsxs("div",{className:"flex gap-1",children:[s.id==="pending"&&p.jsx("button",{onClick:()=>e(i.id,"assigned"),className:"p-1.5 rounded-lg bg-emerald-50 text-emerald-600 hover:bg-emerald-100 transition-colors",title:"Accept",children:p.jsx(ZB,{className:"h-4 w-4"})}),s.id==="assigned"&&p.jsx("button",{onClick:()=>e(i.id,"diagnosing"),className:"p-1.5 rounded-lg bg-purple-50 text-purple-600 hover:bg-purple-100 transition-colors",title:"Start Diagnosis",children:p.jsx(ha,{className:"h-4 w-4"})}),s.id==="diagnosing"&&p.jsx("button",{onClick:()=>e(i.id,"repairing"),className:"p-1.5 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors",title:"Start Repair",children:p.jsx(ha,{className:"h-4 w-4"})}),s.id==="repairing"&&p.jsx("button",{onClick:()=>e(i.id,"completed"),className:"p-1.5 rounded-lg bg-green-50 text-green-600 hover:bg-green-100 transition-colors",title:"Complete",children:p.jsx(ZB,{className:"h-4 w-4"})})]})]})]},i.id)),r(s.id).length===0&&p.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl",children:[p.jsx(Yd,{className:"h-6 w-6 mb-2 opacity-50"}),p.jsx("span",{className:"text-xs font-medium",children:"No items"})]})]})]},s.id))})})}function U9e(){const[t,e]=R.useState(""),[n,r]=R.useState(!1),[s,i]=R.useState(null),a=()=>{t.trim()&&(r(!0),i(null),setTimeout(()=>{i(o(t)),r(!1)},1500))},o=l=>{const c=l.toLowerCase();return c.includes("screen")||c.includes("cracked")||c.includes("display")?{issue:"Display Panel Damage",confidence:92,severity:"medium",steps:["Inspect display connector for loose connection","Check for physical damage to the LCD/OLED panel","Test touch digitizer responsiveness","Replace screen assembly if physical damage is confirmed"],parts:["LCD Assembly","Adhesive Strips"],estimatedTime:"45-60 mins"}:c.includes("battery")||c.includes("charge")||c.includes("power")?{issue:"Battery Degradation / Charging Port Failure",confidence:88,severity:"low",steps:["Check battery health cycle count","Inspect charging port for debris or damage","Test voltage output of the charging brick","Replace battery if health < 80%"],parts:["Li-ion Battery","Charging Port Module"],estimatedTime:"30-45 mins"}:c.includes("water")||c.includes("liquid")||c.includes("spill")?{issue:"Liquid Damage",confidence:75,severity:"high",steps:["Immediately disconnect power source","Disassemble and inspect motherboard for corrosion","Clean affected areas with isopropyl alcohol","Test individual components for short circuits"],parts:["Motherboard (Potential)","Flex Cables"],estimatedTime:"2-3 hours"}:{issue:"General Hardware Malfunction",confidence:60,severity:"medium",steps:["Run full system diagnostics","Check error logs","Inspect internal connections","Test with known good components"],parts:["Diagnostic Tools"],estimatedTime:"1-2 hours"}};return p.jsxs("div",{className:"h-full flex flex-col max-w-4xl mx-auto",children:[p.jsxs("div",{className:"mb-8 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-indigo-100 rounded-full mb-4 shadow-sm",children:p.jsx(i7,{className:"h-8 w-8 text-indigo-600"})}),p.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"AI Diagnostic Assistant"}),p.jsx("p",{className:"text-gray-500 mt-2",children:"Describe the device symptoms and let AI suggest a repair path."})]}),p.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6 mb-8 transition-all hover:shadow-xl",children:p.jsxs("div",{className:"relative",children:[p.jsx("textarea",{value:t,onChange:l=>e(l.target.value),placeholder:"E.g., iPhone 13 screen is flickering and touch is unresponsive...",className:"w-full h-32 p-4 pr-12 text-gray-700 bg-gray-50 rounded-xl border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none transition-all"}),p.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2",children:p.jsx("button",{onClick:a,disabled:n||!t.trim(),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium text-white shadow-lg shadow-indigo-500/30 transition-all transform active:scale-95 ${n||!t.trim()?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 hover:-translate-y-0.5"}`,children:n?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Analyzing..."]}):p.jsxs(p.Fragment,{children:[p.jsx(i7,{className:"h-4 w-4"}),"Analyze Symptoms"]})})})]})}),s&&p.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4",children:[p.jsx("div",{className:"p-3 bg-red-50 rounded-lg text-red-600",children:p.jsx(Qp,{className:"h-6 w-6"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Likely Issue"}),p.jsx("p",{className:"font-bold text-gray-900",children:s.issue})]})]}),p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4",children:[p.jsx("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:p.jsx(Wi,{className:"h-6 w-6"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Confidence"}),p.jsxs("p",{className:"font-bold text-gray-900",children:[s.confidence,"% Match"]})]})]}),p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm flex items-center gap-4",children:[p.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:p.jsx(Clock,{className:"h-6 w-6"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:"Est. Time"}),p.jsx("p",{className:"font-bold text-gray-900",children:s.estimatedTime})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[p.jsx("div",{className:"px-6 py-4 border-b border-gray-50 bg-gray-50/50",children:p.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[p.jsx(t0e,{className:"h-5 w-5 text-indigo-500"}),"Recommended Steps"]})}),p.jsx("div",{className:"p-6",children:p.jsx("ul",{className:"space-y-4",children:s.steps.map((l,c)=>p.jsxs("li",{className:"flex gap-3",children:[p.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center text-xs font-bold",children:c+1}),p.jsx("span",{className:"text-gray-600 text-sm",children:l})]},c))})})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[p.jsx("div",{className:"px-6 py-4 border-b border-gray-50 bg-gray-50/50",children:p.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[p.jsx(Hge,{className:"h-5 w-5 text-emerald-500"}),"Required Parts"]})}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"flex flex-wrap gap-2",children:s.parts.map((l,c)=>p.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium border border-gray-200",children:l},c))}),p.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx(Qp,{className:"h-5 w-5 text-yellow-600 flex-shrink-0"}),p.jsx("p",{className:"text-xs text-yellow-800",children:"Always verify the device model number before ordering parts. Some components may vary by region."})]})})]})]})]})]})]})}function V9e(){const[t,e]=R.useState(""),[n,r]=R.useState([{id:1,name:"iPhone 13 Screen Assembly",sku:"SCR-IP13-OEM",quantity:4,minStock:5,category:"Screens",price:120},{id:2,name:"Samsung S21 Battery",sku:"BAT-S21-GEN",quantity:12,minStock:8,category:"Batteries",price:45},{id:3,name:"USB-C Charging Port",sku:"PRT-USBC-UNI",quantity:25,minStock:10,category:"Ports",price:15},{id:4,name:"Thermal Paste (4g)",sku:"MSC-THM-4G",quantity:2,minStock:3,category:"Misc",price:8},{id:5,name:"MacBook Air M1 Keyboard",sku:"KBD-MBA-M1",quantity:1,minStock:2,category:"Keyboards",price:85}]),s=n.filter(i=>i.name.toLowerCase().includes(t.toLowerCase())||i.sku.toLowerCase().includes(t.toLowerCase()));return p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Parts Inventory"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Manage stock levels and track usage."})]}),p.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors shadow-sm shadow-emerald-500/20",children:[p.jsx(b_,{className:"h-4 w-4"}),p.jsx("span",{children:"Add New Part"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[p.jsxs("div",{className:"lg:col-span-3 bg-white p-1 rounded-xl border border-gray-200 shadow-sm flex items-center",children:[p.jsx("div",{className:"pl-3 text-gray-400",children:p.jsx(q0,{className:"h-5 w-5"})}),p.jsx("input",{type:"text",placeholder:"Search parts by name or SKU...",value:t,onChange:i=>e(i.target.value),className:"w-full p-3 bg-transparent border-none focus:ring-0 text-gray-700 placeholder-gray-400"}),p.jsx("button",{className:"p-2 mr-1 text-gray-400 hover:bg-gray-50 rounded-lg",children:p.jsx(eR,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-100 p-4 flex items-center gap-3",children:[p.jsx("div",{className:"p-2 bg-red-100 rounded-lg text-red-600",children:p.jsx(Pd,{className:"h-5 w-5"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs text-red-600 font-bold uppercase tracking-wider",children:"Low Stock"}),p.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[n.filter(i=>i.quantity<=i.minStock).length," Items"]})]})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex-1",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-50/50 border-b border-gray-200",children:[p.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Part Details"}),p.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Category"}),p.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Stock Level"}),p.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Unit Price"}),p.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-right",children:"Actions"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(i=>p.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[p.jsx("td",{className:"px-6 py-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"h-10 w-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-500",children:p.jsx(yo,{className:"h-5 w-5"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-gray-900",children:i.name}),p.jsx("p",{className:"text-xs text-gray-500 font-mono",children:i.sku})]})]})}),p.jsx("td",{className:"px-6 py-4",children:p.jsx("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:i.category})}),p.jsx("td",{className:"px-6 py-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full rounded-full ${i.quantity<=i.minStock?"bg-red-500":"bg-emerald-500"}`,style:{width:`${Math.min(i.quantity/(i.minStock*2)*100,100)}%`}})}),p.jsx("span",{className:`text-sm font-medium ${i.quantity<=i.minStock?"text-red-600":"text-gray-600"}`,children:i.quantity}),i.quantity<=i.minStock&&p.jsx(Yd,{className:"h-4 w-4 text-red-500"})]})}),p.jsx("td",{className:"px-6 py-4",children:p.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:["$",i.price.toFixed(2)]})}),p.jsx("td",{className:"px-6 py-4 text-right",children:p.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Edit"})})]},i.id))})]})})})]})}function qie(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qie(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function xr(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qie(t))&&(r&&(r+=" "),r+=e);return r}var H9e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function l6(t){if(typeof t!="string")return!1;var e=H9e;return e.includes(t)}var q9e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],G9e=new Set(q9e);function Gie(t){return typeof t!="string"?!1:G9e.has(t)}function Kie(t){return typeof t=="string"&&t.startsWith("data-")}function Rc(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Gie(n)||Kie(n))&&(e[n]=t[n]);return e}function VE(t){if(t==null)return null;if(R.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Rc(e)}return typeof t=="object"&&!Array.isArray(t)?Rc(t):null}function Ha(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Gie(n)||Kie(n)||l6(n))&&(e[n]=t[n]);return e}function K9e(t){return t==null?null:R.isValidElement(t)?Ha(t.props):typeof t=="object"&&!Array.isArray(t)?Ha(t):null}var X9e=["children","width","height","viewBox","className","style","title","desc"];function E$(){return E$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E$.apply(null,arguments)}function Y9e(t,e){if(t==null)return{};var n,r,s=Z9e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Z9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xie=R.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:i,className:a,style:o,title:l,desc:c}=t,u=Y9e(t,X9e),d=i||{width:r,height:s,x:0,y:0},h=xr("recharts-surface",a);return R.createElement("svg",E$({},Ha(u),{className:h,width:r,height:s,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),R.createElement("title",null,l),R.createElement("desc",null,c),n)}),J9e=["children","className"];function P$(){return P$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P$.apply(null,arguments)}function Q9e(t,e){if(t==null)return{};var n,r,s=eHe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function eHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mc=R.forwardRef((t,e)=>{var{children:n,className:r}=t,s=Q9e(t,J9e),i=xr("recharts-layer",r);return R.createElement("g",P$({className:i},Ha(s),{ref:e}),n)}),tHe=R.createContext(null);function Er(t){return function(){return t}}const Yie=Math.cos,iT=Math.sin,Hu=Math.sqrt,aT=Math.PI,HE=2*aT,O$=Math.PI,j$=2*O$,bg=1e-6,nHe=j$-bg;function Zie(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function rHe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zie;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class sHe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zie:rHe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,a){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,l=r-e,c=s-n,u=a-e,d=o-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>bg)if(!(Math.abs(d*l-c*u)>bg)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let f=r-a,m=s-o,y=l*l+c*c,v=f*f+m*m,x=Math.sqrt(y),b=Math.sqrt(h),_=i*Math.tan((O$-Math.acos((y+h-v)/(2*x*b)))/2),k=_/b,N=_/x;Math.abs(k-1)>bg&&this._append`L${e+k*u},${n+k*d}`,this._append`A${i},${i},0,0,${+(d*f>u*m)},${this._x1=e+N*l},${this._y1=n+N*c}`}}arc(e,n,r,s,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),l=r*Math.sin(s),c=e+o,u=n+l,d=1^a,h=a?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>bg||Math.abs(this._y1-u)>bg)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%j$+j$),h>nHe?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>bg&&this._append`A${r},${r},0,${+(h>=O$)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function c6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new sHe(e)}function u6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jie(t){this._context=t}Jie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function qE(t){return new Jie(t)}function Qie(t){return t[0]}function eae(t){return t[1]}function tae(t,e){var n=Er(!0),r=null,s=qE,i=null,a=c6(o);t=typeof t=="function"?t:t===void 0?Qie:Er(t),e=typeof e=="function"?e:e===void 0?eae:Er(e);function o(l){var c,u=(l=u6(l)).length,d,h=!1,f;for(r==null&&(i=s(f=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(d,c,l),+e(d,c,l));if(f)return i=null,f+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Er(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Er(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Er(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),o):r},o}function PN(t,e,n){var r=null,s=Er(!0),i=null,a=qE,o=null,l=c6(c);t=typeof t=="function"?t:t===void 0?Qie:Er(+t),e=typeof e=="function"?e:Er(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?eae:Er(+n);function c(d){var h,f,m,y=(d=u6(d)).length,v,x=!1,b,_=new Array(y),k=new Array(y);for(i==null&&(o=a(b=l())),h=0;h<=y;++h){if(!(h<y&&s(v=d[h],h,d))===x)if(x=!x)f=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=f;--m)o.point(_[m],k[m]);o.lineEnd(),o.areaEnd()}x&&(_[h]=+t(v,h,d),k[h]=+e(v,h,d),o.point(r?+r(v,h,d):_[h],n?+n(v,h,d):k[h]))}if(b)return o=null,b+""||null}function u(){return tae().defined(s).curve(a).context(i)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Er(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Er(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Er(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Er(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Er(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Er(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Er(!!d),c):s},c.curve=function(d){return arguments.length?(a=d,i!=null&&(o=a(i)),c):a},c.context=function(d){return arguments.length?(d==null?i=o=null:o=a(i=d),c):i},c}class nae{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function iHe(t){return new nae(t,!0)}function aHe(t){return new nae(t,!1)}const d6={draw(t,e){const n=Hu(e/aT);t.moveTo(n,0),t.arc(0,0,n,0,HE)}},oHe={draw(t,e){const n=Hu(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rae=Hu(1/3),lHe=rae*2,cHe={draw(t,e){const n=Hu(e/lHe),r=n*rae;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},uHe={draw(t,e){const n=Hu(e),r=-n/2;t.rect(r,r,n,n)}},dHe=.8908130915292852,sae=iT(aT/10)/iT(7*aT/10),hHe=iT(HE/10)*sae,fHe=-Yie(HE/10)*sae,pHe={draw(t,e){const n=Hu(e*dHe),r=hHe*n,s=fHe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const a=HE*i/5,o=Yie(a),l=iT(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*s,l*r+o*s)}t.closePath()}},b3=Hu(3),mHe={draw(t,e){const n=-Hu(e/(b3*3));t.moveTo(0,n*2),t.lineTo(-b3*n,-n),t.lineTo(b3*n,-n),t.closePath()}},dc=-.5,hc=Hu(3)/2,$$=1/Hu(12),gHe=($$/2+1)*3,yHe={draw(t,e){const n=Hu(e/gHe),r=n/2,s=n*$$,i=r,a=n*$$+n,o=-i,l=a;t.moveTo(r,s),t.lineTo(i,a),t.lineTo(o,l),t.lineTo(dc*r-hc*s,hc*r+dc*s),t.lineTo(dc*i-hc*a,hc*i+dc*a),t.lineTo(dc*o-hc*l,hc*o+dc*l),t.lineTo(dc*r+hc*s,dc*s-hc*r),t.lineTo(dc*i+hc*a,dc*a-hc*i),t.lineTo(dc*o+hc*l,dc*l-hc*o),t.closePath()}};function vHe(t,e){let n=null,r=c6(s);t=typeof t=="function"?t:Er(t||d6),e=typeof e=="function"?e:Er(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Er(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Er(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function oT(){}function lT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function iae(t){this._context=t}iae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xHe(t){return new iae(t)}function aae(t){this._context=t}aae.prototype={areaStart:oT,areaEnd:oT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bHe(t){return new aae(t)}function oae(t){this._context=t}oae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:lT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wHe(t){return new oae(t)}function lae(t){this._context=t}lae.prototype={areaStart:oT,areaEnd:oT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function _He(t){return new lae(t)}function aV(t){return t<0?-1:1}function oV(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),a=(n-t._y1)/(s||r<0&&-0),o=(i*s+a*r)/(r+s);return(aV(i)+aV(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(o))||0}function lV(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function w3(t,e,n){var r=t._x0,s=t._y0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,s+o*e,i-o,a-o*n,i,a)}function cT(t){this._context=t}cT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:w3(this,this._t0,lV(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,w3(this,lV(this,n=oV(this,t,e)),n);break;default:w3(this,this._t0,n=oV(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function cae(t){this._context=new uae(t)}(cae.prototype=Object.create(cT.prototype)).point=function(t,e){cT.prototype.point.call(this,e,t)};function uae(t){this._context=t}uae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function kHe(t){return new cT(t)}function SHe(t){return new cae(t)}function dae(t){this._context=t}dae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=cV(t),s=cV(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function cV(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),a=new Array(n);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,a[e]-=r*a[e-1];for(s[n-1]=a[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function NHe(t){return new dae(t)}function GE(t,e){this._context=t,this._t=e}GE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function CHe(t){return new GE(t,.5)}function THe(t){return new GE(t,0)}function IHe(t){return new GE(t,1)}function $0(t,e){if((a=t.length)>1)for(var n=1,r,s,i=t[e[0]],a,o=i.length;n<a;++n)for(s=i,i=t[e[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function D$(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function AHe(t,e){return t[e]}function EHe(t){const e=[];return e.key=t,e}function PHe(){var t=Er([]),e=D$,n=$0,r=AHe;function s(i){var a=Array.from(t.apply(this,arguments),EHe),o,l=a.length,c=-1,u;for(const d of i)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,i)]).data=d;for(o=0,u=u6(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Er(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Er(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?D$:typeof i=="function"?i:Er(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??$0,s):n},s}function OHe(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,a;s<i;++s){for(a=n=0;n<r;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<r;++n)t[n][s][1]/=a}$0(t,e)}}function jHe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var a=0,o=0;a<s;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}$0(t,e)}}function $He(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,a;r<i;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],d=u[r][1]||0,h=u[r-1][1]||0,f=(d-h)/2,m=0;m<o;++m){var y=t[e[m]],v=y[r][1]||0,x=y[r-1][1]||0;f+=v-x}l+=d,c+=f*d}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,$0(t,e)}}var KE={},hae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(hae);var h6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(h6);var XE={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(XE);var YE={},fae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(fae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fae,n=XE;function r(s){if(Array.isArray(s))return s.map(n.toKey);if(typeof s=="symbol")return[s];s=e.toString(s);const i=[],a=s.length;if(a===0)return i;let o=0,l="",c="",u=!1;for(s.charCodeAt(0)===46&&(i.push(""),o++);o<a;){const d=s[o];c?d==="\\"&&o+1<a?(o++,l+=s[o]):d===c?c="":l+=d:u?d==='"'||d==="'"?c=d:d==="]"?(u=!1,i.push(l),l=""):l+=d:d==="["?(u=!0,l&&(i.push(l),l="")):d==="."?l&&(i.push(l),l=""):l+=d,o++}return l&&i.push(l),i}t.toPath=r})(YE);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hae,n=h6,r=XE,s=YE;function i(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?n.isDeepKey(l)?i(o,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let d=0;d<l.length;d++){if(u==null||e.isUnsafeProperty(l[d]))return c;u=u[l[d]]}return u===void 0?c:u}t.get=i})(KE);var DHe=KE.get;const ZE=Bc(DHe);var LHe=4;function Cp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:LHe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function xs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((s,i,a)=>{var o=n[a-1];return typeof o=="string"?s+o+i:o!==void 0?s+Cp(o)+i:s+i},"")}var Tc=t=>t===0?0:t>0?1:-1,qd=t=>typeof t=="number"&&t!=+t,D0=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Bt=t=>(typeof t=="number"||t instanceof Number)&&!qd(t),Gd=t=>Bt(t)||typeof t=="string",RHe=0,B2=t=>{var e=++RHe;return"".concat(t||"").concat(e)},hm=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Bt(e)&&typeof e!="string")return r;var i;if(D0(e)){if(n==null)return r;var a=e.indexOf("%");i=n*parseFloat(e.slice(0,a))/100}else i=+e;return qd(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},pae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qs(t,e,n){return Bt(t)&&Bt(e)?Cp(t+n*(e-t)):e}function mae(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):ZE(r,e))===n)}var Vi=t=>t===null||typeof t>"u",lS=t=>Vi(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function el(t){return t!=null}function ly(){}var MHe=["type","size","sizeType"];function L$(){return L$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L$.apply(null,arguments)}function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(r){FHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FHe(t,e,n){return(e=zHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zHe(t){var e=BHe(t,"string");return typeof e=="symbol"?e:e+""}function BHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WHe(t,e){if(t==null)return{};var n,r,s=UHe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function UHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gae={symbolCircle:d6,symbolCross:oHe,symbolDiamond:cHe,symbolSquare:uHe,symbolStar:pHe,symbolTriangle:mHe,symbolWye:yHe},VHe=Math.PI/180,HHe=t=>{var e="symbol".concat(lS(t));return gae[e]||d6},qHe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*VHe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},GHe=(t,e)=>{gae["symbol".concat(lS(t))]=e},yae=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=WHe(t,MHe),i=dV(dV({},s),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var h=HHe(a),f=vHe().type(h).size(qHe(n,r,a)),m=f();if(m!==null)return m},{className:l,cx:c,cy:u}=i,d=Ha(i);return Bt(c)&&Bt(u)&&Bt(n)?R.createElement("path",L$({},d,{className:xr("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};yae.registerSymbol=GHe;var vae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,f6=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(R.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{l6(s)&&(r[s]=i=>n[s](n,i))}),r},KHe=(t,e,n)=>r=>(t(e,n,r),null),XHe=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var i=t[s];l6(s)&&typeof i=="function"&&(r||(r={}),r[s]=KHe(i,e,n))}),r};function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function YHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){ZHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZHe(t,e,n){return(e=JHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JHe(t){var e=QHe(t,"string");return typeof e=="symbol"?e:e+""}function QHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xa(t,e){var n=YHe({},t),r=e,s=Object.keys(e),i=s.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return i}var xae={},bae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let i=0;i<n.length;i++){const a=n[i],o=r(a,i,n);s.has(o)||s.set(o,a)}return Array.from(s.values())}t.uniqBy=e})(bae);var wae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...s){return n.apply(this,s.slice(0,r))}}t.ary=e})(wae);var p6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(p6);var _ae={},JE={},kae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(kae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kae;function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(JE);var Sae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Sae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JE,n=Sae;function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(_ae);var Nae={},Cae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KE;function n(r){return function(s){return e.get(s,r)}}t.property=n})(Cae);var Tae={},m6={},Iae={},g6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(g6);var y6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(y6);var v6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(v6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=g6,n=y6,r=v6;function s(u,d,h){return typeof h!="function"?s(u,d,()=>{}):i(u,d,function f(m,y,v,x,b,_){const k=h(m,y,v,x,b,_);return k!==void 0?!!k:i(m,y,f,_)},new Map)}function i(u,d,h,f){if(d===u)return!0;switch(typeof d){case"object":return a(u,d,h,f);case"function":return Object.keys(d).length>0?i(u,{...d},h,f):r.isEqualsSameValueZero(u,d);default:return e.isObject(u)?typeof d=="string"?d==="":!0:r.isEqualsSameValueZero(u,d)}}function a(u,d,h,f){if(d==null)return!0;if(Array.isArray(d))return l(u,d,h,f);if(d instanceof Map)return o(u,d,h,f);if(d instanceof Set)return c(u,d,h,f);const m=Object.keys(d);if(u==null||n.isPrimitive(u))return m.length===0;if(m.length===0)return!0;if(f!=null&&f.has(d))return f.get(d)===u;f==null||f.set(d,u);try{for(let y=0;y<m.length;y++){const v=m[y];if(!n.isPrimitive(u)&&!(v in u)||d[v]===void 0&&u[v]!==void 0||d[v]===null&&u[v]!==null||!h(u[v],d[v],v,u,d,f))return!1}return!0}finally{f==null||f.delete(d)}}function o(u,d,h,f){if(d.size===0)return!0;if(!(u instanceof Map))return!1;for(const[m,y]of d.entries()){const v=u.get(m);if(h(v,y,m,u,d,f)===!1)return!1}return!0}function l(u,d,h,f){if(d.length===0)return!0;if(!Array.isArray(u))return!1;const m=new Set;for(let y=0;y<d.length;y++){const v=d[y];let x=!1;for(let b=0;b<u.length;b++){if(m.has(b))continue;const _=u[b];let k=!1;if(h(_,v,y,u,d,f)&&(k=!0),k){m.add(b),x=!0;break}}if(!x)return!1}return!0}function c(u,d,h,f){return d.size===0?!0:u instanceof Set?l([...u],[...d],h,f):!1}t.isMatchWith=s,t.isSetMatch=c})(Iae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iae;function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n})(m6);var Aae={},x6={},Eae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Eae);var QE={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(QE);var b6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",d="[object Function]",h="[object ArrayBuffer]",f="[object Object]",m="[object Error]",y="[object DataView]",v="[object Uint8Array]",x="[object Uint8ClampedArray]",b="[object Uint16Array]",_="[object Uint32Array]",k="[object BigUint64Array]",N="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",C="[object BigInt64Array]",P="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=h,t.arrayTag=u,t.bigInt64ArrayTag=C,t.bigUint64ArrayTag=k,t.booleanTag=s,t.dataViewTag=y,t.dateTag=o,t.errorTag=m,t.float32ArrayTag=P,t.float64ArrayTag=$,t.functionTag=d,t.int16ArrayTag=A,t.int32ArrayTag=T,t.int8ArrayTag=N,t.mapTag=l,t.numberTag=r,t.objectTag=f,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=b,t.uint32ArrayTag=_,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=x})(b6);var Pae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Pae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eae,n=QE,r=b6,s=y6,i=Pae;function a(u,d){return o(u,void 0,u,new Map,d)}function o(u,d,h,f=new Map,m=void 0){const y=m==null?void 0:m(u,d,h,f);if(y!==void 0)return y;if(s.isPrimitive(u))return u;if(f.has(u))return f.get(u);if(Array.isArray(u)){const v=new Array(u.length);f.set(u,v);for(let x=0;x<u.length;x++)v[x]=o(u[x],x,h,f,m);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;f.set(u,v);for(const[x,b]of u)v.set(x,o(b,x,h,f,m));return v}if(u instanceof Set){const v=new Set;f.set(u,v);for(const x of u)v.add(o(x,void 0,h,f,m));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);f.set(u,v);for(let x=0;x<u.length;x++)v[x]=o(u[x],x,h,f,m);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return f.set(u,v),l(v,u,h,f,m),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return f.set(u,v),l(v,u,h,f,m),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return f.set(u,v),l(v,u,h,f,m),v}if(u instanceof Error){const v=new u.constructor;return f.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,l(v,u,h,f,m),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return f.set(u,v),l(v,u,h,f,m),v}if(u instanceof Number){const v=new Number(u.valueOf());return f.set(u,v),l(v,u,h,f,m),v}if(u instanceof String){const v=new String(u.valueOf());return f.set(u,v),l(v,u,h,f,m),v}if(typeof u=="object"&&c(u)){const v=Object.create(Object.getPrototypeOf(u));return f.set(u,v),l(v,u,h,f,m),v}return u}function l(u,d,h=u,f,m){const y=[...Object.keys(d),...e.getSymbols(d)];for(let v=0;v<y.length;v++){const x=y[v],b=Object.getOwnPropertyDescriptor(u,x);(b==null||b.writable)&&(u[x]=o(d[x],x,h,f,m))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(x6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x6;function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m6,n=Aae;function r(s){return s=n.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=r})(Tae);var Oae={},jae={},$ae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x6,n=QE,r=b6;function s(i,a){return e.cloneDeepWith(i,(o,l,c,u)=>{const d=a==null?void 0:a(o,l,c,u);if(d!==void 0)return d;if(typeof i=="object"){if(n.getTag(i)===r.objectTag&&typeof i.constructor!="function"){const h={};return u.set(i,h),e.copyProperties(h,i,c,u),h}switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case r.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}}})}t.cloneDeepWith=s})($ae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ae;function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(jae);var Dae={},w6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(w6);var Lae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QE;function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Lae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h6,n=w6,r=Lae,s=YE;function i(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=s.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const d=l[u];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}t.has=i})(Dae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m6,n=XE,r=jae,s=KE,i=Dae;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const u=s.get(c,o);return u===void 0?i.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=a})(Oae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=p6,n=Cae,r=Tae,s=Oae;function i(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=i})(Nae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bae,n=wae,r=p6,s=_ae,i=Nae;function a(o,l=r.identity){return s.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(i.iteratee(l),1)):[]}t.uniqBy=a})(xae);var eqe=xae.uniqBy;const fV=Bc(eqe);function tqe(t,e,n){return e===!0?fV(t,n):typeof e=="function"?fV(t,e):t}var Rae={exports:{}},Mae={},Fae={exports:{}},zae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx=R;function nqe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rqe=typeof Object.is=="function"?Object.is:nqe,sqe=bx.useState,iqe=bx.useEffect,aqe=bx.useLayoutEffect,oqe=bx.useDebugValue;function lqe(t,e){var n=e(),r=sqe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return aqe(function(){s.value=n,s.getSnapshot=e,_3(s)&&i({inst:s})},[t,n,e]),iqe(function(){return _3(s)&&i({inst:s}),t(function(){_3(s)&&i({inst:s})})},[t]),oqe(n),n}function _3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rqe(t,n)}catch{return!0}}function cqe(t,e){return e()}var uqe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cqe:lqe;zae.useSyncExternalStore=bx.useSyncExternalStore!==void 0?bx.useSyncExternalStore:uqe;Fae.exports=zae;var dqe=Fae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eP=R,hqe=dqe;function fqe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pqe=typeof Object.is=="function"?Object.is:fqe,mqe=hqe.useSyncExternalStore,gqe=eP.useRef,yqe=eP.useEffect,vqe=eP.useMemo,xqe=eP.useDebugValue;Mae.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=gqe(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=vqe(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&a.hasValue){var m=a.value;if(s(m,f))return d=m}return d=f}if(m=d,pqe(u,f))return m;var y=r(f);return s!==void 0&&s(m,y)?(u=f,m):(u=f,d=y)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var o=mqe(t,i[0],i[1]);return yqe(function(){a.hasValue=!0,a.value=o},[o]),xqe(o),o};Rae.exports=Mae;var bqe=Rae.exports,_6=R.createContext(null),wqe=t=>t,Xi=()=>{var t=R.useContext(_6);return t?t.store.dispatch:wqe},TC=()=>{},_qe=()=>TC,kqe=(t,e)=>t===e;function Zt(t){var e=R.useContext(_6),n=R.useMemo(()=>e?r=>{if(r!=null)return t(r)}:TC,[e,t]);return bqe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:_qe,e?e.store.getState:TC,e?e.store.getState:TC,n,kqe)}function Sqe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Nqe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Cqe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var pV=t=>Array.isArray(t)?t:[t];function Tqe(t){const e=Array.isArray(t[0])?t[0]:t;return Cqe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Iqe(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var Aqe=class{constructor(t){this.value=t}deref(){return this.value}},Eqe=typeof WeakRef<"u"?WeakRef:Aqe,Pqe=0,mV=1;function ON(){return{s:Pqe,v:void 0,o:null,p:null}}function Bae(t,e={}){let n=ON();const{resultEqualityCheck:r}=e;let s,i=0;function a(){var d;let o=n;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const v=y.get(m);v===void 0?(o=ON(),y.set(m,o)):o=v}else{let y=o.p;y===null&&(o.p=y=new Map);const v=y.get(m);v===void 0?(o=ON(),y.set(m,o)):o=v}}const c=o;let u;if(o.s===mV)u=o.v;else if(u=t.apply(null,arguments),i++,r){const h=((d=s==null?void 0:s.deref)==null?void 0:d.call(s))??s;h!=null&&r(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new Eqe(u):u}return c.s=mV,c.v=u,u}return a.clearCache=()=>{n=ON(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function Oqe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,a=0,o,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),Sqe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=Bae,argsMemoizeOptions:m=[]}=u,y=pV(h),v=pV(m),x=Tqe(s),b=d(function(){return i++,c.apply(null,arguments)},...y),_=f(function(){a++;const N=Iqe(x,arguments);return o=b.apply(null,N),o},...v);return Object.assign(_,{resultFunc:c,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:f})};return Object.assign(r,{withTypes:()=>r}),r}var Ye=Oqe(Bae),jqe=Object.assign((t,e=Ye)=>{Nqe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>jqe}),Wae={},Uae={},Vae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const a=e(r),o=e(s);if(a===o&&a===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?o-a:a-o}return 0};t.compareValues=n})(Vae);var Hae={},k6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(k6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k6,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||a!=null&&Object.hasOwn(a,i)}t.isKey=s})(Hae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vae,n=Hae,r=YE;function s(i,a,o,l){if(i==null)return[];o=l?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(f=>String(f));const c=(f,m)=>{let y=f;for(let v=0;v<m.length&&y!=null;++v)y=y[m[v]];return y},u=(f,m)=>m==null||f==null?m:typeof f=="object"&&"key"in f?Object.hasOwn(m,f.key)?m[f.key]:c(m,f.path):typeof f=="function"?f(m):Array.isArray(f)?c(m,f):typeof m=="object"?m[f]:m,d=a.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||n.isKey(f)?f:{key:f,path:r.toPath(f)}));return i.map(f=>({original:f,criteria:d.map(m=>u(m,f))})).slice().sort((f,m)=>{for(let y=0;y<d.length;y++){const v=e.compareValues(f.criteria[y],m.criteria[y],o[y]);if(v!==0)return v}return 0}).map(f=>f.original)}t.orderBy=s})(Uae);var qae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],i=Math.floor(r),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<i?a(u,l+1):s.push(u)}};return a(n,0),s}t.flatten=e})(qae);var S6={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=w6,n=JE,r=g6,s=v6;function i(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.isEqualsSameValueZero(l[o],a):!1}t.isIterateeCall=i})(S6);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uae,n=qae,r=S6;function s(i,...a){const o=a.length;return o>1&&r.isIterateeCall(i,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(i,n.flatten(a),["asc"])}t.sortBy=s})(Wae);var $qe=Wae.sortBy;const tP=Bc($qe);var Gae=t=>t.legend.settings,Dqe=t=>t.legend.size,Lqe=t=>t.legend.payload;Ye([Lqe,Gae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?tP(r,n):r});var jN=1;function Rqe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=R.useState({height:0,left:0,top:0,width:0}),r=R.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-e.height)>jN||Math.abs(a.left-e.left)>jN||Math.abs(a.top-e.top)>jN||Math.abs(a.width-e.width)>jN)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ia(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Mqe=typeof Symbol=="function"&&Symbol.observable||"@@observable",gV=Mqe,k3=()=>Math.random().toString(36).substring(7).split("").join("."),Fqe={INIT:`@@redux/INIT${k3()}`,REPLACE:`@@redux/REPLACE${k3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${k3()}`},uT=Fqe;function N6(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Kae(t,e,n){if(typeof t!="function")throw new Error(ia(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ia(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ia(1));return n(Kae)(t,e)}let r=t,s=e,i=new Map,a=i,o=0,l=!1;function c(){a===i&&(a=new Map,i.forEach((v,x)=>{a.set(x,v)}))}function u(){if(l)throw new Error(ia(3));return s}function d(v){if(typeof v!="function")throw new Error(ia(4));if(l)throw new Error(ia(5));let x=!0;c();const b=o++;return a.set(b,v),function(){if(x){if(l)throw new Error(ia(6));x=!1,c(),a.delete(b),i=null}}}function h(v){if(!N6(v))throw new Error(ia(7));if(typeof v.type>"u")throw new Error(ia(8));if(typeof v.type!="string")throw new Error(ia(17));if(l)throw new Error(ia(9));try{l=!0,s=r(s,v)}finally{l=!1}return(i=a).forEach(b=>{b()}),v}function f(v){if(typeof v!="function")throw new Error(ia(10));r=v,h({type:uT.REPLACE})}function m(){const v=d;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(ia(11));function b(){const k=x;k.next&&k.next(u())}return b(),{unsubscribe:v(b)}},[gV](){return this}}}return h({type:uT.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:f,[gV]:m}}function zqe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:uT.INIT})>"u")throw new Error(ia(12));if(typeof n(void 0,{type:uT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ia(13))})}function Xae(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{zqe(n)}catch(i){s=i}return function(a={},o){if(s)throw s;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],h=n[d],f=a[d],m=h(f,o);if(typeof m>"u")throw o&&o.type,new Error(ia(14));c[d]=m,l=l||m!==f}return l=l||r.length!==Object.keys(a).length,l?c:a}}function dT(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Bqe(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(ia(15))};const a={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},o=t.map(l=>l(a));return i=dT(...o)(s.dispatch),{...s,dispatch:i}}}function Yae(t){return N6(t)&&"type"in t&&typeof t.type=="string"}var Zae=Symbol.for("immer-nothing"),yV=Symbol.for("immer-draftable"),No=Symbol.for("immer-state");function Su(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ol=Object,wx=Ol.getPrototypeOf,hT="constructor",nP="prototype",R$="configurable",fT="enumerable",IC="writable",W2="value",sf=t=>!!t&&!!t[No];function zu(t){var e;return t?Jae(t)||sP(t)||!!t[yV]||!!((e=t[hT])!=null&&e[yV])||iP(t)||aP(t):!1}var Wqe=Ol[nP][hT].toString(),vV=new WeakMap;function Jae(t){if(!t||!C6(t))return!1;const e=wx(t);if(e===null||e===Ol[nP])return!0;const n=Ol.hasOwnProperty.call(e,hT)&&e[hT];if(n===Object)return!0;if(!lv(n))return!1;let r=vV.get(n);return r===void 0&&(r=Function.toString.call(n),vV.set(n,r)),r===Wqe}function rP(t,e,n=!0){cS(t)===0?(n?Reflect.ownKeys(t):Ol.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function cS(t){const e=t[No];return e?e.type_:sP(t)?1:iP(t)?2:aP(t)?3:0}var xV=(t,e,n=cS(t))=>n===2?t.has(e):Ol[nP].hasOwnProperty.call(t,e),M$=(t,e,n=cS(t))=>n===2?t.get(e):t[e],pT=(t,e,n,r=cS(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Uqe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sP=Array.isArray,iP=t=>t instanceof Map,aP=t=>t instanceof Set,C6=t=>typeof t=="object",lv=t=>typeof t=="function",S3=t=>typeof t=="boolean";function Vqe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Ph=t=>t.copy_||t.base_,T6=t=>t.modified_?t.copy_:t.base_;function F$(t,e){if(iP(t))return new Map(t);if(aP(t))return new Set(t);if(sP(t))return Array[nP].slice.call(t);const n=Jae(t);if(e===!0||e==="class_only"&&!n){const r=Ol.getOwnPropertyDescriptors(t);delete r[No];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o[IC]===!1&&(o[IC]=!0,o[R$]=!0),(o.get||o.set)&&(r[a]={[R$]:!0,[IC]:!0,[fT]:o[fT],[W2]:t[a]})}return Ol.create(wx(t),r)}else{const r=wx(t);if(r!==null&&n)return{...t};const s=Ol.create(r);return Ol.assign(s,t)}}function I6(t,e=!1){return oP(t)||sf(t)||!zu(t)||(cS(t)>1&&Ol.defineProperties(t,{set:$N,add:$N,clear:$N,delete:$N}),Ol.freeze(t),e&&rP(t,(n,r)=>{I6(r,!0)},!1)),t}function Hqe(){Su(2)}var $N={[W2]:Hqe};function oP(t){return t===null||!C6(t)?!0:Ol.isFrozen(t)}var mT="MapSet",z$="Patches",bV="ArrayMethods",Qae={};function L0(t){const e=Qae[t];return e||Su(0,t),e}var wV=t=>!!Qae[t],U2,eoe=()=>U2,qqe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:wV(mT)?L0(mT):void 0,arrayMethodsPlugin_:wV(bV)?L0(bV):void 0});function _V(t,e){e&&(t.patchPlugin_=L0(z$),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function B$(t){W$(t),t.drafts_.forEach(Gqe),t.drafts_=null}function W$(t){t===U2&&(U2=t.parent_)}var kV=t=>U2=qqe(U2,t);function Gqe(t){const e=t[No];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[No].modified_&&(B$(e),Su(4)),zu(t)&&(t=NV(e,t));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(n[No].base_,t,e)}else t=NV(e,n);return Kqe(e,t,!0),B$(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Zae?t:void 0}function NV(t,e){if(oP(e))return e;const n=e[No];if(!n)return gT(e,t.handledSet_,t);if(!lP(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);roe(n,t)}return n.copy_}function Kqe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&I6(e,n)}function toe(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var lP=(t,e)=>t.scope_===e,Xqe=[];function noe(t,e,n,r){const s=Ph(t),i=t.type_;if(r!==void 0&&M$(s,r,i)===e){pT(s,r,n,i);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;rP(s,(l,c)=>{if(sf(c)){const u=o.get(c)||[];u.push(l),o.set(c,u)}})}const a=t.draftLocations_.get(e)??Xqe;for(const o of a)pT(s,o,n,i)}function Yqe(t,e,n){t.callbacks_.push(function(s){var o;const i=e;if(!i||!lP(i,s))return;(o=s.mapSetPlugin_)==null||o.fixSetContents(i);const a=T6(i);noe(t,i.draft_??i,a,n),roe(i,s)})}function roe(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const i=s.getPath(t);i&&s.generatePatches_(t,i,e)}toe(t)}}function Zqe(t,e,n){const{scope_:r}=t;if(sf(n)){const s=n[No];lP(s,r)&&s.callbacks_.push(function(){AC(t);const a=T6(s);noe(t,n,a,e)})}else zu(n)&&t.callbacks_.push(function(){const i=Ph(t);t.type_===3?i.has(n)&&gT(n,r.handledSet_,r):M$(i,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&gT(M$(t.copy_,e,t.type_),r.handledSet_,r)})}function gT(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||sf(t)||e.has(t)||!zu(t)||oP(t)||(e.add(t),rP(t,(r,s)=>{if(sf(s)){const i=s[No];if(lP(i,n)){const a=T6(i);pT(t,r,a,t.type_),toe(i)}}else zu(s)&&gT(s,e,n)})),t}function Jqe(t,e){const n=sP(t),r={type_:n?1:0,scope_:e?e.scope_:eoe(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=r,i=yT;n&&(s=[r],i=V2);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,[o,r]}var yT={get(t,e){if(e===No)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const s=Ph(t);if(!xV(s,e,t.type_))return Qqe(t,s,e);const i=s[e];if(t.finalized_||!zu(i)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&Vqe(e))return i;if(i===N3(t.base_,e)){AC(t);const a=t.type_===1?+e:e,o=V$(t.scope_,i,t,a);return t.copy_[a]=o}return i},has(t,e){return e in Ph(t)},ownKeys(t){return Reflect.ownKeys(Ph(t))},set(t,e,n){const r=soe(Ph(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=N3(Ph(t),e),i=s==null?void 0:s[No];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Uqe(n,s)&&(n!==void 0||xV(t.base_,e,t.type_)))return!0;AC(t),U$(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Zqe(t,e,n)),!0},deleteProperty(t,e){return AC(t),N3(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),U$(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ph(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[IC]:!0,[R$]:t.type_!==1||e!=="length",[fT]:r[fT],[W2]:n[e]}},defineProperty(){Su(11)},getPrototypeOf(t){return wx(t.base_)},setPrototypeOf(){Su(12)}},V2={};for(let t in yT){let e=yT[t];V2[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}V2.deleteProperty=function(t,e){return V2.set.call(this,t,e,void 0)};V2.set=function(t,e,n){return yT.set.call(this,t[0],e,n,t[0])};function N3(t,e){const n=t[No];return(n?Ph(n):t)[e]}function Qqe(t,e,n){var s;const r=soe(e,n);return r?W2 in r?r[W2]:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function soe(t,e){if(!(e in t))return;let n=wx(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=wx(n)}}function U$(t){t.modified_||(t.modified_=!0,t.parent_&&U$(t.parent_))}function AC(t){t.copy_||(t.assigned_=new Map,t.copy_=F$(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var eGe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,s)=>{if(lv(n)&&!lv(r)){const a=r;r=n;const o=this;return function(c=a,...u){return o.produce(c,d=>r.call(this,d,...u))}}lv(r)||Su(6),s!==void 0&&!lv(s)&&Su(7);let i;if(zu(n)){const a=kV(this),o=V$(a,n,void 0);let l=!0;try{i=r(o),l=!1}finally{l?B$(a):W$(a)}return _V(a,s),SV(i,a)}else if(!n||!C6(n)){if(i=r(n),i===void 0&&(i=n),i===Zae&&(i=void 0),this.autoFreeze_&&I6(i,!0),s){const a=[],o=[];L0(z$).generateReplacementPatches_(n,i,{patches_:a,inversePatches_:o}),s(a,o)}return i}else Su(1,n)},this.produceWithPatches=(n,r)=>{if(lv(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let s,i;return[this.produce(n,r,(o,l)=>{s=o,i=l}),s,i]},S3(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),S3(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),S3(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zu(e)||Su(8),sf(e)&&(e=Ou(e));const n=kV(this),r=V$(n,e,void 0);return r[No].isManual_=!0,W$(n),r}finishDraft(e,n){const r=e&&e[No];(!r||!r.isManual_)&&Su(9);const{scope_:s}=r;return _V(s,n),SV(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const i=n[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(n=n.slice(r+1));const s=L0(z$).applyPatches_;return sf(e)?s(e,n):this.produce(e,i=>s(i,n))}};function V$(t,e,n,r){const[s,i]=iP(e)?L0(mT).proxyMap_(e,n):aP(e)?L0(mT).proxySet_(e,n):Jqe(e,n);return((n==null?void 0:n.scope_)??eoe()).drafts_.push(s),i.callbacks_=(n==null?void 0:n.callbacks_)??[],i.key_=r,n&&r!==void 0?Yqe(n,i,r):i.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(i);const{patchPlugin_:c}=l;i.modified_&&c&&c.generatePatches_(i,[],l)}),s}function Ou(t){return sf(t)||Su(10,t),ioe(t)}function ioe(t){if(!zu(t)||oP(t))return t;const e=t[No];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=F$(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=F$(t,!0);return rP(n,(s,i)=>{pT(n,s,ioe(i))},r),e&&(e.finalized_=!1),n}var tGe=new eGe,aoe=tGe.produce;function ooe(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var nGe=ooe(),rGe=ooe,sGe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dT:dT.apply(null,arguments)};function Fc(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(Ll(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Yae(r)&&r.type===t,n}var loe=class pw extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,pw.prototype)}static get[Symbol.species](){return pw}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new pw(...e[0].concat(this)):new pw(...e.concat(this))}};function CV(t){return zu(t)?aoe(t,()=>{}):t}function DN(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function iGe(t){return typeof t=="boolean"}var aGe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new loe;return n&&(iGe(n)?a.push(nGe):a.push(rGe(n.extraArgument))),a},coe="RTK_autoBatch",Yr=()=>t=>({payload:t,meta:{[coe]:!0}}),TV=t=>e=>{setTimeout(e,t)},uoe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TV(10):t.type==="callback"?t.queueNotification:TV(t.timeout),c=()=>{a=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>s&&u(),h=r.subscribe(d);return o.add(u),()=>{h(),o.delete(u)}},dispatch(u){var d;try{return s=!((d=u==null?void 0:u.meta)!=null&&d[coe]),i=!s,i&&(a||(a=!0,l(c))),r.dispatch(u)}finally{s=!0}}})},oGe=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new loe(t);return r&&s.push(uoe(typeof r=="object"?r:void 0)),s};function lGe(t){const e=aGe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(N6(n))o=Xae(n);else throw new Error(Ll(1));let l;typeof r=="function"?l=r(e):l=e();let c=dT;s&&(c=sGe({trace:!1,...typeof s=="object"&&s}));const u=Bqe(...l),d=oGe(u);let h=typeof a=="function"?a(d):d();const f=c(...h);return Kae(o,i,f)}function doe(t){const e={},n=[];let r;const s={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Ll(28));if(o in e)throw new Error(Ll(29));return e[o]=a,s},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function cGe(t){return typeof t=="function"}function uGe(t,e){let[n,r,s]=doe(e),i;if(cGe(t))i=()=>CV(t());else{const o=CV(t);i=()=>o}function a(o=i(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,d)=>{if(d)if(sf(u)){const f=d(u,l);return f===void 0?u:f}else{if(zu(u))return aoe(u,h=>d(h,l));{const h=d(u,l);if(h===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return u},o)}return a.getInitialState=i,a}var dGe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hGe=(t=21)=>{let e="",n=t;for(;n--;)e+=dGe[Math.random()*64|0];return e},fGe=Symbol.for("rtk-slice-createasyncthunk");function pGe(t,e){return`${t}/${e}`}function mGe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[fGe];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(Ll(11));const o=(typeof s.reducers=="function"?s.reducers(yGe()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(k,N){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(Ll(12));if(A in c.sliceCaseReducersByType)throw new Error(Ll(13));return c.sliceCaseReducersByType[A]=N,u},addMatcher(k,N){return c.sliceMatchers.push({matcher:k,reducer:N}),u},exposeAction(k,N){return c.actionCreators[k]=N,u},exposeCaseReducer(k,N){return c.sliceCaseReducersByName[k]=N,u}};l.forEach(k=>{const N=o[k],A={reducerName:k,type:pGe(i,k),createNotation:typeof s.reducers=="function"};xGe(N)?wGe(A,N,u,e):vGe(A,N,u)});function d(){const[k={},N=[],A=void 0]=typeof s.extraReducers=="function"?doe(s.extraReducers):[s.extraReducers],T={...k,...c.sliceCaseReducersByType};return uGe(s.initialState,C=>{for(let P in T)C.addCase(P,T[P]);for(let P of c.sliceMatchers)C.addMatcher(P.matcher,P.reducer);for(let P of N)C.addMatcher(P.matcher,P.reducer);A&&C.addDefaultCase(A)})}const h=k=>k,f=new Map,m=new WeakMap;let y;function v(k,N){return y||(y=d()),y(k,N)}function x(){return y||(y=d()),y.getInitialState()}function b(k,N=!1){function A(C){let P=C[k];return typeof P>"u"&&N&&(P=DN(m,A,x)),P}function T(C=h){const P=DN(f,N,()=>new WeakMap);return DN(P,C,()=>{const $={};for(const[j,O]of Object.entries(s.selectors??{}))$[j]=gGe(O,C,()=>DN(m,C,x),N);return $})}return{reducerPath:k,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const _={name:i,reducer:v,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...b(a),injectInto(k,{reducerPath:N,...A}={}){const T=N??a;return k.inject({reducerPath:T,reducer:v},A),{..._,...b(T,!0)}}};return _}}function gGe(t,e,n,r){function s(i,...a){let o=e(i);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return s.unwrapped=t,s}var hl=mGe();function yGe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function vGe({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!bGe(r))throw new Error(Ll(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?Fc(t,a):Fc(t))}function xGe(t){return t._reducerDefinitionType==="asyncThunk"}function bGe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function wGe({type:t,reducerName:e},n,r,s){if(!s)throw new Error(Ll(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,d=s(t,i,u);r.exposeAction(e,d),a&&r.addCase(d.fulfilled,a),o&&r.addCase(d.pending,o),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:a||LN,pending:o||LN,rejected:l||LN,settled:c||LN})}function LN(){}var _Ge="task",hoe="listener",foe="completed",A6="cancelled",kGe=`task-${A6}`,SGe=`task-${foe}`,H$=`${hoe}-${A6}`,NGe=`${hoe}-${foe}`,cP=class{constructor(t){vt(this,"name","TaskAbortError");vt(this,"message");this.code=t,this.message=`${_Ge} ${A6} (reason: ${t})`}},E6=(t,e)=>{if(typeof t!="function")throw new TypeError(Ll(32))},vT=()=>{},poe=(t,e=vT)=>(t.catch(e),t),moe=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Qg=t=>{if(t.aborted)throw new cP(t.reason)};function goe(t,e){let n=vT;return new Promise((r,s)=>{const i=()=>s(new cP(t.reason));if(t.aborted){i();return}n=moe(t,i),e.finally(()=>n()).then(r,s)}).finally(()=>{n=vT})}var CGe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof cP?"cancelled":"rejected",error:n}}finally{e==null||e()}},xT=t=>e=>poe(goe(t,e).then(n=>(Qg(t),n))),yoe=t=>{const e=xT(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Wv}=Object,IV={},uP="listenerMiddleware",TGe=(t,e)=>{const n=r=>moe(t,()=>r.abort(t.reason));return(r,s)=>{E6(r);const i=new AbortController;n(i);const a=CGe(async()=>{Qg(t),Qg(i.signal);const o=await r({pause:xT(i.signal),delay:yoe(i.signal),signal:i.signal});return Qg(i.signal),o},()=>i.abort(SGe));return s!=null&&s.autoJoin&&e.push(a.catch(vT)),{result:xT(t)(a),cancel(){i.abort(kGe)}}}},IGe=(t,e)=>{const n=async(r,s)=>{Qg(e);let i=()=>{};const o=[new Promise((l,c)=>{let u=t({predicate:r,effect:(d,h)=>{h.unsubscribe(),l([d,h.getState(),h.getOriginalState()])}});i=()=>{u(),c()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await goe(e,Promise.race(o));return Qg(e),l}finally{i()}};return(r,s)=>poe(n(r,s))},voe=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=Fc(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(Ll(21));return E6(i),{predicate:s,type:e,effect:i}},xoe=Wv(t=>{const{type:e,predicate:n,effect:r}=voe(t);return{id:hGe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ll(22))}}},{withTypes:()=>xoe}),AV=(t,e)=>{const{type:n,effect:r,predicate:s}=voe(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},q$=t=>{t.pending.forEach(e=>{e.abort(H$)})},AGe=(t,e)=>()=>{for(const n of e.keys())q$(n);t.clear()},EV=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},boe=Wv(Fc(`${uP}/add`),{withTypes:()=>boe}),EGe=Fc(`${uP}/removeAll`),woe=Wv(Fc(`${uP}/remove`),{withTypes:()=>woe}),PGe=(...t)=>{console.error(`${uP}/error`,...t)},uS=(t={})=>{const e=new Map,n=new Map,r=f=>{const m=n.get(f)??0;n.set(f,m+1)},s=f=>{const m=n.get(f)??1;m===1?n.delete(f):n.set(f,m-1)},{extra:i,onError:a=PGe}=t;E6(a);const o=f=>(f.unsubscribe=()=>e.delete(f.id),e.set(f.id,f),m=>{f.unsubscribe(),m!=null&&m.cancelActive&&q$(f)}),l=f=>{const m=AV(e,f)??xoe(f);return o(m)};Wv(l,{withTypes:()=>l});const c=f=>{const m=AV(e,f);return m&&(m.unsubscribe(),f.cancelActive&&q$(m)),!!m};Wv(c,{withTypes:()=>c});const u=async(f,m,y,v)=>{const x=new AbortController,b=IGe(l,x.signal),_=[];try{f.pending.add(x),r(f),await Promise.resolve(f.effect(m,Wv({},y,{getOriginalState:v,condition:(k,N)=>b(k,N).then(Boolean),take:b,delay:yoe(x.signal),pause:xT(x.signal),extra:i,signal:x.signal,fork:TGe(x.signal,_),unsubscribe:f.unsubscribe,subscribe:()=>{e.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((k,N,A)=>{k!==x&&(k.abort(H$),A.delete(k))})},cancel:()=>{x.abort(H$),f.pending.delete(x)},throwIfCancelled:()=>{Qg(x.signal)}})))}catch(k){k instanceof cP||EV(a,k,{raisedBy:"effect"})}finally{await Promise.all(_),x.abort(NGe),s(f),f.pending.delete(x)}},d=AGe(e,n);return{middleware:f=>m=>y=>{if(!Yae(y))return m(y);if(boe.match(y))return l(y.payload);if(EGe.match(y)){d();return}if(woe.match(y))return c(y.payload);let v=f.getState();const x=()=>{if(v===IV)throw new Error(Ll(23));return v};let b;try{if(b=m(y),e.size>0){const _=f.getState(),k=Array.from(e.values());for(const N of k){let A=!1;try{A=N.predicate(y,_,v)}catch(T){A=!1,EV(a,T,{raisedBy:"predicate"})}A&&u(N,y,f,x)}}}finally{v=IV}return b},startListening:l,stopListening:c,clearListeners:d}};function Ll(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var OGe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},_oe=hl({name:"chartLayout",initialState:OGe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,s,i;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(s=e.payload.bottom)!==null&&s!==void 0?s:0,t.margin.left=(i=e.payload.left)!==null&&i!==void 0?i:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:jGe,setLayout:$Ge,setChartSize:DGe,setScale:LGe}=_oe.actions,RGe=_oe.reducer;function koe(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function zn(t){return Number.isFinite(t)}function Kd(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){MGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MGe(t,e,n){return(e=FGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FGe(t){var e=zGe(t,"string");return typeof e=="symbol"?e:e+""}function zGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wi(t,e,n){return Vi(t)||Vi(e)?n:Gd(e)?ZE(t,e,n):typeof e=="function"?e(t):n}var BGe=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:i,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&i!=="center"&&Bt(t[i]))return Sv(Sv({},t),{},{[i]:t[i]+(r||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&a!=="middle"&&Bt(t[a]))return Sv(Sv({},t),{},{[a]:t[a]+(s||0)})}return t},qu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Soe=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var s,i,a=t.map(o=>(o.coordinate===e&&(s=!0),o.coordinate===n&&(i=!0),o.coordinate));return s||a.push(e),i||a.push(n),a},Noe=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:i,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:h,axisType:f}=t;if(!a)return null;var m=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,y=s==="category"&&a.bandwidth?a.bandwidth()/m:0;if(y=f==="angleAxis"&&i&&i.length>=2?Tc(i[0]-i[1])*2*y:y,d||h){var v=(d||h||[]).map((x,b)=>{var _=r?r.indexOf(x):x,k=a.map(_);return zn(k)?{coordinate:k+y,value:x,offset:y,index:b}:null}).filter(el);return v}return l&&c?c.map((x,b)=>{var _=a.map(x);return zn(_)?{coordinate:_+y,value:x,index:b,offset:y}:null}).filter(el):a.ticks&&u!=null?a.ticks(u).map((x,b)=>{var _=a.map(x);return zn(_)?{coordinate:_+y,value:x,index:b,offset:y}:null}).filter(el):a.domain().map((x,b)=>{var _=a.map(x);return zn(_)?{coordinate:_+y,value:r?r[x]:x,index:b,offset:y}:null}).filter(el)},WGe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,a=0,o=0;o<n;++o){var l=t[o],c=l==null?void 0:l[s];if(c!=null){var u=c[1],d=c[0],h=qd(u)?d:u;h>=0?(c[0]=i,i+=h,c[1]=i):(c[0]=a,a+=h,c[1]=a)}}}},UGe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var s=0;s<r;++s)for(var i=0,a=0;a<n;++a){var o=t[a],l=o==null?void 0:o[s];if(l!=null){var c=qd(l[1])?l[0]:l[1];c>=0?(l[0]=i,i+=c,l[1]=i):(l[0]=0,l[1]=0)}}}},VGe={sign:WGe,expand:OHe,none:$0,silhouette:jHe,wiggle:$He,positive:UGe},HGe=(t,e,n)=>{var r,s=(r=VGe[n])!==null&&r!==void 0?r:$0,i=PHe().keys(e).value((o,l)=>Number(wi(o,l,0))).order(D$).offset(s),a=i(t);return a.forEach((o,l)=>{o.forEach((c,u)=>{var d=wi(t[u],e[l],0);Array.isArray(d)&&d.length===2&&Bt(d[0])&&Bt(d[1])&&(c[0]=d[0],c[1]=d[1])})}),a};function qGe(t){return t==null?void 0:String(t)}function bT(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:i,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Vi(s[e.dataKey])){var o=mae(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n!=null&&n[i]?n[i].coordinate+r/2:null}var l=wi(s,Vi(a)?e.dataKey:a),c=e.scale.map(l);return Bt(c)?c:null}var GGe=t=>{var e=t.flat(2).filter(Bt);return[Math.min(...e),Math.max(...e)]},KGe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],XGe=(t,e,n)=>{if(t!=null)return KGe(Object.keys(t).reduce((r,s)=>{var i=t[s];if(!i)return r;var{stackedData:a}=i,o=a.reduce((l,c)=>{var u=koe(c,e,n),d=GGe(u);return!zn(d[0])||!zn(d[1])?l:[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},OV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_x=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=tP(e,u=>u.coordinate),i=1/0,a=1,o=s.length;a<o;a++){var l=s[a],c=s[a-1];i=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),i)}return i===1/0?0:i}return n?void 0:0};function $V(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:i}=t;return Sv(Sv({},e),{},{dataKey:n,payload:r,value:s,name:i})}function dP(t,e){if(t)return String(t);if(typeof e=="string")return e}var YGe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},ZGe=(t,e)=>e==="centric"?t.angle:t.radius,bf=t=>t.layout.width,wf=t=>t.layout.height,JGe=t=>t.layout.scale,Coe=t=>t.layout.margin,hP=Ye(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),fP=Ye(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),QGe="data-recharts-item-index",eKe="data-recharts-item-id",dS=60;function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){tKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tKe(t,e,n){return(e=nKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nKe(t){var e=rKe(t,"string");return typeof e=="symbol"?e:e+""}function rKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sKe=t=>t.brush.height;function iKe(t){var e=fP(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:dS;return n+s}return n},0)}function aKe(t){var e=fP(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var s=typeof r.width=="number"?r.width:dS;return n+s}return n},0)}function oKe(t){var e=hP(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function lKe(t){var e=hP(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ya=Ye([bf,wf,Coe,sKe,iKe,aKe,oKe,lKe,Gae,Dqe],(t,e,n,r,s,i,a,o,l,c)=>{var u={left:(n.left||0)+s,right:(n.right||0)+i},d={top:(n.top||0)+a,bottom:(n.bottom||0)+o},h=RN(RN({},d),u),f=h.bottom;h.bottom+=r,h=BGe(h,l,c);var m=t-h.left-h.right,y=e-h.top-h.bottom;return RN(RN({brushBottom:f},h),{},{width:Math.max(m,0),height:Math.max(y,0)})}),cKe=Ye(ya,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Toe=Ye(bf,wf,(t,e)=>({x:0,y:0,width:t,height:e})),uKe=R.createContext(null),Ya=()=>R.useContext(uKe)!=null,pP=t=>t.brush,mP=Ye([pP,ya,Coe],(t,e,n)=>({height:t.height,x:Bt(t.x)?t.x:e.left,y:Bt(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Bt(t.width)?t.width:e.width})),Ioe={},Aoe={},Eoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:i}={}){let a,o=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},d=()=>{c&&u(),y()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,d()},r)},m=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{m(),a=void 0,o=null},v=()=>{u()},x=function(...b){if(s!=null&&s.aborted)return;a=this,o=b;const _=h==null;f(),l&&_&&u()};return x.schedule=f,x.cancel=y,x.flush=v,s==null||s.addEventListener("abort",y,{once:!0}),x}t.debounce=e})(Eoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eoe;function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:o=!0,maxWait:l}=i,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,d=null;const h=e.debounce(function(...y){u=r.apply(this,y),d=null},s,{edges:c}),f=function(...y){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(u=r.apply(this,y),d=Date.now(),h.cancel(),h.schedule(),u):(h.apply(this,y),u)},m=()=>(h.flush(),u);return f.cancel=h.cancel,f.flush=m,f}t.debounce=n})(Aoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Aoe;function n(r,s=0,i={}){const{leading:a=!0,trailing:o=!0}=i;return e.debounce(r,s,{leading:a,maxWait:s,trailing:o})}t.throttle=n})(Ioe);var dKe=Ioe.throttle;const hKe=Bc(dKe);var wT=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>s[a++]))}},Cd={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},Poe=(t,e,n)=>{var{width:r=Cd.width,height:s=Cd.height,aspect:i,maxHeight:a}=n,o=D0(r)?t:Number(r),l=D0(s)?e:Number(s);return i&&i>0&&(o?l=o/i:l&&(o=l*i),a&&l!=null&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},fKe={width:0,height:0,overflow:"visible"},pKe={width:0,overflowX:"visible"},mKe={height:0,overflowY:"visible"},gKe={},yKe=t=>{var{width:e,height:n}=t,r=D0(e),s=D0(n);return r&&s?fKe:r?pKe:s?mKe:gKe};function vKe(t){var{width:e,height:n,aspect:r}=t,s=e,i=n;return s===void 0&&i===void 0?(s=Cd.width,i=Cd.height):s===void 0?s=r&&r>0?void 0:Cd.width:i===void 0&&(i=r&&r>0?void 0:Cd.height),{width:s,height:i}}function G$(){return G$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G$.apply(null,arguments)}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){xKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xKe(t,e,n){return(e=bKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bKe(t){var e=wKe(t,"string");return typeof e=="symbol"?e:e+""}function wKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ooe=R.createContext(Cd.initialDimension);function _Ke(t){return Kd(t.width)&&Kd(t.height)}function joe(t){var{children:e,width:n,height:r}=t,s=R.useMemo(()=>({width:n,height:r}),[n,r]);return _Ke(s)?R.createElement(Ooe.Provider,{value:s},e):null}var P6=()=>R.useContext(Ooe),kKe=R.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=Cd.initialDimension,width:s,height:i,minWidth:a=Cd.minWidth,minHeight:o,maxHeight:l,children:c,debounce:u=Cd.debounce,id:d,className:h,onResize:f,style:m={}}=t,y=R.useRef(null),v=R.useRef();v.current=f,R.useImperativeHandle(e,()=>y.current);var[x,b]=R.useState({containerWidth:r.width,containerHeight:r.height}),_=R.useCallback((C,P)=>{b($=>{var j=Math.round(C),O=Math.round(P);return $.containerWidth===j&&$.containerHeight===O?$:{containerWidth:j,containerHeight:O}})},[]);R.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return ly;var C=O=>{var F,B=O[0];if(B!=null){var{width:Z,height:V}=B.contentRect;_(Z,V),(F=v.current)===null||F===void 0||F.call(v,Z,V)}};u>0&&(C=hKe(C,u,{trailing:!0,leading:!1}));var P=new ResizeObserver(C),{width:$,height:j}=y.current.getBoundingClientRect();return _($,j),P.observe(y.current),()=>{P.disconnect()}},[_,u]);var{containerWidth:k,containerHeight:N}=x;wT(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:A,calculatedHeight:T}=Poe(k,N,{width:s,height:i,aspect:n,maxHeight:l});return wT(A!=null&&A>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,T,s,i,a,o,n),R.createElement("div",{id:d?"".concat(d):void 0,className:xr("recharts-responsive-container",h),style:RV(RV({},m),{},{width:s,height:i,minWidth:a,minHeight:o,maxHeight:l}),ref:y},R.createElement("div",{style:yKe({width:s,height:i})},R.createElement(joe,{width:A,height:T},c)))}),MV=R.forwardRef((t,e)=>{var n=P6();if(Kd(n.width)&&Kd(n.height))return t.children;var{width:r,height:s}=vKe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:i,calculatedHeight:a}=Poe(void 0,void 0,{width:r,height:s,aspect:t.aspect,maxHeight:t.maxHeight});return Bt(i)&&Bt(a)?R.createElement(joe,{width:i,height:a},t.children):R.createElement(kKe,G$({},t,{width:r,height:s,ref:e}))});function O6(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var gP=()=>{var t,e=Ya(),n=Zt(cKe),r=Zt(mP),s=(t=Zt(pP))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},SKe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$oe=()=>{var t;return(t=Zt(ya))!==null&&t!==void 0?t:SKe},Doe=()=>Zt(bf),Loe=()=>Zt(wf),Lr=t=>t.layout.layoutType,cy=()=>Zt(Lr),j6=()=>{var t=cy();if(t==="horizontal"||t==="vertical")return t},Roe=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},NKe=()=>{var t=cy();return t!==void 0},hS=t=>{var e=Xi(),n=Ya(),{width:r,height:s}=t,i=P6(),a=r,o=s;return i&&(a=i.width>0?i.width:r,o=i.height>0?i.height:s),R.useEffect(()=>{!n&&Kd(a)&&Kd(o)&&e(DGe({width:a,height:o}))},[e,n,a,o]),null},Moe=Symbol.for("immer-nothing"),FV=Symbol.for("immer-draftable"),Bl=Symbol.for("immer-state");function Nu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var H2=Object.getPrototypeOf;function kx(t){return!!t&&!!t[Bl]}function R0(t){var e;return t?Foe(t)||Array.isArray(t)||!!t[FV]||!!((e=t.constructor)!=null&&e[FV])||fS(t)||vP(t):!1}var CKe=Object.prototype.constructor.toString(),zV=new WeakMap;function Foe(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=zV.get(n);return r===void 0&&(r=Function.toString.call(n),zV.set(n,r)),r===CKe}function _T(t,e,n=!0){yP(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(s=>{e(s,t[s],t)}):t.forEach((r,s)=>e(s,r,t))}function yP(t){const e=t[Bl];return e?e.type_:Array.isArray(t)?1:fS(t)?2:vP(t)?3:0}function K$(t,e){return yP(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function zoe(t,e,n){const r=yP(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function TKe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function fS(t){return t instanceof Map}function vP(t){return t instanceof Set}function wg(t){return t.copy_||t.base_}function X$(t,e){if(fS(t))return new Map(t);if(vP(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Foe(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Bl];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(H2(t),r)}else{const r=H2(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function $6(t,e=!1){return xP(t)||kx(t)||!R0(t)||(yP(t)>1&&Object.defineProperties(t,{set:MN,add:MN,clear:MN,delete:MN}),Object.freeze(t),e&&Object.values(t).forEach(n=>$6(n,!0))),t}function IKe(){Nu(2)}var MN={value:IKe};function xP(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var AKe={};function M0(t){const e=AKe[t];return e||Nu(0,t),e}var q2;function Boe(){return q2}function EKe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BV(t,e){e&&(M0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Y$(t){Z$(t),t.drafts_.forEach(PKe),t.drafts_=null}function Z$(t){t===q2&&(q2=t.parent_)}function WV(t){return q2=EKe(q2,t)}function PKe(t){const e=t[Bl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function UV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Bl].modified_&&(Y$(e),Nu(4)),R0(t)&&(t=kT(e,t),e.parent_||ST(e,t)),e.patches_&&M0("Patches").generateReplacementPatches_(n[Bl].base_,t,e.patches_,e.inversePatches_)):t=kT(e,n,[]),Y$(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Moe?t:void 0}function kT(t,e,n){if(xP(e))return e;const r=t.immer_.shouldUseStrictIteration(),s=e[Bl];if(!s)return _T(e,(i,a)=>VV(t,s,e,i,a,n),r),e;if(s.scope_!==t)return e;if(!s.modified_)return ST(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,o=!1;s.type_===3&&(a=new Set(i),i.clear(),o=!0),_T(a,(l,c)=>VV(t,s,i,l,c,n,o),r),ST(t,i,!1),n&&t.patches_&&M0("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function VV(t,e,n,r,s,i,a){if(s==null||typeof s!="object"&&!a)return;const o=xP(s);if(!(o&&!a)){if(kx(s)){const l=i&&e&&e.type_!==3&&!K$(e.assigned_,r)?i.concat(r):void 0,c=kT(t,s,l);if(zoe(n,r,c),kx(c))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(R0(s)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===s&&o)return;kT(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(fS(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ST(t,s)}}}function ST(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$6(e,n)}function OKe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Boe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=D6;n&&(s=[r],i=G2);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}var D6={get(t,e){if(e===Bl)return t;const n=wg(t);if(!K$(n,e))return jKe(t,n,e);const r=n[e];return t.finalized_||!R0(r)?r:r===C3(t.base_,e)?(T3(t),t.copy_[e]=Q$(r,t)):r},has(t,e){return e in wg(t)},ownKeys(t){return Reflect.ownKeys(wg(t))},set(t,e,n){const r=Woe(wg(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=C3(wg(t),e),i=s==null?void 0:s[Bl];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(TKe(n,s)&&(n!==void 0||K$(t.base_,e)))return!0;T3(t),J$(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return C3(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,T3(t),J$(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=wg(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Nu(11)},getPrototypeOf(t){return H2(t.base_)},setPrototypeOf(){Nu(12)}},G2={};_T(D6,(t,e)=>{G2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});G2.deleteProperty=function(t,e){return G2.set.call(this,t,e,void 0)};G2.set=function(t,e,n){return D6.set.call(this,t[0],e,n,t[0])};function C3(t,e){const n=t[Bl];return(n?wg(n):t)[e]}function jKe(t,e,n){var s;const r=Woe(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function Woe(t,e){if(!(e in t))return;let n=H2(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=H2(n)}}function J$(t){t.modified_||(t.modified_=!0,t.parent_&&J$(t.parent_))}function T3(t){t.copy_||(t.copy_=X$(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var $Ke=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(l=i,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Nu(6),r!==void 0&&typeof r!="function"&&Nu(7);let s;if(R0(e)){const i=WV(this),a=Q$(e,void 0);let o=!0;try{s=n(a),o=!1}finally{o?Y$(i):Z$(i)}return BV(i,r),UV(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===Moe&&(s=void 0),this.autoFreeze_&&$6(s,!0),r){const i=[],a=[];M0("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else Nu(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,s;return[this.produce(e,n,(a,o)=>{r=a,s=o}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){R0(t)||Nu(8),kx(t)&&(t=DKe(t));const e=WV(this),n=Q$(t,void 0);return n[Bl].isManual_=!0,Z$(e),n}finishDraft(t,e){const n=t&&t[Bl];(!n||!n.isManual_)&&Nu(9);const{scope_:r}=n;return BV(r,e),UV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=M0("Patches").applyPatches_;return kx(t)?r(t,e):this.produce(t,s=>r(s,e))}};function Q$(t,e){const n=fS(t)?M0("MapSet").proxyMap_(t,e):vP(t)?M0("MapSet").proxySet_(t,e):OKe(t,e);return(e?e.scope_:Boe()).drafts_.push(n),n}function DKe(t){return kx(t)||Nu(10,t),Uoe(t)}function Uoe(t){if(!R0(t)||xP(t))return t;const e=t[Bl];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=X$(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=X$(t,!0);return _T(n,(s,i)=>{zoe(n,s,Uoe(i))},r),e&&(e.finalized_=!1),n}var LKe=new $Ke;LKe.produce;var RKe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Voe=hl({name:"legend",initialState:RKe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Yr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,s=Ou(t).payload.indexOf(n);s>-1&&(t.payload[s]=r)},prepare:Yr()},removeLegendPayload:{reducer(t,e){var n=Ou(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Yr()}}}),{setLegendSize:cmt,setLegendSettings:umt,addLegendPayload:MKe,replaceLegendPayload:FKe,removeLegendPayload:zKe}=Voe.actions,BKe=Voe.reducer;function eD(){return eD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eD.apply(null,arguments)}function HV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HV(Object(n),!0).forEach(function(r){WKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WKe(t,e,n){return(e=UKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UKe(t){var e=VKe(t,"string");return typeof e=="symbol"?e:e+""}function VKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HKe(t){return Array.isArray(t)&&Gd(t[0])&&Gd(t[1])?t.join(" ~ "):t}var qy={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},qKe=t=>{var{separator:e=qy.separator,contentStyle:n,itemStyle:r,labelStyle:s=qy.labelStyle,payload:i,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:h=qy.accessibilityLayer}=t,f=()=>{if(i&&i.length){var N={padding:0,margin:0},A=(o?tP(i,o):i).map((T,C)=>{if(T.type==="none")return null;var P=T.formatter||a||HKe,{value:$,name:j}=T,O=$,F=j;if(P){var B=P($,j,T,C,i);if(Array.isArray(B))[O,F]=B;else if(B!=null)O=B;else return null}var Z=z1(z1({},qy.itemStyle),{},{color:T.color||qy.itemStyle.color},r);return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:Z},Gd(F)?R.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Gd(F)?R.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,R.createElement("span",{className:"recharts-tooltip-item-value"},O),R.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:N},A)}return null},m=z1(z1({},qy.contentStyle),n),y=z1({margin:0},s),v=!Vi(u),x=v?u:"",b=xr("recharts-default-tooltip",l),_=xr("recharts-tooltip-label",c);v&&d&&i!==void 0&&i!==null&&(x=d(u,i));var k=h?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",eD({className:b,style:m},k),R.createElement("p",{className:_,style:y},R.isValidElement(x)?x:"".concat(x)),f())},B1="recharts-tooltip-wrapper",GKe={visibility:"hidden"};function KKe(t){var{coordinate:e,translateX:n,translateY:r}=t;return xr(B1,{["".concat(B1,"-right")]:Bt(n)&&e&&Bt(e.x)&&n>=e.x,["".concat(B1,"-left")]:Bt(n)&&e&&Bt(e.x)&&n<e.x,["".concat(B1,"-bottom")]:Bt(r)&&e&&Bt(e.y)&&r>=e.y,["".concat(B1,"-top")]:Bt(r)&&e&&Bt(e.y)&&r<e.y})}function qV(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:s,position:i,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(i&&Bt(i[r]))return i[r];var u=n[r]-o-(s>0?s:0),d=n[r]+s;if(e[r])return a[r]?u:d;var h=l[r];if(h==null)return 0;if(a[r]){var f=u,m=h;return f<m?Math.max(d,h):Math.max(u,h)}if(c==null)return 0;var y=d+o,v=h+c;return y>v?Math.max(u,h):Math.max(d,h)}function XKe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function YKe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:s,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,h;return o.height>0&&o.width>0&&n?(d=qV({allowEscapeViewBox:e,coordinate:n,key:"x",offset:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=qV({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=XKe({translateX:d,translateY:h,useTranslate3d:l})):u=GKe,{cssProperties:u,cssClasses:KKe({translateX:d,translateY:h,coordinate:n})}}function GV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function FN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GV(Object(n),!0).forEach(function(r){tD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tD(t,e,n){return(e=ZKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZKe(t){var e=JKe(t,"string");return typeof e=="symbol"?e:e+""}function JKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class QKe extends R.PureComponent{constructor(){super(...arguments),tD(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),tD(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:f,wrapperStyle:m,lastBoundingBox:y,innerRef:v,hasPortalFromProps:x}=this.props,b=typeof c=="number"?c:c.x,_=typeof c=="number"?c:c.y,{cssClasses:k,cssProperties:N}=YKe({allowEscapeViewBox:n,coordinate:a,offsetLeft:b,offsetTop:_,position:u,reverseDirection:d,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:f}),A=x?{}:FN(FN({transition:l&&e?"transform ".concat(r,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),T=FN(FN({},A),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},m);return R.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:T,ref:v},i)}}var Hoe=()=>{var t;return(t=Zt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function nD(){return nD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nD.apply(null,arguments)}function KV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function XV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(n),!0).forEach(function(r){eXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eXe(t,e,n){return(e=tXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tXe(t){var e=nXe(t,"string");return typeof e=="symbol"?e:e+""}function nXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YV={curveBasisClosed:bHe,curveBasisOpen:wHe,curveBasis:xHe,curveBumpX:iHe,curveBumpY:aHe,curveLinearClosed:_He,curveLinear:qE,curveMonotoneX:kHe,curveMonotoneY:SHe,curveNatural:NHe,curveStep:CHe,curveStepAfter:IHe,curveStepBefore:THe},NT=t=>zn(t.x)&&zn(t.y),ZV=t=>t.base!=null&&NT(t.base)&&NT(t),W1=t=>t.x,U1=t=>t.y,rXe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(lS(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=YV["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return YV[n]||qE},JV={connectNulls:!1,type:"linear"},sXe=t=>{var{type:e=JV.type,points:n=[],baseLine:r,layout:s,connectNulls:i=JV.connectNulls}=t,a=rXe(e,s),o=i?n.filter(NT):n;if(Array.isArray(r)){var l,c=n.map((m,y)=>XV(XV({},m),{},{base:r[y]}));s==="vertical"?l=PN().y(U1).x1(W1).x0(m=>m.base.x):l=PN().x(W1).y1(U1).y0(m=>m.base.y);var u=l.defined(ZV).curve(a),d=i?c.filter(ZV):c;return u(d)}var h;s==="vertical"&&Bt(r)?h=PN().y(U1).x1(W1).x0(r):Bt(r)?h=PN().x(W1).y1(U1).y0(r):h=tae().x(W1).y(U1);var f=h.defined(NT).curve(a);return f(o)},Mw=t=>{var{className:e,points:n,path:r,pathRef:s}=t,i=cy();if((!n||!n.length)&&!r)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||i,connectNulls:t.connectNulls},o=n&&n.length?sXe(a):r;return R.createElement("path",nD({},Rc(t),f6(t),{className:xr("recharts-curve",e),d:o===null?void 0:o,ref:s}))},iXe=["x","y","top","left","width","height","className"];function rD(){return rD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rD.apply(null,arguments)}function QV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aXe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QV(Object(n),!0).forEach(function(r){oXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oXe(t,e,n){return(e=lXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lXe(t){var e=cXe(t,"string");return typeof e=="symbol"?e:e+""}function cXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uXe(t,e){if(t==null)return{};var n,r,s=dXe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function dXe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hXe=(t,e,n,r,s,i)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),fXe=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:i=0,height:a=0,className:o}=t,l=uXe(t,iXe),c=aXe({x:e,y:n,top:r,left:s,width:i,height:a},l);return!Bt(e)||!Bt(n)||!Bt(i)||!Bt(a)||!Bt(r)||!Bt(s)?null:R.createElement("path",rD({},Ha(c),{className:xr("recharts-cross",o),d:hXe(e,n,i,a,r,s)}))};function pXe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function t9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){mXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mXe(t,e,n){return(e=gXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gXe(t){var e=yXe(t,"string");return typeof e=="symbol"?e:e+""}function yXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vXe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),qoe=(t,e,n)=>t.map(r=>"".concat(vXe(r)," ").concat(e,"ms ").concat(n)).join(","),xXe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),K2=(t,e)=>Object.keys(e).reduce((n,r)=>t9(t9({},n),{},{[r]:t(r,e[r])}),{});function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){bXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bXe(t,e,n){return(e=wXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wXe(t){var e=_Xe(t,"string");return typeof e=="symbol"?e:e+""}function _Xe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CT=(t,e,n)=>t+(e-t)*n,sD=t=>{var{from:e,to:n}=t;return e!==n},Goe=(t,e,n)=>{var r=K2((s,i)=>{if(sD(i)){var[a,o]=t(i.from,i.to,i.velocity);return pi(pi({},i),{},{from:a,velocity:o})}return i},e);return n<1?K2((s,i)=>sD(i)&&r[s]!=null?pi(pi({},i),{},{velocity:CT(i.velocity,r[s].velocity,n),from:CT(i.from,r[s].from,n)}):i,e):Goe(t,r,n-1)};function kXe(t,e,n,r,s,i){var a,o=r.reduce((h,f)=>pi(pi({},h),{},{[f]:{from:t[f],velocity:0,to:e[f]}}),{}),l=()=>K2((h,f)=>f.from,o),c=()=>!Object.values(o).filter(sD).length,u=null,d=h=>{a||(a=h);var f=h-a,m=f/n.dt;o=Goe(n,o,m),s(pi(pi(pi({},t),e),l())),a=h,c()||(u=i.setTimeout(d))};return()=>(u=i.setTimeout(d),()=>{var h;(h=u)===null||h===void 0||h()})}function SXe(t,e,n,r,s,i,a){var o=null,l=s.reduce((d,h)=>{var f=t[h],m=e[h];return f==null||m==null?d:pi(pi({},d),{},{[h]:[f,m]})},{}),c,u=d=>{c||(c=d);var h=(d-c)/r,f=K2((y,v)=>CT(...v,n(h)),l);if(i(pi(pi(pi({},t),e),f)),h<1)o=a.setTimeout(u);else{var m=K2((y,v)=>CT(...v,n(1)),l);i(pi(pi(pi({},t),e),m))}};return()=>(o=a.setTimeout(u),()=>{var d;(d=o)===null||d===void 0||d()})}const NXe=(t,e,n,r,s,i)=>{var a=xXe(t,e);return n==null?()=>(s(pi(pi({},t),e)),()=>{}):n.isStepper===!0?kXe(t,e,n,a,s,i):SXe(t,e,n,r,a,s,i)};var TT=1e-4,Koe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Xoe=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),r9=(t,e)=>n=>{var r=Koe(t,e);return Xoe(r,n)},CXe=(t,e)=>n=>{var r=Koe(t,e),s=[...r.map((i,a)=>i*a).slice(1),0];return Xoe(s,n)},TXe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var s=r.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},IXe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=TXe(n[0]);if(s)return s}}return n.length===4?n:[0,0,1,1]},AXe=(t,e,n,r)=>{var s=r9(t,n),i=r9(e,r),a=CXe(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,d=u,h=0;h<8;++h){var f=s(d)-u,m=a(d);if(Math.abs(f-u)<TT||m<TT)return i(d);d=o(d-f/m)}return i(d)};return l.isStepper=!1,l},s9=function(){return AXe(...IXe(...arguments))},EXe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,i=(a,o,l)=>{var c=-(a-o)*n,u=l*r,d=l+(c-u)*s/1e3,h=l*s/1e3+a;return Math.abs(h-o)<TT&&Math.abs(d)<TT?[o,0]:[h,d]};return i.isStepper=!0,i.dt=s,i},PXe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return s9(t);case"spring":return EXe();default:if(t.split("(")[0]==="cubic-bezier")return s9(t)}return typeof t=="function"?t:null};function OXe(t){var e,n=()=>null,r=!1,s=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){s=t.setTimeout(i.bind(null,c),l);return}i(l),s=t.setTimeout(i.bind(null,c));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,s&&(s(),s=null),i(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class jXe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function $Xe(){return OXe(new jXe)}var DXe=R.createContext($Xe);function LXe(t,e){var n=R.useContext(DXe);return R.useMemo(()=>e??n(t),[t,e,n])}var RXe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pS={isSsr:RXe()},MXe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},i9={t:0},I3={t:1};function bP(t){var e=Xa(t,MXe),{isActive:n,canBegin:r,duration:s,easing:i,begin:a,onAnimationEnd:o,onAnimationStart:l,children:c}=e,u=n==="auto"?!pS.isSsr:n,d=LXe(e.animationId,e.animationManager),[h,f]=R.useState(u?i9:I3),m=R.useRef(null);return R.useEffect(()=>{u||f(I3)},[u]),R.useEffect(()=>{if(!u||!r)return ly;var y=NXe(i9,I3,PXe(i),s,f,d.getTimeoutController()),v=()=>{m.current=y()};return d.start([l,a,v,s,o]),()=>{d.stop(),m.current&&m.current(),o()}},[u,r,s,i,a,l,o,d]),c(h.t)}function wP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=R.useRef(B2(e)),r=R.useRef(t);return r.current!==t&&(n.current=B2(e),r.current=t),n.current}var FXe=["radius"],zXe=["radius"],a9,o9,l9,c9,u9,d9,h9,f9,p9,m9;function g9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function y9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g9(Object(n),!0).forEach(function(r){BXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BXe(t,e,n){return(e=WXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WXe(t){var e=UXe(t,"string");return typeof e=="symbol"?e:e+""}function UXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IT(){return IT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IT.apply(null,arguments)}function v9(t,e){if(t==null)return{};var n,r,s=VXe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function VXe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hd(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var x9=(t,e,n,r,s)=>{var i=Cp(n),a=Cp(r),o=Math.min(Math.abs(i)/2,Math.abs(a)/2),l=a>=0?1:-1,c=i>=0?1:-1,u=a>=0&&i>=0||a<0&&i<0?1:0,d;if(o>0&&Array.isArray(s)){for(var h=[0,0,0,0],f=0,m=4;f<m;f++){var y,v=(y=s[f])!==null&&y!==void 0?y:0;h[f]=v>o?o:v}d=xs(a9||(a9=hd(["M",",",""])),t,e+l*h[0]),h[0]>0&&(d+=xs(o9||(o9=hd(["A ",",",",0,0,",",",",",""])),h[0],h[0],u,t+c*h[0],e)),d+=xs(l9||(l9=hd(["L ",",",""])),t+n-c*h[1],e),h[1]>0&&(d+=xs(c9||(c9=hd(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],u,t+n,e+l*h[1])),d+=xs(u9||(u9=hd(["L ",",",""])),t+n,e+r-l*h[2]),h[2]>0&&(d+=xs(d9||(d9=hd(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],u,t+n-c*h[2],e+r)),d+=xs(h9||(h9=hd(["L ",",",""])),t+c*h[3],e+r),h[3]>0&&(d+=xs(f9||(f9=hd(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],u,t,e+r-l*h[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var x=Math.min(o,s);d=xs(p9||(p9=hd(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*x,x,x,u,t+c*x,e,t+n-c*x,e,x,x,u,t+n,e+l*x,t+n,e+r-l*x,x,x,u,t+n-c*x,e+r,t+c*x,e+r,x,x,u,t,e+r-l*x)}else d=xs(m9||(m9=hd(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return d},b9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yoe=t=>{var e=Xa(t,b9),n=R.useRef(null),[r,s]=R.useState(-1);R.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var G=n.current.getTotalLength();G&&s(G)}catch{}},[]);var{x:i,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:d,animationDuration:h,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:y}=e,v=R.useRef(o),x=R.useRef(l),b=R.useRef(i),_=R.useRef(a),k=R.useMemo(()=>({x:i,y:a,width:o,height:l,radius:c}),[i,a,o,l,c]),N=wP(k,"rectangle-");if(i!==+i||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var A=xr("recharts-rectangle",u);if(!y){var T=Ha(e),{radius:C}=T,P=v9(T,FXe);return R.createElement("path",IT({},P,{x:Cp(i),y:Cp(a),width:Cp(o),height:Cp(l),radius:typeof c=="number"?c:void 0,className:A,d:x9(i,a,o,l,c)}))}var $=v.current,j=x.current,O=b.current,F=_.current,B="0px ".concat(r===-1?1:r,"px"),Z="".concat(r,"px 0px"),V=qoe(["strokeDasharray"],h,typeof d=="string"?d:b9.animationEasing);return R.createElement(bP,{animationId:N,key:N,canBegin:r>0,duration:h,easing:d,isActive:y,begin:f},G=>{var U=qs($,o,G),K=qs(j,l,G),ee=qs(O,i,G),oe=qs(F,a,G);n.current&&(v.current=U,x.current=K,b.current=ee,_.current=oe);var W;m?G>0?W={transition:V,strokeDasharray:Z}:W={strokeDasharray:B}:W={strokeDasharray:Z};var Y=Ha(e),{radius:Q}=Y,J=v9(Y,zXe);return R.createElement("path",IT({},J,{radius:typeof c=="number"?c:void 0,className:A,d:x9(ee,oe,U,K,c),ref:n,style:y9(y9({},W),e.style)}))})};function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){HXe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HXe(t,e,n){return(e=qXe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qXe(t){var e=GXe(t,"string");return typeof e=="symbol"?e:e+""}function GXe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AT=Math.PI/180,KXe=t=>t*180/Math.PI,ua=(t,e,n,r)=>({x:t+Math.cos(-AT*r)*n,y:e+Math.sin(-AT*r)*n}),XXe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},YXe=(t,e)=>{var{x:n,y:r}=t,{x:s,y:i}=e;return Math.sqrt((n-s)**2+(r-i)**2)},ZXe=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:i}=e,a=YXe({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var o=(n-s)/a,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:a,angle:KXe(l),angleInRadian:l}},JXe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:e-i*360,endAngle:n-i*360}},QXe=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(s,i);return t+a*360},eYe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:s,angle:i}=ZXe({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(s<a||s>o||s===0)return null;var{startAngle:l,endAngle:c}=JXe(e),u=i,d;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;d=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;d=u>=c&&u<=l}return d?_9(_9({},e),{},{radius:s,angle:QXe(u,e)}):null};function Zoe(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:i}=t,a=ua(e,n,r,s),o=ua(e,n,r,i);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}var k9,S9,N9,C9,T9,I9,A9;function iD(){return iD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iD.apply(null,arguments)}function Bg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var tYe=(t,e)=>{var n=Tc(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},zN=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:i,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,c=o*(a?1:-1)+r,u=Math.asin(o/c)/AT,d=l?s:s+i*u,h=ua(e,n,c,d),f=ua(e,n,r,d),m=l?s-i*u:s,y=ua(e,n,c*Math.cos(u*AT),m);return{center:h,circleTangency:f,lineTangency:y,theta:u}},Joe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a}=t,o=tYe(i,a),l=i+o,c=ua(e,n,s,i),u=ua(e,n,s,l),d=xs(k9||(k9=Bg(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,s,s,+(Math.abs(o)>180),+(i>l),u.x,u.y);if(r>0){var h=ua(e,n,r,i),f=ua(e,n,r,l);d+=xs(S9||(S9=Bg(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),f.x,f.y,r,r,+(Math.abs(o)>180),+(i<=l),h.x,h.y)}else d+=xs(N9||(N9=Bg(["L ",","," Z"])),e,n);return d},nYe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=t,u=Tc(c-l),{circleTangency:d,lineTangency:h,theta:f}=zN({cx:e,cy:n,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:m,lineTangency:y,theta:v}=zN({cx:e,cy:n,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),x=o?Math.abs(l-c):Math.abs(l-c)-f-v;if(x<0)return a?xs(C9||(C9=Bg(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,i,i,i*2,i,i,-i*2):Joe({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:l,endAngle:c});var b=xs(T9||(T9=Bg(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,i,i,+(u<0),d.x,d.y,s,s,+(x>180),+(u<0),m.x,m.y,i,i,+(u<0),y.x,y.y);if(r>0){var{circleTangency:_,lineTangency:k,theta:N}=zN({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:A,lineTangency:T,theta:C}=zN({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),P=o?Math.abs(l-c):Math.abs(l-c)-N-C;if(P<0&&i===0)return"".concat(b,"L").concat(e,",").concat(n,"Z");b+=xs(I9||(I9=Bg(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,i,i,+(u<0),A.x,A.y,r,r,+(P>180),+(u>0),_.x,_.y,i,i,+(u<0),k.x,k.y)}else b+=xs(A9||(A9=Bg(["L",",","Z"])),e,n);return b},rYe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Qoe=t=>{var e=Xa(t,rYe),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=e;if(i<s||c===u)return null;var h=xr("recharts-sector",d),f=i-s,m=hm(a,f,0,!0),y;return m>0&&Math.abs(c-u)<360?y=nYe({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(m,f/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):y=Joe({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),R.createElement("path",iD({},Ha(e),{className:h,d:y}))};function sYe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(vae(e)){if(t==="centric"){var{cx:r,cy:s,innerRadius:i,outerRadius:a,angle:o}=e,l=ua(r,s,i,o),c=ua(r,s,a,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Zoe(e)}}var ele={},tle={},nle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k6;function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(nle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nle;function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(tle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S6,n=tle;function r(s,i,a){a&&typeof a!="number"&&e.isIterateeCall(s,i,a)&&(i=a=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),a=a===void 0?s<i?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((i-s)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=s,s+=a;return l}t.range=r})(ele);var iYe=ele.range;const rle=Bc(iYe);function Gp(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function aYe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L6(t){let e,n,r;t.length!==2?(e=Gp,n=(o,l)=>Gp(t(o),l),r=(o,l)=>t(o)-l):(e=t===Gp||t===aYe?t:oYe,n=t,r=t);function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=s(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:s,center:a,right:i}}function oYe(){return 0}function sle(t){return t===null?NaN:+t}function*lYe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const cYe=L6(Gp),mS=cYe.right;L6(sle).center;class E9 extends Map{constructor(e,n=hYe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(P9(this,e))}has(e){return super.has(P9(this,e))}set(e,n){return super.set(uYe(this,e),n)}delete(e){return super.delete(dYe(this,e))}}function P9({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function uYe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function dYe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function hYe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fYe(t=Gp){if(t===Gp)return ile;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ile(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const pYe=Math.sqrt(50),mYe=Math.sqrt(10),gYe=Math.sqrt(2);function ET(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=pYe?10:i>=mYe?5:i>=gYe?2:1;let o,l,c;return s<0?(c=Math.pow(10,-s)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?ET(t,e,n*2):[o,l,c]}function aD(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,a]=r?ET(e,t,n):ET(t,e,n);if(!(i>=s))return[];const o=i-s+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(i-c)/-a;else for(let c=0;c<o;++c)l[c]=(i-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(s+c)/-a;else for(let c=0;c<o;++c)l[c]=(s+c)*a;return l}function oD(t,e,n){return e=+e,t=+t,n=+n,ET(t,e,n)[2]}function lD(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?oD(e,t,n):oD(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function O9(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function j9(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function ale(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?ile:fYe(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(n,Math.floor(e-c*d/l+h)),m=Math.min(r,Math.floor(e+(l-c)*d/l+h));ale(t,e,f,m,s)}const i=t[e];let a=n,o=r;for(V1(t,n,e),s(t[r],i)>0&&V1(t,n,r);a<o;){for(V1(t,a,o),++a,--o;s(t[a],i)<0;)++a;for(;s(t[o],i)>0;)--o}s(t[n],i)===0?V1(t,n,o):(++o,V1(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function V1(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function yYe(t,e,n){if(t=Float64Array.from(lYe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return j9(t);if(e>=1)return O9(t);var r,s=(r-1)*e,i=Math.floor(s),a=O9(ale(t,i).subarray(0,i+1)),o=j9(t.subarray(i+1));return a+(o-a)*(s-i)}}function vYe(t,e,n=sle){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),a=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return a+(o-a)*(s-i)}}function xYe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Gc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _f(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const cD=Symbol("implicit");function R6(){var t=new E9,e=[],n=[],r=cD;function s(i){let a=t.get(i);if(a===void 0){if(r!==cD)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new E9;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return R6(e,n).unknown(r)},Gc.apply(s,arguments),s}function M6(){var t=R6().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,f=s<r,m=f?s:r,y=f?r:s;i=(y-m)/Math.max(1,h-l+c*2),o&&(i=Math.floor(i)),m+=(y-m-i*(h-l))*u,a=i*(1-l),o&&(m=Math.round(m),a=Math.round(a));var v=xYe(h).map(function(x){return m+i*x});return n(f?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,s]=h,r=+r,s=+s,d()):[r,s]},t.rangeRound=function(h){return[r,s]=h,r=+r,s=+s,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return M6(e(),[r,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},Gc.apply(d(),arguments)}function ole(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ole(e())},t}function bYe(){return ole(M6.apply(null,arguments).paddingInner(1))}function F6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gS(){}var X2=.7,PT=1/X2,Uv="\\s*([+-]?\\d+)\\s*",Y2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wYe=/^#([0-9a-f]{3,8})$/,_Ye=new RegExp(`^rgb\\(${Uv},${Uv},${Uv}\\)$`),kYe=new RegExp(`^rgb\\(${Md},${Md},${Md}\\)$`),SYe=new RegExp(`^rgba\\(${Uv},${Uv},${Uv},${Y2}\\)$`),NYe=new RegExp(`^rgba\\(${Md},${Md},${Md},${Y2}\\)$`),CYe=new RegExp(`^hsl\\(${Y2},${Md},${Md}\\)$`),TYe=new RegExp(`^hsla\\(${Y2},${Md},${Md},${Y2}\\)$`),$9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F6(gS,Z2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D9,formatHex:D9,formatHex8:IYe,formatHsl:AYe,formatRgb:L9,toString:L9});function D9(){return this.rgb().formatHex()}function IYe(){return this.rgb().formatHex8()}function AYe(){return cle(this).formatHsl()}function L9(){return this.rgb().formatRgb()}function Z2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wYe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?R9(e):n===3?new tl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?BN(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?BN(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_Ye.exec(t))?new tl(e[1],e[2],e[3],1):(e=kYe.exec(t))?new tl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=SYe.exec(t))?BN(e[1],e[2],e[3],e[4]):(e=NYe.exec(t))?BN(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=CYe.exec(t))?z9(e[1],e[2]/100,e[3]/100,1):(e=TYe.exec(t))?z9(e[1],e[2]/100,e[3]/100,e[4]):$9.hasOwnProperty(t)?R9($9[t]):t==="transparent"?new tl(NaN,NaN,NaN,0):null}function R9(t){return new tl(t>>16&255,t>>8&255,t&255,1)}function BN(t,e,n,r){return r<=0&&(t=e=n=NaN),new tl(t,e,n,r)}function EYe(t){return t instanceof gS||(t=Z2(t)),t?(t=t.rgb(),new tl(t.r,t.g,t.b,t.opacity)):new tl}function uD(t,e,n,r){return arguments.length===1?EYe(t):new tl(t,e,n,r??1)}function tl(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}F6(tl,uD,lle(gS,{brighter(t){return t=t==null?PT:Math.pow(PT,t),new tl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?X2:Math.pow(X2,t),new tl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new tl(e0(this.r),e0(this.g),e0(this.b),OT(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M9,formatHex:M9,formatHex8:PYe,formatRgb:F9,toString:F9}));function M9(){return`#${Wg(this.r)}${Wg(this.g)}${Wg(this.b)}`}function PYe(){return`#${Wg(this.r)}${Wg(this.g)}${Wg(this.b)}${Wg((isNaN(this.opacity)?1:this.opacity)*255)}`}function F9(){const t=OT(this.opacity);return`${t===1?"rgb(":"rgba("}${e0(this.r)}, ${e0(this.g)}, ${e0(this.b)}${t===1?")":`, ${t})`}`}function OT(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function e0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wg(t){return t=e0(t),(t<16?"0":"")+t.toString(16)}function z9(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cu(t,e,n,r)}function cle(t){if(t instanceof Cu)return new Cu(t.h,t.s,t.l,t.opacity);if(t instanceof gS||(t=Z2(t)),!t)return new Cu;if(t instanceof Cu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,o=i-s,l=(i+s)/2;return o?(e===i?a=(n-r)/o+(n<r)*6:n===i?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?i+s:2-i-s,a*=60):o=l>0&&l<1?0:a,new Cu(a,o,l,t.opacity)}function OYe(t,e,n,r){return arguments.length===1?cle(t):new Cu(t,e,n,r??1)}function Cu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}F6(Cu,OYe,lle(gS,{brighter(t){return t=t==null?PT:Math.pow(PT,t),new Cu(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?X2:Math.pow(X2,t),new Cu(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new tl(A3(t>=240?t-240:t+120,s,r),A3(t,s,r),A3(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Cu(B9(this.h),WN(this.s),WN(this.l),OT(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=OT(this.opacity);return`${t===1?"hsl(":"hsla("}${B9(this.h)}, ${WN(this.s)*100}%, ${WN(this.l)*100}%${t===1?")":`, ${t})`}`}}));function B9(t){return t=(t||0)%360,t<0?t+360:t}function WN(t){return Math.max(0,Math.min(1,t||0))}function A3(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const z6=t=>()=>t;function jYe(t,e){return function(n){return t+n*e}}function $Ye(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function DYe(t){return(t=+t)==1?ule:function(e,n){return n-e?$Ye(e,n,t):z6(isNaN(e)?n:e)}}function ule(t,e){var n=e-t;return n?jYe(t,n):z6(isNaN(t)?e:t)}const W9=function t(e){var n=DYe(e);function r(s,i){var a=n((s=uD(s)).r,(i=uD(i)).r),o=n(s.g,i.g),l=n(s.b,i.b),c=ule(s.opacity,i.opacity);return function(u){return s.r=a(u),s.g=o(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r}(1);function LYe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function RYe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function MYe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)s[a]=r1(t[a],e[a]);for(;a<n;++a)i[a]=e[a];return function(o){for(a=0;a<r;++a)i[a]=s[a](o);return i}}function FYe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function jT(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zYe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=r1(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var dD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,E3=new RegExp(dD.source,"g");function BYe(t){return function(){return t}}function WYe(t){return function(e){return t(e)+""}}function UYe(t,e){var n=dD.lastIndex=E3.lastIndex=0,r,s,i,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=dD.exec(t))&&(s=E3.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,l.push({i:a,x:jT(r,s)})),n=E3.lastIndex;return n<e.length&&(i=e.slice(n),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?WYe(l[0].x):BYe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function r1(t,e){var n=typeof e,r;return e==null||n==="boolean"?z6(e):(n==="number"?jT:n==="string"?(r=Z2(e))?(e=r,W9):UYe:e instanceof Z2?W9:e instanceof Date?FYe:RYe(e)?LYe:Array.isArray(e)?MYe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zYe:jT)(t,e)}function B6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function VYe(t,e){e===void 0&&(e=t,t=r1);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[o](a-o)}}function HYe(t){return function(){return t}}function $T(t){return+t}var U9=[0,1];function mo(t){return t}function hD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:HYe(isNaN(e)?NaN:.5)}function qYe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function GYe(t,e,n){var r=t[0],s=t[1],i=e[0],a=e[1];return s<r?(r=hD(s,r),i=n(a,i)):(r=hD(r,s),i=n(i,a)),function(o){return i(r(o))}}function KYe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=hD(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(o){var l=mS(t,o,1,r)-1;return i[l](s[l](o))}}function yS(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _P(){var t=U9,e=U9,n=r1,r,s,i,a=mo,o,l,c;function u(){var h=Math.min(t.length,e.length);return a!==mo&&(a=qYe(t[0],t[h-1])),o=h>2?KYe:GYe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?i:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(s((c||(c=o(e,t.map(r),jT)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,$T),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=B6,u()},d.clamp=function(h){return arguments.length?(a=h?!0:mo,u()):a!==mo},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(i=h,d):i},function(h,f){return r=h,s=f,u()}}function W6(){return _P()(mo,mo)}function XYe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function DT(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Sx(t){return t=DT(Math.abs(t)),t?t[1]:NaN}function YYe(t,e){return function(n,r){for(var s=n.length,i=[],a=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(n.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(e)}}function ZYe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var JYe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J2(t){if(!(e=JYe.exec(t)))throw new Error("invalid format: "+t);var e;return new U6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}J2.prototype=U6.prototype;function U6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}U6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QYe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var LT;function eZe(t,e){var n=DT(t,e);if(!n)return LT=void 0,t.toPrecision(e);var r=n[0],s=n[1],i=s-(LT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+DT(t,Math.max(0,e+i-1))[0]}function V9(t,e){var n=DT(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const H9={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:XYe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>V9(t*100,e),r:V9,s:eZe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function q9(t){return t}var G9=Array.prototype.map,K9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tZe(t){var e=t.grouping===void 0||t.thousands===void 0?q9:YYe(G9.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?q9:ZYe(G9.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d,h){d=J2(d);var f=d.fill,m=d.align,y=d.sign,v=d.symbol,x=d.zero,b=d.width,_=d.comma,k=d.precision,N=d.trim,A=d.type;A==="n"?(_=!0,A="g"):H9[A]||(k===void 0&&(k=12),N=!0,A="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var T=(h&&h.prefix!==void 0?h.prefix:"")+(v==="$"?n:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),C=(v==="$"?r:/[%p]/.test(A)?a:"")+(h&&h.suffix!==void 0?h.suffix:""),P=H9[A],$=/[defgprs%]/.test(A);k=k===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function j(O){var F=T,B=C,Z,V,G;if(A==="c")B=P(O)+B,O="";else{O=+O;var U=O<0||1/O<0;if(O=isNaN(O)?l:P(Math.abs(O),k),N&&(O=QYe(O)),U&&+O==0&&y!=="+"&&(U=!1),F=(U?y==="("?y:o:y==="-"||y==="("?"":y)+F,B=(A==="s"&&!isNaN(O)&&LT!==void 0?K9[8+LT/3]:"")+B+(U&&y==="("?")":""),$){for(Z=-1,V=O.length;++Z<V;)if(G=O.charCodeAt(Z),48>G||G>57){B=(G===46?s+O.slice(Z+1):O.slice(Z))+B,O=O.slice(0,Z);break}}}_&&!x&&(O=e(O,1/0));var K=F.length+O.length+B.length,ee=K<b?new Array(b-K+1).join(f):"";switch(_&&x&&(O=e(ee+O,ee.length?b-B.length:1/0),ee=""),m){case"<":O=F+O+B+ee;break;case"=":O=F+ee+O+B;break;case"^":O=ee.slice(0,K=ee.length>>1)+F+O+B+ee.slice(K);break;default:O=ee+F+O+B;break}return i(O)}return j.toString=function(){return d+""},j}function u(d,h){var f=Math.max(-8,Math.min(8,Math.floor(Sx(h)/3)))*3,m=Math.pow(10,-f),y=c((d=J2(d),d.type="f",d),{suffix:K9[8+f/3]});return function(v){return y(m*v)}}return{format:c,formatPrefix:u}}var UN,V6,dle;nZe({thousands:",",grouping:[3],currency:["$",""]});function nZe(t){return UN=tZe(t),V6=UN.format,dle=UN.formatPrefix,UN}function rZe(t){return Math.max(0,-Sx(Math.abs(t)))}function sZe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sx(e)/3)))*3-Sx(Math.abs(t)))}function iZe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sx(e)-Sx(t))+1}function hle(t,e,n,r){var s=lD(t,e,n),i;switch(r=J2(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=sZe(s,a))&&(r.precision=i),dle(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=iZe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=rZe(s))&&(r.precision=i-(r.type==="%")*2);break}}return V6(r)}function jm(t){var e=t.domain;return t.ticks=function(n){var r=e();return aD(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return hle(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,a=r[s],o=r[i],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=s,s=i,i=c);u-- >0;){if(c=oD(a,o,n),c===l)return r[s]=a,r[i]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function fle(){var t=W6();return t.copy=function(){return yS(t,fle())},Gc.apply(t,arguments),jm(t)}function ple(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,$T),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return ple(t).unknown(e)},t=arguments.length?Array.from(t,$T):[0,1],jm(n)}function mle(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],a;return i<s&&(a=n,n=r,r=a,a=s,s=i,i=a),t[n]=e.floor(s),t[r]=e.ceil(i),t}function X9(t){return Math.log(t)}function Y9(t){return Math.exp(t)}function aZe(t){return-Math.log(-t)}function oZe(t){return-Math.exp(-t)}function lZe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cZe(t){return t===10?lZe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function uZe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Z9(t){return(e,n)=>-t(-e,n)}function H6(t){const e=t(X9,Y9),n=e.domain;let r=10,s,i;function a(){return s=uZe(r),i=cZe(r),n()[0]<0?(s=Z9(s),i=Z9(i),t(aZe,oZe)):t(X9,Y9),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=s(c),f=s(u),m,y;const v=o==null?10:+o;let x=[];if(!(r%1)&&f-h<v){if(h=Math.floor(h),f=Math.ceil(f),c>0){for(;h<=f;++h)for(m=1;m<r;++m)if(y=h<0?m/i(-h):m*i(h),!(y<c)){if(y>u)break;x.push(y)}}else for(;h<=f;++h)for(m=r-1;m>=1;--m)if(y=h>0?m/i(-h):m*i(h),!(y<c)){if(y>u)break;x.push(y)}x.length*2<v&&(x=aD(c,u,v))}else x=aD(h,f,Math.min(f-h,v)).map(i);return d?x.reverse():x},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=J2(l)).precision==null&&(l.trim=!0),l=V6(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let d=u/i(Math.round(s(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(mle(n(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),e}function gle(){const t=H6(_P()).domain([1,10]);return t.copy=()=>yS(t,gle()).base(t.base()),Gc.apply(t,arguments),t}function J9(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Q9(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function q6(t){var e=1,n=t(J9(e),Q9(e));return n.constant=function(r){return arguments.length?t(J9(e=+r),Q9(e)):e},jm(n)}function yle(){var t=q6(_P());return t.copy=function(){return yS(t,yle()).constant(t.constant())},Gc.apply(t,arguments)}function eH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dZe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hZe(t){return t<0?-t*t:t*t}function G6(t){var e=t(mo,mo),n=1;function r(){return n===1?t(mo,mo):n===.5?t(dZe,hZe):t(eH(n),eH(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},jm(e)}function K6(){var t=G6(_P());return t.copy=function(){return yS(t,K6()).exponent(t.exponent())},Gc.apply(t,arguments),t}function fZe(){return K6.apply(null,arguments).exponent(.5)}function tH(t){return Math.sign(t)*t*t}function pZe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function vle(){var t=W6(),e=[0,1],n=!1,r;function s(i){var a=pZe(t(i));return isNaN(a)?r:n?Math.round(a):a}return s.invert=function(i){return t.invert(tH(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,$T)).map(tH)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return vle(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Gc.apply(s,arguments),jm(s)}function xle(){var t=[],e=[],n=[],r;function s(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=vYe(t,a/o);return i}function i(a){return a==null||isNaN(a=+a)?r:e[mS(n,a)]}return i.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Gp),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return xle().domain(t).range(e).unknown(r)},Gc.apply(i,arguments)}function ble(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function a(l){return l!=null&&l<=l?s[mS(r,l,0,n)]:i}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,o()):s.slice()},a.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(i=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return ble().domain([t,e]).range(s).unknown(i)},Gc.apply(jm(a),arguments)}function wle(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[mS(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return wle().domain(t).range(e).unknown(n)},Gc.apply(s,arguments)}const P3=new Date,O3=new Date;function Ni(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),o=s.ceil(i);return i-a<o-i?a:o},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,o)=>{const l=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<a)||!(o>0))return l;let c;do l.push(c=new Date(+i)),e(i,o),t(i);while(c<i&&i<a);return l},s.filter=i=>Ni(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!i(a););else for(;--o>=0;)for(;e(a,1),!i(a););}),n&&(s.count=(i,a)=>(P3.setTime(+i),O3.setTime(+a),t(P3),t(O3),Math.floor(n(P3,O3))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?a=>r(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const RT=Ni(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);RT.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ni(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):RT);RT.range;const Rh=1e3,Ic=Rh*60,Mh=Ic*60,af=Mh*24,X6=af*7,nH=af*30,j3=af*365,Ug=Ni(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Rh)},(t,e)=>(e-t)/Rh,t=>t.getUTCSeconds());Ug.range;const Y6=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rh)},(t,e)=>{t.setTime(+t+e*Ic)},(t,e)=>(e-t)/Ic,t=>t.getMinutes());Y6.range;const Z6=Ni(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ic)},(t,e)=>(e-t)/Ic,t=>t.getUTCMinutes());Z6.range;const J6=Ni(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rh-t.getMinutes()*Ic)},(t,e)=>{t.setTime(+t+e*Mh)},(t,e)=>(e-t)/Mh,t=>t.getHours());J6.range;const Q6=Ni(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Mh)},(t,e)=>(e-t)/Mh,t=>t.getUTCHours());Q6.range;const vS=Ni(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ic)/af,t=>t.getDate()-1);vS.range;const kP=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/af,t=>t.getUTCDate()-1);kP.range;const _le=Ni(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/af,t=>Math.floor(t/af));_le.range;function uy(t){return Ni(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ic)/X6)}const SP=uy(0),MT=uy(1),mZe=uy(2),gZe=uy(3),Nx=uy(4),yZe=uy(5),vZe=uy(6);SP.range;MT.range;mZe.range;gZe.range;Nx.range;yZe.range;vZe.range;function dy(t){return Ni(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/X6)}const NP=dy(0),FT=dy(1),xZe=dy(2),bZe=dy(3),Cx=dy(4),wZe=dy(5),_Ze=dy(6);NP.range;FT.range;xZe.range;bZe.range;Cx.range;wZe.range;_Ze.range;const ez=Ni(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ez.range;const tz=Ni(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());tz.range;const of=Ni(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());of.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});of.range;const lf=Ni(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());lf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ni(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});lf.range;function kle(t,e,n,r,s,i){const a=[[Ug,1,Rh],[Ug,5,5*Rh],[Ug,15,15*Rh],[Ug,30,30*Rh],[i,1,Ic],[i,5,5*Ic],[i,15,15*Ic],[i,30,30*Ic],[s,1,Mh],[s,3,3*Mh],[s,6,6*Mh],[s,12,12*Mh],[r,1,af],[r,2,2*af],[n,1,X6],[e,1,nH],[e,3,3*nH],[t,1,j3]];function o(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const f=d&&typeof d.range=="function"?d:l(c,u,d),m=f?f.range(c,+u+1):[];return h?m.reverse():m}function l(c,u,d){const h=Math.abs(u-c)/d,f=L6(([,,v])=>v).right(a,h);if(f===a.length)return t.every(lD(c/j3,u/j3,d));if(f===0)return RT.every(Math.max(lD(c,u,d),1));const[m,y]=a[h/a[f-1][2]<a[f][2]/h?f-1:f];return m.every(y)}return[o,l]}const[kZe,SZe]=kle(lf,tz,NP,_le,Q6,Z6),[NZe,CZe]=kle(of,ez,SP,vS,J6,Y6);function $3(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function D3(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function H1(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function TZe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=q1(s),u=G1(s),d=q1(i),h=G1(i),f=q1(a),m=G1(a),y=q1(o),v=G1(o),x=q1(l),b=G1(l),_={a:G,A:U,b:K,B:ee,c:null,d:lH,e:lH,f:YZe,g:aJe,G:lJe,H:GZe,I:KZe,j:XZe,L:Sle,m:ZZe,M:JZe,p:oe,q:W,Q:dH,s:hH,S:QZe,u:eJe,U:tJe,V:nJe,w:rJe,W:sJe,x:null,X:null,y:iJe,Y:oJe,Z:cJe,"%":uH},k={a:Y,A:Q,b:J,B:te,c:null,d:cH,e:cH,f:fJe,g:kJe,G:NJe,H:uJe,I:dJe,j:hJe,L:Cle,m:pJe,M:mJe,p:me,q:ge,Q:dH,s:hH,S:gJe,u:yJe,U:vJe,V:xJe,w:bJe,W:wJe,x:null,X:null,y:_Je,Y:SJe,Z:CJe,"%":uH},N={a:$,A:j,b:O,B:F,c:B,d:aH,e:aH,f:UZe,g:iH,G:sH,H:oH,I:oH,j:FZe,L:WZe,m:MZe,M:zZe,p:P,q:RZe,Q:HZe,s:qZe,S:BZe,u:OZe,U:jZe,V:$Ze,w:PZe,W:DZe,x:Z,X:V,y:iH,Y:sH,Z:LZe,"%":VZe};_.x=A(n,_),_.X=A(r,_),_.c=A(e,_),k.x=A(n,k),k.X=A(r,k),k.c=A(e,k);function A(ce,Ce){return function(_e){var we=[],He=-1,Qe=0,Ae=ce.length,he,ht,Me;for(_e instanceof Date||(_e=new Date(+_e));++He<Ae;)ce.charCodeAt(He)===37&&(we.push(ce.slice(Qe,He)),(ht=rH[he=ce.charAt(++He)])!=null?he=ce.charAt(++He):ht=he==="e"?" ":"0",(Me=Ce[he])&&(he=Me(_e,ht)),we.push(he),Qe=He+1);return we.push(ce.slice(Qe,He)),we.join("")}}function T(ce,Ce){return function(_e){var we=H1(1900,void 0,1),He=C(we,ce,_e+="",0),Qe,Ae;if(He!=_e.length)return null;if("Q"in we)return new Date(we.Q);if("s"in we)return new Date(we.s*1e3+("L"in we?we.L:0));if(Ce&&!("Z"in we)&&(we.Z=0),"p"in we&&(we.H=we.H%12+we.p*12),we.m===void 0&&(we.m="q"in we?we.q:0),"V"in we){if(we.V<1||we.V>53)return null;"w"in we||(we.w=1),"Z"in we?(Qe=D3(H1(we.y,0,1)),Ae=Qe.getUTCDay(),Qe=Ae>4||Ae===0?FT.ceil(Qe):FT(Qe),Qe=kP.offset(Qe,(we.V-1)*7),we.y=Qe.getUTCFullYear(),we.m=Qe.getUTCMonth(),we.d=Qe.getUTCDate()+(we.w+6)%7):(Qe=$3(H1(we.y,0,1)),Ae=Qe.getDay(),Qe=Ae>4||Ae===0?MT.ceil(Qe):MT(Qe),Qe=vS.offset(Qe,(we.V-1)*7),we.y=Qe.getFullYear(),we.m=Qe.getMonth(),we.d=Qe.getDate()+(we.w+6)%7)}else("W"in we||"U"in we)&&("w"in we||(we.w="u"in we?we.u%7:"W"in we?1:0),Ae="Z"in we?D3(H1(we.y,0,1)).getUTCDay():$3(H1(we.y,0,1)).getDay(),we.m=0,we.d="W"in we?(we.w+6)%7+we.W*7-(Ae+5)%7:we.w+we.U*7-(Ae+6)%7);return"Z"in we?(we.H+=we.Z/100|0,we.M+=we.Z%100,D3(we)):$3(we)}}function C(ce,Ce,_e,we){for(var He=0,Qe=Ce.length,Ae=_e.length,he,ht;He<Qe;){if(we>=Ae)return-1;if(he=Ce.charCodeAt(He++),he===37){if(he=Ce.charAt(He++),ht=N[he in rH?Ce.charAt(He++):he],!ht||(we=ht(ce,_e,we))<0)return-1}else if(he!=_e.charCodeAt(we++))return-1}return we}function P(ce,Ce,_e){var we=c.exec(Ce.slice(_e));return we?(ce.p=u.get(we[0].toLowerCase()),_e+we[0].length):-1}function $(ce,Ce,_e){var we=f.exec(Ce.slice(_e));return we?(ce.w=m.get(we[0].toLowerCase()),_e+we[0].length):-1}function j(ce,Ce,_e){var we=d.exec(Ce.slice(_e));return we?(ce.w=h.get(we[0].toLowerCase()),_e+we[0].length):-1}function O(ce,Ce,_e){var we=x.exec(Ce.slice(_e));return we?(ce.m=b.get(we[0].toLowerCase()),_e+we[0].length):-1}function F(ce,Ce,_e){var we=y.exec(Ce.slice(_e));return we?(ce.m=v.get(we[0].toLowerCase()),_e+we[0].length):-1}function B(ce,Ce,_e){return C(ce,e,Ce,_e)}function Z(ce,Ce,_e){return C(ce,n,Ce,_e)}function V(ce,Ce,_e){return C(ce,r,Ce,_e)}function G(ce){return a[ce.getDay()]}function U(ce){return i[ce.getDay()]}function K(ce){return l[ce.getMonth()]}function ee(ce){return o[ce.getMonth()]}function oe(ce){return s[+(ce.getHours()>=12)]}function W(ce){return 1+~~(ce.getMonth()/3)}function Y(ce){return a[ce.getUTCDay()]}function Q(ce){return i[ce.getUTCDay()]}function J(ce){return l[ce.getUTCMonth()]}function te(ce){return o[ce.getUTCMonth()]}function me(ce){return s[+(ce.getUTCHours()>=12)]}function ge(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Ce=A(ce+="",_);return Ce.toString=function(){return ce},Ce},parse:function(ce){var Ce=T(ce+="",!1);return Ce.toString=function(){return ce},Ce},utcFormat:function(ce){var Ce=A(ce+="",k);return Ce.toString=function(){return ce},Ce},utcParse:function(ce){var Ce=T(ce+="",!0);return Ce.toString=function(){return ce},Ce}}}var rH={"-":"",_:" ",0:"0"},Yi=/^\s*\d+/,IZe=/^%/,AZe=/[\\^$*+?|[\]().{}]/g;function Zn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function EZe(t){return t.replace(AZe,"\\$&")}function q1(t){return new RegExp("^(?:"+t.map(EZe).join("|")+")","i")}function G1(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function PZe(t,e,n){var r=Yi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function OZe(t,e,n){var r=Yi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function jZe(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function $Ze(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function DZe(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sH(t,e,n){var r=Yi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function iH(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function LZe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function RZe(t,e,n){var r=Yi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function MZe(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function aH(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function FZe(t,e,n){var r=Yi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function oH(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function zZe(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function BZe(t,e,n){var r=Yi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function WZe(t,e,n){var r=Yi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function UZe(t,e,n){var r=Yi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function VZe(t,e,n){var r=IZe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function HZe(t,e,n){var r=Yi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qZe(t,e,n){var r=Yi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function lH(t,e){return Zn(t.getDate(),e,2)}function GZe(t,e){return Zn(t.getHours(),e,2)}function KZe(t,e){return Zn(t.getHours()%12||12,e,2)}function XZe(t,e){return Zn(1+vS.count(of(t),t),e,3)}function Sle(t,e){return Zn(t.getMilliseconds(),e,3)}function YZe(t,e){return Sle(t,e)+"000"}function ZZe(t,e){return Zn(t.getMonth()+1,e,2)}function JZe(t,e){return Zn(t.getMinutes(),e,2)}function QZe(t,e){return Zn(t.getSeconds(),e,2)}function eJe(t){var e=t.getDay();return e===0?7:e}function tJe(t,e){return Zn(SP.count(of(t)-1,t),e,2)}function Nle(t){var e=t.getDay();return e>=4||e===0?Nx(t):Nx.ceil(t)}function nJe(t,e){return t=Nle(t),Zn(Nx.count(of(t),t)+(of(t).getDay()===4),e,2)}function rJe(t){return t.getDay()}function sJe(t,e){return Zn(MT.count(of(t)-1,t),e,2)}function iJe(t,e){return Zn(t.getFullYear()%100,e,2)}function aJe(t,e){return t=Nle(t),Zn(t.getFullYear()%100,e,2)}function oJe(t,e){return Zn(t.getFullYear()%1e4,e,4)}function lJe(t,e){var n=t.getDay();return t=n>=4||n===0?Nx(t):Nx.ceil(t),Zn(t.getFullYear()%1e4,e,4)}function cJe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zn(e/60|0,"0",2)+Zn(e%60,"0",2)}function cH(t,e){return Zn(t.getUTCDate(),e,2)}function uJe(t,e){return Zn(t.getUTCHours(),e,2)}function dJe(t,e){return Zn(t.getUTCHours()%12||12,e,2)}function hJe(t,e){return Zn(1+kP.count(lf(t),t),e,3)}function Cle(t,e){return Zn(t.getUTCMilliseconds(),e,3)}function fJe(t,e){return Cle(t,e)+"000"}function pJe(t,e){return Zn(t.getUTCMonth()+1,e,2)}function mJe(t,e){return Zn(t.getUTCMinutes(),e,2)}function gJe(t,e){return Zn(t.getUTCSeconds(),e,2)}function yJe(t){var e=t.getUTCDay();return e===0?7:e}function vJe(t,e){return Zn(NP.count(lf(t)-1,t),e,2)}function Tle(t){var e=t.getUTCDay();return e>=4||e===0?Cx(t):Cx.ceil(t)}function xJe(t,e){return t=Tle(t),Zn(Cx.count(lf(t),t)+(lf(t).getUTCDay()===4),e,2)}function bJe(t){return t.getUTCDay()}function wJe(t,e){return Zn(FT.count(lf(t)-1,t),e,2)}function _Je(t,e){return Zn(t.getUTCFullYear()%100,e,2)}function kJe(t,e){return t=Tle(t),Zn(t.getUTCFullYear()%100,e,2)}function SJe(t,e){return Zn(t.getUTCFullYear()%1e4,e,4)}function NJe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cx(t):Cx.ceil(t),Zn(t.getUTCFullYear()%1e4,e,4)}function CJe(){return"+0000"}function uH(){return"%"}function dH(t){return+t}function hH(t){return Math.floor(+t/1e3)}var Gy,Ile,Ale;TJe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function TJe(t){return Gy=TZe(t),Ile=Gy.format,Gy.parse,Ale=Gy.utcFormat,Gy.utcParse,Gy}function IJe(t){return new Date(t)}function AJe(t){return t instanceof Date?+t:+new Date(+t)}function nz(t,e,n,r,s,i,a,o,l,c){var u=W6(),d=u.invert,h=u.domain,f=c(".%L"),m=c(":%S"),y=c("%I:%M"),v=c("%I %p"),x=c("%a %d"),b=c("%b %d"),_=c("%B"),k=c("%Y");function N(A){return(l(A)<A?f:o(A)<A?m:a(A)<A?y:i(A)<A?v:r(A)<A?s(A)<A?x:b:n(A)<A?_:k)(A)}return u.invert=function(A){return new Date(d(A))},u.domain=function(A){return arguments.length?h(Array.from(A,AJe)):h().map(IJe)},u.ticks=function(A){var T=h();return t(T[0],T[T.length-1],A??10)},u.tickFormat=function(A,T){return T==null?N:c(T)},u.nice=function(A){var T=h();return(!A||typeof A.range!="function")&&(A=e(T[0],T[T.length-1],A??10)),A?h(mle(T,A)):u},u.copy=function(){return yS(u,nz(t,e,n,r,s,i,a,o,l,c))},u}function EJe(){return Gc.apply(nz(NZe,CZe,of,ez,SP,vS,J6,Y6,Ug,Ile).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PJe(){return Gc.apply(nz(kZe,SZe,lf,tz,NP,kP,Q6,Z6,Ug,Ale).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function CP(){var t=0,e=1,n,r,s,i,a=mo,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(s===0?.5:(d=(i(d)-n)*s,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function u(d){return function(h){var f,m;return arguments.length?([f,m]=h,a=d(f,m),c):[a(0),a(1)]}}return c.range=u(r1),c.rangeRound=u(B6),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return i=d,n=d(t),r=d(e),s=n===r?0:1/(r-n),c}}function $m(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ele(){var t=jm(CP()(mo));return t.copy=function(){return $m(t,Ele())},_f.apply(t,arguments)}function Ple(){var t=H6(CP()).domain([1,10]);return t.copy=function(){return $m(t,Ple()).base(t.base())},_f.apply(t,arguments)}function Ole(){var t=q6(CP());return t.copy=function(){return $m(t,Ole()).constant(t.constant())},_f.apply(t,arguments)}function rz(){var t=G6(CP());return t.copy=function(){return $m(t,rz()).exponent(t.exponent())},_f.apply(t,arguments)}function OJe(){return rz.apply(null,arguments).exponent(.5)}function jle(){var t=[],e=mo;function n(r){if(r!=null&&!isNaN(r=+r))return e((mS(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Gp),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>yYe(t,i/r))},n.copy=function(){return jle(e).domain(t)},_f.apply(n,arguments)}function TP(){var t=0,e=.5,n=1,r=1,s,i,a,o,l,c=mo,u,d=!1,h;function f(y){return isNaN(y=+y)?h:(y=.5+((y=+u(y))-i)*(r*y<r*i?o:l),c(d?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([t,e,n]=y,s=u(t=+t),i=u(e=+e),a=u(n=+n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,f):[t,e,n]},f.clamp=function(y){return arguments.length?(d=!!y,f):d},f.interpolator=function(y){return arguments.length?(c=y,f):c};function m(y){return function(v){var x,b,_;return arguments.length?([x,b,_]=v,c=VYe(y,[x,b,_]),f):[c(0),c(.5),c(1)]}}return f.range=m(r1),f.rangeRound=m(B6),f.unknown=function(y){return arguments.length?(h=y,f):h},function(y){return u=y,s=y(t),i=y(e),a=y(n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,f}}function $le(){var t=jm(TP()(mo));return t.copy=function(){return $m(t,$le())},_f.apply(t,arguments)}function Dle(){var t=H6(TP()).domain([.1,1,10]);return t.copy=function(){return $m(t,Dle()).base(t.base())},_f.apply(t,arguments)}function Lle(){var t=q6(TP());return t.copy=function(){return $m(t,Lle()).constant(t.constant())},_f.apply(t,arguments)}function sz(){var t=G6(TP());return t.copy=function(){return $m(t,sz()).exponent(t.exponent())},_f.apply(t,arguments)}function jJe(){return sz.apply(null,arguments).exponent(.5)}const mw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:M6,scaleDiverging:$le,scaleDivergingLog:Dle,scaleDivergingPow:sz,scaleDivergingSqrt:jJe,scaleDivergingSymlog:Lle,scaleIdentity:ple,scaleImplicit:cD,scaleLinear:fle,scaleLog:gle,scaleOrdinal:R6,scalePoint:bYe,scalePow:K6,scaleQuantile:xle,scaleQuantize:ble,scaleRadial:vle,scaleSequential:Ele,scaleSequentialLog:Ple,scaleSequentialPow:rz,scaleSequentialQuantile:jle,scaleSequentialSqrt:OJe,scaleSequentialSymlog:Ole,scaleSqrt:fZe,scaleSymlog:yle,scaleThreshold:wle,scaleTime:EJe,scaleUtc:PJe,tickFormat:hle},Symbol.toStringTag,{value:"Module"}));var kf=t=>t.chartData,Rle=Ye([kf],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),iz=(t,e,n,r)=>r?Rle(t):kf(t),$Je=(t,e,n)=>n?Rle(t):kf(t);function cf(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(zn(e)&&zn(n))return!0}return!1}function fH(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Mle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,i;if(zn(n))s=n;else if(typeof n=="function")return;if(zn(r))i=r;else if(typeof r=="function")return;var a=[s,i];if(cf(a))return a}}function DJe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(cf(r))return fH(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,a,o;if(s==="auto")e!=null&&(a=Math.min(...e));else if(Bt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[0]))}catch{}else if(typeof s=="string"&&OV.test(s)){var l=OV.exec(s);if(l==null||l[1]==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e==null?void 0:e[0];if(i==="auto")e!=null&&(o=Math.max(...e));else if(Bt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[1]))}catch{}else if(typeof i=="string"&&jV.test(i)){var u=jV.exec(i);if(u==null||u[1]==null||e==null)o=void 0;else{var d=+u[1];o=e[1]+d}}else o=e==null?void 0:e[1];var h=[a,o];if(cf(h))return e==null?h:fH(h,e,n)}}}var s1=1e9,LJe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oz,ts=!0,zc="[DecimalError] ",t0=zc+"Invalid argument: ",az=zc+"Exponent out of range: ",i1=Math.floor,_g=Math.pow,RJe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Il,Di=1e7,zr=7,Fle=9007199254740991,zT=i1(Fle/zr),Dt={};Dt.absoluteValue=Dt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Dt.comparedTo=Dt.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Dt.decimalPlaces=Dt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Dt.dividedBy=Dt.div=function(t){return Hh(this,new this.constructor(t))};Dt.dividedToIntegerBy=Dt.idiv=function(t){var e=this,n=e.constructor;return Nr(Hh(e,new n(t),0,1),n.precision)};Dt.equals=Dt.eq=function(t){return!this.cmp(t)};Dt.exponent=function(){return ti(this)};Dt.greaterThan=Dt.gt=function(t){return this.cmp(t)>0};Dt.greaterThanOrEqualTo=Dt.gte=function(t){return this.cmp(t)>=0};Dt.isInteger=Dt.isint=function(){return this.e>this.d.length-2};Dt.isNegative=Dt.isneg=function(){return this.s<0};Dt.isPositive=Dt.ispos=function(){return this.s>0};Dt.isZero=function(){return this.s===0};Dt.lessThan=Dt.lt=function(t){return this.cmp(t)<0};Dt.lessThanOrEqualTo=Dt.lte=function(t){return this.cmp(t)<1};Dt.logarithm=Dt.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Il))throw Error(zc+"NaN");if(n.s<1)throw Error(zc+(n.s?"NaN":"-Infinity"));return n.eq(Il)?new r(0):(ts=!1,e=Hh(Q2(n,i),Q2(t,i),i),ts=!0,Nr(e,s))};Dt.minus=Dt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Wle(e,t):zle(e,(t.s=-t.s,t))};Dt.modulo=Dt.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(zc+"NaN");return n.s?(ts=!1,e=Hh(n,t,0,1).times(t),ts=!0,n.minus(e)):Nr(new r(n),s)};Dt.naturalExponential=Dt.exp=function(){return Ble(this)};Dt.naturalLogarithm=Dt.ln=function(){return Q2(this)};Dt.negated=Dt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Dt.plus=Dt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?zle(e,t):Wle(e,(t.s=-t.s,t))};Dt.precision=Dt.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(t0+t);if(e=ti(s)+1,r=s.d.length-1,n=r*zr+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Dt.squareRoot=Dt.sqrt=function(){var t,e,n,r,s,i,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(zc+"NaN")}for(t=ti(o),ts=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=Td(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=i1((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=a=n+3;;)if(i=r,r=i.plus(Hh(o,i,a+2)).times(.5),Td(i.d).slice(0,a)===(e=Td(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(Nr(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(e!="9999")break;a+=4}return ts=!0,Nr(r,n)};Dt.times=Dt.mul=function(t){var e,n,r,s,i,a,o,l,c,u=this,d=u.constructor,h=u.d,f=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=f.length,l<c&&(i=h,h=f,f=i,a=l,l=c,c=a),i=[],a=l+c,r=a;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)o=i[s]+f[r]*h[s-r-1]+e,i[s--]=o%Di|0,e=o/Di|0;i[s]=(i[s]+e)%Di|0}for(;!i[--a];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,ts?Nr(t,d.precision):t};Dt.toDecimalPlaces=Dt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Xd(t,0,s1),e===void 0?e=r.rounding:Xd(e,0,8),Nr(n,t+ti(n)+1,e))};Dt.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=F0(r,!0):(Xd(t,0,s1),e===void 0?e=s.rounding:Xd(e,0,8),r=Nr(new s(r),t+1,e),n=F0(r,!0,t+1)),n};Dt.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?F0(s):(Xd(t,0,s1),e===void 0?e=i.rounding:Xd(e,0,8),r=Nr(new i(s),t+ti(s)+1,e),n=F0(r.abs(),!1,t+ti(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Dt.toInteger=Dt.toint=function(){var t=this,e=t.constructor;return Nr(new e(t),ti(t)+1,e.rounding)};Dt.toNumber=function(){return+this};Dt.toPower=Dt.pow=function(t){var e,n,r,s,i,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Il);if(o=new l(o),!o.s){if(t.s<1)throw Error(zc+"Infinity");return o}if(o.eq(Il))return o;if(r=l.precision,t.eq(Il))return Nr(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,i=o.s,a){if((n=u<0?-u:u)<=Fle){for(s=new l(Il),e=Math.ceil(r/zr+4),ts=!1;n%2&&(s=s.times(o),mH(s.d,e)),n=i1(n/2),n!==0;)o=o.times(o),mH(o.d,e);return ts=!0,t.s<0?new l(Il).div(s):Nr(s,r)}}else if(i<0)throw Error(zc+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,ts=!1,s=t.times(Q2(o,r+c)),ts=!0,s=Ble(s),s.s=i,s};Dt.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=ti(s),r=F0(s,n<=i.toExpNeg||n>=i.toExpPos)):(Xd(t,1,s1),e===void 0?e=i.rounding:Xd(e,0,8),s=Nr(new i(s),t,e),n=ti(s),r=F0(s,t<=n||n<=i.toExpNeg,t)),r};Dt.toSignificantDigits=Dt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Xd(t,1,s1),e===void 0?e=r.rounding:Xd(e,0,8)),Nr(new r(n),t,e)};Dt.toString=Dt.valueOf=Dt.val=Dt.toJSON=Dt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ti(t),n=t.constructor;return F0(t,e<=n.toExpNeg||e>=n.toExpPos)};function zle(t,e){var n,r,s,i,a,o,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),ts?Nr(e,d):e;if(l=t.d,c=e.d,a=t.e,s=e.e,l=l.slice(),i=a-s,i){for(i<0?(r=l,i=-i,o=c.length):(r=c,s=a,o=l.length),a=Math.ceil(d/zr),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Di|0,l[i]%=Di;for(n&&(l.unshift(n),++s),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=s,ts?Nr(e,d):e}function Xd(t,e,n){if(t!==~~t||t<e||t>n)throw Error(t0+t)}function Td(t){var e,n,r,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)r=t[e]+"",n=zr-r.length,n&&(i+=dp(n)),i+=r;a=t[e],r=a+"",n=zr-r.length,n&&(i+=dp(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var Hh=function(){function t(r,s){var i,a=0,o=r.length;for(r=r.slice();o--;)i=r[o]*s+a,r[o]=i%Di|0,a=i/Di|0;return a&&r.unshift(a),r}function e(r,s,i,a){var o,l;if(i!=a)l=i>a?1:-1;else for(o=l=0;o<i;o++)if(r[o]!=s[o]){l=r[o]>s[o]?1:-1;break}return l}function n(r,s,i){for(var a=0;i--;)r[i]-=a,a=r[i]<s[i]?1:0,r[i]=a*Di+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,a){var o,l,c,u,d,h,f,m,y,v,x,b,_,k,N,A,T,C,P=r.constructor,$=r.s==s.s?1:-1,j=r.d,O=s.d;if(!r.s)return new P(r);if(!s.s)throw Error(zc+"Division by zero");for(l=r.e-s.e,T=O.length,N=j.length,f=new P($),m=f.d=[],c=0;O[c]==(j[c]||0);)++c;if(O[c]>(j[c]||0)&&--l,i==null?b=i=P.precision:a?b=i+(ti(r)-ti(s))+1:b=i,b<0)return new P(0);if(b=b/zr+2|0,c=0,T==1)for(u=0,O=O[0],b++;(c<N||u)&&b--;c++)_=u*Di+(j[c]||0),m[c]=_/O|0,u=_%O|0;else{for(u=Di/(O[0]+1)|0,u>1&&(O=t(O,u),j=t(j,u),T=O.length,N=j.length),k=T,y=j.slice(0,T),v=y.length;v<T;)y[v++]=0;C=O.slice(),C.unshift(0),A=O[0],O[1]>=Di/2&&++A;do u=0,o=e(O,y,T,v),o<0?(x=y[0],T!=v&&(x=x*Di+(y[1]||0)),u=x/A|0,u>1?(u>=Di&&(u=Di-1),d=t(O,u),h=d.length,v=y.length,o=e(d,y,h,v),o==1&&(u--,n(d,T<h?C:O,h))):(u==0&&(o=u=1),d=O.slice()),h=d.length,h<v&&d.unshift(0),n(y,d,v),o==-1&&(v=y.length,o=e(O,y,T,v),o<1&&(u++,n(y,T<v?C:O,v))),v=y.length):o===0&&(u++,y=[0]),m[c++]=u,o&&y[0]?y[v++]=j[k]||0:(y=[j[k]],v=1);while((k++<N||y[0]!==void 0)&&b--)}return m[0]||m.shift(),f.e=l,Nr(f,a?i+ti(f)+1:i)}}();function Ble(t,e){var n,r,s,i,a,o,l=0,c=0,u=t.constructor,d=u.precision;if(ti(t)>16)throw Error(az+ti(t));if(!t.s)return new u(Il);for(ts=!1,o=d,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(_g(2,c))/Math.LN10*2+5|0,o+=r,n=s=i=new u(Il),u.precision=o;;){if(s=Nr(s.times(t),o),n=n.times(++l),a=i.plus(Hh(s,n,o)),Td(a.d).slice(0,o)===Td(i.d).slice(0,o)){for(;c--;)i=Nr(i.times(i),o);return u.precision=d,e==null?(ts=!0,Nr(i,d)):i}i=a}}function ti(t){for(var e=t.e*zr,n=t.d[0];n>=10;n/=10)e++;return e}function L3(t,e,n){if(e>t.LN10.sd())throw ts=!0,n&&(t.precision=n),Error(zc+"LN10 precision limit exceeded");return Nr(new t(t.LN10),e)}function dp(t){for(var e="";t--;)e+="0";return e}function Q2(t,e){var n,r,s,i,a,o,l,c,u,d=1,h=10,f=t,m=f.d,y=f.constructor,v=y.precision;if(f.s<1)throw Error(zc+(f.s?"NaN":"-Infinity"));if(f.eq(Il))return new y(0);if(e==null?(ts=!1,c=v):c=e,f.eq(10))return e==null&&(ts=!0),L3(y,c);if(c+=h,y.precision=c,n=Td(m),r=n.charAt(0),i=ti(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(t),n=Td(f.d),r=n.charAt(0),d++;i=ti(f),r>1?(f=new y("0."+n),i++):f=new y(r+"."+n.slice(1))}else return l=L3(y,c+2,v).times(i+""),f=Q2(new y(r+"."+n.slice(1)),c-h).plus(l),y.precision=v,e==null?(ts=!0,Nr(f,v)):f;for(o=a=f=Hh(f.minus(Il),f.plus(Il),c),u=Nr(f.times(f),c),s=3;;){if(a=Nr(a.times(u),c),l=o.plus(Hh(a,new y(s),c)),Td(l.d).slice(0,c)===Td(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(L3(y,c+2,v).times(i+""))),o=Hh(o,new y(d),c),y.precision=v,e==null?(ts=!0,Nr(o,v)):o;o=l,s+=2}}function pH(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=i1(n/zr),t.d=[],r=(n+1)%zr,n<0&&(r+=zr),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=zr;r<s;)t.d.push(+e.slice(r,r+=zr));e=e.slice(r),r=zr-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),ts&&(t.e>zT||t.e<-zT))throw Error(az+n)}else t.s=0,t.e=0,t.d=[0];return t}function Nr(t,e,n){var r,s,i,a,o,l,c,u,d=t.d;for(a=1,i=d[0];i>=10;i/=10)a++;if(r=e-a,r<0)r+=zr,s=e,c=d[u=0];else{if(u=Math.ceil((r+1)/zr),i=d.length,u>=i)return t;for(c=i=d[u],a=1;i>=10;i/=10)a++;r%=zr,s=r-zr+a}if(n!==void 0&&(i=_g(10,a-s-1),o=c/i%10|0,l=e<0||d[u+1]!==void 0||c%i,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?s>0?c/_g(10,a-s):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(i=ti(t),d.length=1,e=e-i-1,d[0]=_g(10,(zr-e%zr)%zr),t.e=i1(-e/zr)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=_g(10,zr-r),d[u]=s>0?(c/_g(10,a-s)%_g(10,s)|0)*i:0),l)for(;;)if(u==0){(d[0]+=i)==Di&&(d[0]=1,++t.e);break}else{if(d[u]+=i,d[u]!=Di)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(ts&&(t.e>zT||t.e<-zT))throw Error(az+ti(t));return t}function Wle(t,e){var n,r,s,i,a,o,l,c,u,d,h=t.constructor,f=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),ts?Nr(e,f):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),s=Math.max(Math.ceil(f/zr),o)+2,a>s&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for(s=l.length,o=d.length,u=s<o,u&&(o=s),s=0;s<o;s++)if(l[s]!=d[s]){u=l[s]<d[s];break}a=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,s=d.length-o;s>0;--s)l[o++]=0;for(s=d.length;s>a;){if(l[--s]<d[s]){for(i=s;i&&l[--i]===0;)l[i]=Di-1;--l[i],l[s]+=Di}l[s]-=d[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,ts?Nr(e,f):e):new h(0)}function F0(t,e,n){var r,s=ti(t),i=Td(t.d),a=i.length;return e?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+dp(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+dp(-s-1)+i,n&&(r=n-a)>0&&(i+=dp(r))):s>=a?(i+=dp(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+dp(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=dp(r))),t.s<0?"-"+i:i}function mH(t,e){if(t.length>e)return t.length=e,!0}function Ule(t){var e,n,r;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(t0+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return pH(a,i.toString())}else if(typeof i!="string")throw Error(t0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,RJe.test(i))pH(a,i);else throw Error(t0+i)}if(s.prototype=Dt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Ule,s.config=s.set=MJe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function MJe(t){if(!t||typeof t!="object")throw Error(zc+"Object expected");var e,n,r,s=["precision",1,s1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(i1(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(t0+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(t0+n+": "+r);return this}var oz=Ule(LJe);Il=new oz(1);const dr=oz;function Vle(t){var e;return t===0?e=1:e=Math.floor(new dr(t).abs().log(10).toNumber())+1,e}function Hle(t,e,n){for(var r=new dr(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var qle=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},Gle=(t,e,n)=>{if(t.lte(0))return new dr(0);var r=Vle(t.toNumber()),s=new dr(10).pow(r),i=t.div(s),a=r!==1?.05:.1,o=new dr(Math.ceil(i.div(a).toNumber())).add(n).mul(a),l=o.mul(s);return e?new dr(l.toNumber()):new dr(Math.ceil(l.toNumber()))},FJe=(t,e,n)=>{var r=new dr(1),s=new dr(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new dr(10).pow(Vle(t)-1),s=new dr(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new dr(Math.floor(t)))}else t===0?s=new dr(Math.floor((e-1)/2)):n||(s=new dr(Math.floor(t)));for(var a=Math.floor((e-1)/2),o=[],l=0;l<e;l++)o.push(s.add(new dr(l-a).mul(r)).toNumber());return o},Kle=function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new dr(0),tickMin:new dr(0),tickMax:new dr(0)};var a=Gle(new dr(n).sub(e).div(r-1),s,i),o;e<=0&&n>=0?o=new dr(0):(o=new dr(e).add(n).div(2),o=o.sub(new dr(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new dr(n).sub(o).div(a).toNumber()),u=l+c+1;return u>r?Kle(e,n,r,s,i+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:a,tickMin:o.sub(new dr(l).mul(a)),tickMax:o.add(new dr(c).mul(a))})},zJe=function(e){var[n,r]=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(s,2),[o,l]=qle([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...Array(s-1).fill(1/0)]:[...Array(s-1).fill(-1/0),l];return n>r?c.reverse():c}if(o===l)return FJe(o,s,i);var{step:u,tickMin:d,tickMax:h}=Kle(o,l,a,i,0),f=Hle(d,h.add(new dr(.1).mul(u)),u);return n>r?f.reverse():f},BJe=function(e,n){var[r,s]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=qle([r,s]);if(a===-1/0||o===1/0)return[r,s];if(a===o)return[a];var l=Math.max(n,2),c=Gle(new dr(o).sub(a).div(l-1),i,0),u=[...Hle(new dr(a),new dr(o),c),o];return i===!1&&(u=u.map(d=>Math.round(d))),r>s?u.reverse():u},WJe=t=>t.rootProps.barCategoryGap,IP=t=>t.rootProps.stackOffset,Xle=t=>t.rootProps.reverseStackOrder,lz=t=>t.options.chartName,cz=t=>t.rootProps.syncId,Yle=t=>t.rootProps.syncMethod,uz=t=>t.options.eventEmitter,UJe=t=>t.rootProps.baseValue,za={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},cg={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},fd={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},AP=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function EP(t,e,n){if(n!=="auto")return n;if(t!=null)return qu(t,e)?"category":"number"}function gH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function BT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gH(Object(n),!0).forEach(function(r){VJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VJe(t,e,n){return(e=HJe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HJe(t){var e=qJe(t,"string");return typeof e=="symbol"?e:e+""}function qJe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yH={allowDataOverflow:cg.allowDataOverflow,allowDecimals:cg.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:cg.angleAxisId,includeHidden:!1,name:void 0,reversed:cg.reversed,scale:cg.scale,tick:cg.tick,tickCount:void 0,ticks:void 0,type:cg.type,unit:void 0},vH={allowDataOverflow:fd.allowDataOverflow,allowDecimals:fd.allowDecimals,allowDuplicatedCategory:fd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fd.radiusAxisId,includeHidden:fd.includeHidden,name:void 0,reversed:fd.reversed,scale:fd.scale,tick:fd.tick,tickCount:fd.tickCount,ticks:void 0,type:fd.type,unit:void 0},GJe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},dz=Ye([GJe,Roe],(t,e)=>{var n;if(t!=null)return t;var r=(n=EP(e,"angleAxis",yH.type))!==null&&n!==void 0?n:"category";return BT(BT({},yH),{},{type:r})}),KJe=(t,e)=>t.polarAxis.radiusAxis[e],hz=Ye([KJe,Roe],(t,e)=>{var n;if(t!=null)return t;var r=(n=EP(e,"radiusAxis",vH.type))!==null&&n!==void 0?n:"category";return BT(BT({},vH),{},{type:r})}),PP=t=>t.polarOptions,fz=Ye([bf,wf,ya],XXe),Zle=Ye([PP,fz],(t,e)=>{if(t!=null)return hm(t.innerRadius,e,0)}),Jle=Ye([PP,fz],(t,e)=>{if(t!=null)return hm(t.outerRadius,e,e*.8)}),XJe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Qle=Ye([PP],XJe);Ye([dz,Qle],AP);var ece=Ye([fz,Zle,Jle],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Ye([hz,ece],AP);var tce=Ye([Lr,PP,Zle,Jle,bf,wf],(t,e,n,r,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:hm(a,s,s/2),cy:hm(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Zi=(t,e)=>e,OP=(t,e,n)=>n;function pz(t){return t==null?void 0:t.id}function nce(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:s,dataKey:i}=n,a=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=pz(o);c.forEach((d,h)=>{var f=i==null||s?h:String(wi(d,i,null)),m=wi(d,o.dataKey,0),y;a.has(f)?y=a.get(f):y={},Object.assign(y,{[u]:m}),a.set(f,y)})}}),Array.from(a.values())}function mz(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var jP=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function $P(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function YJe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ji=t=>{var e=Lr(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},a1=t=>t.tooltip.settings.axisId;function ZJe(t){if(t in mw)return mw[t]();var e="scale".concat(lS(t));if(e in mw)return mw[e]()}function xH(t){var e=t.ticks,n=t.bandwidth,r=t.range(),s=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:function(i){function a(){return i.apply(this,arguments)}return a.toString=function(){return i.toString()},a}(()=>s),rangeMin:()=>s[0],rangeMax:()=>s[1],isInRange(i){var a=s[0],o=s[1];return a<=o?i>=a&&i<=o:i>=o&&i<=a},bandwidth:n?()=>n.call(t):void 0,ticks:e?i=>e.call(t,i):void 0,map:(i,a)=>{var o=t(i);if(o!=null){if(t.bandwidth&&a!==null&&a!==void 0&&a.position){var l=t.bandwidth();switch(a.position){case"middle":o+=l/2;break;case"end":o+=l;break}}return o}}}}function bH(t,e,n){if(typeof t=="function")return xH(t.copy().domain(e).range(n));if(t!=null){var r=ZJe(t);if(r!=null)return r.domain(e).range(n),xH(r)}}var JJe=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!cf(e)){for(var n,r,s=0;s<e.length;s++){var i=e[s];zn(i)&&((n===void 0||i<n)&&(n=i),(r===void 0||i>r)&&(r=i))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function wH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wH(Object(n),!0).forEach(function(r){QJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QJe(t,e,n){return(e=eQe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eQe(t){var e=tQe(t,"string");return typeof e=="symbol"?e:e+""}function tQe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fD=[0,"auto"],ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},rce=(t,e)=>t.cartesianAxis.xAxis[e],Sf=(t,e)=>{var n=rce(t,e);return n??ji},$i={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:fD,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:dS},sce=(t,e)=>t.cartesianAxis.yAxis[e],Nf=(t,e)=>{var n=sce(t,e);return n??$i},nQe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},gz=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??nQe},Ao=(t,e,n)=>{switch(e){case"xAxis":return Sf(t,n);case"yAxis":return Nf(t,n);case"zAxis":return gz(t,n);case"angleAxis":return dz(t,n);case"radiusAxis":return hz(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rQe=(t,e,n)=>{switch(e){case"xAxis":return Sf(t,n);case"yAxis":return Nf(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},xS=(t,e,n)=>{switch(e){case"xAxis":return Sf(t,n);case"yAxis":return Nf(t,n);case"angleAxis":return dz(t,n);case"radiusAxis":return hz(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ice=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function ace(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var yz=t=>t.graphicalItems.cartesianItems,sQe=Ye([Zi,OP],ace),oce=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),bS=Ye([yz,Ao,sQe],oce,{memoizeOptions:{resultEqualityCheck:$P}}),lce=Ye([bS],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(mz)),cce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),iQe=Ye([bS],cce),uce=t=>t.map(e=>e.data).filter(Boolean).flat(1),aQe=Ye([bS],uce,{memoizeOptions:{resultEqualityCheck:$P}}),dce=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},vz=Ye([aQe,iz],dce),hce=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:wi(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:wi(s,r)}))):t.map(r=>({value:r})),DP=Ye([vz,Ao,bS],hce);function fce(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function EC(t){if(Gd(t)||t instanceof Date){var e=Number(t);if(zn(e))return e}}function _H(t){if(Array.isArray(t)){var e=[EC(t[0]),EC(t[1])];return cf(e)?e:void 0}var n=EC(t);if(n!=null)return[n,n]}function uf(t){return t.map(EC).filter(el)}function oQe(t,e,n){return!n||typeof e!="number"||qd(e)?[]:n.length?uf(n.flatMap(r=>{var s=wi(t,r.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!zn(i)||!zn(a)))return[e-i,e+a]})):[]}var Ci=t=>{var e=Ji(t),n=a1(t);return xS(t,e,n)},wS=Ye([Ci],t=>t==null?void 0:t.dataKey),lQe=Ye([lce,iz,Ci],nce),pce=(t,e,n,r)=>{var s={},i=e.reduce((a,o)=>{if(o.stackId==null)return a;var l=a[o.stackId];return l==null&&(l=[]),l.push(o),a[o.stackId]=l,a},s);return Object.fromEntries(Object.entries(i).map(a=>{var[o,l]=a,c=r?[...l].reverse():l,u=c.map(pz);return[o,{stackedData:HGe(t,u,n),graphicalItems:c}]}))},mce=Ye([lQe,lce,IP,Xle],pce),gce=(t,e,n,r)=>{var{dataStartIndex:s,dataEndIndex:i}=e;if(r==null&&n!=="zAxis"){var a=XGe(t,s,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},cQe=Ye([Ao],t=>t.allowDataOverflow),xz=t=>{var e;if(t==null||!("domain"in t))return fD;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=uf(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:fD},yce=Ye([Ao],xz),vce=Ye([yce,cQe],Mle),uQe=Ye([mce,kf,Zi,vce],gce,{memoizeOptions:{resultEqualityCheck:jP}}),bz=t=>t.errorBars,dQe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>fce(n,r)),UT=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),o=Math.max(...i);return[a,o]}},xce=(t,e,n,r,s)=>{var i,a;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,u,d=(c=r[l.id])===null||c===void 0?void 0:c.filter(x=>fce(s,x)),h=wi(o,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),f=oQe(o,h,d);if(f.length>=2){var m=Math.min(...f),y=Math.max(...f);(i==null||m<i)&&(i=m),(a==null||y>a)&&(a=y)}var v=_H(h);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),a=a==null?v[1]:Math.max(a,v[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=_H(wi(o,e.dataKey));l!=null&&(i=i==null?l[0]:Math.min(i,l[0]),a=a==null?l[1]:Math.max(a,l[1]))}),zn(i)&&zn(a))return[i,a]},hQe=Ye([vz,Ao,iQe,bz,Zi],xce,{memoizeOptions:{resultEqualityCheck:jP}});function fQe(t){var{value:e}=t;if(Gd(e)||e instanceof Date)return e}var pQe=(t,e,n)=>{var r=t.map(fQe).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&pae(r))?rle(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},bce=t=>t.referenceElements.dots,o1=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),mQe=Ye([bce,Zi,OP],o1),wce=t=>t.referenceElements.areas,gQe=Ye([wce,Zi,OP],o1),_ce=t=>t.referenceElements.lines,yQe=Ye([_ce,Zi,OP],o1),kce=(t,e)=>{if(t!=null){var n=uf(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},vQe=Ye(mQe,Zi,kce),Sce=(t,e)=>{if(t!=null){var n=uf(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},xQe=Ye([gQe,Zi],Sce);function bQe(t){var e;if(t.x!=null)return uf([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:uf(n)}function wQe(t){var e;if(t.y!=null)return uf([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:uf(n)}var Nce=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?bQe(r):wQe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},_Qe=Ye([yQe,Zi],Nce),kQe=Ye(vQe,_Qe,xQe,(t,e,n)=>UT(t,n,e)),Cce=(t,e,n,r,s,i,a,o)=>{if(n!=null)return n;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=l?UT(r,i,s):UT(i,s);return DJe(e,c,t.allowDataOverflow)},SQe=Ye([Ao,yce,vce,uQe,hQe,kQe,Lr,Zi],Cce,{memoizeOptions:{resultEqualityCheck:jP}}),NQe=[0,1],Tce=(t,e,n,r,s,i,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,c=qu(e,i);if(c&&o==null){var u;return rle(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?pQe(r,t,c):s==="expand"?NQe:a}},wz=Ye([Ao,Lr,vz,DP,IP,Zi,SQe],Tce);function CQe(t){return t in mw}var Ice=(t,e,n)=>{if(t!=null){var{scale:r,type:s}=t;if(r==="auto")return s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":s==="category"?"band":"linear";if(typeof r=="string"){var i="scale".concat(lS(r));return CQe(i)?i:"point"}}},l1=Ye([Ao,ice,lz],Ice);function _z(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?bH(t.scale,n,r):bH(e,n,r)}var Ace=(t,e,n)=>{var r=xz(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&cf(t))return zJe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&cf(t))return BJe(t,e.tickCount,e.allowDecimals)}},kz=Ye([wz,xS,l1],Ace),Ece=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&cf(e)&&Array.isArray(n)&&n.length>0){var s,i,a=e[0],o=(s=n[0])!==null&&s!==void 0?s:0,l=e[1],c=(i=n[n.length-1])!==null&&i!==void 0?i:0;return[Math.min(a,o),Math.max(l,c)]}return e},TQe=Ye([Ao,wz,kz,Zi],Ece),IQe=Ye(DP,Ao,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(uf(t.map(d=>d.value))).sort((d,h)=>d-h),s=r[0],i=r[r.length-1];if(s==null||i==null)return 1/0;var a=i-s;if(a===0)return 1/0;for(var o=0;o<r.length-1;o++){var l=r[o],c=r[o+1];if(!(l==null||c==null)){var u=c-l;n=Math.min(n,u)}}return n/a}}),Pce=Ye(IQe,Lr,WJe,ya,(t,e,n,r,s)=>s,(t,e,n,r,s)=>{if(!zn(t))return 0;var i=e==="vertical"?r.height:r.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var a=hm(n,t*i),o=t*i/2;return o-a-(o-a)/i*a}return 0}),AQe=(t,e,n)=>{var r=Sf(t,e);return r==null||typeof r.padding!="string"?0:Pce(t,"xAxis",e,n,r.padding)},EQe=(t,e,n)=>{var r=Nf(t,e);return r==null||typeof r.padding!="string"?0:Pce(t,"yAxis",e,n,r.padding)},PQe=Ye(Sf,AQe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),OQe=Ye(Nf,EQe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),jQe=Ye([ya,PQe,mP,pP,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),$Qe=Ye([ya,Lr,OQe,mP,pP,(t,e,n)=>n],(t,e,n,r,s,i)=>{var{padding:a}=s;return i?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),_S=(t,e,n,r)=>{var s;switch(e){case"xAxis":return jQe(t,n,r);case"yAxis":return $Qe(t,n,r);case"zAxis":return(s=gz(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return Qle(t);case"radiusAxis":return ece(t,n);default:return}},Oce=Ye([Ao,_S],AP),DQe=Ye([l1,TQe],JJe),LP=Ye([Ao,l1,DQe,Oce],_z);Ye([bS,bz,Zi],dQe);function jce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var RP=(t,e)=>e,MP=(t,e,n)=>n,LQe=Ye(hP,RP,MP,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(jce)),RQe=Ye(fP,RP,MP,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(jce)),$ce=(t,e)=>({width:t.width,height:e.height}),MQe=(t,e)=>{var n=typeof e.width=="number"?e.width:dS;return{width:n,height:t.height}},FQe=Ye(ya,Sf,$ce),zQe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},BQe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},WQe=Ye(wf,ya,LQe,RP,MP,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=$ce(e,o);a==null&&(a=zQe(e,r,t));var c=r==="top"&&!s||r==="bottom"&&s;i[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),i}),UQe=Ye(bf,ya,RQe,RP,MP,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=MQe(e,o);a==null&&(a=BQe(e,r,t));var c=r==="left"&&!s||r==="right"&&s;i[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),i}),VQe=(t,e)=>{var n=Sf(t,e);if(n!=null)return WQe(t,n.orientation,n.mirror)},HQe=Ye([ya,Sf,VQe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n==null?void 0:n[r];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}}),qQe=(t,e)=>{var n=Nf(t,e);if(n!=null)return UQe(t,n.orientation,n.mirror)},GQe=Ye([ya,Nf,qQe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var s=n==null?void 0:n[r];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}}),KQe=Ye(ya,Nf,(t,e)=>{var n=typeof e.width=="number"?e.width:dS;return{width:n,height:t.height}}),Dce=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=n,o=qu(t,r),l=e.map(c=>c.value);if(a&&o&&i==="category"&&s&&pae(l))return l}},Sz=Ye([Lr,DP,Ao,Zi],Dce),Lce=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,a=qu(t,r);if(a&&(s==="number"||i!=="auto"))return e.map(o=>o.value)}},Nz=Ye([Lr,DP,xS,Zi],Lce),kH=Ye([Lr,rQe,l1,LP,Sz,Nz,_S,kz,Zi],(t,e,n,r,s,i,a,o,l)=>{if(e!=null){var c=qu(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}}),XQe=(t,e,n,r,s,i,a,o,l)=>{if(!(e==null||r==null)){var c=qu(t,l),{type:u,ticks:d,tickCount:h}=e,f=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,m=u==="category"&&r.bandwidth?r.bandwidth()/f:0;m=l==="angleAxis"&&i!=null&&i.length>=2?Tc(i[0]-i[1])*2*m:m;var y=d||s;return y?y.map((v,x)=>{var b=a?a.indexOf(v):v,_=r.map(b);return zn(_)?{index:x,coordinate:_+m,value:v,offset:m}:null}).filter(el):c&&o?o.map((v,x)=>{var b=r.map(v);return zn(b)?{coordinate:b+m,value:v,index:x,offset:m}:null}).filter(el):r.ticks?r.ticks(h).map((v,x)=>{var b=r.map(v);return zn(b)?{coordinate:b+m,value:v,index:x,offset:m}:null}).filter(el):r.domain().map((v,x)=>{var b=r.map(v);return zn(b)?{coordinate:b+m,value:a?a[v]:v,index:x,offset:m}:null}).filter(el)}},Rce=Ye([Lr,xS,l1,LP,kz,_S,Sz,Nz,Zi],XQe),YQe=(t,e,n,r,s,i,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=qu(t,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&(r==null?void 0:r.length)>=2?Tc(r[0]-r[1])*2*c:c,o&&i?i.map((u,d)=>{var h=n.map(u);return zn(h)?{coordinate:h+c,value:u,index:d,offset:c}:null}).filter(el):n.ticks?n.ticks(l).map((u,d)=>{var h=n.map(u);return zn(h)?{coordinate:h+c,value:u,index:d,offset:c}:null}).filter(el):n.domain().map((u,d)=>{var h=n.map(u);return zn(h)?{coordinate:h+c,value:s?s[u]:u,index:d,offset:c}:null}).filter(el)}},FP=Ye([Lr,xS,LP,_S,Sz,Nz,Zi],YQe),zP=Ye(Ao,LP,(t,e)=>{if(!(t==null||e==null))return WT(WT({},t),{},{scale:e})}),ZQe=Ye([Ao,l1,wz,Oce],_z);Ye((t,e,n)=>gz(t,n),ZQe,(t,e)=>{if(!(t==null||e==null))return WT(WT({},t),{},{scale:e})});var JQe=Ye([Lr,hP,fP],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Mce=t=>t.options.defaultTooltipEventType,Fce=t=>t.options.validateTooltipEventTypes;function zce(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function Cz(t,e){var n=Mce(t),r=Fce(t);return zce(e,n,r)}function QQe(t){return Zt(e=>Cz(e,t))}var Bce=(t,e)=>{var n,r=Number(e);if(!(qd(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},eet=t=>t.tooltip.settings,yp={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},tet={itemInteraction:{click:yp,hover:yp},axisInteraction:{click:yp,hover:yp},keyboardInteraction:yp,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Wce=hl({name:"tooltip",initialState:tet,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Yr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,s=Ou(t).tooltipItemPayloads.indexOf(n);s>-1&&(t.tooltipItemPayloads[s]=r)},prepare:Yr()},removeTooltipEntrySettings:{reducer(t,e){var n=Ou(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Yr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:net,replaceTooltipEntrySettings:ret,removeTooltipEntrySettings:set,setTooltipSettingsState:iet,setActiveMouseOverItemIndex:aet,mouseLeaveItem:dmt,mouseLeaveChart:Uce,setActiveClickItemIndex:hmt,setMouseOverAxisIndex:Vce,setMouseClickAxisIndex:oet,setSyncInteraction:pD,setKeyboardInteraction:mD}=Wce.actions,cet=Wce.reducer;function SH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SH(Object(n),!0).forEach(function(r){uet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uet(t,e,n){return(e=det(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function det(t){var e=het(t,"string");return typeof e=="symbol"?e:e+""}function het(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fet(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function pet(t){return t.index!=null}var Hce=(t,e,n,r)=>{if(e==null)return yp;var s=fet(t,e,n);if(s==null)return yp;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(pet(s)){if(i)return VN(VN({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return VN(VN({},yp),{},{coordinate:s.coordinate})};function met(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function get(t,e){var n=met(t),r=e[0],s=e[1];if(n===void 0)return!1;var i=Math.min(r,s),a=Math.max(r,s);return n>=i&&n<=a}function yet(t,e,n){if(n==null||e==null)return!0;var r=wi(t,e);return r==null||!cf(n)?!0:get(r,n)}var Tz=(t,e,n,r)=>{var s=t==null?void 0:t.index;if(s==null)return null;var i=Number(s);if(!zn(i))return s;var a=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(a,Math.min(i,o)),c=e[l];return c==null||yet(c,n,r)?String(l):null},qce=(t,e,n,r,s,i,a)=>{if(i!=null){var o=a[0],l=o==null?void 0:o.getPosition(i);if(l!=null)return l;var c=s==null?void 0:s[Number(i)];if(c)switch(n){case"horizontal":return{x:c.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:c.coordinate}}}},Gce=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;if(n==="hover"?s=t.itemInteraction.hover.graphicalItemId:s=t.itemInteraction.click.graphicalItemId,s==null&&r!=null){var i=t.tooltipItemPayloads[0];return i!=null?[i]:[]}return t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.graphicalItemId)===s})},Kce=t=>t.options.tooltipPayloadSearcher,c1=t=>t.tooltip;function NH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function CH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NH(Object(n),!0).forEach(function(r){vet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vet(t,e,n){return(e=xet(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xet(t){var e=bet(t,"string");return typeof e=="symbol"?e:e+""}function bet(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wet(t,e){return t??e}var Xce=(t,e,n,r,s,i,a)=>{if(!(e==null||i==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,d=[];return t.reduce((h,f)=>{var m,{dataDefinedOnItem:y,settings:v}=f,x=wet(y,o),b=Array.isArray(x)?koe(x,c,u):x,_=(m=v==null?void 0:v.dataKey)!==null&&m!==void 0?m:r,k=v==null?void 0:v.nameKey,N;if(r&&Array.isArray(b)&&!Array.isArray(b[0])&&a==="axis"?N=mae(b,r,s):N=i(b,e,l,k),Array.isArray(N))N.forEach(T=>{var C=CH(CH({},v),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});h.push($V({tooltipEntrySettings:C,dataKey:T.dataKey,payload:T.payload,value:wi(T.payload,T.dataKey),name:T.name}))});else{var A;h.push($V({tooltipEntrySettings:v,dataKey:_,payload:N,value:wi(N,_),name:(A=wi(N,k))!==null&&A!==void 0?A:v==null?void 0:v.name}))}return h},d)}},Iz=Ye([Ci,ice,lz],Ice),_et=Ye([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),ket=Ye([Ji,a1],ace),u1=Ye([_et,Ci,ket],oce,{memoizeOptions:{resultEqualityCheck:$P}}),Net=Ye([u1],t=>t.filter(mz)),Cet=Ye([u1],uce,{memoizeOptions:{resultEqualityCheck:$P}}),d1=Ye([Cet,kf],dce),Tet=Ye([Net,kf,Ci],nce),Az=Ye([d1,Ci,u1],hce),Yce=Ye([Ci],xz),Iet=Ye([Ci],t=>t.allowDataOverflow),Zce=Ye([Yce,Iet],Mle),Aet=Ye([u1],t=>t.filter(mz)),Eet=Ye([Tet,Aet,IP,Xle],pce),Pet=Ye([Eet,kf,Ji,Zce],gce),Oet=Ye([u1],cce),jet=Ye([d1,Ci,Oet,bz,Ji],xce,{memoizeOptions:{resultEqualityCheck:jP}}),$et=Ye([bce,Ji,a1],o1),Det=Ye([$et,Ji],kce),Let=Ye([wce,Ji,a1],o1),Ret=Ye([Let,Ji],Sce),Met=Ye([_ce,Ji,a1],o1),Fet=Ye([Met,Ji],Nce),zet=Ye([Det,Fet,Ret],UT),Bet=Ye([Ci,Yce,Zce,Pet,jet,zet,Lr,Ji],Cce),kS=Ye([Ci,Lr,d1,Az,IP,Ji,Bet],Tce),Wet=Ye([kS,Ci,Iz],Ace),Uet=Ye([Ci,kS,Wet,Ji],Ece),Jce=t=>{var e=Ji(t),n=a1(t),r=!1;return _S(t,e,n,r)},Qce=Ye([Ci,Jce],AP),eue=Ye([Ci,Iz,Uet,Qce],_z),Vet=Ye([Lr,Az,Ci,Ji],Dce),Het=Ye([Lr,Az,Ci,Ji],Lce),qet=(t,e,n,r,s,i,a,o)=>{if(e){var{type:l}=e,c=qu(t,o);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,d=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return d=o==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Tc(s[0]-s[1])*2*d:d,c&&a?a.map((h,f)=>{var m=r.map(h);return zn(m)?{coordinate:m+d,value:h,index:f,offset:d}:null}).filter(el):r.domain().map((h,f)=>{var m=r.map(h);return zn(m)?{coordinate:m+d,value:i?i[h]:h,index:f,offset:d}:null}).filter(el)}}},Cf=Ye([Lr,Ci,Iz,eue,Jce,Vet,Het,Ji],qet),Ez=Ye([Mce,Fce,eet],(t,e,n)=>zce(n.shared,t,e)),tue=t=>t.tooltip.settings.trigger,Pz=t=>t.tooltip.settings.defaultIndex,SS=Ye([c1,Ez,tue,Pz],Hce),e_=Ye([SS,d1,wS,kS],Tz),nue=Ye([Cf,e_],Bce),Get=Ye([SS],t=>{if(t)return t.dataKey});Ye([SS],t=>{if(t)return t.graphicalItemId});var rue=Ye([c1,Ez,tue,Pz],Gce),Ket=Ye([bf,wf,Lr,ya,Cf,Pz,rue],qce),Xet=Ye([SS,Ket],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Yet=Ye([SS],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Zet=Ye([rue,e_,kf,wS,nue,Kce,Ez],Xce),Jet=Ye([Zet],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function TH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TH(Object(n),!0).forEach(function(r){Qet(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qet(t,e,n){return(e=ett(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ett(t){var e=ttt(t,"string");return typeof e=="symbol"?e:e+""}function ttt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ntt=()=>Zt(Ci),rtt=()=>{var t=ntt(),e=Zt(Cf),n=Zt(eue);return _x(!t||!n?void 0:IH(IH({},t),{},{scale:n}),e)};function AH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ky(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AH(Object(n),!0).forEach(function(r){stt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function stt(t,e,n){return(e=itt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function itt(t){var e=att(t,"string");return typeof e=="symbol"?e:e+""}function att(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ott=(t,e,n,r)=>{var s=e.find(i=>i&&i.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:s.coordinate}}return{x:0,y:0}},ltt=(t,e,n,r)=>{var s=e.find(c=>c&&c.index===n);if(s){if(t==="centric"){var i=s.coordinate,{radius:a}=r;return Ky(Ky(Ky({},r),ua(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var o=s.coordinate,{angle:l}=r;return Ky(Ky(Ky({},r),ua(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function ctt(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var sue=(t,e,n,r,s)=>{var i,a=(i=e==null?void 0:e.length)!==null&&i!==void 0?i:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var o=0;o<a;o++){var l,c,u,d,h,f=o>0?(l=n[o-1])===null||l===void 0?void 0:l.coordinate:(c=n[a-1])===null||c===void 0?void 0:c.coordinate,m=(u=n[o])===null||u===void 0?void 0:u.coordinate,y=o>=a-1?(d=n[0])===null||d===void 0?void 0:d.coordinate:(h=n[o+1])===null||h===void 0?void 0:h.coordinate,v=void 0;if(!(f==null||m==null||y==null))if(Tc(m-f)!==Tc(y-m)){var x=[];if(Tc(y-m)===Tc(s[1]-s[0])){v=y;var b=m+s[1]-s[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{v=f;var _=y+s[1]-s[0];x[0]=Math.min(m,(_+m)/2),x[1]=Math.max(m,(_+m)/2)}var k=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(t>k[0]&&t<=k[1]||t>=x[0]&&t<=x[1]){var N;return(N=n[o])===null||N===void 0?void 0:N.index}}else{var A=Math.min(f,y),T=Math.max(f,y);if(t>(A+m)/2&&t<=(T+m)/2){var C;return(C=n[o])===null||C===void 0?void 0:C.index}}}else if(e)for(var P=0;P<a;P++){var $=e[P];if($!=null){var j=e[P+1],O=e[P-1];if(P===0&&j!=null&&t<=($.coordinate+j.coordinate)/2||P===a-1&&O!=null&&t>($.coordinate+O.coordinate)/2||P>0&&P<a-1&&O!=null&&j!=null&&t>($.coordinate+O.coordinate)/2&&t<=($.coordinate+j.coordinate)/2)return $.index}}return-1},iue=()=>Zt(lz),Oz=(t,e)=>e,aue=(t,e,n)=>n,jz=(t,e,n,r)=>r,utt=Ye(Cf,t=>tP(t,e=>e.coordinate)),$z=Ye([c1,Oz,aue,jz],Hce),Dz=Ye([$z,d1,wS,kS],Tz),dtt=(t,e,n)=>{if(e!=null){var r=c1(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},oue=Ye([c1,Oz,aue,jz],Gce),VT=Ye([bf,wf,Lr,ya,Cf,jz,oue],qce),htt=Ye([$z,VT],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),lue=Ye([Cf,Dz],Bce),ftt=Ye([oue,Dz,kf,wS,lue,Kce,Oz],Xce),ptt=Ye([$z,Dz],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),mtt=(t,e,n,r,s,i,a)=>{if(!(!t||!n||!r||!s)&&ctt(t,a)){var o=YGe(t,e),l=sue(o,i,s,n,r),c=ott(e,s,l,t);return{activeIndex:String(l),activeCoordinate:c}}},gtt=(t,e,n,r,s,i,a)=>{if(!(!t||!r||!s||!i||!n)){var o=eYe(t,n);if(o){var l=ZGe(o,e),c=sue(l,a,i,r,s),u=ltt(e,i,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},ytt=(t,e,n,r,s,i,a,o)=>{if(!(!t||!e||!r||!s||!i))return e==="horizontal"||e==="vertical"?mtt(t,e,r,s,i,a,o):gtt(t,e,n,r,s,i,a)},vtt=Ye(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),xtt=Ye(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(za)),n=Array.from(new Set(e));return n.sort((r,s)=>r-s)},{memoizeOptions:{resultEqualityCheck:YJe}});function EH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function PH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EH(Object(n),!0).forEach(function(r){btt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function btt(t,e,n){return(e=wtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wtt(t){var e=_tt(t,"string");return typeof e=="symbol"?e:e+""}function _tt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ktt={},Stt={zIndexMap:Object.values(za).reduce((t,e)=>PH(PH({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),ktt)},Ntt=new Set(Object.values(za));function Ctt(t){return Ntt.has(t)}var cue=hl({name:"zIndex",initialState:Stt,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Yr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Ctt(n)&&delete t.zIndexMap[n])},prepare:Yr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:s}=e.payload;t.zIndexMap[n]?s?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:s?void 0:r,panoramaElement:s?r:void 0}},prepare:Yr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Yr()}}}),{registerZIndexPortal:Ttt,unregisterZIndexPortal:Itt,registerZIndexPortalElement:Att,unregisterZIndexPortalElement:Ett}=cue.actions,Ptt=cue.reducer;function Qd(t){var{zIndex:e,children:n}=t,r=NKe(),s=r&&e!==void 0&&e!==0,i=Ya(),a=Xi();R.useLayoutEffect(()=>s?(a(Ttt({zIndex:e})),()=>{a(Itt({zIndex:e}))}):ly,[a,e,s]);var o=Zt(l=>vtt(l,e,i));return s?o?CI.createPortal(n,o):null:n}function gD(){return gD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gD.apply(null,arguments)}function OH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OH(Object(n),!0).forEach(function(r){Ott(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ott(t,e,n){return(e=jtt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jtt(t){var e=$tt(t,"string");return typeof e=="symbol"?e:e+""}function $tt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dtt(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return R.isValidElement(e)?R.cloneElement(e,r):R.createElement(n,r)}function Ltt(t){var e,{coordinate:n,payload:r,index:s,offset:i,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:u}=t,d=n,h=r,f=s;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var m,y,v;if(u==="ScatterChart")m=d,y=fXe,v=za.cursorLine;else if(u==="BarChart")m=pXe(o,d,i,a),y=Yoe,v=za.cursorRectangle;else if(o==="radial"&&vae(d)){var{cx:x,cy:b,radius:_,startAngle:k,endAngle:N}=Zoe(d);m={cx:x,cy:b,startAngle:k,endAngle:N,innerRadius:_,outerRadius:_},y=Qoe,v=za.cursorLine}else m={points:sYe(o,d,i)},y=Mw,v=za.cursorLine;var A=typeof l=="object"&&"className"in l?l.className:void 0,T=HN(HN(HN(HN({stroke:"#ccc",pointerEvents:"none"},i),m),VE(l)),{},{payload:h,payloadIndex:f,className:xr("recharts-tooltip-cursor",A)});return R.createElement(Qd,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},R.createElement(Dtt,{cursor:l,cursorComp:y,cursorProps:T}))}function Rtt(t){var e=rtt(),n=$oe(),r=cy(),s=iue();return e==null||n==null||r==null||s==null?null:R.createElement(Ltt,gD({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var uue=R.createContext(null),Mtt=()=>R.useContext(uue),due={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||l,h),m=n?n+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,f,m){var y=n?n+c:c;if(!this._events[y])return!1;var v=this._events[y],x=arguments.length,b,_;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,f),!0;case 6:return v.fn.call(v.context,u,d,h,f,m),!0}for(_=1,b=new Array(x-1);_<x;_++)b[_-1]=arguments[_];v.fn.apply(v.context,b)}else{var k=v.length,N;for(_=0;_<k;_++)switch(v[_].once&&this.removeListener(c,v[_].fn,void 0,!0),x){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,u);break;case 3:v[_].fn.call(v[_].context,u,d);break;case 4:v[_].fn.call(v[_].context,u,d,h);break;default:if(!b)for(N=1,b=new Array(x-1);N<x;N++)b[N-1]=arguments[N];v[_].fn.apply(v[_].context,b)}}return!0},o.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&a(this,f);else{for(var y=0,v=[],x=m.length;y<x;y++)(m[y].fn!==u||h&&!m[y].once||d&&m[y].context!==d)&&v.push(m[y]);v.length?this._events[f]=v.length===1?v[0]:v:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(due);var Ftt=due.exports;const ztt=Bc(Ftt);var t_=new ztt,yD="recharts.syncEvent.tooltip",jH="recharts.syncEvent.brush",hue=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!qd(n))return t[n]}},Btt={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},fue=hl({name:"options",initialState:Btt,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Wtt=fue.reducer,{createEventEmitter:Utt}=fue.actions;function Vtt(t){return t.tooltip.syncInteraction}var Htt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},pue=hl({name:"chartData",initialState:Htt,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:$H,setDataStartEndIndexes:qtt,setComputedData:fmt}=pue.actions,Gtt=pue.reducer,Ktt=["x","y"];function DH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DH(Object(n),!0).forEach(function(r){Xtt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xtt(t,e,n){return(e=Ytt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ytt(t){var e=Ztt(t,"string");return typeof e=="symbol"?e:e+""}function Ztt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jtt(t,e){if(t==null)return{};var n,r,s=Qtt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Qtt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ent(){var t=Zt(cz),e=Zt(uz),n=Xi(),r=Zt(Yle),s=Zt(Cf),i=cy(),a=gP(),o=Zt(l=>l.rootProps.className);R.useEffect(()=>{if(t==null)return ly;var l=(c,u,d)=>{if(e!==d&&t===c){if(r==="index"){var h;if(a&&u!==null&&u!==void 0&&(h=u.payload)!==null&&h!==void 0&&h.coordinate&&u.payload.sourceViewBox){var f=u.payload.coordinate,{x:m,y}=f,v=Jtt(f,Ktt),{x,y:b,width:_,height:k}=u.payload.sourceViewBox,N=Xy(Xy({},v),{},{x:a.x+(_?(m-x)/_:0)*a.width,y:a.y+(k?(y-b)/k:0)*a.height});n(Xy(Xy({},u),{},{payload:Xy(Xy({},u.payload),{},{coordinate:N})}))}else n(u);return}if(s!=null){var A;if(typeof r=="function"){var T={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},C=r(s,T);A=s[C]}else r==="value"&&(A=s.find(V=>String(V.value)===u.payload.label));var{coordinate:P}=u.payload;if(A==null||u.payload.active===!1||P==null||a==null){n(pD({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:j}=P,O=Math.min($,a.x+a.width),F=Math.min(j,a.y+a.height),B={x:i==="horizontal"?A.coordinate:O,y:i==="horizontal"?F:A.coordinate},Z=pD({active:u.payload.active,coordinate:B,dataKey:u.payload.dataKey,index:String(A.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(Z)}}};return t_.on(yD,l),()=>{t_.off(yD,l)}},[o,n,e,t,r,s,i,a])}function tnt(){var t=Zt(cz),e=Zt(uz),n=Xi();R.useEffect(()=>{if(t==null)return ly;var r=(s,i,a)=>{e!==a&&t===s&&n(qtt(i))};return t_.on(jH,r),()=>{t_.off(jH,r)}},[n,e,t])}function nnt(){var t=Xi();R.useEffect(()=>{t(Utt())},[t]),ent(),tnt()}function rnt(t,e,n,r,s,i){var a=Zt(f=>dtt(f,t,e)),o=Zt(uz),l=Zt(cz),c=Zt(Yle),u=Zt(Vtt),d=u==null?void 0:u.active,h=gP();R.useEffect(()=>{if(!d&&l!=null&&o!=null){var f=pD({active:i,coordinate:n,dataKey:a,index:s,label:typeof r=="number"?String(r):r,sourceViewBox:h,graphicalItemId:void 0});t_.emit(yD,l,f,o)}},[d,n,a,s,r,o,l,c,i,h])}function LH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function RH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LH(Object(n),!0).forEach(function(r){snt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function snt(t,e,n){return(e=int(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function int(t){var e=ant(t,"string");return typeof e=="symbol"?e:e+""}function ant(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ont(t){return t.dataKey}function lnt(t,e){return R.isValidElement(t)?R.cloneElement(t,e):typeof t=="function"?R.createElement(t,e):R.createElement(qKe,e)}var MH=[],cnt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function FH(t){var e,n,r=Xa(t,cnt),{active:s,allowEscapeViewBox:i,animationDuration:a,animationEasing:o,content:l,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:h,position:f,reverseDirection:m,useTranslate3d:y,wrapperStyle:v,cursor:x,shared:b,trigger:_,defaultIndex:k,portal:N,axisId:A}=r,T=Xi(),C=typeof k=="number"?String(k):k;R.useEffect(()=>{T(iet({shared:b,trigger:_,axisId:A,active:s,defaultIndex:C}))},[T,b,_,A,s,C]);var P=gP(),$=Hoe(),j=QQe(b),{activeIndex:O,isActive:F}=(e=Zt(me=>ptt(me,j,_,C)))!==null&&e!==void 0?e:{},B=Zt(me=>ftt(me,j,_,C)),Z=Zt(me=>lue(me,j,_,C)),V=Zt(me=>htt(me,j,_,C)),G=B,U=Mtt(),K=(n=s??F)!==null&&n!==void 0?n:!1,[ee,oe]=Rqe([G,K]),W=j==="axis"?Z:void 0;rnt(j,_,V,W,O,K);var Y=N??U;if(Y==null||P==null||j==null)return null;var Q=G??MH;K||(Q=MH),c&&Q.length&&(Q=tqe(Q.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),h,ont));var J=Q.length>0,te=R.createElement(QKe,{allowEscapeViewBox:i,animationDuration:a,animationEasing:o,isAnimationActive:u,active:K,coordinate:V,hasPayload:J,offset:d,position:f,reverseDirection:m,useTranslate3d:y,viewBox:P,wrapperStyle:v,lastBoundingBox:ee,innerRef:oe,hasPortalFromProps:!!N},lnt(l,RH(RH({},r),{},{payload:Q,label:W,active:K,activeIndex:O,coordinate:V,accessibilityLayer:$})));return R.createElement(R.Fragment,null,CI.createPortal(te,Y),K&&R.createElement(Rtt,{cursor:x,tooltipEventType:j,coordinate:V,payload:Q,index:O}))}function unt(t,e,n){return(e=dnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dnt(t){var e=hnt(t,"string");return typeof e=="symbol"?e:e+""}function hnt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fnt{constructor(e){unt(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pnt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zH(Object(n),!0).forEach(function(r){mnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mnt(t,e,n){return(e=gnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gnt(t){var e=ynt(t,"string");return typeof e=="symbol"?e:e+""}function ynt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vnt={cacheSize:2e3,enableCache:!0},mue=pnt({},vnt),BH=new fnt(mue.cacheSize),xnt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WH="recharts_measurement_span";function bnt(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(o)}var UH=(t,e)=>{try{var n=document.getElementById(WH);n||(n=document.createElement("span"),n.setAttribute("id",WH),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,xnt,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Fw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||pS.isSsr)return{width:0,height:0};if(!mue.enableCache)return UH(e,n);var r=bnt(e,n),s=BH.get(r);if(s)return s;var i=UH(e,n);return BH.set(r,i),i},gue;function wnt(t,e,n){return(e=_nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _nt(t){var e=knt(t,"string");return typeof e=="symbol"?e:e+""}function knt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Snt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nnt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Cnt={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tnt=["cm","mm","pt","pc","in","Q","px"];function Int(t){return Tnt.includes(t)}var Nv="NaN";function Ant(t,e){return t*Cnt[e]}class oa{static parse(e){var n,[,r,s]=(n=Nnt.exec(e))!==null&&n!==void 0?n:[];return r==null?oa.NaN:new oa(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,qd(e)&&(this.unit=""),n!==""&&!Snt.test(n)&&(this.num=NaN,this.unit=""),Int(n)&&(this.num=Ant(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new oa(NaN,""):new oa(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new oa(NaN,""):new oa(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new oa(NaN,""):new oa(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new oa(NaN,""):new oa(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qd(this.num)}}gue=oa;wnt(oa,"NaN",new gue(NaN,""));function yue(t){if(t==null||t.includes(Nv))return Nv;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,i]=(n=VH.exec(e))!==null&&n!==void 0?n:[],a=oa.parse(r??""),o=oa.parse(i??""),l=s==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return Nv;e=e.replace(VH,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,d,h]=(c=HH.exec(e))!==null&&c!==void 0?c:[],f=oa.parse(u??""),m=oa.parse(h??""),y=d==="+"?f.add(m):f.subtract(m);if(y.isNaN())return Nv;e=e.replace(HH,y.toString())}return e}var qH=/\(([^()]*)\)/;function Ent(t){for(var e=t,n;(n=qH.exec(e))!=null;){var[,r]=n;e=e.replace(qH,yue(r))}return e}function Pnt(t){var e=t.replace(/\s+/g,"");return e=Ent(e),e=yue(e),e}function Ont(t){try{return Pnt(t)}catch{return Nv}}function R3(t){var e=Ont(t.slice(5,-1));return e===Nv?"":e}var jnt=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],$nt=["dx","dy","angle","className","breakAll"];function vD(){return vD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vD.apply(null,arguments)}function GH(t,e){if(t==null)return{};var n,r,s=Dnt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Dnt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vue=/[ \f\n\r\t\v\u2028\u2029]+/,xue=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Vi(e)||(n?s=e.toString().split(""):s=e.toString().split(vue));var i=s.map(o=>({word:o,width:Fw(o,r).width})),a=n?0:Fw("",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}};function Lnt(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var bue=(t,e,n,r)=>t.reduce((s,i)=>{var{word:a,width:o}=i,l=s[s.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(a),l.width+=o+n;else{var c={words:[a],width:o};s.push(c)}return s},[]),wue=t=>t.reduce((e,n)=>e.width>n.width?e:n),Rnt="",KH=(t,e,n,r,s,i,a,o)=>{var l=t.slice(0,e),c=xue({breakAll:n,style:r,children:l+Rnt});if(!c)return[!1,[]];var u=bue(c.wordsWithComputedWidth,i,a,o),d=u.length>s||wue(u).width>Number(i);return[d,u]},Mnt=(t,e,n,r,s)=>{var{maxLines:i,children:a,style:o,breakAll:l}=t,c=Bt(i),u=String(a),d=bue(e,r,n,s);if(!c||s)return d;var h=d.length>i||wue(d).width>Number(r);if(!h)return d;for(var f=0,m=u.length-1,y=0,v;f<=m&&y<=u.length-1;){var x=Math.floor((f+m)/2),b=x-1,[_,k]=KH(u,b,l,o,i,r,n,s),[N]=KH(u,x,l,o,i,r,n,s);if(!_&&!N&&(f=x+1),_&&N&&(m=x-1),!_&&N){v=k;break}y++}return v||d},XH=t=>{var e=Vi(t)?[]:t.toString().split(vue);return[{words:e,width:void 0}]},Fnt=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:a}=t;if((e||n)&&!pS.isSsr){var o,l,c=xue({breakAll:i,children:r,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:d}=c;o=u,l=d}else return XH(r);return Mnt({breakAll:i,children:r,maxLines:a,style:s},o,l,e,!!n)}return XH(r)},_ue="#808080",znt={angle:0,breakAll:!1,capHeight:"0.71em",fill:_ue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Lz=R.forwardRef((t,e)=>{var n=Xa(t,znt),{x:r,y:s,lineHeight:i,capHeight:a,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,d=GH(n,jnt),h=R.useMemo(()=>Fnt({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:l,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,l,d.style,d.width]),{dx:f,dy:m,angle:y,className:v,breakAll:x}=d,b=GH(d,$nt);if(!Gd(r)||!Gd(s)||h.length===0)return null;var _=Number(r)+(Bt(f)?f:0),k=Number(s)+(Bt(m)?m:0);if(!zn(_)||!zn(k))return null;var N;switch(u){case"start":N=R3("calc(".concat(a,")"));break;case"middle":N=R3("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:N=R3("calc(".concat(h.length-1," * -").concat(i,")"));break}var A=[],T=h[0];if(l&&T!=null){var C=T.width,{width:P}=d;A.push("scale(".concat(Bt(P)&&Bt(C)?P/C:1,")"))}return y&&A.push("rotate(".concat(y,", ").concat(_,", ").concat(k,")")),A.length&&(b.transform=A.join(" ")),R.createElement("text",vD({},Ha(b),{ref:e,x:_,y:k,className:xr("recharts-text",v),textAnchor:c,fill:o.includes("url")?_ue:o}),h.map(($,j)=>{var O=$.words.join(x?"":" ");return R.createElement("tspan",{x:_,dy:j===0?N:i,key:"".concat(O,"-").concat(j)},O)}))});Lz.displayName="Text";function YH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YH(Object(n),!0).forEach(function(r){Bnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bnt(t,e,n){return(e=Wnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wnt(t){var e=Unt(t,"string");return typeof e=="symbol"?e:e+""}function Unt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vnt=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:s}=t,{x:i,y:a,height:o,upperWidth:l,lowerWidth:c}=O6(e),u=i,d=i+(l-c)/2,h=(u+d)/2,f=(l+c)/2,m=u+l/2,y=o>=0?1:-1,v=y*r,x=y>0?"end":"start",b=y>0?"start":"end",_=l>=0?1:-1,k=_*r,N=_>0?"end":"start",A=_>0?"start":"end",T=s;if(n==="top"){var C={x:u+l/2,y:a-v,horizontalAnchor:"middle",verticalAnchor:x};return T&&(C.height=Math.max(a-T.y,0),C.width=l),C}if(n==="bottom"){var P={x:d+c/2,y:a+o+v,horizontalAnchor:"middle",verticalAnchor:b};return T&&(P.height=Math.max(T.y+T.height-(a+o),0),P.width=c),P}if(n==="left"){var $={x:h-k,y:a+o/2,horizontalAnchor:N,verticalAnchor:"middle"};return T&&($.width=Math.max($.x-T.x,0),$.height=o),$}if(n==="right"){var j={x:h+f+k,y:a+o/2,horizontalAnchor:A,verticalAnchor:"middle"};return T&&(j.width=Math.max(T.x+T.width-j.x,0),j.height=o),j}var O=T?{width:f,height:o}:{};return n==="insideLeft"?pd({x:h+k,y:a+o/2,horizontalAnchor:A,verticalAnchor:"middle"},O):n==="insideRight"?pd({x:h+f-k,y:a+o/2,horizontalAnchor:N,verticalAnchor:"middle"},O):n==="insideTop"?pd({x:u+l/2,y:a+v,horizontalAnchor:"middle",verticalAnchor:b},O):n==="insideBottom"?pd({x:d+c/2,y:a+o-v,horizontalAnchor:"middle",verticalAnchor:x},O):n==="insideTopLeft"?pd({x:u+k,y:a+v,horizontalAnchor:A,verticalAnchor:b},O):n==="insideTopRight"?pd({x:u+l-k,y:a+v,horizontalAnchor:N,verticalAnchor:b},O):n==="insideBottomLeft"?pd({x:d+k,y:a+o-v,horizontalAnchor:A,verticalAnchor:x},O):n==="insideBottomRight"?pd({x:d+c-k,y:a+o-v,horizontalAnchor:N,verticalAnchor:x},O):n&&typeof n=="object"&&(Bt(n.x)||D0(n.x))&&(Bt(n.y)||D0(n.y))?pd({x:i+hm(n.x,f),y:a+hm(n.y,o),horizontalAnchor:"end",verticalAnchor:"end"},O):pd({x:m,y:a+o/2,horizontalAnchor:"middle",verticalAnchor:"middle"},O)},Hnt=["labelRef"],qnt=["content"];function ZH(t,e){if(t==null)return{};var n,r,s=Gnt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Gnt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JH(Object(n),!0).forEach(function(r){Knt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Knt(t,e,n){return(e=Xnt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xnt(t){var e=Ynt(t,"string");return typeof e=="symbol"?e:e+""}function Ynt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(null,arguments)}var kue=R.createContext(null),Znt=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:s,width:i,height:a,children:o}=t,l=R.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:s,width:i,height:a}),[e,n,r,s,i,a]);return R.createElement(kue.Provider,{value:l},o)},Sue=()=>{var t=R.useContext(kue),e=gP();return t||(e?O6(e):void 0)},Jnt=R.createContext(null),Qnt=()=>{var t=R.useContext(Jnt),e=Zt(tce);return t||e},ert=t=>{var{value:e,formatter:n}=t,r=Vi(t.children)?e:t.children;return typeof n=="function"?n(r):r},Rz=t=>t!=null&&typeof t=="function",trt=(t,e)=>{var n=Tc(e-t),r=Math.min(Math.abs(e-t),360);return n*r},nrt=(t,e,n,r,s)=>{var{offset:i,className:a}=t,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:d,endAngle:h,clockWise:f}=s,m=(c+u)/2,y=trt(d,h),v=y>=0?1:-1,x,b;switch(e){case"insideStart":x=d+v*i,b=f;break;case"insideEnd":x=h-v*i,b=!f;break;case"end":x=h+v*i,b=f;break;default:throw new Error("Unsupported position ".concat(e))}b=y<=0?b:!b;var _=ua(o,l,m,x),k=ua(o,l,m,x+(b?1:-1)*359),N="M".concat(_.x,",").concat(_.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(b?0:1,`,
    `).concat(k.x,",").concat(k.y),A=Vi(t.id)?B2("recharts-radial-line-"):t.id;return R.createElement("text",$h({},r,{dominantBaseline:"central",className:xr("recharts-radial-bar-label",a)}),R.createElement("defs",null,R.createElement("path",{id:A,d:N})),R.createElement("textPath",{xlinkHref:"#".concat(A)},n))},rrt=(t,e,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:u,y:d}=ua(r,s,a+e,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(i+a)/2,{x:f,y:m}=ua(r,s,h,c);return{x:f,y:m,textAnchor:"middle",verticalAnchor:"middle"}},PC=t=>t!=null&&"cx"in t&&Bt(t.cx),srt={angle:0,offset:5,zIndex:za.label,position:"middle",textBreakAll:!1};function irt(t){if(!PC(t))return t;var{cx:e,cy:n,outerRadius:r}=t,s=r*2;return{x:e-r,y:n-r,width:s,upperWidth:s,lowerWidth:s,height:s}}function hp(t){var e=Xa(t,srt),{viewBox:n,parentViewBox:r,position:s,value:i,children:a,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=Qnt(),h=Sue(),f=s==="center"?h:d??h,m,y,v;n==null?m=f:PC(n)?m=n:m=O6(n);var x=irt(m);if(!m||Vi(i)&&Vi(a)&&!R.isValidElement(o)&&typeof o!="function")return null;var b=gw(gw({},e),{},{viewBox:m});if(R.isValidElement(o)){var{labelRef:_}=b,k=ZH(b,Hnt);return R.cloneElement(o,k)}if(typeof o=="function"){var{content:N}=b,A=ZH(b,qnt);if(y=R.createElement(o,A),R.isValidElement(y))return y}else y=ert(e);var T=Ha(e);if(PC(m)){if(s==="insideStart"||s==="insideEnd"||s==="end")return nrt(e,s,y,T,m);v=rrt(m,e.offset,e.position)}else{if(!x)return null;var C=Vnt({viewBox:x,position:s,offset:e.offset,parentViewBox:PC(r)?void 0:r});v=gw(gw({x:C.x,y:C.y,textAnchor:C.horizontalAnchor,verticalAnchor:C.verticalAnchor},C.width!==void 0?{width:C.width}:{}),C.height!==void 0?{height:C.height}:{})}return R.createElement(Qd,{zIndex:e.zIndex},R.createElement(Lz,$h({ref:u,className:xr("recharts-label",l)},T,v,{textAnchor:Lnt(T.textAnchor)?T.textAnchor:v.textAnchor,breakAll:c}),y))}hp.displayName="Label";var art=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?R.createElement(hp,$h({key:"label-implicit"},r)):Gd(t)?R.createElement(hp,$h({key:"label-implicit",value:t},r)):R.isValidElement(t)?t.type===hp?R.cloneElement(t,gw({key:"label-implicit"},r)):R.createElement(hp,$h({key:"label-implicit",content:t},r)):Rz(t)?R.createElement(hp,$h({key:"label-implicit",content:t},r)):t&&typeof t=="object"?R.createElement(hp,$h({},t,{key:"label-implicit"},r)):null};function ort(t){var{label:e,labelRef:n}=t,r=Sue();return art(e,r,n)||null}var Nue={},Cue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Cue);var Tue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Tue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cue,n=Tue,r=JE;function s(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=s})(Nue);var lrt=Nue.last;const crt=Bc(lrt);var urt=["valueAccessor"],drt=["dataKey","clockWise","id","textBreakAll","zIndex"];function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HT.apply(null,arguments)}function QH(t,e){if(t==null)return{};var n,r,s=hrt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function hrt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var frt=t=>Array.isArray(t.value)?crt(t.value):t.value,Iue=R.createContext(void 0),Aue=Iue.Provider,Eue=R.createContext(void 0);Eue.Provider;function prt(){return R.useContext(Iue)}function mrt(){return R.useContext(Eue)}function OC(t){var{valueAccessor:e=frt}=t,n=QH(t,urt),{dataKey:r,clockWise:s,id:i,textBreakAll:a,zIndex:o}=n,l=QH(n,drt),c=prt(),u=mrt(),d=c||u;return!d||!d.length?null:R.createElement(Qd,{zIndex:o??za.label},R.createElement(Mc,{className:"recharts-label-list"},d.map((h,f)=>{var m,y=Vi(r)?e(h,f):wi(h.payload,r),v=Vi(i)?{}:{id:"".concat(i,"-").concat(f)};return R.createElement(hp,HT({key:"label-".concat(f)},Ha(h),l,v,{fill:(m=n.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:y,textBreakAll:a,viewBox:h.viewBox,index:f,zIndex:0}))})))}OC.displayName="LabelList";function Pue(t){var{label:e}=t;return e?e===!0?R.createElement(OC,{key:"labelList-implicit"}):R.isValidElement(e)||Rz(e)?R.createElement(OC,{key:"labelList-implicit",content:e}):typeof e=="object"?R.createElement(OC,HT({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function xD(){return xD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xD.apply(null,arguments)}var Oue=t=>{var{cx:e,cy:n,r,className:s}=t,i=xr("recharts-dot",s);return Bt(e)&&Bt(n)&&Bt(r)?R.createElement("circle",xD({},Rc(t),f6(t),{className:i,cx:e,cy:n,r})):null},grt={radiusAxis:{},angleAxis:{}},jue=hl({name:"polarAxis",initialState:grt,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:pmt,removeRadiusAxis:mmt,addAngleAxis:gmt,removeAngleAxis:ymt}=jue.actions,yrt=jue.reducer;function vrt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Mz=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,$ue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var s;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&s.writable)?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})($ue);var xrt=$ue.isPlainObject;const brt=Bc(xrt);var eq,tq,nq,rq,sq;function iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iq(Object(n),!0).forEach(function(r){wrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wrt(t,e,n){return(e=_rt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _rt(t){var e=krt(t,"string");return typeof e=="symbol"?e:e+""}function krt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qT.apply(null,arguments)}function K1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var oq=(t,e,n,r,s)=>{var i=n-r,a;return a=xs(eq||(eq=K1(["M ",",",""])),t,e),a+=xs(tq||(tq=K1(["L ",",",""])),t+n,e),a+=xs(nq||(nq=K1(["L ",",",""])),t+n-i/2,e+s),a+=xs(rq||(rq=K1(["L ",",",""])),t+n-i/2-r,e+s),a+=xs(sq||(sq=K1(["L ",","," Z"])),t,e),a},Srt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Nrt=t=>{var e=Xa(t,Srt),{x:n,y:r,upperWidth:s,lowerWidth:i,height:a,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=e,h=R.useRef(null),[f,m]=R.useState(-1),y=R.useRef(s),v=R.useRef(i),x=R.useRef(a),b=R.useRef(n),_=R.useRef(r),k=wP(t,"trapezoid-");if(R.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var B=h.current.getTotalLength();B&&m(B)}catch{}},[]),n!==+n||r!==+r||s!==+s||i!==+i||a!==+a||s===0&&i===0||a===0)return null;var N=xr("recharts-trapezoid",o);if(!d)return R.createElement("g",null,R.createElement("path",qT({},Ha(e),{className:N,d:oq(n,r,s,i,a)})));var A=y.current,T=v.current,C=x.current,P=b.current,$=_.current,j="0px ".concat(f===-1?1:f,"px"),O="".concat(f,"px 0px"),F=qoe(["strokeDasharray"],c,l);return R.createElement(bP,{animationId:k,key:k,canBegin:f>0,duration:c,easing:l,isActive:d,begin:u},B=>{var Z=qs(A,s,B),V=qs(T,i,B),G=qs(C,a,B),U=qs(P,n,B),K=qs($,r,B);h.current&&(y.current=Z,v.current=V,x.current=G,b.current=U,_.current=K);var ee=B>0?{transition:F,strokeDasharray:O}:{strokeDasharray:j};return R.createElement("path",qT({},Ha(e),{className:N,d:oq(U,K,Z,V,G),ref:h,style:aq(aq({},ee),e.style)}))})},Crt=["option","shapeType","activeClassName"];function Trt(t,e){if(t==null)return{};var n,r,s=Irt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Irt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function GT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lq(Object(n),!0).forEach(function(r){Art(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Art(t,e,n){return(e=Ert(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ert(t){var e=Prt(t,"string");return typeof e=="symbol"?e:e+""}function Prt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ort(t,e){return GT(GT({},e),t)}function jrt(t,e){return t==="symbols"}function cq(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return R.createElement(Yoe,n);case"trapezoid":return R.createElement(Nrt,n);case"sector":return R.createElement(Qoe,n);case"symbols":if(jrt(e))return R.createElement(yae,n);break;case"curve":return R.createElement(Mw,n);default:return null}}function $rt(t){return R.isValidElement(t)?t.props:t}function Drt(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,s=Trt(t,Crt),i;if(R.isValidElement(e))i=R.cloneElement(e,GT(GT({},s),$rt(e)));else if(typeof e=="function")i=e(s,s.index);else if(brt(e)&&typeof e!="boolean"){var a=Ort(e,s);i=R.createElement(cq,{shapeType:n,elementProps:a})}else{var o=s;i=R.createElement(cq,{shapeType:n,elementProps:o})}return s.isActive?R.createElement(Mc,{className:r},i):i}function Due(t){var{tooltipEntrySettings:e}=t,n=Xi(),r=Ya(),s=R.useRef(null);return R.useLayoutEffect(()=>{r||(s.current===null?n(net(e)):s.current!==e&&n(ret({prev:s.current,next:e})),s.current=e)},[e,n,r]),R.useLayoutEffect(()=>()=>{s.current&&(n(set(s.current)),s.current=null)},[n]),null}function Lue(t){var{legendPayload:e}=t,n=Xi(),r=Ya(),s=R.useRef(null);return R.useLayoutEffect(()=>{r||(s.current===null?n(MKe(e)):s.current!==e&&n(FKe({prev:s.current,next:e})),s.current=e)},[n,r,e]),R.useLayoutEffect(()=>()=>{s.current&&(n(zKe(s.current)),s.current=null)},[n]),null}var M3,Lrt=()=>{var[t]=R.useState(()=>B2("uid-"));return t},Rrt=(M3=RK.useId)!==null&&M3!==void 0?M3:Lrt;function Mrt(t,e){var n=Rrt();return e||(t?"".concat(t,"-").concat(n):n)}var Frt=R.createContext(void 0),Rue=t=>{var{id:e,type:n,children:r}=t,s=Mrt("recharts-".concat(n),e);return R.createElement(Frt.Provider,{value:s},r(s))},zrt={cartesianItems:[],polarItems:[]},Mue=hl({name:"graphicalItems",initialState:zrt,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Yr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,s=Ou(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},prepare:Yr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ou(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Yr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Yr()},removePolarGraphicalItem:{reducer(t,e){var n=Ou(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Yr()}}}),{addCartesianGraphicalItem:Brt,replaceCartesianGraphicalItem:Wrt,removeCartesianGraphicalItem:Urt,addPolarGraphicalItem:vmt,removePolarGraphicalItem:xmt}=Mue.actions,Vrt=Mue.reducer,Hrt=t=>{var e=Xi(),n=R.useRef(null);return R.useLayoutEffect(()=>{n.current===null?e(Brt(t)):n.current!==t&&e(Wrt({prev:n.current,next:t})),n.current=t},[e,t]),R.useLayoutEffect(()=>()=>{n.current&&(e(Urt(n.current)),n.current=null)},[e]),null},Fue=R.memo(Hrt),qrt=["points"];function uq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function F3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uq(Object(n),!0).forEach(function(r){Grt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Grt(t,e,n){return(e=Krt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Krt(t){var e=Xrt(t,"string");return typeof e=="symbol"?e:e+""}function Xrt(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KT.apply(null,arguments)}function Yrt(t,e){if(t==null)return{};var n,r,s=Zrt(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Zrt(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Jrt(t){var{option:e,dotProps:n,className:r}=t;if(R.isValidElement(e))return R.cloneElement(e,n);if(typeof e=="function")return e(n);var s=xr(r,typeof e!="boolean"?e.className:""),i=n??{},{points:a}=i,o=Yrt(i,qrt);return R.createElement(Oue,KT({},o,{className:s}))}function Qrt(t,e){return t==null?!1:e?!0:t.length===1}function zue(t){var{points:e,dot:n,className:r,dotClassName:s,dataKey:i,baseProps:a,needClip:o,clipPathId:l,zIndex:c=za.scatter}=t;if(!Qrt(e,n))return null;var u=Mz(n),d=K9e(n),h=e.map((m,y)=>{var v,x,b=F3(F3(F3({r:3},a),d),{},{index:y,cx:(v=m.x)!==null&&v!==void 0?v:void 0,cy:(x=m.y)!==null&&x!==void 0?x:void 0,dataKey:i,value:m.value,payload:m.payload,points:e});return R.createElement(Jrt,{key:"dot-".concat(y),option:n,dotProps:b,className:s})}),f={};return o&&l!=null&&(f.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),R.createElement(Qd,{zIndex:c},R.createElement(Mc,KT({className:r},f),h))}function dq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dq(Object(n),!0).forEach(function(r){est(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function est(t,e,n){return(e=tst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tst(t){var e=nst(t,"string");return typeof e=="symbol"?e:e+""}function nst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bue=0,rst={xAxis:{},yAxis:{},zAxis:{}},Wue=hl({name:"cartesianAxis",initialState:rst,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Yr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Yr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Yr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Yr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Yr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Yr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Yr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Yr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Yr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,s=t.yAxis[n];if(s){var i,a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==s.width&&Math.abs(r-((i=a[0])!==null&&i!==void 0?i:0))<=1)return;var o=[...a,r].slice(-3);t.yAxis[n]=hq(hq({},s),{},{width:r,widthHistory:o})}}}}),{addXAxis:sst,replaceXAxis:ist,removeXAxis:ast,addYAxis:ost,replaceYAxis:lst,removeYAxis:cst,addZAxis:bmt,replaceZAxis:wmt,removeZAxis:_mt,updateYAxisWidth:ust}=Wue.actions,dst=Wue.reducer,hst=Ye([ya],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),fst=Ye([hst,bf,wf],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),BP=()=>Zt(fst),pst=()=>Zt(Jet);function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(n),!0).forEach(function(r){mst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mst(t,e,n){return(e=gst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gst(t){var e=yst(t,"string");return typeof e=="symbol"?e:e+""}function yst(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vst=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:i,clipPath:a}=t;if(s===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=z3(z3(z3({},o),VE(s)),f6(s)),c;return R.isValidElement(s)?c=R.cloneElement(s,l):typeof s=="function"?c=s(l):c=R.createElement(Oue,l),R.createElement(Mc,{className:"recharts-active-dot",clipPath:a},c)};function bD(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s,clipPath:i,zIndex:a=za.activeDot}=t,o=Zt(e_),l=pst();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Vi(c)?null:R.createElement(Qd,{zIndex:a},R.createElement(vst,{point:c,childIndex:Number(o),mainColor:n,dataKey:s,activeDot:r,clipPath:i}))}var xst=t=>{var{chartData:e}=t,n=Xi(),r=Ya();return R.useEffect(()=>r?()=>{}:(n($H(e)),()=>{n($H(void 0))}),[e,n,r]),null},pq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Uue=hl({name:"brush",initialState:pq,reducers:{setBrushSettings(t,e){return e.payload==null?pq:e.payload}}}),{setBrushSettings:kmt}=Uue.actions,bst=Uue.reducer;function wst(t){return(t%180+180)%180}var _st=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=wst(s),a=i*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},kst={dots:[],areas:[],lines:[]},Vue=hl({name:"referenceElements",initialState:kst,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ou(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ou(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ou(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Smt,removeDot:Nmt,addArea:Cmt,removeArea:Tmt,addLine:Imt,removeLine:Amt}=Vue.actions,Sst=Vue.reducer,Nst=R.createContext(void 0),Cst=t=>{var{children:e}=t,[n]=R.useState("".concat(B2("recharts"),"-clip")),r=BP();if(r==null)return null;var{x:s,y:i,width:a,height:o}=r;return R.createElement(Nst.Provider,{value:n},R.createElement("defs",null,R.createElement("clipPath",{id:n},R.createElement("rect",{x:s,y:i,height:o,width:a}))),e)};function Hue(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var s=t[r];s!==void 0&&n.push(s)}return n}function Tst(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return _st(r,n)}function Ist(t,e,n){var r=n==="width",{x:s,y:i,width:a,height:o}=t;return e===1?{start:r?s:i,end:r?s+a:i+o}:{start:r?s+a:i+o,end:r?s:i}}function n_(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function Ast(t,e){return Hue(t,e+1)}function Est(t,e,n,r,s){for(var i=(r||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,d=function(){var m=r==null?void 0:r[l];if(m===void 0)return{v:Hue(r,c)};var y=l,v,x=()=>(v===void 0&&(v=n(m,y)),v),b=m.coordinate,_=l===0||n_(t,b,x,u,o);_||(l=0,u=a,c+=1),_&&(u=b+t*(x()/2+s),l+=c)},h;c<=i.length;)if(h=d(),h)return h.v;return[]}function Pst(t,e,n,r,s){var i=(r||[]).slice(),a=i.length;if(a===0)return[];for(var{start:o,end:l}=e,c=1;c<=a;c++){for(var u=(a-1)%c,d=o,h=!0,f=function(){var k=r[y];if(k==null)return 0;var N=y,A,T=()=>(A===void 0&&(A=n(k,N)),A),C=k.coordinate,P=y===u||n_(t,C,T,d,l);if(!P)return h=!1,1;P&&(d=C+t*(T()/2+s))},m,y=u;y<a&&(m=f(),!(m!==0&&m===1));y+=c);if(h){for(var v=[],x=u;x<a;x+=c){var b=r[x];b!=null&&v.push(b)}return v}}return[]}function mq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(n),!0).forEach(function(r){Ost(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ost(t,e,n){return(e=jst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jst(t){var e=$st(t,"string");return typeof e=="symbol"?e:e+""}function $st(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dst(t,e,n,r,s){for(var i=(r||[]).slice(),a=i.length,{start:o}=e,{end:l}=e,c=function(h){var f=i[h];if(f==null)return 1;var m=f,y,v=()=>(y===void 0&&(y=n(f,h)),y);if(h===a-1){var x=t*(m.coordinate+t*v()/2-l);i[h]=m=Pa(Pa({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else i[h]=m=Pa(Pa({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var b=n_(t,m.tickCoord,v,o,l);b&&(l=m.tickCoord-t*(v()/2+s),i[h]=Pa(Pa({},m),{},{isShow:!0}))}},u=a-1;u>=0;u--)c(u);return i}function Lst(t,e,n,r,s,i){var a=(r||[]).slice(),o=a.length,{start:l,end:c}=e;if(i){var u=r[o-1];if(u!=null){var d=n(u,o-1),h=t*(u.coordinate+t*d/2-c);if(a[o-1]=u=Pa(Pa({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate}),u.tickCoord!=null){var f=n_(t,u.tickCoord,()=>d,l,c);f&&(c=u.tickCoord-t*(d/2+s),a[o-1]=Pa(Pa({},u),{},{isShow:!0}))}}}for(var m=i?o-1:o,y=function(b){var _=a[b];if(_==null)return 1;var k=_,N,A=()=>(N===void 0&&(N=n(_,b)),N);if(b===0){var T=t*(k.coordinate-t*A()/2-l);a[b]=k=Pa(Pa({},k),{},{tickCoord:T<0?k.coordinate-T*t:k.coordinate})}else a[b]=k=Pa(Pa({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var C=n_(t,k.tickCoord,A,l,c);C&&(l=k.tickCoord+t*(A()/2+s),a[b]=Pa(Pa({},k),{},{isShow:!0}))}},v=0;v<m;v++)y(v);return a}function Fz(t,e,n){var{tick:r,ticks:s,viewBox:i,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:d}=t;if(!s||!s.length||!r)return[];if(Bt(l)||pS.isSsr){var h;return(h=Ast(s,Bt(l)?l:0))!==null&&h!==void 0?h:[]}var f=[],m=o==="top"||o==="bottom"?"width":"height",y=u&&m==="width"?Fw(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=(N,A)=>{var T=typeof c=="function"?c(N.value,A):N.value;return m==="width"?Tst(Fw(T,{fontSize:e,letterSpacing:n}),y,d):Fw(T,{fontSize:e,letterSpacing:n})[m]},x=s[0],b=s[1],_=s.length>=2&&x!=null&&b!=null?Tc(b.coordinate-x.coordinate):1,k=Ist(i,_,m);return l==="equidistantPreserveStart"?Est(_,k,v,s,a):l==="equidistantPreserveEnd"?Pst(_,k,v,s,a):(l==="preserveStart"||l==="preserveStartEnd"?f=Lst(_,k,v,s,a,l==="preserveStartEnd"):f=Dst(_,k,v,s,a),f.filter(N=>N.isShow))}var Rst=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=t,a=0;if(e){Array.from(e).forEach(u=>{if(u){var d=u.getBoundingClientRect();d.width>a&&(a=d.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+i,c=a+l+o+(n?r:0);return Math.round(c)}return 0},Mst=["axisLine","width","height","className","hide","ticks","axisType"];function Fst(t,e){if(t==null)return{};var n,r,s=zst(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function zst(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function z0(){return z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z0.apply(null,arguments)}function gq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gq(Object(n),!0).forEach(function(r){Bst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bst(t,e,n){return(e=Wst(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wst(t){var e=Ust(t,"string");return typeof e=="symbol"?e:e+""}function Ust(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:za.axis};function Vst(t){var{x:e,y:n,width:r,height:s,orientation:i,mirror:a,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=vs(vs(vs({},l),Rc(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!a||i==="bottom"&&a);c=vs(vs({},c),{},{x1:e,y1:n+u*s,x2:e+r,y2:n+u*s})}else{var d=+(i==="left"&&!a||i==="right"&&a);c=vs(vs({},c),{},{x1:e+d*r,y1:n,x2:e+d*r,y2:n+s})}return R.createElement("line",z0({},c,{className:xr("recharts-cartesian-axis-line",ZE(o,"className"))}))}function Hst(t,e,n,r,s,i,a,o,l){var c,u,d,h,f,m,y=o?-1:1,v=t.tickSize||a,x=Bt(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":c=u=t.coordinate,h=n+ +!o*s,d=h-y*v,m=d-y*l,f=x;break;case"left":d=h=t.coordinate,u=e+ +!o*r,c=u-y*v,f=c-y*l,m=x;break;case"right":d=h=t.coordinate,u=e+ +o*r,c=u+y*v,f=c+y*l,m=x;break;default:c=u=t.coordinate,h=n+ +o*s,d=h+y*v,m=d+y*l,f=x;break}return{line:{x1:c,y1:d,x2:u,y2:h},tick:{x:f,y:m}}}function qst(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Gst(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Kst(t){var{option:e,tickProps:n,value:r}=t,s,i=xr(n.className,"recharts-cartesian-axis-tick-value");if(R.isValidElement(e))s=R.cloneElement(e,vs(vs({},n),{},{className:i}));else if(typeof e=="function")s=e(vs(vs({},n),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=xr(a,vrt(e))),s=R.createElement(Lz,z0({},n,{className:a}),r)}return s}var Xst=R.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:s,stroke:i,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:u,mirror:d,x:h,y:f,width:m,height:y,tickSize:v,tickMargin:x,fontSize:b,letterSpacing:_,getTicksConfig:k,events:N,axisType:A}=t,T=Fz(vs(vs({},k),{},{ticks:n}),b,_),C=qst(u,d),P=Gst(u,d),$=Rc(k),j=VE(r),O={};typeof s=="object"&&(O=s);var F=vs(vs({},$),{},{fill:"none"},O),B=T.map(G=>vs({entry:G},Hst(G,h,f,m,y,u,v,d,x))),Z=B.map(G=>{var{entry:U,line:K}=G;return R.createElement(Mc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},s&&R.createElement("line",z0({},F,K,{className:xr("recharts-cartesian-axis-tick-line",ZE(s,"className"))})))}),V=B.map((G,U)=>{var K,ee,{entry:oe,tick:W}=G,Y=vs(vs(vs(vs({verticalAnchor:P},$),{},{textAnchor:C,stroke:"none",fill:i},W),{},{index:U,payload:oe,visibleTicksCount:T.length,tickFormatter:a,padding:l},c),{},{angle:(K=(ee=c==null?void 0:c.angle)!==null&&ee!==void 0?ee:$.angle)!==null&&K!==void 0?K:0}),Q=vs(vs({},Y),j);return R.createElement(Mc,z0({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},XHe(N,oe,U)),r&&R.createElement(Kst,{option:r,tickProps:Q,value:"".concat(typeof a=="function"?a(oe.value,U):oe.value).concat(o||"")}))});return R.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},V.length>0&&R.createElement(Qd,{zIndex:za.label},R.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:e},V)),Z.length>0&&R.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},Z))}),Yst=R.forwardRef((t,e)=>{var{axisLine:n,width:r,height:s,className:i,hide:a,ticks:o,axisType:l}=t,c=Fst(t,Mst),[u,d]=R.useState(""),[h,f]=R.useState(""),m=R.useRef(null);R.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return Rst({ticks:m.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=R.useCallback(v=>{if(v){var x=v.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var b=x[0];if(b){var _=window.getComputedStyle(b),k=_.fontSize,N=_.letterSpacing;(k!==u||N!==h)&&(d(k),f(N))}}},[u,h]);return a||r!=null&&r<=0||s!=null&&s<=0?null:R.createElement(Qd,{zIndex:t.zIndex},R.createElement(Mc,{className:xr("recharts-cartesian-axis",i)},R.createElement(Vst,{x:t.x,y:t.y,width:r,height:s,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Rc(t)}),R.createElement(Xst,{ref:y,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),R.createElement(Znt,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},R.createElement(ort,{label:t.label,labelRef:t.labelRef}),t.children)))}),zz=R.forwardRef((t,e)=>{var n=Xa(t,qh);return R.createElement(Yst,z0({},n,{ref:e}))});zz.displayName="CartesianAxis";var Zst=["x1","y1","x2","y2","key"],Jst=["offset"],Qst=["xAxisId","yAxisId"],eit=["xAxisId","yAxisId"];function yq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(n),!0).forEach(function(r){tit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tit(t,e,n){return(e=nit(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nit(t){var e=rit(t,"string");return typeof e=="symbol"?e:e+""}function rit(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vg(){return Vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vg.apply(null,arguments)}function XT(t,e){if(t==null)return{};var n,r,s=sit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function sit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iit=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:a,ry:o}=t;return R.createElement("rect",{x:r,y:s,ry:o,width:i,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function que(t){var{option:e,lineItemProps:n}=t,r;if(R.isValidElement(e))r=R.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var s,{x1:i,y1:a,x2:o,y2:l,key:c}=n,u=XT(n,Zst),d=(s=Rc(u))!==null&&s!==void 0?s:{},{offset:h}=d,f=XT(d,Jst);r=R.createElement("line",Vg({},f,{x1:i,y1:a,x2:o,y2:l,fill:"none",key:c}))}return r}function ait(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=XT(t,Qst),l=s.map((c,u)=>{var d=La(La({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return R.createElement(que,{key:"line-".concat(u),option:r,lineItemProps:d})});return R.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function oit(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=XT(t,eit),l=s.map((c,u)=>{var d=La(La({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return R.createElement(que,{option:r,lineItemProps:d,key:"line-".concat(u)})});return R.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function lit(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:i,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(d=>Math.round(d+s-s)).sort((d,h)=>d-h);s!==c[0]&&c.unshift(0);var u=c.map((d,h)=>{var f=c[h+1],m=f==null,y=m?s+a-d:f-d;if(y<=0)return null;var v=h%e.length;return R.createElement("rect",{key:"react-".concat(h),y:d,x:r,height:y,width:i,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function cit(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(d=>Math.round(d+s-s)).sort((d,h)=>d-h);s!==c[0]&&c.unshift(0);var u=c.map((d,h)=>{var f=c[h+1],m=f==null,y=m?s+a-d:f-d;if(y<=0)return null;var v=h%n.length;return R.createElement("rect",{key:"react-".concat(h),x:d,y:i,width:y,height:o,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return R.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var uit=(t,e)=>{var{xAxis:n,width:r,height:s,offset:i}=t;return Soe(Fz(La(La(La({},qh),n),{},{ticks:Noe(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,e)},dit=(t,e)=>{var{yAxis:n,width:r,height:s,offset:i}=t;return Soe(Fz(La(La(La({},qh),n),{},{ticks:Noe(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,e)},hit={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:za.grid};function wD(t){var e=Doe(),n=Loe(),r=$oe(),s=La(La({},Xa(t,hit)),{},{x:Bt(t.x)?t.x:r.left,y:Bt(t.y)?t.y:r.top,width:Bt(t.width)?t.width:r.width,height:Bt(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:h,verticalValues:f}=s,m=Ya(),y=Zt(P=>kH(P,"xAxis",i,m)),v=Zt(P=>kH(P,"yAxis",a,m));if(!Kd(c)||!Kd(u)||!Bt(o)||!Bt(l))return null;var x=s.verticalCoordinatesGenerator||uit,b=s.horizontalCoordinatesGenerator||dit,{horizontalPoints:_,verticalPoints:k}=s;if((!_||!_.length)&&typeof b=="function"){var N=h&&h.length,A=b({yAxis:v?La(La({},v),{},{ticks:N?h:v.ticks}):void 0,width:e??c,height:n??u,offset:r},N?!0:d);wT(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(_=A)}if((!k||!k.length)&&typeof x=="function"){var T=f&&f.length,C=x({xAxis:y?La(La({},y),{},{ticks:T?f:y.ticks}):void 0,width:e??c,height:n??u,offset:r},T?!0:d);wT(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(k=C)}return R.createElement(Qd,{zIndex:s.zIndex},R.createElement("g",{className:"recharts-cartesian-grid"},R.createElement(iit,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),R.createElement(lit,Vg({},s,{horizontalPoints:_})),R.createElement(cit,Vg({},s,{verticalPoints:k})),R.createElement(ait,Vg({},s,{offset:r,horizontalPoints:_,xAxis:y,yAxis:v})),R.createElement(oit,Vg({},s,{offset:r,verticalPoints:k,xAxis:y,yAxis:v}))))}wD.displayName="CartesianGrid";var fit={},Gue=hl({name:"errorBars",initialState:fit,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:s}=e.payload;t[n]&&(t[n]=t[n].map(i=>i.dataKey===r.dataKey&&i.direction===r.direction?s:i))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:Emt,replaceErrorBar:Pmt,removeErrorBar:Omt}=Gue.actions,pit=Gue.reducer,mit=["children"];function git(t,e){if(t==null)return{};var n,r,s=yit(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yit(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vit={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},xit=R.createContext(vit);function bit(t){var{children:e}=t,n=git(t,mit);return R.createElement(xit.Provider,{value:n},e)}function Bz(t,e){var n,r,s=Zt(c=>Sf(c,t)),i=Zt(c=>Nf(c,e)),a=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:ji.allowDataOverflow,o=(r=i==null?void 0:i.allowDataOverflow)!==null&&r!==void 0?r:$i.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function Kue(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=BP(),{needClipX:i,needClipY:a,needClip:o}=Bz(e,n);if(!o||!s)return null;var{x:l,y:c,width:u,height:d}=s;return R.createElement("clipPath",{id:"clipPath-".concat(r)},R.createElement("rect",{x:i?l:l-u/2,y:a?c:c-d/2,width:i?u:u*2,height:a?d:d*2}))}var Xue=(t,e,n,r)=>zP(t,"xAxis",e,r),Yue=(t,e,n,r)=>FP(t,"xAxis",e,r),Zue=(t,e,n,r)=>zP(t,"yAxis",n,r),Jue=(t,e,n,r)=>FP(t,"yAxis",n,r),wit=Ye([Lr,Xue,Zue,Yue,Jue],(t,e,n,r,s)=>qu(t,"xAxis")?_x(e,r,!1):_x(n,s,!1)),_it=(t,e,n,r,s)=>s;function kit(t){return t.type==="line"}var Sit=Ye([yz,_it],(t,e)=>t.filter(kit).find(n=>n.id===e)),Nit=Ye([Lr,Xue,Zue,Yue,Jue,Sit,wit,iz],(t,e,n,r,s,i,a,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(!(i==null||e==null||n==null||r==null||s==null||r.length===0||s.length===0||a==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:d,data:h}=i,f;if(h!=null&&h.length>0?f=h:f=l==null?void 0:l.slice(c,u+1),f!=null)return mat({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataKey:d,bandSize:a,displayedData:f})}});function Que(t){var e=VE(t),n=3,r=2;if(e!=null){var{r:s,strokeWidth:i}=e,a=Number(s),o=Number(i);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(o)||o<0)&&(o=r),{r:a,strokeWidth:o}}return{r:n,strokeWidth:r}}var Cit={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=R;function Tit(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iit=typeof Object.is=="function"?Object.is:Tit,Ait=NS.useSyncExternalStore,Eit=NS.useRef,Pit=NS.useEffect,Oit=NS.useMemo,jit=NS.useDebugValue;Cit.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Eit(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Oit(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&a.hasValue){var m=a.value;if(s(m,f))return d=m}return d=f}if(m=d,Iit(u,f))return m;var y=r(f);return s!==void 0&&s(m,y)?(u=f,m):(u=f,d=y)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var o=Ait(t,i[0],i[1]);return Pit(function(){a.hasValue=!0,a.value=o},[o]),jit(o),o};function $it(t){t()}function Dit(){let t=null,e=null;return{clear(){t=null,e=null},notify(){$it(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var vq={notify(){},get:()=>[]};function Lit(t,e){let n,r=vq,s=0,i=!1;function a(y){u();const v=r.subscribe(y);let x=!1;return()=>{x||(x=!0,v(),d())}}function o(){r.notify()}function l(){m.onStateChange&&m.onStateChange()}function c(){return i}function u(){s++,n||(n=t.subscribe(l),r=Dit())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=vq)}function h(){i||(i=!0,u())}function f(){i&&(i=!1,d())}const m={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return m}var Rit=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mit=Rit(),Fit=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zit=Fit(),Bit=()=>Mit||zit?R.useLayoutEffect:R.useEffect,Wit=Bit();function xq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Uit(t,e){if(xq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(e,n[s])||!xq(t[n[s]],e[n[s]]))return!1;return!0}var B3=Symbol.for("react-redux-context"),W3=typeof globalThis<"u"?globalThis:{};function Vit(){if(!R.createContext)return{};const t=W3[B3]??(W3[B3]=new Map);let e=t.get(R.createContext);return e||(e=R.createContext(null),t.set(R.createContext,e)),e}var Hit=Vit();function qit(t){const{children:e,context:n,serverState:r,store:s}=t,i=R.useMemo(()=>{const l=Lit(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),a=R.useMemo(()=>s.getState(),[s]);Wit(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const o=n||Hit;return R.createElement(o.Provider,{value:i},e)}var Git=qit,Kit=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Xit(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function WP(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Kit.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Uit(t[r],e[r]))return!1}else if(!Xit(t[r],e[r]))return!1;return!0}var Yit=["id"],Zit=["type","layout","connectNulls","needClip","shape"],Jit=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(null,arguments)}function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){Qit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qit(t,e,n){return(e=eat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eat(t){var e=tat(t,"string");return typeof e=="symbol"?e:e+""}function tat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wz(t,e){if(t==null)return{};var n,r,s=nat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function nat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rat=t=>{var{dataKey:e,name:n,stroke:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:dP(n,e),payload:t}]},sat=R.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:n,getPosition:ly,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:dP(a,e),hide:o,type:c,color:r,unit:l,graphicalItemId:u}};return R.createElement(Due,{tooltipEntrySettings:d})}),ede=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function iat(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],s=0;s<e;++s)r=[...r,...n];return r}var aat=(t,e,n)=>{var r=n.reduce((f,m)=>f+m);if(!r)return ede(e,t);for(var s=Math.floor(t/r),i=t%r,a=e-t,o=[],l=0,c=0;l<n.length;c+=(u=n[l])!==null&&u!==void 0?u:0,++l){var u,d=n[l];if(d!=null&&c+d>i){o=[...n.slice(0,l),i-c];break}}var h=o.length%2===0?[0,a]:[a];return[...iat(n,s),...o,...h].map(f=>"".concat(f,"px")).join(", ")};function oat(t){var{clipPathId:e,points:n,props:r}=t,{dot:s,dataKey:i,needClip:a}=r,{id:o}=r,l=Wz(r,Yit),c=Rc(l);return R.createElement(zue,{points:n,dot:s,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:a,clipPathId:e})}function lat(t){var{showLabels:e,children:n,points:r}=t,s=R.useMemo(()=>r==null?void 0:r.map(i=>{var a,o,l={x:(a=i.x)!==null&&a!==void 0?a:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return kd(kd({},l),{},{value:i.value,payload:i.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return R.createElement(Aue,{value:e?s:void 0},n)}function wq(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:s,props:i}=t,{type:a,layout:o,connectNulls:l,needClip:c,shape:u}=i,d=Wz(i,Zit),h=kd(kd({},Ha(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:a,layout:o,connectNulls:l,strokeDasharray:s??i.strokeDasharray});return R.createElement(R.Fragment,null,(r==null?void 0:r.length)>1&&R.createElement(Drt,r_({shapeType:"curve",option:u},h,{pathRef:n})),R.createElement(oat,{points:r,clipPathId:e,props:i}))}function cat(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function uat(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:s,longestAnimatedLengthRef:i}=t,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:h,width:f,height:m,onAnimationEnd:y,onAnimationStart:v}=n,x=s.current,b=wP(a,"recharts-line-"),_=R.useRef(b),[k,N]=R.useState(!1),A=!k,T=R.useCallback(()=>{typeof y=="function"&&y(),N(!1)},[y]),C=R.useCallback(()=>{typeof v=="function"&&v(),N(!0)},[v]),P=cat(r.current),$=R.useRef(0);_.current!==b&&($.current=i.current,_.current=b);var j=$.current;return R.createElement(lat,{points:a,showLabels:A},n.children,R.createElement(bP,{animationId:b,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:T,onAnimationStart:C,key:b},O=>{var F=qs(j,P+j,O),B=Math.min(F,P),Z;if(l)if(o){var V="".concat(o).split(/[,\s]+/gim).map(K=>parseFloat(K));Z=aat(B,P,V)}else Z=ede(P,B);else Z=o==null?void 0:String(o);if(O>0&&P>0&&(s.current=a,i.current=Math.max(i.current,B)),x){var G=x.length/a.length,U=O===1?a:a.map((K,ee)=>{var oe=Math.floor(ee*G);if(x[oe]){var W=x[oe];return kd(kd({},K),{},{x:qs(W.x,K.x,O),y:qs(W.y,K.y,O)})}return h?kd(kd({},K),{},{x:qs(f*2,K.x,O),y:qs(m/2,K.y,O)}):kd(kd({},K),{},{x:K.x,y:K.y})});return s.current=U,R.createElement(wq,{props:n,points:U,clipPathId:e,pathRef:r,strokeDasharray:Z})}return R.createElement(wq,{props:n,points:a,clipPathId:e,pathRef:r,strokeDasharray:Z})}),R.createElement(Pue,{label:n.label}))}function dat(t){var{clipPathId:e,props:n}=t,r=R.useRef(null),s=R.useRef(0),i=R.useRef(null);return R.createElement(uat,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:s,pathRef:i})}var hat=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:wi(t.payload,e)}};class fat extends R.Component{render(){var{hide:e,dot:n,points:r,className:s,xAxisId:i,yAxisId:a,top:o,left:l,width:c,height:u,id:d,needClip:h,zIndex:f}=this.props;if(e)return null;var m=xr("recharts-line",s),y=d,{r:v,strokeWidth:x}=Que(n),b=Mz(n),_=v*2+x,k=h?"url(#clipPath-".concat(b?"":"dots-").concat(y,")"):void 0;return R.createElement(Qd,{zIndex:f},R.createElement(Mc,{className:m},h&&R.createElement("defs",null,R.createElement(Kue,{clipPathId:y,xAxisId:i,yAxisId:a}),!b&&R.createElement("clipPath",{id:"clipPath-dots-".concat(y)},R.createElement("rect",{x:l-_/2,y:o-_/2,width:c+_,height:u+_}))),R.createElement(bit,{xAxisId:i,yAxisId:a,data:r,dataPointFormatter:hat,errorBarOffset:0},R.createElement(dat,{props:this.props,clipPathId:y}))),R.createElement(bD,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var tde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:za.line,type:"linear"};function pat(t){var e=Xa(t,tde),{activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:o,dot:l,hide:c,isAnimationActive:u,label:d,legendType:h,xAxisId:f,yAxisId:m,id:y}=e,v=Wz(e,Jit),{needClip:x}=Bz(f,m),b=BP(),_=cy(),k=Ya(),N=Zt($=>Nit($,f,m,k,y));if(_!=="horizontal"&&_!=="vertical"||N==null||b==null)return null;var{height:A,width:T,x:C,y:P}=b;return R.createElement(fat,r_({},v,{id:y,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,isAnimationActive:u,hide:c,label:d,legendType:h,xAxisId:f,yAxisId:m,points:N,layout:_,height:A,width:T,left:C,top:P,needClip:x}))}function mat(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,dataKey:a,bandSize:o,displayedData:l}=t;return l.map((c,u)=>{var d=wi(c,a);if(e==="horizontal"){var h=bT({axis:n,ticks:s,bandSize:o,entry:c,index:u}),f=Vi(d)?null:r.scale.map(d);return{x:h,y:f??null,value:d,payload:c}}var m=Vi(d)?null:n.scale.map(d),y=bT({axis:r,ticks:i,bandSize:o,entry:c,index:u});return m==null||y==null?null:{x:m,y,value:d,payload:c}}).filter(Boolean)}function gat(t){var e=Xa(t,tde),n=Ya();return R.createElement(Rue,{id:e.id,type:"line"},r=>R.createElement(R.Fragment,null,R.createElement(Lue,{legendPayload:rat(e)}),R.createElement(sat,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),R.createElement(Fue,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),R.createElement(pat,r_({},e,{id:r}))))}var nde=R.memo(gat,WP);nde.displayName="Line";function Uz(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Bue}function Vz(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(s=>s.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Bue}var rde=(t,e,n)=>zP(t,"xAxis",Uz(t,e),n),sde=(t,e,n)=>FP(t,"xAxis",Uz(t,e),n),ide=(t,e,n)=>zP(t,"yAxis",Vz(t,e),n),ade=(t,e,n)=>FP(t,"yAxis",Vz(t,e),n),yat=Ye([Lr,rde,ide,sde,ade],(t,e,n,r,s)=>qu(t,"xAxis")?_x(e,r,!1):_x(n,s,!1)),vat=(t,e)=>e,ode=Ye([yz,vat],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),lde=t=>{var e=Lr(t),n=qu(e,"xAxis");return n?"yAxis":"xAxis"},xat=(t,e)=>{var n=lde(t);return n==="yAxis"?Vz(t,e):Uz(t,e)},bat=(t,e,n)=>mce(t,lde(t),xat(t,e),n),wat=Ye([ode,bat],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,s=pz(t);if(!(r==null||s==null)){var i=(n=e[r])===null||n===void 0?void 0:n.stackedData,a=i==null?void 0:i.find(o=>o.key===s);if(a!=null)return a.map(o=>[o[0],o[1]])}}}),_at=Ye([Lr,rde,ide,sde,ade,wat,$Je,yat,ode,UJe],(t,e,n,r,s,i,a,o,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=a;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||s==null||r.length===0||s.length===0||o==null)){var{data:f}=l,m;if(f&&f.length>0?m=f:m=u==null?void 0:u.slice(d,h+1),m!=null)return Bat({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataStartIndex:d,areaSettings:l,stackedData:i,displayedData:m,chartBaseValue:c,bandSize:o})}}),kat=["id"],Sat=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function n0(){return n0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n0.apply(null,arguments)}function cde(t,e){if(t==null)return{};var n,r,s=Nat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Nat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_q(Object(n),!0).forEach(function(r){Cat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cat(t,e,n){return(e=Tat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tat(t){var e=Iat(t,"string");return typeof e=="symbol"?e:e+""}function Iat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YT(t,e){return t&&t!=="none"?t:e}var Aat=t=>{var{dataKey:e,name:n,stroke:r,fill:s,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:YT(r,s),value:dP(n,e),payload:t}]},Eat=R.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:n,getPosition:ly,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:dP(a,e),hide:o,type:c,color:YT(r,i),unit:l,graphicalItemId:u}};return R.createElement(Due,{tooltipEntrySettings:d})});function Pat(t){var{clipPathId:e,points:n,props:r}=t,{needClip:s,dot:i,dataKey:a}=r,o=Rc(r);return R.createElement(zue,{points:n,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:o,needClip:s,clipPathId:e})}function Oat(t){var{showLabels:e,children:n,points:r}=t,s=r.map(i=>{var a,o,l={x:(a=i.x)!==null&&a!==void 0?a:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Cv(Cv({},l),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return R.createElement(Aue,{value:e?s:void 0},n)}function kq(t){var{points:e,baseLine:n,needClip:r,clipPathId:s,props:i}=t,{layout:a,type:o,stroke:l,connectNulls:c,isRange:u}=i,{id:d}=i,h=cde(i,kat),f=Rc(h),m=Ha(h);return R.createElement(R.Fragment,null,(e==null?void 0:e.length)>1&&R.createElement(Mc,{clipPath:r?"url(#clipPath-".concat(s,")"):void 0},R.createElement(Mw,n0({},m,{id:d,points:e,connectNulls:c,type:o,baseLine:n,layout:a,stroke:"none",className:"recharts-area-area"})),l!=="none"&&R.createElement(Mw,n0({},f,{className:"recharts-area-curve",layout:a,type:o,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&R.createElement(Mw,n0({},f,{className:"recharts-area-curve",layout:a,type:o,connectNulls:c,fill:"none",points:n}))),R.createElement(Pat,{points:e,props:h,clipPathId:s}))}function jat(t){var e,n,{alpha:r,baseLine:s,points:i,strokeWidth:a}=t,o=(e=i[0])===null||e===void 0?void 0:e.y,l=(n=i[i.length-1])===null||n===void 0?void 0:n.y;if(!zn(o)||!zn(l))return null;var c=r*Math.abs(o-l),u=Math.max(...i.map(d=>d.x||0));return Bt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(d=>d.x||0),u)),Bt(u)?R.createElement("rect",{x:0,y:o<l?o:o-c,width:u+(a?parseInt("".concat(a),10):1),height:Math.floor(c)}):null}function $at(t){var e,n,{alpha:r,baseLine:s,points:i,strokeWidth:a}=t,o=(e=i[0])===null||e===void 0?void 0:e.x,l=(n=i[i.length-1])===null||n===void 0?void 0:n.x;if(!zn(o)||!zn(l))return null;var c=r*Math.abs(o-l),u=Math.max(...i.map(d=>d.y||0));return Bt(s)?u=Math.max(s,u):s&&Array.isArray(s)&&s.length&&(u=Math.max(...s.map(d=>d.y||0),u)),Bt(u)?R.createElement("rect",{x:o<l?o:o-c,y:0,width:c,height:Math.floor(u+(a?parseInt("".concat(a),10):1))}):null}function Dat(t){var{alpha:e,layout:n,points:r,baseLine:s,strokeWidth:i}=t;return n==="vertical"?R.createElement(jat,{alpha:e,points:r,baseLine:s,strokeWidth:i}):R.createElement($at,{alpha:e,points:r,baseLine:s,strokeWidth:i})}function Lat(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:i}=t,{points:a,baseLine:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,onAnimationStart:h,onAnimationEnd:f}=r,m=R.useMemo(()=>({points:a,baseLine:o}),[a,o]),y=wP(m,"recharts-area-"),v=j6(),[x,b]=R.useState(!1),_=!x,k=R.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),N=R.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);if(v==null)return null;var A=s.current,T=i.current;return R.createElement(Oat,{showLabels:_,points:a},r.children,R.createElement(bP,{animationId:y,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:k,onAnimationStart:N,key:y},C=>{if(A){var P=A.length/a.length,$=C===1?a:a.map((O,F)=>{var B=Math.floor(F*P);if(A[B]){var Z=A[B];return Cv(Cv({},O),{},{x:qs(Z.x,O.x,C),y:qs(Z.y,O.y,C)})}return O}),j;return Bt(o)?j=qs(T,o,C):Vi(o)||qd(o)?j=qs(T,0,C):j=o.map((O,F)=>{var B=Math.floor(F*P);if(Array.isArray(T)&&T[B]){var Z=T[B];return Cv(Cv({},O),{},{x:qs(Z.x,O.x,C),y:qs(Z.y,O.y,C)})}return O}),C>0&&(s.current=$,i.current=j),R.createElement(kq,{points:$,baseLine:j,needClip:e,clipPathId:n,props:r})}return C>0&&(s.current=a,i.current=o),R.createElement(Mc,null,l&&R.createElement("defs",null,R.createElement("clipPath",{id:"animationClipPath-".concat(n)},R.createElement(Dat,{alpha:C,points:a,baseLine:o,layout:v,strokeWidth:r.strokeWidth}))),R.createElement(Mc,{clipPath:"url(#animationClipPath-".concat(n,")")},R.createElement(kq,{points:a,baseLine:o,needClip:e,clipPathId:n,props:r})))}),R.createElement(Pue,{label:r.label}))}function Rat(t){var{needClip:e,clipPathId:n,props:r}=t,s=R.useRef(null),i=R.useRef();return R.createElement(Lat,{needClip:e,clipPathId:n,props:r,previousPointsRef:s,previousBaselineRef:i})}class Mat extends R.PureComponent{render(){var{hide:e,dot:n,points:r,className:s,top:i,left:a,needClip:o,xAxisId:l,yAxisId:c,width:u,height:d,id:h,baseLine:f,zIndex:m}=this.props;if(e)return null;var y=xr("recharts-area",s),v=h,{r:x,strokeWidth:b}=Que(n),_=Mz(n),k=x*2+b,N=o?"url(#clipPath-".concat(_?"":"dots-").concat(v,")"):void 0;return R.createElement(Qd,{zIndex:m},R.createElement(Mc,{className:y},o&&R.createElement("defs",null,R.createElement(Kue,{clipPathId:v,xAxisId:l,yAxisId:c}),!_&&R.createElement("clipPath",{id:"clipPath-dots-".concat(v)},R.createElement("rect",{x:a-k/2,y:i-k/2,width:u+k,height:d+k}))),R.createElement(Rat,{needClip:o,clipPathId:v,props:this.props})),R.createElement(bD,{points:r,mainColor:YT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:N}),this.props.isRange&&Array.isArray(f)&&R.createElement(bD,{points:f,mainColor:YT(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:N}))}}var ude={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:za.area};function Fat(t){var e,n=Xa(t,ude),{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:o,dot:l,fill:c,fillOpacity:u,hide:d,isAnimationActive:h,legendType:f,stroke:m,xAxisId:y,yAxisId:v}=n,x=cde(n,Sat),b=cy(),_=iue(),{needClip:k}=Bz(y,v),N=Ya(),{points:A,isRange:T,baseLine:C}=(e=Zt(B=>_at(B,t.id,N)))!==null&&e!==void 0?e:{},P=BP();if(b!=="horizontal"&&b!=="vertical"||P==null||_!=="AreaChart"&&_!=="ComposedChart")return null;var{height:$,width:j,x:O,y:F}=P;return!A||!A.length?null:R.createElement(Mat,n0({},x,{activeDot:r,animationBegin:s,animationDuration:i,animationEasing:a,baseLine:C,connectNulls:o,dot:l,fill:c,fillOpacity:u,height:$,hide:d,layout:b,isAnimationActive:h==="auto"?!pS.isSsr:h,isRange:T,legendType:f,needClip:k,points:A,stroke:m,width:j,left:O,top:F,xAxisId:y,yAxisId:v}))}var zat=(t,e,n,r,s)=>{var i=n??e;if(Bt(i))return i;var a=t==="horizontal"?s:r,o=a.scale.domain();if(a.type==="number"){var l=Math.max(o[0],o[1]),c=Math.min(o[0],o[1]);return i==="dataMin"?c:i==="dataMax"||l<0?l:Math.max(Math.min(o[0],o[1]),0)}return i==="dataMin"?o[0]:i==="dataMax"?o[1]:o[0]};function Bat(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:s,layout:i,chartBaseValue:a,xAxis:o,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:d,yAxisTicks:h,bandSize:f}=t,m=s&&s.length,y=zat(i,a,n,o,l),v=i==="horizontal",x=!1,b=c.map((k,N)=>{var A,T,C,P;if(m)P=s[u+N];else{var $=wi(k,r);Array.isArray($)?(P=$,x=!0):P=[y,$]}var j=(A=(T=P)===null||T===void 0?void 0:T[1])!==null&&A!==void 0?A:null,O=j==null||m&&!e&&wi(k,r)==null;if(v){var F;return{x:bT({axis:o,ticks:d,bandSize:f,entry:k,index:N}),y:O?null:(F=l.scale.map(j))!==null&&F!==void 0?F:null,value:P,payload:k}}return{x:O?null:(C=o.scale.map(j))!==null&&C!==void 0?C:null,y:bT({axis:l,ticks:h,bandSize:f,entry:k,index:N}),value:P,payload:k}}),_;return m||x?_=b.map(k=>{var N,A=Array.isArray(k.value)?k.value[0]:null;if(v){var T;return{x:k.x,y:A!=null&&k.y!=null&&(T=l.scale.map(A))!==null&&T!==void 0?T:null,payload:k.payload}}return{x:A!=null&&(N=o.scale.map(A))!==null&&N!==void 0?N:null,y:k.y,payload:k.payload}}):_=v?l.scale.map(y):o.scale.map(y),{points:b,baseLine:_??0,isRange:x}}function Wat(t){var e=Xa(t,ude),n=Ya();return R.createElement(Rue,{id:e.id,type:"area"},r=>R.createElement(R.Fragment,null,R.createElement(Lue,{legendPayload:Aat(e)}),R.createElement(Eat,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),R.createElement(Fue,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:qGe(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),R.createElement(Fat,n0({},e,{id:r}))))}var dde=R.memo(Wat,WP);dde.displayName="Area";var Uat=["domain","range"],Vat=["domain","range"];function Sq(t,e){if(t==null)return{};var n,r,s=Hat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Hat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Nq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function hde(t,e){if(t===e)return!0;var{domain:n,range:r}=t,s=Sq(t,Uat),{domain:i,range:a}=e,o=Sq(e,Vat);return!Nq(n,i)||!Nq(r,a)?!1:WP(s,o)}var qat=["type"],Gat=["dangerouslySetInnerHTML","ticks","scale"],Kat=["id","scale"];function _D(){return _D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_D.apply(null,arguments)}function Cq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cq(Object(n),!0).forEach(function(r){Xat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xat(t,e,n){return(e=Yat(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yat(t){var e=Zat(t,"string");return typeof e=="symbol"?e:e+""}function Zat(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kD(t,e){if(t==null)return{};var n,r,s=Jat(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Jat(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Qat(t){var e=Xi(),n=R.useRef(null),r=j6(),{type:s}=t,i=kD(t,qat),a=EP(r,"xAxis",s),o=R.useMemo(()=>{if(a!=null)return Tq(Tq({},i),{},{type:a})},[i,a]);return R.useLayoutEffect(()=>{o!=null&&(n.current===null?e(sst(o)):n.current!==o&&e(ist({prev:n.current,next:o})),n.current=o)},[o,e]),R.useLayoutEffect(()=>()=>{n.current&&(e(ast(n.current)),n.current=null)},[e]),null}var eot=t=>{var{xAxisId:e,className:n}=t,r=Zt(Toe),s=Ya(),i="xAxis",a=Zt(x=>Rce(x,i,e,s)),o=Zt(x=>FQe(x,e)),l=Zt(x=>HQe(x,e)),c=Zt(x=>rce(x,e));if(o==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:d,scale:h}=t,f=kD(t,Gat),{id:m,scale:y}=c,v=kD(c,Kat);return R.createElement(zz,_D({},f,v,{x:l.x,y:l.y,width:o.width,height:o.height,className:xr("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:a,axisType:i}))},tot={allowDataOverflow:ji.allowDataOverflow,allowDecimals:ji.allowDecimals,allowDuplicatedCategory:ji.allowDuplicatedCategory,angle:ji.angle,axisLine:qh.axisLine,height:ji.height,hide:!1,includeHidden:ji.includeHidden,interval:ji.interval,label:!1,minTickGap:ji.minTickGap,mirror:ji.mirror,orientation:ji.orientation,padding:ji.padding,reversed:ji.reversed,scale:ji.scale,tick:ji.tick,tickCount:ji.tickCount,tickLine:qh.tickLine,tickSize:qh.tickSize,type:ji.type,xAxisId:0},not=t=>{var e=Xa(t,tot);return R.createElement(R.Fragment,null,R.createElement(Qat,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),R.createElement(eot,e))},SD=R.memo(not,hde);SD.displayName="XAxis";var rot=["type"],sot=["dangerouslySetInnerHTML","ticks","scale"],iot=["id","scale"];function ND(){return ND=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ND.apply(null,arguments)}function Iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(n),!0).forEach(function(r){aot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aot(t,e,n){return(e=oot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oot(t){var e=lot(t,"string");return typeof e=="symbol"?e:e+""}function lot(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CD(t,e){if(t==null)return{};var n,r,s=cot(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function cot(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uot(t){var e=Xi(),n=R.useRef(null),r=j6(),{type:s}=t,i=CD(t,rot),a=EP(r,"yAxis",s),o=R.useMemo(()=>{if(a!=null)return Aq(Aq({},i),{},{type:a})},[a,i]);return R.useLayoutEffect(()=>{o!=null&&(n.current===null?e(ost(o)):n.current!==o&&e(lst({prev:n.current,next:o})),n.current=o)},[o,e]),R.useLayoutEffect(()=>()=>{n.current&&(e(cst(n.current)),n.current=null)},[e]),null}function dot(t){var{yAxisId:e,className:n,width:r,label:s}=t,i=R.useRef(null),a=R.useRef(null),o=Zt(Toe),l=Ya(),c=Xi(),u="yAxis",d=Zt(A=>KQe(A,e)),h=Zt(A=>GQe(A,e)),f=Zt(A=>Rce(A,u,e,l)),m=Zt(A=>sce(A,e));if(R.useLayoutEffect(()=>{if(!(r!=="auto"||!d||Rz(s)||R.isValidElement(s)||m==null)){var A=i.current;if(A){var T=A.getCalculatedWidth();Math.round(d.width)!==Math.round(T)&&c(ust({id:e,width:T}))}}},[f,d,c,s,e,r,m]),d==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:y,ticks:v,scale:x}=t,b=CD(t,sot),{id:_,scale:k}=m,N=CD(m,iot);return R.createElement(zz,ND({},b,N,{ref:i,labelRef:a,x:h.x,y:h.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:d.width,height:d.height,className:xr("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:f,axisType:u}))}var hot={allowDataOverflow:$i.allowDataOverflow,allowDecimals:$i.allowDecimals,allowDuplicatedCategory:$i.allowDuplicatedCategory,angle:$i.angle,axisLine:qh.axisLine,hide:!1,includeHidden:$i.includeHidden,interval:$i.interval,label:!1,minTickGap:$i.minTickGap,mirror:$i.mirror,orientation:$i.orientation,padding:$i.padding,reversed:$i.reversed,scale:$i.scale,tick:$i.tick,tickCount:$i.tickCount,tickLine:qh.tickLine,tickSize:qh.tickSize,type:$i.type,width:$i.width,yAxisId:0},fot=t=>{var e=Xa(t,hot);return R.createElement(R.Fragment,null,R.createElement(uot,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),R.createElement(dot,e))},TD=R.memo(fot,hde);TD.displayName="YAxis";var pot=(t,e)=>e,Hz=Ye([pot,Lr,tce,Ji,Qce,Cf,utt,ya],ytt),qz=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},fde=Fc("mouseClick"),pde=uS();pde.startListening({actionCreator:fde,effect:(t,e)=>{var n=t.payload,r=Hz(e.getState(),qz(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(oet({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var ID=Fc("mouseMove"),mde=uS(),qN=null;mde.startListening({actionCreator:ID,effect:(t,e)=>{var n=t.payload;qN!==null&&cancelAnimationFrame(qN);var r=qz(n);qN=requestAnimationFrame(()=>{var s=e.getState(),i=Cz(s,s.tooltip.settings.shared);if(i==="axis"){var a=Hz(s,r);(a==null?void 0:a.activeIndex)!=null?e.dispatch(Vce({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(Uce())}qN=null})}});function mot(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Eq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},gde=hl({name:"rootProps",initialState:Eq,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:Eq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),got=gde.reducer,{updateOptions:yot}=gde.actions,vot=null,xot={updatePolarOptions:(t,e)=>e.payload},yde=hl({name:"polarOptions",initialState:vot,reducers:xot}),{updatePolarOptions:jmt}=yde.actions,bot=yde.reducer,vde=Fc("keyDown"),xde=Fc("focus"),Gz=uS();Gz.startListening({actionCreator:vde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=Tz(s,d1(n),wS(n),kS(n)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var l=Cf(n);if(i==="Enter"){var c=VT(n,"axis","hover",String(s.index));e.dispatch(mD({active:!s.active,activeIndex:s.index,activeCoordinate:c}));return}var u=JQe(n),d=u==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,f=o+h*d;if(!(l==null||f>=l.length||f<0)){var m=VT(n,"axis","hover",String(f));e.dispatch(mD({active:!0,activeIndex:f.toString(),activeCoordinate:m}))}}}}}});Gz.startListening({actionCreator:xde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",a=VT(n,"axis","hover",String(i));e.dispatch(mD({active:!0,activeIndex:i,activeCoordinate:a}))}}}});var pc=Fc("externalEvent"),bde=uS(),U3=new Map;bde.startListening({actionCreator:pc,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var s=r.type,i=U3.get(s);i!==void 0&&cancelAnimationFrame(i);var a=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:Xet(o),activeDataKey:Get(o),activeIndex:e_(o),activeLabel:nue(o),activeTooltipIndex:e_(o),isTooltipActive:Yet(o)};n(l,r)}finally{U3.delete(s)}});U3.set(s,a)}}});var wot=Ye([c1],t=>t.tooltipItemPayloads),_ot=Ye([wot,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(i=>i.settings.graphicalItemId===n);if(r!=null){var{getPosition:s}=r;if(s!=null)return s(e)}}}),wde=Fc("touchMove"),_de=uS();_de.startListening({actionCreator:wde,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),s=Cz(r,r.tooltip.settings.shared);if(s==="axis"){var i=n.touches[0];if(i==null)return;var a=Hz(r,qz({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(Vce({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var o,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(QGe),d=(o=c.getAttribute(eKe))!==null&&o!==void 0?o:void 0,h=u1(r).find(y=>y.id===d);if(u==null||h==null||d==null)return;var{dataKey:f}=h,m=_ot(r,u,d);e.dispatch(aet({activeDataKey:f,activeIndex:u,activeCoordinate:m,activeGraphicalItemId:d}))}}}});var kot=Xae({brush:bst,cartesianAxis:dst,chartData:Gtt,errorBars:pit,graphicalItems:Vrt,layout:RGe,legend:BKe,options:Wtt,polarAxis:yrt,polarOptions:bot,referenceElements:Sst,rootProps:got,tooltip:cet,zIndex:Ptt}),Sot=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return lGe({reducer:kot,preloadedState:e,middleware:r=>{var s;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([pde.middleware,mde.middleware,Gz.middleware,bde.middleware,_de.middleware])},enhancers:r=>{var s=r;return typeof r=="function"&&(s=r()),s.concat(uoe({type:"raf"}))},devTools:{serialize:{replacer:mot},name:"recharts-".concat(n)}})};function Not(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=Ya(),i=R.useRef(null);if(s)return n;i.current==null&&(i.current=Sot(e,r));var a=_6;return R.createElement(Git,{context:a,store:i.current},n)}function Cot(t){var{layout:e,margin:n}=t,r=Xi(),s=Ya();return R.useEffect(()=>{s||(r($Ge(e)),r(jGe(n)))},[r,s,e,n]),null}var Tot=R.memo(Cot,WP);function Iot(t){var e=Xi();return R.useEffect(()=>{e(yot(t))},[e,t]),null}function Pq(t){var{zIndex:e,isPanorama:n}=t,r=R.useRef(null),s=Xi();return R.useLayoutEffect(()=>(r.current&&s(Att({zIndex:e,element:r.current,isPanorama:n})),()=>{s(Ett({zIndex:e,isPanorama:n}))}),[s,e,n]),R.createElement("g",{tabIndex:-1,ref:r})}function Oq(t){var{children:e,isPanorama:n}=t,r=Zt(xtt);if(!r||r.length===0)return e;var s=r.filter(a=>a<0),i=r.filter(a=>a>0);return R.createElement(R.Fragment,null,s.map(a=>R.createElement(Pq,{key:a,zIndex:a,isPanorama:n})),e,i.map(a=>R.createElement(Pq,{key:a,zIndex:a,isPanorama:n})))}var Aot=["children"];function Eot(t,e){if(t==null)return{};var n,r,s=Pot(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Pot(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZT.apply(null,arguments)}var Oot={width:"100%",height:"100%",display:"block"},jot=R.forwardRef((t,e)=>{var n=Doe(),r=Loe(),s=Hoe();if(!Kd(n)||!Kd(r))return null;var{children:i,otherAttributes:a,title:o,desc:l}=t,c,u;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=s?0:void 0,typeof a.role=="string"?u=a.role:u=s?"application":void 0),R.createElement(Xie,ZT({},a,{title:o,desc:l,role:u,tabIndex:c,width:n,height:r,style:Oot,ref:e}),i)}),$ot=t=>{var{children:e}=t,n=Zt(mP);if(!n)return null;var{width:r,height:s,y:i,x:a}=n;return R.createElement(Xie,{width:r,height:s,x:a,y:i},e)},jq=R.forwardRef((t,e)=>{var{children:n}=t,r=Eot(t,Aot),s=Ya();return s?R.createElement($ot,null,R.createElement(Oq,{isPanorama:!0},n)):R.createElement(jot,ZT({ref:e},r),R.createElement(Oq,{isPanorama:!1},n))});function Dot(){var t=Xi(),[e,n]=R.useState(null),r=Zt(JGe);return R.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;zn(i)&&i!==r&&t(LGe(i))}},[e,t,r]),n}function $q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$q(Object(n),!0).forEach(function(r){Rot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rot(t,e,n){return(e=Mot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mot(t){var e=Fot(t,"string");return typeof e=="symbol"?e:e+""}function Fot(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(null,arguments)}var zot=()=>(nnt(),null);function JT(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Bot=R.forwardRef((t,e)=>{var n,r,s=R.useRef(null),[i,a]=R.useState({containerWidth:JT((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:JT((r=t.style)===null||r===void 0?void 0:r.height)}),o=R.useCallback((c,u)=>{a(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=R.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:d}=c.getBoundingClientRect();o(u,d);var h=m=>{var y=m[0];if(y!=null){var{width:v,height:x}=y.contentRect;o(v,x)}},f=new ResizeObserver(h);f.observe(c),s.current=f}},[e,o]);return R.useEffect(()=>()=>{var c=s.current;c!=null&&c.disconnect()},[o]),R.createElement(R.Fragment,null,R.createElement(hS,{width:i.containerWidth,height:i.containerHeight}),R.createElement("div",Kp({ref:l},t)))}),Wot=R.forwardRef((t,e)=>{var{width:n,height:r}=t,[s,i]=R.useState({containerWidth:JT(n),containerHeight:JT(r)}),a=R.useCallback((l,c)=>{i(u=>{var d=Math.round(l),h=Math.round(c);return u.containerWidth===d&&u.containerHeight===h?u:{containerWidth:d,containerHeight:h}})},[]),o=R.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();a(c,u)}},[e,a]);return R.createElement(R.Fragment,null,R.createElement(hS,{width:s.containerWidth,height:s.containerHeight}),R.createElement("div",Kp({ref:o},t)))}),Uot=R.forwardRef((t,e)=>{var{width:n,height:r}=t;return R.createElement(R.Fragment,null,R.createElement(hS,{width:n,height:r}),R.createElement("div",Kp({ref:e},t)))}),Vot=R.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?R.createElement(Wot,Kp({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?R.createElement(Uot,Kp({},t,{width:n,height:r,ref:e})):R.createElement(R.Fragment,null,R.createElement(hS,{width:n,height:r}),R.createElement("div",Kp({ref:e},t)))});function Hot(t){return t?Bot:Vot}var qot=R.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:h,onTouchEnd:f,onTouchMove:m,onTouchStart:y,style:v,width:x,responsive:b,dispatchTouchEvents:_=!0}=t,k=R.useRef(null),N=Xi(),[A,T]=R.useState(null),[C,P]=R.useState(null),$=Dot(),j=P6(),O=(j==null?void 0:j.width)>0?j.width:x,F=(j==null?void 0:j.height)>0?j.height:s,B=R.useCallback(ce=>{$(ce),typeof e=="function"&&e(ce),T(ce),P(ce),ce!=null&&(k.current=ce)},[$,e,T,P]),Z=R.useCallback(ce=>{N(fde(ce)),N(pc({handler:i,reactEvent:ce}))},[N,i]),V=R.useCallback(ce=>{N(ID(ce)),N(pc({handler:c,reactEvent:ce}))},[N,c]),G=R.useCallback(ce=>{N(Uce()),N(pc({handler:u,reactEvent:ce}))},[N,u]),U=R.useCallback(ce=>{N(ID(ce)),N(pc({handler:d,reactEvent:ce}))},[N,d]),K=R.useCallback(()=>{N(xde())},[N]),ee=R.useCallback(ce=>{N(vde(ce.key))},[N]),oe=R.useCallback(ce=>{N(pc({handler:a,reactEvent:ce}))},[N,a]),W=R.useCallback(ce=>{N(pc({handler:o,reactEvent:ce}))},[N,o]),Y=R.useCallback(ce=>{N(pc({handler:l,reactEvent:ce}))},[N,l]),Q=R.useCallback(ce=>{N(pc({handler:h,reactEvent:ce}))},[N,h]),J=R.useCallback(ce=>{N(pc({handler:y,reactEvent:ce}))},[N,y]),te=R.useCallback(ce=>{_&&N(wde(ce)),N(pc({handler:m,reactEvent:ce}))},[N,_,m]),me=R.useCallback(ce=>{N(pc({handler:f,reactEvent:ce}))},[N,f]),ge=Hot(b);return R.createElement(uue.Provider,{value:A},R.createElement(tHe.Provider,{value:C},R.createElement(ge,{width:O??(v==null?void 0:v.width),height:F??(v==null?void 0:v.height),className:xr("recharts-wrapper",r),style:Lot({position:"relative",cursor:"default",width:O,height:F},v),onClick:Z,onContextMenu:oe,onDoubleClick:W,onFocus:K,onKeyDown:ee,onMouseDown:Y,onMouseEnter:V,onMouseLeave:G,onMouseMove:U,onMouseUp:Q,onTouchEnd:me,onTouchMove:te,onTouchStart:J,ref:B},R.createElement(zot,null),n)))}),Got=["width","height","responsive","children","className","style","compact","title","desc"];function Kot(t,e){if(t==null)return{};var n,r,s=Xot(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Xot(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yot=R.forwardRef((t,e)=>{var{width:n,height:r,responsive:s,children:i,className:a,style:o,compact:l,title:c,desc:u}=t,d=Kot(t,Got),h=Rc(d);return l?R.createElement(R.Fragment,null,R.createElement(hS,{width:n,height:r}),R.createElement(jq,{otherAttributes:h,title:c,desc:u},i)):R.createElement(qot,{className:a,style:o,width:n,height:r,responsive:s??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},R.createElement(jq,{otherAttributes:h,title:c,desc:u,ref:e},R.createElement(Cst,null,i)))});function AD(){return AD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AD.apply(null,arguments)}var Zot={top:5,right:5,bottom:5,left:5},Jot={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Zot,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},kde=R.forwardRef(function(e,n){var r,s=Xa(e.categoricalChartProps,Jot),{chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return R.createElement(Not,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:i},R.createElement(xst,{chartData:c.data}),R.createElement(Tot,{layout:s.layout,margin:s.margin}),R.createElement(Iot,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),R.createElement(Yot,AD({},s,{ref:n})))}),Qot=["axis"],elt=R.forwardRef((t,e)=>R.createElement(kde,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Qot,tooltipPayloadSearcher:hue,categoricalChartProps:t,ref:e})),tlt=["axis"],nlt=R.forwardRef((t,e)=>R.createElement(kde,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tlt,tooltipPayloadSearcher:hue,categoricalChartProps:t,ref:e}));const rlt=[{name:"Mon",repairs:4,revenue:240},{name:"Tue",repairs:6,revenue:380},{name:"Wed",repairs:3,revenue:150},{name:"Thu",repairs:8,revenue:520},{name:"Fri",repairs:5,revenue:310},{name:"Sat",repairs:2,revenue:120},{name:"Sun",repairs:1,revenue:60}],slt=[{name:"Week 1",avgTime:45},{name:"Week 2",avgTime:42},{name:"Week 3",avgTime:38},{name:"Week 4",avgTime:35}];function ilt(){return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Performance Analytics"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Track your efficiency and revenue generation."})]}),p.jsxs("select",{className:"bg-white border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-emerald-500 focus:border-emerald-500 block p-2.5",children:[p.jsx("option",{children:"Last 7 Days"}),p.jsx("option",{children:"Last 30 Days"}),p.jsx("option",{children:"This Year"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Total Revenue"}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:"$1,780"})]}),p.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600",children:p.jsx(QY,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-emerald-600 font-medium",children:[p.jsx(Hs,{className:"h-3 w-3 mr-1"}),p.jsx("span",{children:"+12.5% from last week"})]})]}),p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Repairs Completed"}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:"29"})]}),p.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:p.jsx(Wi,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-blue-600 font-medium",children:[p.jsx(Hs,{className:"h-3 w-3 mr-1"}),p.jsx("span",{children:"+4 new today"})]})]}),p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Avg. Repair Time"}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:"38m"})]}),p.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600",children:p.jsx(Bd,{className:"h-5 w-5"})})]}),p.jsxs("div",{className:"mt-4 flex items-center text-xs text-emerald-600 font-medium",children:[p.jsx(Hs,{className:"h-3 w-3 mr-1"}),p.jsx("span",{children:"-5m faster than avg"})]})]}),p.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase",children:"Success Rate"}),p.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:"98.5%"})]}),p.jsx("div",{className:"p-2 bg-orange-50 rounded-lg text-orange-600",children:p.jsx(Wi,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"mt-4 flex items-center text-xs text-gray-500 font-medium",children:p.jsx("span",{children:"Top 5% of technicians"})})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Weekly Revenue"}),p.jsx("div",{className:"h-64",children:p.jsx(MV,{width:"100%",height:"100%",children:p.jsxs(nlt,{data:rlt,children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.1}),p.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})}),p.jsx(wD,{strokeDasharray:"3 3",vertical:!1,stroke:"#F3F4F6"}),p.jsx(SD,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),p.jsx(TD,{axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),p.jsx(FH,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),p.jsx(dde,{type:"monotone",dataKey:"revenue",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)"})]})})})]}),p.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm",children:[p.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Repair Efficiency Trend"}),p.jsx("div",{className:"h-64",children:p.jsx(MV,{width:"100%",height:"100%",children:p.jsxs(elt,{data:slt,children:[p.jsx(wD,{strokeDasharray:"3 3",vertical:!1,stroke:"#F3F4F6"}),p.jsx(SD,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),p.jsx(TD,{axisLine:!1,tickLine:!1,tick:{fill:"#9CA3AF",fontSize:12}}),p.jsx(FH,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),p.jsx(nde,{type:"monotone",dataKey:"avgTime",stroke:"#8B5CF6",strokeWidth:3,dot:{r:4,fill:"#8B5CF6",strokeWidth:2,stroke:"#fff"}})]})})})]})]})]})}function alt(){const t=Wc(),[e,n]=R.useState("overview"),[r,s]=R.useState({name:"Loading..."}),[i,a]=R.useState(!0),[o,l]=R.useState([]),[c,u]=R.useState([]);R.useEffect(()=>{d(),h();const y=tt.channel("repair_requests_insert").on("postgres_changes",{event:"INSERT",schema:"public",table:"repair_requests"},v=>{const x={id:Date.now(),title:"New Repair Request",message:`New ${v.new.device_type} repair request`,time:new Date,read:!1};u(b=>[x,...b])}).subscribe();return()=>{tt.removeChannel(y)}},[]);const d=async()=>{try{const{data:{user:y}}=await tt.auth.getUser();if(!y){t("/login");return}const{data:v}=await tt.from("profiles").select("full_name, role").eq("id",y.id).single();if((v==null?void 0:v.role)!=="technician"){t("/login");return}s({name:(v==null?void 0:v.full_name)||"Technician"})}catch(y){console.error("Error fetching technician data:",y)}finally{a(!1)}},h=async()=>{try{const{data:{user:y}}=await tt.auth.getUser();if(!y)return;let v=tt.from("repair_requests").select("*, technician:profiles!technician_id(full_name)").order("created_at",{ascending:!1}).or(`technician_id.eq.${y.id},status.eq.pending`);const{data:x,error:b}=await v;if(b)throw b;l(x||[])}catch(y){console.error("Error fetching repairs:",y)}},f=async(y,v)=>{try{const{data:{user:x}}=await tt.auth.getUser();if(!x)return;const b=o.find(N=>N.id===y),_={status:v,updated_at:new Date().toISOString()};v==="assigned"&&(b==null?void 0:b.technician_id)===null&&(_.technician_id=x.id);const{error:k}=await tt.from("repair_requests").update(_).eq("id",y);if(k)throw k;l(o.map(N=>N.id===y?{...N,..._}:N))}catch(x){console.error("Error updating repair status:",x)}},m=async()=>{await tt.auth.signOut(),t("/login")};return i?p.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[p.jsx(z9e,{activeTab:e,setActiveTab:n,onLogout:m,technicianName:r.name}),p.jsxs("div",{className:"flex-1 ml-64 p-8 overflow-y-auto h-screen",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 capitalize",children:e.replace("-"," ")}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx(q0,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 rounded-xl border border-gray-200 bg-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent w-64 text-sm"})]}),p.jsxs("button",{className:"p-2 rounded-xl bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 relative",children:[p.jsx(II,{className:"h-5 w-5"}),c.length>0&&p.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"})]})]})]}),p.jsxs("div",{className:"animate-fade-in-up",children:[e==="overview"&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl p-6 text-white shadow-lg shadow-emerald-500/20",children:[p.jsx("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Active Repairs"}),p.jsx("h3",{className:"text-3xl font-bold",children:o.filter(y=>["assigned","diagnosing","repairing"].includes(y.status)).length})]}),p.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[p.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Completed Today"}),p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:o.filter(y=>y.status==="completed"&&new Date(y.updated_at).toDateString()===new Date().toDateString()).length})]}),p.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[p.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Pending Requests"}),p.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:o.filter(y=>y.status==="pending").length})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Current Workflow"}),p.jsx(iV,{repairs:o,onStatusUpdate:f})]})]}),e==="kanban"&&p.jsx("div",{className:"h-[calc(100vh-12rem)]",children:p.jsx(iV,{repairs:o,onStatusUpdate:f})}),e==="diagnostics"&&p.jsx(U9e,{}),e==="inventory"&&p.jsx(V9e,{}),e==="analytics"&&p.jsx(ilt,{})]})]})]})}function olt({onClose:t,onSuccess:e}){const[n,r]=R.useState(!1),[s,i]=R.useState(""),[a,o]=R.useState({title:"",content:"",resources:[]}),l=async h=>{h.preventDefault(),r(!0),i("");try{const{data:{user:f}}=await tt.auth.getUser();if(!f)throw new Error("You must be logged in to create content");const{data:m,error:y}=await tt.from("educational_content").insert([{author_id:f.id,title:a.title,content:a.content,resources:a.resources}]).select();if(y)throw y;e(m[0]),t()}catch(f){console.error("Error creating content:",f),i(f.message)}finally{r(!1)}},c=()=>{o(h=>({...h,resources:[...h.resources,{title:"",url:""}]}))},u=(h,f,m)=>{const y=[...a.resources];y[h]={...y[h],[f]:m},o(v=>({...v,resources:y}))},d=h=>{o(f=>({...f,resources:f.resources.filter((m,y)=>y!==h)}))};return p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[p.jsx("div",{className:"p-6 border-b border-gray-200",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Educational Content"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:p.jsx(il,{className:"h-6 w-6"})})]})}),p.jsxs("form",{onSubmit:l,className:"p-6",children:[s&&p.jsx("div",{className:"mb-4 p-4 text-sm text-red-600 bg-red-50 rounded-md",children:s}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),p.jsx("input",{type:"text",id:"title",value:a.title,onChange:h=>o(f=>({...f,title:h.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Content"}),p.jsx("textarea",{id:"content",rows:8,value:a.content,onChange:h=>o(f=>({...f,content:h.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",required:!0})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Resources"}),p.jsxs("button",{type:"button",onClick:c,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-emerald-700 bg-emerald-100 hover:bg-emerald-200",children:[p.jsx(b_,{className:"h-4 w-4 mr-1"}),"Add Resource"]})]}),p.jsx("div",{className:"space-y-3",children:a.resources.map((h,f)=>p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",placeholder:"Resource title",value:h.title,onChange:m=>u(f,"title",m.target.value),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"}),p.jsx("input",{type:"url",placeholder:"Resource URL",value:h.url,onChange:m=>u(f,"url",m.target.value),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"}),p.jsx("button",{type:"button",onClick:()=>d(f),className:"p-2 text-red-600 hover:text-red-700",children:p.jsx(il,{className:"h-5 w-5"})})]},f))})]})]}),p.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[p.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:n?p.jsxs(p.Fragment,{children:[p.jsx(v2,{className:"animate-spin h-4 w-4 mr-2 inline"}),"Creating..."]}):"Create Content"})]})]})]})})}function llt(){var O;const t=Wc(),[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,a]=R.useState(!1),[o,l]=R.useState([]),[c,u]=R.useState(""),[d,h]=R.useState("all"),[f,m]=R.useState(!1),[y,v]=R.useState([]),[x,b]=R.useState(!1),[_,k]=R.useState(!1),[N,A]=R.useState({totalContent:0,totalViews:0,activeUsers:0,engagement:0,trends:{views:[150,220,280,250,300,320,350],users:[80,120,150,140,160,180,200],engagement:[20,35,45,40,50,55,60]}});R.useEffect(()=>{T(),C();const F=tt.channel("content_interactions").on("postgres_changes",{event:"*",schema:"public",table:"educational_content"},B=>{if(B.eventType==="INSERT"){const Z={id:Date.now(),title:"New Content Published",message:`Your article "${B.new.title}" has been published.`,time:new Date,read:!1};v(V=>[Z,...V]),b(!0)}}).subscribe();return()=>{tt.removeChannel(F)}},[]);const T=async()=>{try{const{data:{user:F}}=await tt.auth.getUser();if(!F){t("/login");return}const{data:B}=await tt.from("profiles").select("*").eq("id",F.id).single();if((B==null?void 0:B.role)!=="educator"){t("/login");return}n(B)}catch(F){console.error("Error checking educator:",F),t("/login")}},C=async()=>{try{const{data:F,error:B}=await tt.from("educational_content").select("*").order("created_at",{ascending:!1});if(B)throw B;l(F||[]),A(Z=>({...Z,totalContent:(F==null?void 0:F.length)||0}))}catch(F){console.error("Error fetching dashboard data:",F)}finally{s(!1)}},P=F=>{l(B=>[F,...B]),A(B=>({...B,totalContent:B.totalContent+1}))},$=async F=>{if(confirm("Are you sure you want to delete this content?"))try{const{error:B}=await tt.from("educational_content").delete().eq("id",F);if(B)throw B;l(V=>V.filter(G=>G.id!==F));const Z={id:Date.now(),title:"Content Deleted",message:"The educational content has been deleted successfully.",type:"success",time:new Date};v(V=>[Z,...V])}catch(B){console.error("Error deleting content:",B)}},j=o.filter(F=>c?F.title.toLowerCase().includes(c.toLowerCase())||F.content.toLowerCase().includes(c.toLowerCase()):!0);return r?p.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx("nav",{className:"bg-white shadow-sm",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(Qn,{to:"/",className:"flex items-center",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"E-Waste Manager"})]})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>m(!f),className:"p-1 rounded-full text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 relative",children:[p.jsx(II,{className:"h-6 w-6"}),x&&p.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),f&&p.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[p.jsx("div",{className:"py-2 px-3 border-b border-gray-200",children:p.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Notifications"})}),p.jsx("div",{className:"max-h-96 overflow-y-auto",children:y.map(F=>p.jsxs("div",{className:`px-4 py-3 hover:bg-gray-50 ${F.read?"":"bg-emerald-50"}`,children:[p.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.title}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.message}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:gi(new Date(F.time),"MMM d, h:mm a")})]},F.id))})]})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>k(!_),className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900",children:[p.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 flex items-center justify-center",children:p.jsx("span",{className:"text-emerald-600 font-medium",children:((O=e==null?void 0:e.full_name)==null?void 0:O.charAt(0))||"E"})}),p.jsx("span",{className:"hidden sm:block",children:e==null?void 0:e.full_name}),p.jsx(jv,{className:"h-4 w-4"})]}),_&&p.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:p.jsxs("div",{className:"py-1",children:[p.jsx(Qn,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Profile"}),p.jsx("button",{onClick:()=>t("/login"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})})]})]})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6",children:[p.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100",children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-emerald-100 rounded-md p-3",children:p.jsx(h5,{className:"h-6 w-6 text-emerald-600"})}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Hs,{className:"h-4 w-4 text-green-500 mr-1"}),p.jsx("span",{className:"text-sm text-green-500",children:"+12%"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Published Content"}),p.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:N.totalContent})]})]})}),p.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100",children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:p.jsx(e7,{className:"h-6 w-6 text-blue-600"})}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Hs,{className:"h-4 w-4 text-green-500 mr-1"}),p.jsx("span",{className:"text-sm text-green-500",children:"+8%"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Views"}),p.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:N.totalViews})]})]})}),p.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100",children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-purple-100 rounded-md p-3",children:p.jsx(Lx,{className:"h-6 w-6 text-purple-600"})}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Hs,{className:"h-4 w-4 text-green-500 mr-1"}),p.jsx("span",{className:"text-sm text-green-500",children:"+15%"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),p.jsx("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:N.activeUsers})]})]})}),p.jsx("div",{className:"bg-white overflow-hidden shadow-lg rounded-lg border border-gray-100",children:p.jsxs("div",{className:"p-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex-shrink-0 bg-amber-100 rounded-md p-3",children:p.jsx(k0e,{className:"h-6 w-6 text-amber-600"})}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Pd,{className:"h-4 w-4 text-red-500 mr-1"}),p.jsx("span",{className:"text-sm text-red-500",children:"-3%"})]})]}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Engagement Rate"}),p.jsxs("p",{className:"mt-1 text-3xl font-semibold text-gray-900",children:[N.engagement,"%"]})]})]})})]}),p.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-gray-200",children:p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Educational Content"}),p.jsxs("button",{onClick:()=>a(!0),className:"mt-3 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[p.jsx(b_,{className:"h-4 w-4 mr-2"}),"Create New Content"]})]})}),p.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:p.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(q0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search content...",value:c,onChange:F=>u(F.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm"})]})})}),p.jsxs("div",{className:"divide-y divide-gray-200",children:[j.map(F=>p.jsx("div",{className:"p-6 hover:bg-gray-50",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:F.title}),p.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(p0,{className:"h-4 w-4 mr-1"}),gi(new Date(F.created_at),"MMM d, yyyy")]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(e7,{className:"h-4 w-4 mr-1"}),Math.floor(Math.random()*1e3)," views"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(tR,{className:"h-4 w-4 mr-1"}),Math.floor(Math.random()*50)," comments"]})]})]}),p.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[p.jsx("button",{onClick:()=>{},className:"p-2 text-gray-400 hover:text-gray-500",children:p.jsx(cZ,{className:"h-5 w-5"})}),p.jsx("button",{onClick:()=>$(F.id),className:"p-2 text-gray-400 hover:text-red-500",children:p.jsx(dZ,{className:"h-5 w-5"})})]})]})},F.id)),j.length===0&&p.jsxs("div",{className:"p-6 text-center",children:[p.jsx(h5,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No content found"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new piece of content."})]})]})]})]}),i&&p.jsx(olt,{onClose:()=>a(!1),onSuccess:P})]})}class clt extends Os.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md text-center",children:[p.jsx(Qp,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),p.jsx("p",{className:"text-gray-600 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred"}),p.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors",children:"Try again"})]})}):this.props.children}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function CS(t){return t+.5|0}const Tp=(t,e,n)=>Math.max(Math.min(t,n),e);function yw(t){return Tp(CS(t*2.55),0,255)}function Xp(t){return Tp(CS(t*255),0,255)}function Oh(t){return Tp(CS(t/2.55)/100,0,1)}function Dq(t){return Tp(CS(t*100),0,100)}const fc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ED=[..."0123456789ABCDEF"],ult=t=>ED[t&15],dlt=t=>ED[(t&240)>>4]+ED[t&15],GN=t=>(t&240)>>4===(t&15),hlt=t=>GN(t.r)&&GN(t.g)&&GN(t.b)&&GN(t.a);function flt(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&fc[t[1]]*17,g:255&fc[t[2]]*17,b:255&fc[t[3]]*17,a:e===5?fc[t[4]]*17:255}:(e===7||e===9)&&(n={r:fc[t[1]]<<4|fc[t[2]],g:fc[t[3]]<<4|fc[t[4]],b:fc[t[5]]<<4|fc[t[6]],a:e===9?fc[t[7]]<<4|fc[t[8]]:255})),n}const plt=(t,e)=>t<255?e(t):"";function mlt(t){var e=hlt(t)?ult:dlt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+plt(t.a,e):void 0}const glt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sde(t,e,n){const r=e*Math.min(n,1-n),s=(i,a=(i+t/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function ylt(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function vlt(t,e,n){const r=Sde(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function xlt(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Kz(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),a=Math.min(n,r,s),o=(i+a)/2;let l,c,u;return i!==a&&(u=i-a,c=o>.5?u/(2-i-a):u/(i+a),l=xlt(n,r,s,u,i),l=l*60+.5),[l|0,c||0,o]}function Xz(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Xp)}function Yz(t,e,n){return Xz(Sde,t,e,n)}function blt(t,e,n){return Xz(vlt,t,e,n)}function wlt(t,e,n){return Xz(ylt,t,e,n)}function Nde(t){return(t%360+360)%360}function _lt(t){const e=glt.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?yw(+e[5]):Xp(+e[5]));const s=Nde(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=blt(s,i,a):e[1]==="hsv"?r=wlt(s,i,a):r=Yz(s,i,a),{r:r[0],g:r[1],b:r[2],a:n}}function klt(t,e){var n=Kz(t);n[0]=Nde(n[0]+e),n=Yz(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Slt(t){if(!t)return;const e=Kz(t),n=e[0],r=Dq(e[1]),s=Dq(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Oh(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Lq={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rq={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Nlt(){const t={},e=Object.keys(Rq),n=Object.keys(Lq);let r,s,i,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,Lq[i]);i=parseInt(Rq[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let KN;function Clt(t){KN||(KN=Nlt(),KN.transparent=[0,0,0,0]);const e=KN[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Tlt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ilt(t){const e=Tlt.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const a=+e[7];n=e[8]?yw(a):Tp(a*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?yw(r):Tp(r,0,255)),s=255&(e[4]?yw(s):Tp(s,0,255)),i=255&(e[6]?yw(i):Tp(i,0,255)),{r,g:s,b:i,a:n}}}function Alt(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Oh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const V3=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Yy=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Elt(t,e,n){const r=Yy(Oh(t.r)),s=Yy(Oh(t.g)),i=Yy(Oh(t.b));return{r:Xp(V3(r+n*(Yy(Oh(e.r))-r))),g:Xp(V3(s+n*(Yy(Oh(e.g))-s))),b:Xp(V3(i+n*(Yy(Oh(e.b))-i))),a:t.a+n*(e.a-t.a)}}function XN(t,e,n){if(t){let r=Kz(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Yz(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Cde(t,e){return t&&Object.assign(e||{},t)}function Mq(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Xp(t[3]))):(e=Cde(t,{r:0,g:0,b:0,a:1}),e.a=Xp(e.a)),e}function Plt(t){return t.charAt(0)==="r"?Ilt(t):_lt(t)}class s_{constructor(e){if(e instanceof s_)return e;const n=typeof e;let r;n==="object"?r=Mq(e):n==="string"&&(r=flt(e)||Clt(e)||Plt(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Cde(this._rgb);return e&&(e.a=Oh(e.a)),e}set rgb(e){this._rgb=Mq(e)}rgbString(){return this._valid?Alt(this._rgb):void 0}hexString(){return this._valid?mlt(this._rgb):void 0}hslString(){return this._valid?Slt(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const a=n===i?.5:n,o=2*a-1,l=r.a-s.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=a*r.a+(1-a)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Elt(this._rgb,e._rgb,n)),this}clone(){return new s_(this.rgb)}alpha(e){return this._rgb.a=Xp(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=CS(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return XN(this._rgb,2,e),this}darken(e){return XN(this._rgb,2,-e),this}saturate(e){return XN(this._rgb,1,e),this}desaturate(e){return XN(this._rgb,1,-e),this}rotate(e){return klt(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function wh(){}const Olt=(()=>{let t=0;return()=>t++})();function En(t){return t==null}function Qr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Fn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ks(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _l(t,e){return ks(t)?t:e}function mn(t,e){return typeof t>"u"?e:t}const jlt=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Tde=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ur(t,e,n,r){let s,i,a;if(Qr(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Fn(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(n,t[a[s]],a[s])}function QT(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function eI(t){if(Qr(t))return t.map(eI);if(Fn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=eI(t[n[s]]);return e}return t}function Ide(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $lt(t,e,n,r){if(!Ide(t))return;const s=e[t],i=n[t];Fn(s)&&Fn(i)?i_(s,i,r):e[t]=eI(i)}function i_(t,e,n){const r=Qr(e)?e:[e],s=r.length;if(!Fn(t))return t;n=n||{};const i=n.merger||$lt;let a;for(let o=0;o<s;++o){if(a=r[o],!Fn(a))continue;const l=Object.keys(a);for(let c=0,u=l.length;c<u;++c)i(l[c],t,a,n)}return t}function zw(t,e){return i_(t,e,{merger:Dlt})}function Dlt(t,e,n){if(!Ide(t))return;const r=e[t],s=n[t];Fn(r)&&Fn(s)?zw(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=eI(s))}const Fq={"":t=>t,x:t=>t.x,y:t=>t.y};function Llt(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Rlt(t){const e=Llt(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function fm(t,e){return(Fq[e]||(Fq[e]=Rlt(e)))(t)}function Zz(t){return t.charAt(0).toUpperCase()+t.slice(1)}const a_=t=>typeof t<"u",pm=t=>typeof t=="function",zq=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Mlt(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Yn=Math.PI,Vr=2*Yn,Flt=Vr+Yn,tI=Number.POSITIVE_INFINITY,zlt=Yn/180,Ms=Yn/2,ug=Yn/4,Bq=Yn*2/3,Ip=Math.log10,Fd=Math.sign;function Bw(t,e,n){return Math.abs(t-e)<n}function Wq(t){const e=Math.round(t);t=Bw(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ip(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Blt(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function Wlt(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Tx(t){return!Wlt(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Ult(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Ade(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Tu(t){return t*(Yn/180)}function Jz(t){return t*(180/Yn)}function Uq(t){if(!ks(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Ede(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Yn&&(i+=Vr),{angle:i,distance:s}}function PD(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vlt(t,e){return(t-e+Flt)%Vr-Yn}function ja(t){return(t%Vr+Vr)%Vr}function o_(t,e,n,r){const s=ja(t),i=ja(e),a=ja(n),o=ja(i-s),l=ja(a-s),c=ja(s-i),u=ja(s-a);return s===i||s===a||r&&i===a||o>l&&c<u}function Fi(t,e,n){return Math.max(e,Math.min(n,t))}function Hlt(t){return Fi(t,-32768,32767)}function Fh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Qz(t,e,n){n=n||(a=>t[a]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const zh=(t,e,n,r)=>Qz(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),qlt=(t,e,n)=>Qz(t,n,r=>t[r][e]>=n);function Glt(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Pde=["push","pop","shift","splice","unshift"];function Klt(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Pde.forEach(n=>{const r="_onData"+Zz(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...i)}),a}})})}function Vq(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Pde.forEach(i=>{delete t[i]}),delete t._chartjs)}function Ode(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const jde=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $de(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,jde.call(window,()=>{r=!1,t.apply(e,n)}))}}function Xlt(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const e8=t=>t==="start"?"left":t==="end"?"right":"center",Ea=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Ylt=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function Dde(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:a,vScale:o,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:m}=a.getUserBounds();if(f){if(s=Math.min(zh(l,u,d).lo,n?r:zh(e,u,a.getPixelForValue(d)).lo),c){const y=l.slice(0,s+1).reverse().findIndex(v=>!En(v[o.axis]));s-=Math.max(0,y)}s=Fi(s,0,r-1)}if(m){let y=Math.max(zh(l,a.axis,h,!0).hi+1,n?0:zh(e,u,a.getPixelForValue(h),!0).hi+1);if(c){const v=l.slice(y-1).findIndex(x=>!En(x[o.axis]));y+=Math.max(0,v)}i=Fi(y,s,r)-s}else i=r-s}return{start:s,count:i}}function Lde(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const YN=t=>t===0||t===1,Hq=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Vr/n)),qq=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Vr/n)+1,Ww={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ms)+1,easeOutSine:t=>Math.sin(t*Ms),easeInOutSine:t=>-.5*(Math.cos(Yn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>YN(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>YN(t)?t:Hq(t,.075,.3),easeOutElastic:t=>YN(t)?t:qq(t,.075,.3),easeInOutElastic(t){return YN(t)?t:t<.5?.5*Hq(t*2,.1125,.45):.5+.5*qq(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ww.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ww.easeInBounce(t*2)*.5:Ww.easeOutBounce(t*2-1)*.5+.5};function t8(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Gq(t){return t8(t)?t:new s_(t)}function H3(t){return t8(t)?t:new s_(t).saturate(.5).darken(.1).hexString()}const Zlt=["x","y","borderWidth","radius","tension"],Jlt=["color","borderColor","backgroundColor"];function Qlt(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Jlt},numbers:{type:"number",properties:Zlt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ect(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Kq=new Map;function tct(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Kq.get(n);return r||(r=new Intl.NumberFormat(t,e),Kq.set(n,r)),r}function TS(t,e,n){return tct(e,n).format(t)}const Rde={values(t){return Qr(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=nct(t,n)}const a=Ip(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),TS(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Ip(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?Rde.numeric.call(this,t,e,n):""}};function nct(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var UP={formatters:Rde};function rct(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:UP.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const B0=Object.create(null),OD=Object.create(null);function Uw(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function q3(t,e,n){return typeof e=="string"?i_(Uw(t,e),n):i_(Uw(t,""),e)}class sct{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>H3(s.backgroundColor),this.hoverBorderColor=(r,s)=>H3(s.borderColor),this.hoverColor=(r,s)=>H3(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return q3(this,e,n)}get(e){return Uw(this,e)}describe(e,n){return q3(OD,e,n)}override(e,n){return q3(B0,e,n)}route(e,n,r,s){const i=Uw(this,e),a=Uw(this,r),o="_"+n;Object.defineProperties(i,{[o]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],c=a[s];return Fn(l)?Object.assign({},c,l):mn(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(n=>n(this))}}var ns=new sct({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Qlt,ect,rct]);function ict(t){return!t||En(t.size)||En(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function nI(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function act(t,e,n,r){r=r||{};let s=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},i=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],d!=null&&!Qr(d))a=nI(t,s,i,a,d);else if(Qr(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Qr(h)&&(a=nI(t,s,i,a,h));t.restore();const f=i.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[i[l]];i.splice(0,f)}return a}function dg(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Xq(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function jD(t,e,n,r){Mde(t,e,n,r,null)}function Mde(t,e,n,r,s){let i,a,o,l,c,u,d,h;const f=e.pointStyle,m=e.rotation,y=e.radius;let v=(m||0)*zlt;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,y,0,0,Vr):t.arc(n,r,y,0,Vr),t.closePath();break;case"triangle":u=s?s/2:y,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*y),v+=Bq,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*y),v+=Bq,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,a=Math.cos(v+ug)*l,d=Math.cos(v+ug)*(s?s/2-c:l),o=Math.sin(v+ug)*l,h=Math.sin(v+ug)*(s?s/2-c:l),t.arc(n-d,r-o,c,v-Yn,v-Ms),t.arc(n+h,r-a,c,v-Ms,v),t.arc(n+d,r+o,c,v,v+Ms),t.arc(n-h,r+a,c,v+Ms,v+Yn),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*y,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=ug;case"rectRot":d=Math.cos(v)*(s?s/2:y),a=Math.cos(v)*y,o=Math.sin(v)*y,h=Math.sin(v)*(s?s/2:y),t.moveTo(n-d,r-o),t.lineTo(n+h,r-a),t.lineTo(n+d,r+o),t.lineTo(n-h,r+a),t.closePath();break;case"crossRot":v+=ug;case"cross":d=Math.cos(v)*(s?s/2:y),a=Math.cos(v)*y,o=Math.sin(v)*y,h=Math.sin(v)*(s?s/2:y),t.moveTo(n-d,r-o),t.lineTo(n+d,r+o),t.moveTo(n+h,r-a),t.lineTo(n-h,r+a);break;case"star":d=Math.cos(v)*(s?s/2:y),a=Math.cos(v)*y,o=Math.sin(v)*y,h=Math.sin(v)*(s?s/2:y),t.moveTo(n-d,r-o),t.lineTo(n+d,r+o),t.moveTo(n+h,r-a),t.lineTo(n-h,r+a),v+=ug,d=Math.cos(v)*(s?s/2:y),a=Math.cos(v)*y,o=Math.sin(v)*y,h=Math.sin(v)*(s?s/2:y),t.moveTo(n-d,r-o),t.lineTo(n+d,r+o),t.moveTo(n+h,r-a),t.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(v)*y,o=Math.sin(v)*y,t.moveTo(n-a,r-o),t.lineTo(n+a,r+o);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(s?s/2:y),r+Math.sin(v)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Bh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function VP(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function HP(t){t.restore()}function oct(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function lct(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function cct(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),En(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function uct(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function dct(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function W0(t,e,n,r,s,i={}){const a=Qr(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,cct(t,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&dct(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),En(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),uct(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function l_(t,e){const{x:n,y:r,w:s,h:i,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Yn,Yn,!0),t.lineTo(n,r+i-a.bottomLeft),t.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Yn,Ms,!0),t.lineTo(n+s-a.bottomRight,r+i),t.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,Ms,0,!0),t.lineTo(n+s,r+a.topRight),t.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-Ms,!0),t.lineTo(n+a.topLeft,r)}const hct=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fct=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function pct(t,e){const n=(""+t).match(hct);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const mct=t=>+t||0;function n8(t,e){const n={},r=Fn(e),s=r?Object.keys(e):e,i=Fn(t)?r?a=>mn(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)n[a]=mct(i(a));return n}function Fde(t){return n8(t,{top:"y",right:"x",bottom:"y",left:"x"})}function r0(t){return n8(t,["topLeft","topRight","bottomLeft","bottomRight"])}function qa(t){const e=Fde(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function bi(t,e){t=t||{},e=e||ns.font;let n=mn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=mn(t.style,e.style);r&&!(""+r).match(fct)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:mn(t.family,e.family),lineHeight:pct(mn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:mn(t.weight,e.weight),string:""};return s.string=ict(s),s}function vw(t,e,n,r){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function gct(t,e,n){const{min:r,max:s}=t,i=Tde(e,(s-r)/2),a=(o,l)=>n&&o===0?0:o+l;return{min:a(r,-Math.abs(i)),max:a(s,i)}}function Dm(t,e){return Object.assign(Object.create(t),e)}function r8(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Ude("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:o=>r8([o,...t],e,i,r)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Bde(o,l,()=>Sct(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return Zq(o).includes(l)},ownKeys(o){return Zq(o)},set(o,l,c){const u=o._storage||(o._storage=s());return o[l]=u[l]=c,delete o._keys,!0}})}function Ix(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:zde(t,r),setContext:i=>Ix(t,i,n,r),override:i=>Ix(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return Bde(i,a,()=>vct(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function zde(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:pm(n)?n:()=>n,isIndexable:pm(r)?r:()=>r}}const yct=(t,e)=>t?t+Zz(e):e,s8=(t,e)=>Fn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Bde(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function vct(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=t;let o=r[e];return pm(o)&&a.isScriptable(e)&&(o=xct(e,o,t,n)),Qr(o)&&o.length&&(o=bct(e,o,t,a.isIndexable)),s8(e,o)&&(o=Ix(o,s,i&&i[e],a)),o}function xct(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,a||r);return o.delete(t),s8(t,l)&&(l=i8(s._scopes,s,t,l)),l}function bct(t,e,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Fn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=i8(c,s,t,u);e.push(Ix(d,i,a&&a[t],o))}}return e}function Wde(t,e,n){return pm(t)?t(e,n):t}const wct=(t,e)=>t===!0?e:typeof t=="string"?fm(e,t):void 0;function _ct(t,e,n,r,s){for(const i of e){const a=wct(n,i);if(a){t.add(a);const o=Wde(a._fallback,n,s);if(typeof o<"u"&&o!==n&&o!==r)return o}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function i8(t,e,n,r){const s=e._rootScopes,i=Wde(e._fallback,n,r),a=[...t,...s],o=new Set;o.add(r);let l=Yq(o,a,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Yq(o,a,i,l,r),l===null)?!1:r8(Array.from(o),[""],s,i,()=>kct(e,n,r))}function Yq(t,e,n,r,s){for(;n;)n=_ct(t,e,n,r,s);return n}function kct(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Qr(s)&&Fn(n)?n:s||{}}function Sct(t,e,n,r){let s;for(const i of e)if(s=Ude(yct(i,t),n),typeof s<"u")return s8(t,s)?i8(n,r,t,s):s}function Ude(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Zq(t){let e=t._keys;return e||(e=t._keys=Nct(t._scopes)),e}function Nct(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function Vde(t,e,n,r){const{iScale:s}=t,{key:i="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=e[c],a[o]={r:s.parse(fm(u,i),c)};return a}const Cct=Number.EPSILON||1e-14,Ax=(t,e)=>e<t.length&&!t[e].skip&&t[e],Hde=t=>t==="x"?"y":"x";function Tct(t,e,n,r){const s=t.skip?e:t,i=e,a=n.skip?e:n,o=PD(i,s),l=PD(a,i);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:i.x-d*(a.x-s.x),y:i.y-d*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function Ict(t,e,n){const r=t.length;let s,i,a,o,l,c=Ax(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ax(t,u+1),!(!l||!c)){if(Bw(e[u],0,Cct)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],o=Math.pow(s,2)+Math.pow(i,2),!(o<=9)&&(a=3/Math.sqrt(o),n[u]=s*a*e[u],n[u+1]=i*a*e[u])}}function Act(t,e,n="x"){const r=Hde(n),s=t.length;let i,a,o,l=Ax(t,0);for(let c=0;c<s;++c){if(a=o,o=l,l=Ax(t,c+1),!o)continue;const u=o[n],d=o[r];a&&(i=(u-a[n])/3,o[`cp1${n}`]=u-i,o[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,o[`cp2${n}`]=u+i,o[`cp2${r}`]=d+i*e[c])}}function Ect(t,e="x"){const n=Hde(e),r=t.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=Ax(t,0);for(a=0;a<r;++a)if(o=l,l=c,c=Ax(t,a+1),!!l){if(c){const u=c[e]-l[e];s[a]=u!==0?(c[n]-l[n])/u:0}i[a]=o?c?Fd(s[a-1])!==Fd(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}Ict(t,s,i),Act(t,i,e)}function ZN(t,e,n){return Math.max(Math.min(t,n),e)}function Pct(t,e){let n,r,s,i,a,o=Bh(t[0],e);for(n=0,r=t.length;n<r;++n)a=i,i=o,o=n<r-1&&Bh(t[n+1],e),i&&(s=t[n],a&&(s.cp1x=ZN(s.cp1x,e.left,e.right),s.cp1y=ZN(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=ZN(s.cp2x,e.left,e.right),s.cp2y=ZN(s.cp2y,e.top,e.bottom)))}function Oct(t,e,n,r,s){let i,a,o,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Ect(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)o=t[i],l=Tct(c,o,t[Math.min(i+1,a-(r?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&Pct(t,n)}function a8(){return typeof window<"u"&&typeof document<"u"}function o8(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function rI(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const qP=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function jct(t,e){return qP(t).getPropertyValue(e)}const $ct=["top","right","bottom","left"];function s0(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=$ct[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Dct=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Lct(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let a=!1,o,l;if(Dct(s,i,t.target))o=s,l=i;else{const c=e.getBoundingClientRect();o=r.clientX-c.left,l=r.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function kg(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=qP(n),i=s.boxSizing==="border-box",a=s0(s,"padding"),o=s0(s,"border","width"),{x:l,y:c,box:u}=Lct(t,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:m}=e;return i&&(f-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/m*n.height/r)}}function Rct(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&o8(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const a=i.getBoundingClientRect(),o=qP(i),l=s0(o,"border","width"),c=s0(o,"padding");e=a.width-c.width-l.width,n=a.height-c.height-l.height,r=rI(o.maxWidth,i,"clientWidth"),s=rI(o.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||tI,maxHeight:s||tI}}const Ap=t=>Math.round(t*10)/10;function Mct(t,e,n,r){const s=qP(t),i=s0(s,"margin"),a=rI(s.maxWidth,t,"clientWidth")||tI,o=rI(s.maxHeight,t,"clientHeight")||tI,l=Rct(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=s0(s,"border","width"),f=s0(s,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Ap(Math.min(c,a,l.maxWidth)),u=Ap(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Ap(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ap(Math.floor(u*r))),{width:c,height:u}}function Jq(t,e,n){const r=e||1,s=Ap(t.height*r),i=Ap(t.width*r);t.height=Ap(t.height),t.width=Ap(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=r,a.height=s,a.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Fct=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};a8()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Qq(t,e){const n=jct(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Sg(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function zct(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Bct(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Sg(t,s,n),o=Sg(s,i,n),l=Sg(i,e,n),c=Sg(a,o,n),u=Sg(o,l,n);return Sg(c,u,n)}const Wct=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Uct=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vv(t,e,n){return t?Wct(e,n):Uct()}function qde(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Gde(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Kde(t){return t==="angle"?{between:o_,compare:Vlt,normalize:ja}:{between:Fh,compare:(e,n)=>e-n,normalize:e=>e}}function eG({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function Vct(t,e,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=Kde(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&a(o(e[c%l][r]),s,i);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function Xde(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,a=e.length,{compare:o,between:l,normalize:c}=Kde(r),{start:u,end:d,loop:h,style:f}=Vct(t,e,n),m=[];let y=!1,v=null,x,b,_;const k=()=>l(s,_,x)&&o(s,_)!==0,N=()=>o(i,x)===0||l(i,_,x),A=()=>y||k(),T=()=>!y||N();for(let C=u,P=u;C<=d;++C)b=e[C%a],!b.skip&&(x=c(b[r]),x!==_&&(y=l(x,s,i),v===null&&A()&&(v=o(x,s)===0?C:P),v!==null&&T()&&(m.push(eG({start:v,end:C,loop:h,count:a,style:f})),v=null),P=C,_=x));return v!==null&&m.push(eG({start:v,end:d,loop:h,count:a,style:f})),m}function Yde(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=Xde(r[s],t.points,e);i.length&&n.push(...i)}return n}function Hct(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function qct(t,e,n,r){const s=t.length,i=[];let a=e,o=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?o.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=a=c.stop?l:null):(a=l,o.skip&&(e=l)),o=c}return a!==null&&i.push({start:e%s,end:a%s,loop:r}),i}function Gct(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:a,end:o}=Hct(n,s,i,r);if(r===!0)return tG(t,[{start:a,end:o,loop:i}],n,e);const l=o<a?o+s:o,c=!!t._fullLoop&&a===0&&o===s-1;return tG(t,qct(n,a,l,c),n,e)}function tG(t,e,n,r){return!r||!r.setContext||!n?e:Kct(t,e,n,r)}function Kct(t,e,n,r){const s=t._chart.getContext(),i=nG(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=n.length,c=[];let u=i,d=e[0].start,h=d;function f(m,y,v,x){const b=o?-1:1;if(m!==y){for(m+=l;n[m%l].skip;)m-=b;for(;n[y%l].skip;)y+=b;m%l!==y%l&&(c.push({start:m%l,end:y%l,loop:v,style:x}),u=x,d=y%l)}}for(const m of e){d=o?d:m.start;let y=n[d%l],v;for(h=d+1;h<=m.end;h++){const x=n[h%l];v=nG(r.setContext(Dm(s,{type:"segment",p0:y,p1:x,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),Xct(v,u)&&f(d,h-1,m.loop,u),y=x,u=v}d<h-1&&f(d,h-1,m.loop,u)}return c}function nG(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Xct(t,e){if(!e)return!1;const n=[],r=function(s,i){return t8(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function JN(t,e,n){return t.options.clip?t[n]:e[n]}function Yct(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:JN(n,e,"left"),right:JN(n,e,"right"),top:JN(r,e,"top"),bottom:JN(r,e,"bottom")}:e}function Zde(t,e){const n=e._clip;if(n.disabled)return!1;const r=Yct(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Zct{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],a=n.duration;i.forEach(o=>o({chart:e,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=jde.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let a=i.length-1,o=!1,l;for(;a>=0;--a)l=i[a],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var kh=new Zct;const rG="transparent",Jct={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Gq(t||rG),s=r.valid&&Gq(e||rG);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Qct{constructor(e,n,r,s){const i=n[r];s=vw([e.to,s,i,e.from]);const a=vw([e.from,i,s]);this._active=!0,this._fn=e.fn||Jct[e.type||typeof a],this._easing=Ww[e.easing]||Ww.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,a=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=vw([e.to,n,s,e.from]),this._from=vw([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let l;if(this._active=i!==o&&(a||n<r),!this._active){this._target[s]=o,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Jde{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Fn(e))return;const n=Object.keys(ns.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Fn(i))return;const a={};for(const o of n)a[o]=i[o];(Qr(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,n){const r=n.options,s=tut(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&eut(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(n),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,o);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}i[c]=d=new Qct(h,e,c,u),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return kh.add(this._chart,r),!0}}function eut(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function tut(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sG(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function nut(t,e,n){if(n===!1)return!1;const r=sG(t,n),s=sG(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function rut(t){let e,n,r,s;return Fn(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Qde(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function iG(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let a,o,l,c;if(e===null)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(u=!0,r.all)continue;break}c=t.values[l],ks(c)&&(i||e===0||Fd(e)===Fd(c))&&(e+=c)}return!u&&!r.all?0:e}function sut(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[s]:u,[i]:t[u]};return o}function G3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function iut(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function aut(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function out(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function aG(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function oG(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,u=iut(i,a,r),d=e.length;let h;for(let f=0;f<d;++f){const m=e[f],{[l]:y,[c]:v}=m,x=m._stacks||(m._stacks={});h=x[c]=out(s,u,y),h[o]=v,h._top=aG(h,a,!0,r.type),h._bottom=aG(h,a,!1,r.type);const b=h._visualValues||(h._visualValues={});b[o]=v}}function K3(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function lut(t,e){return Dm(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cut(t,e,n){return Dm(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function X1(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const X3=t=>t==="reset"||t==="none",lG=(t,e)=>e?t:Object.assign({},t),uut=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Qde(n,!0),values:null};class ju{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=G3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&X1(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,h,f,m)=>d==="x"?h:d==="r"?m:f,i=n.xAxisID=mn(r.xAxisID,K3(e,"x")),a=n.yAxisID=mn(r.yAxisID,K3(e,"y")),o=n.rAxisID=mn(r.rAxisID,K3(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,a,o),u=n.vAxisID=s(l,a,i,o);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vq(this._data,this),e._stacked&&X1(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Fn(n)){const s=this._cachedMeta;this._data=sut(n,s)}else if(r!==n){if(r){Vq(r,this);const s=this._cachedMeta;X1(s),s._parsed=[]}n&&Object.isExtensible(n)&&Klt(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=G3(n.vScale,n),n.stack!==r.stack&&(s=!0,X1(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(oG(this,n._parsed),n._stacked=G3(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:a}=r,o=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=s,r._sorted=!0,h=s;else{Qr(s[e])?h=this.parseArrayData(r,s,e,n):Fn(s[e])?h=this.parseObjectData(r,s,e,n):h=this.parsePrimitiveData(r,s,e,n);const f=()=>d[o]===null||c&&d[o]<c[o];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}a&&oG(this,h)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:a}=e,o=i.axis,l=a.axis,c=i.getLabels(),u=i===a,d=new Array(s);let h,f,m;for(h=0,f=s;h<f;++h)m=h+r,d[h]={[o]:u||i.parse(c[m],m),[l]:a.parse(n[m],m)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:a}=e,o=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+r,d=n[u],o[l]={x:i.parse(d[0],u),y:a.parse(d[1],u)};return o}parseObjectData(e,n,r,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,h,f;for(u=0,d=s;u<d;++u)h=u+r,f=n[h],c[u]={x:i.parse(fm(f,o),h),y:a.parse(fm(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,a=n[e.axis],o={keys:Qde(s,!0),values:n._stacks[e.axis]._visualValues};return iG(o,a,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let a=i===null?NaN:i;const o=s&&r._stacks[n.axis];s&&o&&(s.values=o,a=iG(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,a=s.length,o=this._getOtherScale(e),l=uut(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=aut(o);let h,f;function m(){f=s[h];const y=f[o.axis];return!ks(f[e.axis])||u>y||d<y}for(h=0;h<a&&!(!m()&&(this.updateRangeFromParsed(c,e,f,l),i));++h);if(i){for(h=a-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,a;for(s=0,i=n.length;s<i;++s)a=n[s][e.axis],ks(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=rut(mn(this.options.clip,nut(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||s.length-o,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,o,l),u=o;u<o+l;++u){const d=s[u];d.hidden||(d.active&&c?a.push(d):d.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=cut(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=lut(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,a=e+"-"+n,o=i[a],l=this.enableOptionSharing&&a_(r);if(o)return lG(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(ns.elements[e]),m=()=>this.getContext(r,s,n),y=c.resolveNamedOptions(h,f,m,d);return y.$shared&&(y.$shared=l,i[a]=Object.freeze(lG(y,l))),y}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,o=i[a];if(o)return o;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new Jde(s,l&&l.animations);return l&&l._cacheable&&(i[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||X3(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),a=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:a}}updateElement(e,n,r,s){X3(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!X3(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const s=r.length,i=n.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,a=e+n;let o;const l=c=>{for(c.length+=n,o=c.length-1;o>=a;o--)c[o]=c[o-n]};for(l(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&X1(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}vt(ju,"defaults",{}),vt(ju,"datasetElementType",null),vt(ju,"dataElementType",null);function dut(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=Ode(r.sort((s,i)=>s-i))}return t._cache.$bar}function hut(t){const e=t.iScale,n=dut(e,t.type);let r=e._length,s,i,a,o;const l=()=>{a===32767||a===-32768||(a_(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(s=0,i=n.length;s<i;++s)a=e.getPixelForValue(n[s]),l();for(o=void 0,s=0,i=e.ticks.length;s<i;++s)a=e.getPixelForTick(s),l();return r}function fut(t,e,n,r){const s=n.barThickness;let i,a;return En(s)?(i=e.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:e.pixels[t]-i/2}}function put(t,e,n,r){const s=e.pixels,i=s[t];let a=t>0?s[t-1]:null,o=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;a===null&&(a=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}function mut(t,e,n,r){const s=n.parse(t[0],r),i=n.parse(t[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}function ehe(t,e,n,r){return Qr(t)?mut(t,e,n,r):e[n.axis]=n.parse(t,r),e}function cG(t,e,n,r){const s=t.iScale,i=t.vScale,a=s.getLabels(),o=s===i,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[s.axis]=o||s.parse(a[c],c),l.push(ehe(h,d,i,c));return l}function Y3(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function gut(t,e,n){return t!==0?Fd(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function yut(t){let e,n,r,s,i;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:e,top:s,bottom:i}}function vut(t,e,n,r){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:u}=yut(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(i[uG(u,a,o,l)]=!0,s=c)),i[uG(s,a,o,l)]=!0,t.borderSkipped=i}function uG(t,e,n,r){return r?(t=xut(t,e,n),t=dG(t,n,e)):t=dG(t,e,n),t}function xut(t,e,n){return t===e?n:t===n?e:t}function dG(t,e,n){return t==="start"?e:t==="end"?n:t}function but(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Vw extends ju{parsePrimitiveData(e,n,r,s){return cG(e,n,r,s)}parseArrayData(e,n,r,s){return cG(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:i,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?o:l,u=a.axis==="x"?o:l,d=[];let h,f,m,y;for(h=r,f=r+s;h<f;++h)y=n[h],m={},m[i.axis]=i.parse(fm(y,c),h),d.push(ehe(fm(y,u),m,a,h));return d}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(e),a=i._custom,o=Y3(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const i=s==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,s);for(let f=n;f<n+r;f++){const m=this.getParsed(f),y=i||En(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),x=(m._stacks||{})[o.axis],b={horizontal:c,base:y.base,enableBorderRadius:!x||Y3(m._custom)||a===x._top||a===x._bottom,x:c?y.head:v.center,y:c?v.center:y.head,height:c?v.size:Math.abs(y.size),width:c?Math.abs(y.size):v.size};h&&(b.options=d||this.resolveDataElementOptions(f,e[f].active?"active":s));const _=b.options||e[f].options;vut(b,_,x,a),but(b,_,u.ratio),this.updateElement(e[f],f,b,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(n),l=o&&o[r.axis],c=u=>{const d=u._parsed.find(f=>f[r.axis]===l),h=d&&d[u.vScale.axis];if(En(h)||isNaN(h))return!0};for(const u of s)if(!(n!==void 0&&c(u))&&((i===!1||a.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[mn(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const s=this._getStacks(e,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,a;for(i=0,a=n.data.length;i<a;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const o=e.barThickness;return{min:o||hut(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:a}}=this,o=i||0,l=this.getParsed(e),c=l._custom,u=Y3(c);let d=l[n.axis],h=0,f=r?this.applyStack(n,l,r):d,m,y;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&Fd(d)!==Fd(c.barEnd)&&(h=0),h+=d);const v=!En(i)&&!u?i:h;let x=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?m=n.getPixelForValue(h+f):m=x,y=m-x,Math.abs(y)<a){y=gut(y,n,o)*a,d===o&&(x-=y/2);const b=n.getPixelForDecimal(0),_=n.getPixelForDecimal(1),k=Math.min(b,_),N=Math.max(b,_);x=Math.max(Math.min(x,N),k),m=x+y,r&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(m)-n.getValueForPixel(x))}if(x===n.getPixelForValue(o)){const b=Fd(y)*n.getLineWidthForValue(o)/2;x+=b,y-=b}return{size:y,base:x,head:m,center:m+y/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,i=s.skipNull,a=mn(s.maxBarThickness,1/0);let o,l;const c=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(e):n.stackCount,d=s.barThickness==="flex"?put(e,n,s,u*c):fut(e,n,s,u*c),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(mn(h,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+f;o=d.start+d.chunk*m+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(a,n.min*n.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}vt(Vw,"id","bar"),vt(Vw,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),vt(Vw,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class jC extends ju{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const i=super.parsePrimitiveData(e,n,r,s);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+r).radius;return i}parseArrayData(e,n,r,s){const i=super.parseArrayData(e,n,r,s);for(let a=0;a<i.length;a++){const o=n[r+a];i[a]._custom=mn(o[2],this.resolveDataElementOptions(a+r).radius)}return i}parseObjectData(e,n,r,s){const i=super.parseObjectData(e,n,r,s);for(let a=0;a<i.length;a++){const o=n[r+a];i[a]._custom=mn(o&&o.r&&+o.r,this.resolveDataElementOptions(a+r).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:i}=n,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=i.getLabelForValue(a.y),c=a._custom;return{label:r[e]||"",value:"("+o+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=a.axis,d=o.axis;for(let h=n;h<n+r;h++){const f=e[h],m=!i&&this.getParsed(h),y={},v=y[u]=i?a.getPixelForDecimal(.5):a.getPixelForValue(m[u]),x=y[d]=i?o.getBasePixel():o.getPixelForValue(m[d]);y.skip=isNaN(v)||isNaN(x),c&&(y.options=l||this.resolveDataElementOptions(h,f.active?"active":s),i&&(y.options.radius=0)),this.updateElement(f,h,y,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const i=s.radius;return n!=="active"&&(s.radius=0),s.radius+=mn(r&&r._custom,i),s}}vt(jC,"id","bubble"),vt(jC,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),vt(jC,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function wut(t,e,n){let r=1,s=1,i=0,a=0;if(e<Vr){const o=t,l=o+e,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(_,k,N)=>o_(_,o,l,!0)?1:Math.max(k,k*n,N,N*n),m=(_,k,N)=>o_(_,o,l,!0)?-1:Math.min(k,k*n,N,N*n),y=f(0,c,d),v=f(Ms,u,h),x=m(Yn,c,d),b=m(Yn+Ms,u,h);r=(y-x)/2,s=(v-b)/2,i=-(y+x)/2,a=-(v+b)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}class Hg extends ju{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Fn(r[e])){const{key:l="value"}=this._parsing;i=c=>+fm(r[c],l)}let a,o;for(a=e,o=e+n;a<o;++a)s._parsed[a]=i(a)}}_getRotation(){return Tu(this.options.rotation-90)}_getCircumference(){return Tu(this.options.circumference)}_getRotationExtents(){let e=Vr,n=-Vr;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+a)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(jlt(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:m,offsetY:y}=wut(d,u,l),v=(r.width-a)/h,x=(r.height-a)/f,b=Math.max(Math.min(v,x)/2,0),_=Tde(this.options.radius,b),k=Math.max(_*l,0),N=(_-k)/this._getVisibleDatasetWeightTotal();this.offsetX=m*_,this.offsetY=y*_,s.total=this.calculateTotal(),this.outerRadius=_-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/Vr)}updateElements(e,n,r,s){const i=s==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,u=(o.left+o.right)/2,d=(o.top+o.bottom)/2,h=i&&c.animateScale,f=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(n,s);let x=this._getRotation(),b;for(b=0;b<n;++b)x+=this._circumference(b,i);for(b=n;b<n+r;++b){const _=this._circumference(b,i),k=e[b],N={x:u+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+_,circumference:_,outerRadius:m,innerRadius:f};v&&(N.options=y||this.resolveDataElementOptions(b,k.active?"active":s)),x+=_,this.updateElement(k,b,N,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Vr*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=TS(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,a,o,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(mn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}vt(Hg,"id","doughnut"),vt(Hg,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),vt(Hg,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),vt(Hg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:r,borderRadius:a&&(o||d.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Hw extends ju{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:o,count:l}=Dde(n,s,a);this._drawStart=o,this._drawCount=l,Lde(n)&&(o=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:c},e),this.updateElements(s,o,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,s),h=a.axis,f=o.axis,{spanGaps:m,segment:y}=this.options,v=Tx(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||i||s==="none",b=n+r,_=e.length;let k=n>0&&this.getParsed(n-1);for(let N=0;N<_;++N){const A=e[N],T=x?A:{};if(N<n||N>=b){T.skip=!0;continue}const C=this.getParsed(N),P=En(C[f]),$=T[h]=a.getPixelForValue(C[h],N),j=T[f]=i||P?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[f],N);T.skip=isNaN($)||isNaN(j)||P,T.stop=N>0&&Math.abs(C[h]-k[h])>v,y&&(T.parsed=C,T.raw=c.data[N]),d&&(T.options=u||this.resolveDataElementOptions(N,A.active?"active":s)),x||this.updateElement(A,N,T,s),k=C}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}vt(Hw,"id","line"),vt(Hw,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),vt(Hw,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class qw extends ju{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=TS(n._parsed[e].r,r.options.locale);return{label:s[e]||"",value:i}}parseObjectData(e,n,r,s){return Vde.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{const i=this.getParsed(s).r;!isNaN(i)&&this.chart.getDataVisibility(s)&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),i=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?i/100*r.cutoutPercentage:1,0),o=(i-a)/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,n,r,s){const i=s==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*Yn;let f=h,m;const y=360/this.countVisibleElements();for(m=0;m<n;++m)f+=this._computeAngle(m,s,y);for(m=n;m<n+r;m++){const v=e[m];let x=f,b=f+this._computeAngle(m,s,y),_=a.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;f=b,i&&(l.animateScale&&(_=0),l.animateRotate&&(x=b=h));const k={x:u,y:d,innerRadius:0,outerRadius:_,startAngle:x,endAngle:b,options:this.resolveDataElementOptions(m,v.active?"active":s)};this.updateElement(v,m,k,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Tu(this.resolveDataElementOptions(e,n).angle||r):0}}vt(qw,"id","polarArea"),vt(qw,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),vt(qw,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class sI extends Hg{}vt(sI,"id","pie"),vt(sI,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $C extends ju{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return Vde.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],i=n.iScale.getLabels();if(r.points=s,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===s.length,options:a};this.updateElement(r,void 0,o,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const i=this._cachedMeta.rScale,a=s==="reset";for(let o=n;o<n+r;o++){const l=e[o],c=this.resolveDataElementOptions(o,l.active?"active":s),u=i.getPointPositionForValue(o,this.getParsed(o).r),d=a?i.xCenter:u.x,h=a?i.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,o,f,s)}}}vt($C,"id","radar"),vt($C,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),vt($C,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class DC extends ju{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:i}=n,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=i.getLabelForValue(a.y);return{label:r[e]||"",value:"("+o+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:i,count:a}=Dde(n,r,s);if(this._drawStart=i,this._drawCount=a,Lde(n)&&(i=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=n;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),d=this.getSharedOptions(u),h=this.includeOptions(s,d),f=a.axis,m=o.axis,{spanGaps:y,segment:v}=this.options,x=Tx(y)?y:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none";let _=n>0&&this.getParsed(n-1);for(let k=n;k<n+r;++k){const N=e[k],A=this.getParsed(k),T=b?N:{},C=En(A[m]),P=T[f]=a.getPixelForValue(A[f],k),$=T[m]=i||C?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,A,l):A[m],k);T.skip=isNaN(P)||isNaN($)||C,T.stop=k>0&&Math.abs(A[f]-_[f])>x,v&&(T.parsed=A,T.raw=c.data[k]),h&&(T.options=d||this.resolveDataElementOptions(k,N.active?"active":s)),b||this.updateElement(N,k,T,s),_=A}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let o=0;for(let l=n.length-1;l>=0;--l)o=Math.max(o,n[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const i=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,i,a)/2}}vt(DC,"id","scatter"),vt(DC,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),vt(DC,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var _ut=Object.freeze({__proto__:null,BarController:Vw,BubbleController:jC,DoughnutController:Hg,LineController:Hw,PieController:sI,PolarAreaController:qw,RadarController:$C,ScatterController:DC});function hg(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class l8{constructor(e){vt(this,"options");this.options=e||{}}static override(e){Object.assign(l8.prototype,e)}init(){}formats(){return hg()}parse(){return hg()}format(){return hg()}add(){return hg()}diff(){return hg()}startOf(){return hg()}endOf(){return hg()}}var kut={_date:l8};function Sut(t,e,n,r){const{controller:s,data:i,_sorted:a}=t,o=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const c=o._reversePixels?qlt:zh;if(r){if(s._sharedOptions){const u=i[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(i,e,n-d),f=c(i,e,n+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:d}=s._cachedMeta,{_parsed:h}=t,f=h.slice(0,u.lo+1).reverse().findIndex(y=>!En(y[d.axis]));u.lo-=Math.max(0,f);const m=h.slice(u.hi).findIndex(y=>!En(y[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:i.length-1}}function GP(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),a=n[e];for(let o=0,l=i.length;o<l;++o){const{index:c,data:u}=i[o],{lo:d,hi:h}=Sut(i[o],e,a,s);for(let f=d;f<=h;++f){const m=u[f];m.skip||r(m,c,f)}}}function Nut(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,a=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Z3(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||GP(t,n,e,function(o,l,c){!s&&!Bh(o,t.chartArea,0)||o.inRange(e.x,e.y,r)&&i.push({element:o,datasetIndex:l,index:c})},!0),i}function Cut(t,e,n,r){let s=[];function i(a,o,l){const{startAngle:c,endAngle:u}=a.getProps(["startAngle","endAngle"],r),{angle:d}=Ede(a,{x:e.x,y:e.y});o_(d,c,u)&&s.push({element:a,datasetIndex:o,index:l})}return GP(t,n,e,i),s}function Tut(t,e,n,r,s,i){let a=[];const o=Nut(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,s);if(r&&!f)return;const m=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(m))&&!f)return;const v=o(e,m);v<l?(a=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&a.push({element:u,datasetIndex:d,index:h})}return GP(t,n,e,c),a}function J3(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Cut(t,e,n,s):Tut(t,e,n,r,s,i)}function hG(t,e,n,r,s){const i=[],a=n==="x"?"inXRange":"inYRange";let o=!1;return GP(t,n,e,(l,c,u)=>{l[a]&&l[a](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,s))}),r&&!o?[]:i}var Iut={modes:{index(t,e,n,r){const s=kg(e,t),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Z3(t,s,i,r,a):J3(t,s,i,!1,r,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=kg(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Z3(t,s,i,r,a):J3(t,s,i,!1,r,a);if(o.length>0){const l=o[0].datasetIndex,c=t.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(t,e,n,r){const s=kg(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return Z3(t,s,i,r,a)},nearest(t,e,n,r){const s=kg(e,t),i=n.axis||"xy",a=n.includeInvisible||!1;return J3(t,s,i,n.intersect,r,a)},x(t,e,n,r){const s=kg(e,t);return hG(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=kg(e,t);return hG(t,s,"y",n.intersect,r)}}};const the=["left","top","right","bottom"];function Y1(t,e){return t.filter(n=>n.pos===e)}function fG(t,e){return t.filter(n=>the.indexOf(n.pos)===-1&&n.box.axis===e)}function Z1(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Aut(t){const e=[];let n,r,s,i,a,o;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function Eut(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!the.includes(s))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function Put(t,e){const n=Eut(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:l}=o.box,c=n[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*r:l&&e.availableWidth,o.height=s):(o.width=r,o.height=u?u*s:l&&e.availableHeight)}return n}function Out(t){const e=Aut(t),n=Z1(e.filter(c=>c.box.fullSize),!0),r=Z1(Y1(e,"left"),!0),s=Z1(Y1(e,"right")),i=Z1(Y1(e,"top"),!0),a=Z1(Y1(e,"bottom")),o=fG(e,"x"),l=fG(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Y1(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}function pG(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function nhe(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function jut(t,e,n,r){const{pos:s,box:i}=n,a=t.maxPadding;if(!Fn(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&nhe(a,i.getPadding());const o=Math.max(0,e.outerWidth-pG(a,t,"left","right")),l=Math.max(0,e.outerHeight-pG(a,t,"top","bottom")),c=o!==t.w,u=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function $ut(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Dut(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],n[a])}),i}return r(t?["left","right"]:["top","bottom"])}function xw(t,e,n,r){const s=[];let i,a,o,l,c,u;for(i=0,a=t.length,c=0;i<a;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,Dut(o.horizontal,e));const{same:d,other:h}=jut(e,n,o,r);c|=d&&s.length,u=u||h,l.fullSize||s.push(o)}return c&&xw(s,e,n,r)||u}function QN(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function mG(t,e,n,r){const s=n.padding;let{x:i,y:a}=e;for(const o of t){const l=o.box,c=r[o.stack]||{placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*u,h=c.size||l.height;a_(c.start)&&(a=c.start),l.fullSize?QN(l,s.left,a,n.outerWidth-s.right-s.left,h):QN(l,e.left+c.placed,a,d,h),c.start=a,c.placed+=d,a=l.bottom}else{const d=e.h*u,h=c.size||l.width;a_(c.start)&&(i=c.start),l.fullSize?QN(l,i,s.top,h,n.outerHeight-s.bottom-s.top):QN(l,i,e.top+c.placed,h,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=a}var Ba={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=qa(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(n-s.height,0),o=Out(t.boxes),l=o.vertical,c=o.horizontal;ur(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,v)=>v.box.options&&v.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},s);nhe(h,qa(r));const f=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),m=Put(l.concat(c),d);xw(o.fullSize,f,d,m),xw(l,f,d,m),xw(c,f,d,m)&&xw(l,f,d,m),$ut(f),mG(o.leftAndTop,f,d,m),f.x+=f.w,f.y+=f.h,mG(o.rightAndBottom,f,d,m),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ur(o.chartArea,y=>{const v=y.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class rhe{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Lut extends rhe{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const LC="$chartjs",Rut={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gG=t=>t===null||t==="";function Mut(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[LC]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gG(s)){const i=Qq(t,"width");i!==void 0&&(t.width=i)}if(gG(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Qq(t,"height");i!==void 0&&(t.height=i)}return t}const she=Fct?{passive:!0}:!1;function Fut(t,e,n){t&&t.addEventListener(e,n,she)}function zut(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,she)}function But(t,e){const n=Rut[t.type]||t.type,{x:r,y:s}=kg(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function iI(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Wut(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||iI(o.addedNodes,r),a=a&&!iI(o.removedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Uut(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||iI(o.removedNodes,r),a=a&&!iI(o.addedNodes,r);a&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const c_=new Map;let yG=0;function ihe(){const t=window.devicePixelRatio;t!==yG&&(yG=t,c_.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Vut(t,e){c_.size||window.addEventListener("resize",ihe),c_.set(t,e)}function Hut(t){c_.delete(t),c_.size||window.removeEventListener("resize",ihe)}function qut(t,e,n){const r=t.canvas,s=r&&o8(r);if(!s)return;const i=$de((o,l)=>{const c=s.clientWidth;n(o,l),c<s.clientWidth&&n()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return a.observe(s),Vut(t,i),a}function Q3(t,e,n){n&&n.disconnect(),e==="resize"&&Hut(t)}function Gut(t,e,n){const r=t.canvas,s=$de(i=>{t.ctx!==null&&n(But(i,t))},t);return Fut(r,e,s),s}class Kut extends rhe{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Mut(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[LC])return!1;const r=n[LC].initial;["height","width"].forEach(i=>{const a=r[i];En(a)?n.removeAttribute(i):n.setAttribute(i,a)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[LC],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),a={attach:Wut,detach:Uut,resize:qut}[n]||Gut;s[n]=a(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Q3,detach:Q3,resize:Q3}[n]||zut)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return Mct(e,n,r,s)}isAttached(e){const n=e&&o8(e);return!!(n&&n.isConnected)}}function Xut(t){return!a8()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Lut:Kut}var uC;let Tf=(uC=class{constructor(){vt(this,"x");vt(this,"y");vt(this,"active",!1);vt(this,"options");vt(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Tx(this.x)&&Tx(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},vt(uC,"defaults",{}),vt(uC,"defaultRoutes"),uC);function Yut(t,e){const n=t.options.ticks,r=Zut(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?Qut(e):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return edt(e,c,i,a/s),c;const u=Jut(i,e,s);if(a>0){let d,h;const f=a>1?Math.round((l-o)/(a-1)):null;for(eC(e,c,u,En(f)?0:o-f,o),d=0,h=a-1;d<h;d++)eC(e,c,u,i[d],i[d+1]);return eC(e,c,u,l,En(f)?e.length:l+f),c}return eC(e,c,u),c}function Zut(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function Jut(t,e,n){const r=tdt(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Blt(r);for(let a=0,o=i.length-1;a<o;a++){const l=i[a];if(l>s)return l}return Math.max(s,1)}function Qut(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function edt(t,e,n,r){let s=0,i=n[0],a;for(r=Math.ceil(r),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=n[s*r])}function eC(t,e,n,r,s){const i=mn(r,0),a=Math.min(mn(s,t.length),t.length);let o=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)o++,u=Math.round(i+o*n);for(c=Math.max(i,0);c<a;c++)c===u&&(e.push(t[c]),o++,u=Math.round(i+o*n))}function tdt(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const ndt=t=>t==="left"?"right":t==="right"?"left":t,vG=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,xG=(t,e)=>Math.min(e||t,t);function bG(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function rdt(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,a-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-o||l>a+o)))return l}function sdt(t,e){ur(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function J1(t){return t.drawTicks?t.tickLength:0}function wG(t,e){if(!t.display)return 0;const n=bi(t.font,e),r=qa(t.padding);return(Qr(t.text)?t.text.length:1)*n.lineHeight+r.height}function idt(t,e){return Dm(t,{scale:e,type:"scale"})}function adt(t,e,n){return Dm(t,{tick:n,index:e,type:"tick"})}function odt(t,e,n){let r=e8(t);return(n&&e!=="right"||!n&&e==="right")&&(r=ndt(r)),r}function ldt(t,e,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,m;const y=a-s,v=o-i;if(t.isHorizontal()){if(f=Ea(r,i,o),Fn(n)){const x=Object.keys(n)[0],b=n[x];m=u[x].getPixelForValue(b)+y-e}else n==="center"?m=(c.bottom+c.top)/2+y-e:m=vG(t,n,e);h=o-i}else{if(Fn(n)){const x=Object.keys(n)[0],b=n[x];f=u[x].getPixelForValue(b)-v+e}else n==="center"?f=(c.left+c.right)/2-v+e:f=vG(t,n,e);m=Ea(r,a,s),d=n==="left"?-Ms:Ms}return{titleX:f,titleY:m,maxWidth:h,rotation:d}}class hy extends Tf{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=_l(e,Number.POSITIVE_INFINITY),n=_l(n,Number.NEGATIVE_INFINITY),r=_l(r,Number.POSITIVE_INFINITY),s=_l(s,Number.NEGATIVE_INFINITY),{min:_l(e,r),max:_l(n,s),minDefined:ks(e),maxDefined:ks(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),s||(n=Math.min(n,a.min)),i||(r=Math.max(r,a.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:_l(n,_l(r,n)),max:_l(r,_l(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gct(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?bG(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Yut(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pr(this.options.afterUpdate,[this])}beforeSetDimensions(){Pr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Pr(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Pr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=xG(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let a=s,o,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Fi(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/r:f/(r-1),d+6>o&&(o=f/(r-(e.offset?.5:1)),l=this.maxHeight-J1(e.grid)-n.padding-wG(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),a=Jz(Math.min(Math.asin(Fi((u.highest.height+6)/o,-1,1)),Math.asin(Fi(l/c,-1,1))-Math.asin(Fi(h/c,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){Pr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=wG(s,n.options.font);if(o?(e.width=this.maxWidth,e.height=J1(i)+l):(e.height=this.maxHeight,e.width=J1(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,m=Tu(this.labelRotation),y=Math.cos(m),v=Math.sin(m);if(o){const x=r.mirror?0:v*d.width+y*h.height;e.height=Math.min(this.maxHeight,e.height+x+f)}else{const x=r.mirror?0:y*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+x+f)}this._calculatePadding(c,u,v,y)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=s*e.width,f=r*n.height):(h=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+a)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)En(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=bG(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],l=Math.floor(n/xG(n,r));let c=0,u=0,d,h,f,m,y,v,x,b,_,k,N;for(d=0;d<n;d+=l){if(m=e[d].label,y=this._resolveTickFontOptions(d),s.font=v=y.string,x=i[v]=i[v]||{data:{},gc:[]},b=y.lineHeight,_=k=0,!En(m)&&!Qr(m))_=nI(s,x.data,x.gc,_,m),k=b;else if(Qr(m))for(h=0,f=m.length;h<f;++h)N=m[h],!En(N)&&!Qr(N)&&(_=nI(s,x.data,x.gc,_,N),k+=b);a.push(_),o.push(k),c=Math.max(_,c),u=Math.max(k,u)}sdt(i,n);const A=a.indexOf(c),T=o.indexOf(u),C=P=>({width:a[P]||0,height:o[P]||0});return{first:C(0),last:C(n-1),widest:C(A),highest:C(T),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Hlt(this._alignToPixels?dg(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=adt(this.getContext(),e,r))}return this.$context||(this.$context=idt(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Tu(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,l=i?i.highest.height+a:0;return this.isHorizontal()?l*r>o*s?o/r:l/s:l*s<o*r?l/r:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:a,border:o}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=J1(i),f=[],m=o.setContext(this.getContext()),y=m.display?m.width:0,v=y/2,x=function(V){return dg(r,V,y)};let b,_,k,N,A,T,C,P,$,j,O,F;if(a==="top")b=x(this.bottom),T=this.bottom-h,P=b-v,j=x(e.top)+v,F=e.bottom;else if(a==="bottom")b=x(this.top),j=e.top,F=x(e.bottom)-v,T=b+v,P=this.top+h;else if(a==="left")b=x(this.right),A=this.right-h,C=b-v,$=x(e.left)+v,O=e.right;else if(a==="right")b=x(this.left),$=e.left,O=x(e.right)-v,A=b+v,C=this.left+h;else if(n==="x"){if(a==="center")b=x((e.top+e.bottom)/2+.5);else if(Fn(a)){const V=Object.keys(a)[0],G=a[V];b=x(this.chart.scales[V].getPixelForValue(G))}j=e.top,F=e.bottom,T=b+v,P=T+h}else if(n==="y"){if(a==="center")b=x((e.left+e.right)/2);else if(Fn(a)){const V=Object.keys(a)[0],G=a[V];b=x(this.chart.scales[V].getPixelForValue(G))}A=b-v,C=A-h,$=e.left,O=e.right}const B=mn(s.ticks.maxTicksLimit,d),Z=Math.max(1,Math.ceil(d/B));for(_=0;_<d;_+=Z){const V=this.getContext(_),G=i.setContext(V),U=o.setContext(V),K=G.lineWidth,ee=G.color,oe=U.dash||[],W=U.dashOffset,Y=G.tickWidth,Q=G.tickColor,J=G.tickBorderDash||[],te=G.tickBorderDashOffset;k=rdt(this,_,l),k!==void 0&&(N=dg(r,k,K),c?A=C=$=O=N:T=P=j=F=N,f.push({tx1:A,ty1:T,tx2:C,ty2:P,x1:$,y1:j,x2:O,y2:F,width:K,color:ee,borderDash:oe,borderDashOffset:W,tickWidth:Y,tickColor:Q,tickBorderDash:J,tickBorderDashOffset:te}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,h=J1(r.grid),f=h+u,m=d?-u:f,y=-Tu(this.labelRotation),v=[];let x,b,_,k,N,A,T,C,P,$,j,O,F="middle";if(s==="top")A=this.bottom-m,T=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+m,T=this._getXAxisLabelAlignment();else if(s==="left"){const Z=this._getYAxisLabelAlignment(h);T=Z.textAlign,N=Z.x}else if(s==="right"){const Z=this._getYAxisLabelAlignment(h);T=Z.textAlign,N=Z.x}else if(n==="x"){if(s==="center")A=(e.top+e.bottom)/2+f;else if(Fn(s)){const Z=Object.keys(s)[0],V=s[Z];A=this.chart.scales[Z].getPixelForValue(V)+f}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-f;else if(Fn(s)){const Z=Object.keys(s)[0],V=s[Z];N=this.chart.scales[Z].getPixelForValue(V)}T=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));const B=this._getLabelSizes();for(x=0,b=o.length;x<b;++x){_=o[x],k=_.label;const Z=i.setContext(this.getContext(x));C=this.getPixelForTick(x)+i.labelOffset,P=this._resolveTickFontOptions(x),$=P.lineHeight,j=Qr(k)?k.length:1;const V=j/2,G=Z.color,U=Z.textStrokeColor,K=Z.textStrokeWidth;let ee=T;a?(N=C,T==="inner"&&(x===b-1?ee=this.options.reverse?"left":"right":x===0?ee=this.options.reverse?"right":"left":ee="center"),s==="top"?c==="near"||y!==0?O=-j*$+$/2:c==="center"?O=-B.highest.height/2-V*$+$:O=-B.highest.height+$/2:c==="near"||y!==0?O=$/2:c==="center"?O=B.highest.height/2-V*$:O=B.highest.height-j*$,d&&(O*=-1),y!==0&&!Z.showLabelBackdrop&&(N+=$/2*Math.sin(y))):(A=C,O=(1-j)*$/2);let oe;if(Z.showLabelBackdrop){const W=qa(Z.backdropPadding),Y=B.heights[x],Q=B.widths[x];let J=O-W.top,te=0-W.left;switch(F){case"middle":J-=Y/2;break;case"bottom":J-=Y;break}switch(T){case"center":te-=Q/2;break;case"right":te-=Q;break;case"inner":x===b-1?te-=Q:x>0&&(te-=Q/2);break}oe={left:te,top:J,width:Q+W.width,height:Y+W.height,color:Z.backdropColor}}v.push({label:k,font:P,textOffset:O,options:{rotation:y,color:G,strokeColor:U,strokeWidth:K,textAlign:ee,textBaseline:F,translation:[N,A],backdrop:oe}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Tu(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,l=a.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:a}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,a),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,a=s.length;i<a;++i){const l=s[i];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),a=r.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=dg(e,this.left,a)-a/2,u=dg(e,this.right,o)+o/2,d=h=l):(d=dg(e,this.top,a)-a/2,h=dg(e,this.bottom,o)+o/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&VP(r,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,l=a.font,c=a.label,u=a.textOffset;W0(r,c,0,u,l,o)}s&&HP(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=bi(r.font),a=qa(r.padding),o=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Fn(n)?(l+=a.bottom,Qr(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=a.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=ldt(this,l,n,o);W0(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:h,textAlign:odt(o,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=mn(e.grid&&e.grid.z,-1),s=mn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==hy.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];o[r]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return bi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class tC{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;ddt(n)&&(r=this.register(n));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,cdt(e,a,r),this.override&&ns.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ns[s]&&(delete ns[s][r],this.override&&delete B0[r])}}function cdt(t,e,n){const r=i_(Object.create(null),[n?ns.get(n):{},ns.get(e),t.defaults]);ns.set(e,r),t.defaultRoutes&&udt(e,t.defaultRoutes),t.descriptors&&ns.describe(e,t.descriptors)}function udt(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),a=e[n].split("."),o=a.pop(),l=a.join(".");ns.route(i,s,l,o)})}function ddt(t){return"id"in t&&"defaults"in t}class hdt{constructor(){this.controllers=new tC(ju,"datasets",!0),this.elements=new tC(Tf,"elements"),this.plugins=new tC(Object,"plugins"),this.scales=new tC(hy,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ur(s,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,n,r){const s=Zz(e);Pr(r["before"+s],[],r),n[e](r),Pr(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var vd=new hdt;class fdt{constructor(){this._init=void 0}notify(e,n,r,s){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,n,r,s){s=s||{};for(const i of e){const a=i.plugin,o=a[r],l=[n,s,i.options];if(Pr(o,l,a)===!1&&s.cancelable)return!1}return!0}invalidate(){En(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=mn(r.options&&r.options.plugins,{}),i=pdt(r);return s===!1&&!n?[]:gdt(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,a)=>i.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function pdt(t){const e={},n=[],r=Object.keys(vd.plugins.items);for(let i=0;i<r.length;i++)n.push(vd.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];n.indexOf(a)===-1&&(n.push(a),e[a.id]=!0)}return{plugins:n,localIds:e}}function mdt(t,e){return!e&&t===!1?null:t===!0?{}:t}function gdt(t,{plugins:e,localIds:n},r,s){const i=[],a=t.getContext();for(const o of e){const l=o.id,c=mdt(r[l],s);c!==null&&i.push({plugin:o,options:ydt(t.config,{plugin:o,local:n[l]},c,a)})}return i}function ydt(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(r,i);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $D(t,e){const n=ns.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vdt(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function xdt(t,e){return t===e?"_index_":"_value_"}function _G(t){if(t==="x"||t==="y"||t==="r")return t}function bdt(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function DD(t,...e){if(_G(t))return t;for(const n of e){const r=n.axis||bdt(n.position)||t.length>1&&_G(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kG(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function wdt(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return kG(t,"x",n[0])||kG(t,"y",n[0])}return{}}function _dt(t,e){const n=B0[t.type]||{scales:{}},r=e.scales||{},s=$D(t.type,e),i=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!Fn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=DD(a,o,wdt(a,t),ns.scales[o.type]),c=xdt(l,s),u=n.scales||{};i[a]=zw(Object.create(null),[{axis:l},o,u[l],u[c]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||$D(o,e),u=(B0[o]||{}).scales||{};Object.keys(u).forEach(d=>{const h=vdt(d,l),f=a[h+"AxisID"]||h;i[f]=i[f]||Object.create(null),zw(i[f],[{axis:h},r[f],u[d]])})}),Object.keys(i).forEach(a=>{const o=i[a];zw(o,[ns.scales[o.type],ns.scale])}),i}function ahe(t){const e=t.options||(t.options={});e.plugins=mn(e.plugins,{}),e.scales=_dt(t,e)}function ohe(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function kdt(t){return t=t||{},t.data=ohe(t.data),ahe(t),t}const SG=new Map,lhe=new Set;function nC(t,e){let n=SG.get(t);return n||(n=e(),SG.set(t,n),lhe.add(n)),n}const Q1=(t,e,n)=>{const r=fm(e,n);r!==void 0&&t.add(r)};class Sdt{constructor(e){this._config=kdt(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ohe(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ahe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return nC(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return nC(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return nC(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return nC(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,a=this._cachedScopes(e,r),o=a.get(n);if(o)return o;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Q1(l,e,d))),u.forEach(d=>Q1(l,s,d)),u.forEach(d=>Q1(l,B0[i]||{},d)),u.forEach(d=>Q1(l,ns,d)),u.forEach(d=>Q1(l,OD,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),lhe.has(n)&&a.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,B0[n]||{},ns.datasets[n]||{},{type:n},ns,OD]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=NG(this._resolverCache,e,s);let l=a;if(Cdt(a,n)){i.$shared=!1,r=pm(r)?r():r;const c=this.createResolver(e,r,o);l=Ix(a,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=NG(this._resolverCache,e,r);return Fn(n)?Ix(i,n,void 0,s):i}}function NG(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:r8(e,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,i)),i}const Ndt=t=>Fn(t)&&Object.getOwnPropertyNames(t).some(e=>pm(t[e]));function Cdt(t,e){const{isScriptable:n,isIndexable:r}=zde(t);for(const s of e){const i=n(s),a=r(s),o=(a||i)&&t[s];if(i&&(pm(o)||Ndt(o))||a&&Qr(o))return!0}return!1}var Tdt="4.5.1";const Idt=["top","bottom","left","right","chartArea"];function CG(t,e){return t==="top"||t==="bottom"||Idt.indexOf(t)===-1&&e==="x"}function TG(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function IG(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pr(n&&n.onComplete,[t],e)}function Adt(t){const e=t.chart,n=e.options.animation;Pr(n&&n.onProgress,[t],e)}function che(t){return a8()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const RC={},AG=t=>{const e=che(t);return Object.values(RC).filter(n=>n.canvas===e).pop()};function Edt(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const a=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=a)}}}function Pdt(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ip;let KP=(ip=class{static register(...e){vd.add(...e),EG()}static unregister(...e){vd.remove(...e),EG()}constructor(e,n){const r=this.config=new Sdt(n),s=che(e),i=AG(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Xut(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Olt(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fdt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Xlt(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],RC[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}kh.listen(this,"complete",IG),kh.listen(this,"progress",Adt),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return En(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return vd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Jq(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Xq(this.canvas,this.ctx),this}stop(){return kh.stop(this),this}resize(e,n){kh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,n,i),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Jq(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Pr(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ur(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const o=n[a],l=DD(a,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ur(i,a=>{const o=a.options,l=o.id,c=DD(l,o),u=mn(o.type,a.dtype);(o.position===void 0||CG(o.position,c)!==CG(a.dposition))&&(o.position=a.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=vd.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(o,e)}),ur(s,(a,o)=>{a||delete r[o]}),ur(r,a=>{Ba.configure(this,a,a.options),Ba.addBox(this,a)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(TG("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let a=this.getDatasetMeta(r);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=i.indexAxis||$D(o,this.options),a.order=i.order||0,a.index=r,a.label=""+i.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const l=vd.getController(o),{datasetElementType:c,dataElementType:u}=ns.datasets[o];Object.assign(l,{dataElementType:vd.getElement(u),datasetElementType:c&&vd.getElement(c)}),a.controller=new l(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ur(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(h),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||ur(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(TG("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ur(this.scales,e=>{Ba.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!zq(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const a=r==="_removeElements"?-i:i;Edt(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!zq(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ba.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ur(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,pm(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(kh.has(this)?this.attached&&!kh.running(this)&&kh.start(this):(this.draw(),IG({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const a=n[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Zde(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&VP(n,s),e.controller.draw(),s&&HP(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Bh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Iut.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Dm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);a_(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(i,{visible:r}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),kh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Xq(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete RC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,a)=>{n.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};ur(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",i),r("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():a()}unbindEvents(){ur(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ur(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,a,o,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!QT(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=i(n,e),o=r?e:i(e,n);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,a=n,o=this._getActiveElements(e,s,r,a),l=Mlt(e),c=Pdt(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pr(i.onHover,[e,o,this],this),l&&Pr(i.onClick,[e,o,this],this));const u=!QT(o,s);return(u||n)&&(this._active=o,this._updateHoverStyles(o,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},vt(ip,"defaults",ns),vt(ip,"instances",RC),vt(ip,"overrides",B0),vt(ip,"registry",vd),vt(ip,"version",Tdt),vt(ip,"getChart",AG),ip);function EG(){return ur(KP.instances,t=>t._plugins.invalidate())}function Odt(t,e,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/a,ja(r-n));if(t.beginPath(),t.arc(s,i,a-c/2,r+d/2,n-d/2),o>0){const h=Math.min(c/o,ja(r-n));t.arc(s,i,o+c/2,n-h/2,r+h/2,!0)}else{const h=Math.min(c/2,a*ja(r-n));if(u==="round")t.arc(s,i,h,n-Yn/2,r+Yn/2,!0);else if(u==="bevel"){const f=2*h*h,m=-f*Math.cos(n+Yn/2)+s,y=-f*Math.sin(n+Yn/2)+i,v=f*Math.cos(r+Yn/2)+s,x=f*Math.sin(r+Yn/2)+i;t.lineTo(m,y),t.lineTo(v,x)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function jdt(t,e,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=e;let c=s/o;t.beginPath(),t.arc(i,a,o,r-c,n+c),l>s?(c=s/l,t.arc(i,a,l,n+c,r-c,!0)):t.arc(i,a,s,n+Ms,r-Ms),t.closePath(),t.clip()}function $dt(t){return n8(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Ddt(t,e,n,r){const s=$dt(t.options.borderRadius),i=(n-e)/2,a=Math.min(i,r*e/2),o=l=>{const c=(n-Math.min(i,l))*r/2;return Fi(l,0,Math.min(i,c))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Fi(s.innerStart,0,a),innerEnd:Fi(s.innerEnd,0,a)}}function Zy(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function aI(t,e,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const m=s-l;if(r){const Z=u>0?u-r:0,V=d>0?d-r:0,G=(Z+V)/2,U=G!==0?m*G/(G+r):m;f=(m-U)/2}const y=Math.max(.001,m*d-n/Yn)/d,v=(m-y)/2,x=l+v+f,b=s-v-f,{outerStart:_,outerEnd:k,innerStart:N,innerEnd:A}=Ddt(e,h,d,b-x),T=d-_,C=d-k,P=x+_/T,$=b-k/C,j=h+N,O=h+A,F=x+N/j,B=b-A/O;if(t.beginPath(),i){const Z=(P+$)/2;if(t.arc(a,o,d,P,Z),t.arc(a,o,d,Z,$),k>0){const K=Zy(C,$,a,o);t.arc(K.x,K.y,k,$,b+Ms)}const V=Zy(O,b,a,o);if(t.lineTo(V.x,V.y),A>0){const K=Zy(O,B,a,o);t.arc(K.x,K.y,A,b+Ms,B+Math.PI)}const G=(b-A/h+(x+N/h))/2;if(t.arc(a,o,h,b-A/h,G,!0),t.arc(a,o,h,G,x+N/h,!0),N>0){const K=Zy(j,F,a,o);t.arc(K.x,K.y,N,F+Math.PI,x-Ms)}const U=Zy(T,x,a,o);if(t.lineTo(U.x,U.y),_>0){const K=Zy(T,P,a,o);t.arc(K.x,K.y,_,x-Ms,P)}}else{t.moveTo(a,o);const Z=Math.cos(P)*d+a,V=Math.sin(P)*d+o;t.lineTo(Z,V);const G=Math.cos($)*d+a,U=Math.sin($)*d+o;t.lineTo(G,U)}t.closePath()}function Ldt(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=e;let l=e.endAngle;if(i){aI(t,e,n,r,l,s);for(let c=0;c<i;++c)t.fill();isNaN(o)||(l=a+(o%Vr||Vr))}return aI(t,e,n,r,l,s),t.fill(),l}function Rdt(t,e,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,m?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let y=e.endAngle;if(i){aI(t,e,n,r,y,s);for(let v=0;v<i;++v)t.stroke();isNaN(o)||(y=a+(o%Vr||Vr))}m&&jdt(t,e,y),l.selfJoin&&y-a>=Yn&&f===0&&u!=="miter"&&Odt(t,e,y),i||(aI(t,e,n,r,y,s),t.stroke())}class bw extends Tf{constructor(n){super();vt(this,"circumference");vt(this,"endAngle");vt(this,"fullCircles");vt(this,"innerRadius");vt(this,"outerRadius");vt(this,"pixelMargin");vt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:a,distance:o}=Ede(i,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,m=mn(h,c-l),y=o_(a,l,c)&&l!==c,v=m>=Vr||y,x=Fh(o,u+f,d+f);return v&&x}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(i+a)/2,h=(o+l+u+c)/2;return{x:r+Math.cos(d)*h,y:s+Math.sin(d)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Vr?Math.floor(s/Vr):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Yn,s||0)),u=i*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Ldt(n,this,u,a,o),Rdt(n,this,u,a,o),n.restore()}}vt(bw,"id","arc"),vt(bw,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),vt(bw,"defaultRoutes",{backgroundColor:"backgroundColor"}),vt(bw,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function uhe(t,e,n=e){t.lineCap=mn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(mn(n.borderDash,e.borderDash)),t.lineDashOffset=mn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=mn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=mn(n.borderWidth,e.borderWidth),t.strokeStyle=mn(n.borderColor,e.borderColor)}function Mdt(t,e,n){t.lineTo(n.x,n.y)}function Fdt(t){return t.stepped?oct:t.tension||t.cubicInterpolationMode==="monotone"?lct:Mdt}function dhe(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=e,l=Math.max(s,a),c=Math.min(i,o),u=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function zdt(t,e,n,r){const{points:s,options:i}=e,{count:a,start:o,loop:l,ilen:c}=dhe(s,n,r),u=Fdt(i);let{move:d=!0,reverse:h}=r||{},f,m,y;for(f=0;f<=c;++f)m=s[(o+(h?c-f:f))%a],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,y,m,h,i.stepped),y=m);return l&&(m=s[(o+(h?c:0))%a],u(t,y,m,h,i.stepped)),!!l}function Bdt(t,e,n,r){const s=e.points,{count:i,start:a,ilen:o}=dhe(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,m,y,v,x;const b=k=>(a+(c?o-k:k))%i,_=()=>{y!==v&&(t.lineTo(u,v),t.lineTo(u,y),t.lineTo(u,x))};for(l&&(f=s[b(0)],t.moveTo(f.x,f.y)),h=0;h<=o;++h){if(f=s[b(h)],f.skip)continue;const k=f.x,N=f.y,A=k|0;A===m?(N<y?y=N:N>v&&(v=N),u=(d*u+k)/++d):(_(),t.lineTo(k,N),m=A,d=0,y=v=N),x=N}_()}function LD(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Bdt:zdt}function Wdt(t){return t.stepped?zct:t.tension||t.cubicInterpolationMode==="monotone"?Bct:Sg}function Udt(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),uhe(t,e.options),t.stroke(s)}function Vdt(t,e,n,r){const{segments:s,options:i}=e,a=LD(e);for(const o of s)uhe(t,i,o.style),t.beginPath(),a(t,e,o,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Hdt=typeof Path2D=="function";function qdt(t,e,n,r){Hdt&&!e.options.segment?Udt(t,e,n,r):Vdt(t,e,n,r)}class Ep extends Tf{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;Oct(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Gct(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,a=Yde(this,{property:n,start:s,end:s});if(!a.length)return;const o=[],l=Wdt(r);let c,u;for(c=0,u=a.length;c<u;++c){const{start:d,end:h}=a[c],f=i[d],m=i[h];if(f===m){o.push(f);continue}const y=Math.abs((s-f[n])/(m[n]-f[n])),v=l(f,m,y,r.stepped);v[n]=e[n],o.push(v)}return o.length===1?o[0]:o}pathSegment(e,n,r){return LD(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=LD(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const o of s)a&=i(e,this,o,{start:n,end:n+r-1});return!!a}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),qdt(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}vt(Ep,"id","line"),vt(Ep,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),vt(Ep,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),vt(Ep,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function PG(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class MC extends Tf{constructor(n){super();vt(this,"parsed");vt(this,"skip");vt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(n-a,2)+Math.pow(r-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return PG(this,n,"x",r)}inYRange(n,r){return PG(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Bh(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,jD(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}vt(MC,"id","point"),vt(MC,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),vt(MC,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function hhe(t,e){const{x:n,y:r,base:s,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,c,u,d;return t.horizontal?(d=a/2,o=Math.min(n,s),l=Math.max(n,s),c=r-d,u=r+d):(d=i/2,o=n-d,l=n+d,c=Math.min(r,s),u=Math.max(r,s)),{left:o,top:c,right:l,bottom:u}}function Pp(t,e,n,r){return t?0:Fi(e,n,r)}function Gdt(t,e,n){const r=t.options.borderWidth,s=t.borderSkipped,i=Fde(r);return{t:Pp(s.top,i.top,0,n),r:Pp(s.right,i.right,0,e),b:Pp(s.bottom,i.bottom,0,n),l:Pp(s.left,i.left,0,e)}}function Kdt(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=r0(s),a=Math.min(e,n),o=t.borderSkipped,l=r||Fn(s);return{topLeft:Pp(!l||o.top||o.left,i.topLeft,0,a),topRight:Pp(!l||o.top||o.right,i.topRight,0,a),bottomLeft:Pp(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:Pp(!l||o.bottom||o.right,i.bottomRight,0,a)}}function Xdt(t){const e=hhe(t),n=e.right-e.left,r=e.bottom-e.top,s=Gdt(t,n/2,r/2),i=Kdt(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function e4(t,e,n,r){const s=e===null,i=n===null,o=t&&!(s&&i)&&hhe(t,r);return o&&(s||Fh(e,o.left,o.right))&&(i||Fh(n,o.top,o.bottom))}function Ydt(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Zdt(t,e){t.rect(e.x,e.y,e.w,e.h)}function t4(t,e,n={}){const r=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+r,y:t.y+s,w:t.w+i,h:t.h+a,radius:t.radius}}class FC extends Tf{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:a}=Xdt(this),o=Ydt(a.radius)?l_:Zdt;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),o(e,t4(a,n,i)),e.clip(),o(e,t4(i,-n,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,t4(i,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,r){return e4(this,e,n,r)}inXRange(e,n){return e4(this,e,null,n)}inYRange(e,n){return e4(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}vt(FC,"id","bar"),vt(FC,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),vt(FC,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Jdt=Object.freeze({__proto__:null,ArcElement:bw,BarElement:FC,LineElement:Ep,PointElement:MC});const RD=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],OG=RD.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function fhe(t){return RD[t%RD.length]}function phe(t){return OG[t%OG.length]}function Qdt(t,e){return t.borderColor=fhe(e),t.backgroundColor=phe(e),++e}function eht(t,e){return t.backgroundColor=t.data.map(()=>fhe(e++)),e}function tht(t,e){return t.backgroundColor=t.data.map(()=>phe(e++)),e}function nht(t){let e=0;return(n,r)=>{const s=t.getDatasetMeta(r).controller;s instanceof Hg?e=eht(n,e):s instanceof qw?e=tht(n,e):s&&(e=Qdt(n,e))}}function jG(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function rht(t){return t&&(t.borderColor||t.backgroundColor)}function sht(){return ns.borderColor!=="rgba(0,0,0,0.1)"||ns.backgroundColor!=="rgba(0,0,0,0.1)"}var iht={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:s}=t.config,{elements:i}=s,a=jG(r)||rht(s)||i&&jG(i)||sht();if(!n.forceOverride&&a)return;const o=nht(t);r.forEach(o)}};function aht(t,e,n,r,s){const i=s.samples||r;if(i>=n)return t.slice(e,e+n);const a=[],o=(n-2)/(i-2);let l=0;const c=e+n-1;let u=e,d,h,f,m,y;for(a[l++]=t[u],d=0;d<i-2;d++){let v=0,x=0,b;const _=Math.floor((d+1)*o)+1+e,k=Math.min(Math.floor((d+2)*o)+1,n)+e,N=k-_;for(b=_;b<k;b++)v+=t[b].x,x+=t[b].y;v/=N,x/=N;const A=Math.floor(d*o)+1+e,T=Math.min(Math.floor((d+1)*o)+1,n)+e,{x:C,y:P}=t[u];for(f=m=-1,b=A;b<T;b++)m=.5*Math.abs((C-v)*(t[b].y-P)-(C-t[b].x)*(x-P)),m>f&&(f=m,h=t[b],y=b);a[l++]=h,u=y}return a[l++]=t[c],a}function oht(t,e,n,r){let s=0,i=0,a,o,l,c,u,d,h,f,m,y;const v=[],x=e+n-1,b=t[e].x,k=t[x].x-b;for(a=e;a<e+n;++a){o=t[a],l=(o.x-b)/k*r,c=o.y;const N=l|0;if(N===u)c<m?(m=c,d=a):c>y&&(y=c,h=a),s=(i*s+o.x)/++i;else{const A=a-1;if(!En(d)&&!En(h)){const T=Math.min(d,h),C=Math.max(d,h);T!==f&&T!==A&&v.push({...t[T],x:s}),C!==f&&C!==A&&v.push({...t[C],x:s})}a>0&&A!==f&&v.push(t[A]),v.push(o),u=N,i=0,m=y=c,d=h=f=a}}return v}function mhe(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function $G(t){t.data.datasets.forEach(e=>{mhe(e)})}function lht(t,e){const n=e.length;let r=0,s;const{iScale:i}=t,{min:a,max:o,minDefined:l,maxDefined:c}=i.getUserBounds();return l&&(r=Fi(zh(e,i.axis,a).lo,0,n-1)),c?s=Fi(zh(e,i.axis,o).hi+1,r,n)-r:s=n-r,{start:r,count:s}}var cht={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){$G(t);return}const r=t.width;t.data.datasets.forEach((s,i)=>{const{_data:a,indexAxis:o}=s,l=t.getDatasetMeta(i),c=a||s.data;if(vw([o,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=lht(l,c);const f=n.threshold||4*r;if(h<=f){mhe(s);return}En(a)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let m;switch(n.algorithm){case"lttb":m=aht(c,d,h,r,n);break;case"min-max":m=oht(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=m})},destroy(t){$G(t)}};function uht(t,e,n){const r=t.segments,s=t.points,i=e.points,a=[];for(const o of r){let{start:l,end:c}=o;c=XP(l,c,s);const u=MD(n,s[l],s[c],o.loop);if(!e.segments){a.push({source:o,target:u,start:s[l],end:s[c]});continue}const d=Yde(e,u);for(const h of d){const f=MD(n,i[h.start],i[h.end],h.loop),m=Xde(o,s,f);for(const y of m)a.push({source:y,target:h,start:{[n]:DG(u,f,"start",Math.max)},end:{[n]:DG(u,f,"end",Math.min)}})}}return a}function MD(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=ja(s),i=ja(i)),{property:t,start:s,end:i}}function dht(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:a,end:o})=>{o=XP(a,o,s);const l=s[a],c=s[o];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function XP(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function DG(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function ghe(t,e){let n=[],r=!1;return Qr(t)?(r=!0,n=t):n=dht(t,e),n.length?new Ep({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function LG(t){return t&&t.fill!==!1}function hht(t,e,n){let s=t[e].fill;const i=[e];let a;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!ks(s))return s;if(a=t[s],!a)return!1;if(a.visible)return s;i.push(s),s=a.fill}return!1}function fht(t,e,n){const r=yht(t);if(Fn(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return ks(s)&&Math.floor(s)===s?pht(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function pht(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function mht(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Fn(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function ght(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Fn(t)?r=t.value:r=e.getBaseValue(),r}function yht(t){const e=t.options,n=e.fill;let r=mn(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function vht(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,a=r.points,o=xht(e,n);o.push(ghe({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)bht(s,a[u],o)}return new Ep({points:s,options:{}})}function xht(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function bht(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:a,last:o,point:l}=wht(i,e,"x");if(!(!l||a&&o)){if(a)r.unshift(l);else if(t.push(l),!o)break}}t.push(...r)}function wht(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,a=t.points;let o=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],d=a[u.start][n],h=a[u.end][n];if(Fh(s,d,h)){o=s===d,l=s===h;break}}return{first:o,last:l,point:r}}class yhe{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:a}=this;return n=n||{start:0,end:Vr},e.arc(s,i,a,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function _ht(t){const{chart:e,fill:n,line:r}=t;if(ks(n))return kht(e,n);if(n==="stack")return vht(t);if(n==="shape")return!0;const s=Sht(t);return s instanceof yhe?s:ghe(s,r)}function kht(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Sht(t){return(t.scale||{}).getPointPositionForValue?Cht(t):Nht(t)}function Nht(t){const{scale:e={},fill:n}=t,r=mht(n,e);if(ks(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function Cht(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,a=ght(n,e,i),o=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new yhe({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(e.getPointPositionForValue(l,a));return o}function n4(t,e,n){const r=_ht(e),{chart:s,index:i,line:a,scale:o,axis:l}=e,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},m=s.getDatasetMeta(i),y=Zde(s,m);r&&a.points.length&&(VP(t,n),Tht(t,{line:a,target:r,above:h,below:f,area:n,scale:o,axis:l,clip:y}),HP(t))}function Tht(t,e){const{line:n,target:r,above:s,below:i,area:a,scale:o,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(RG(t,r,a.top),r4(t,{line:n,target:r,color:s,scale:o,property:c,clip:l}),t.restore(),t.save(),RG(t,r,a.bottom)):c==="y"&&(MG(t,r,a.left),r4(t,{line:n,target:r,color:i,scale:o,property:c,clip:l}),t.restore(),t.save(),MG(t,r,a.right),u=s)),r4(t,{line:n,target:r,color:u,scale:o,property:c,clip:l}),t.restore()}function RG(t,e,n){const{segments:r,points:s}=e;let i=!0,a=!1;t.beginPath();for(const o of r){const{start:l,end:c}=o,u=s[l],d=s[XP(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function MG(t,e,n){const{segments:r,points:s}=e;let i=!0,a=!1;t.beginPath();for(const o of r){const{start:l,end:c}=o,u=s[l],d=s[XP(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function r4(t,e){const{line:n,target:r,property:s,color:i,scale:a,clip:o}=e,l=uht(n,r,s);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=i}={}}=c,m=r!==!0;t.save(),t.fillStyle=f,Iht(t,a,o,m&&MD(s,d,h)),t.beginPath();const y=!!n.pathSegment(t,c);let v;if(m){y?t.closePath():FG(t,r,h,s);const x=!!r.pathSegment(t,u,{move:y,reverse:!0});v=y&&x,v||FG(t,r,d,s)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function Iht(t,e,n,r){const s=e.chart.chartArea,{property:i,start:a,end:o}=r||{};if(i==="x"||i==="y"){let l,c,u,d;i==="x"?(l=a,c=s.top,u=o,d=s.bottom):(l=s.left,c=a,u=s.right,d=o),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function FG(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var Aht={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,a,o,l;for(a=0;a<r;++a)i=t.getDatasetMeta(a),o=i.dataset,l=null,o&&o.options&&o instanceof Ep&&(l={visible:t.isDatasetVisible(a),index:a,fill:fht(o,a,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,s.push(l);for(a=0;a<r;++a)l=s[a],!(!l||l.fill===!1)&&(l.fill=hht(s,a,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=s.length-1;a>=0;--a){const o=s[a].$filler;o&&(o.line.updateControlPoints(i,o.axis),r&&o.fill&&n4(t.ctx,o,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;LG(i)&&n4(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!LG(r)||n.drawTime!=="beforeDatasetDraw"||n4(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zG=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Eht=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class BG extends Tf{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=bi(r.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=zG(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(a,i,o,l)+10):(u=this.maxHeight,c=this._fitCols(a,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+o;let d=e;i.textAlign="left",i.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((m,y)=>{const v=r+n/2+i.measureText(m.text).width;(y===0||c[c.length-1]+v+2*o>a)&&(d+=u,c[c.length-(y>0?0:1)]=0,f+=u,h++),l[y]={left:0,top:f,row:h,width:v,height:s},c[c.length-1]+=v+o}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=a-e;let d=o,h=0,f=0,m=0,y=0;return this.legendItems.forEach((v,x)=>{const{itemWidth:b,itemHeight:_}=Pht(r,n,i,v,s);x>0&&f+_+2*o>u&&(d+=h+o,c.push({width:h,height:f}),m+=h+o,y++,h=f=0),l[x]={left:m,top:f,col:y,width:b,height:_},h=Math.max(h,b),f+=_+o}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,a=Vv(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=Ea(r,this.left+s,this.right-this.lineWidths[o]);for(const c of n)o!==c.row&&(o=c.row,l=Ea(r,this.left+s,this.right-this.lineWidths[o])),c.top+=this.top+e+s,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+s}else{let o=0,l=Ea(r,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const c of n)c.col!==o&&(o=c.col,l=Ea(r,this.top+e+s,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+s,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;VP(e,this),this._draw(),HP(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:a}=e,o=ns.color,l=Vv(e.rtl,this.left,this.width),c=bi(a.font),{padding:u}=a,d=c.size,h=d/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:y,itemHeight:v}=zG(a,d),x=function(A,T,C){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;s.save();const P=mn(C.lineWidth,1);if(s.fillStyle=mn(C.fillStyle,o),s.lineCap=mn(C.lineCap,"butt"),s.lineDashOffset=mn(C.lineDashOffset,0),s.lineJoin=mn(C.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=mn(C.strokeStyle,o),s.setLineDash(mn(C.lineDash,[])),a.usePointStyle){const $={radius:y*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:P},j=l.xPlus(A,m/2),O=T+h;Mde(s,$,j,O,a.pointStyleWidth&&m)}else{const $=T+Math.max((d-y)/2,0),j=l.leftForLtr(A,m),O=r0(C.borderRadius);s.beginPath(),Object.values(O).some(F=>F!==0)?l_(s,{x:j,y:$,w:m,h:y,radius:O}):s.rect(j,$,m,y),s.fill(),P!==0&&s.stroke()}s.restore()},b=function(A,T,C){W0(s,C.text,A,T+v/2,c,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},_=this.isHorizontal(),k=this._computeTitleHeight();_?f={x:Ea(i,this.left+u,this.right-r[0]),y:this.top+u+k,line:0}:f={x:this.left+u,y:Ea(i,this.top+k+u,this.bottom-n[0].height),line:0},qde(this.ctx,e.textDirection);const N=v+u;this.legendItems.forEach((A,T)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const C=s.measureText(A.text).width,P=l.textAlign(A.textAlign||(A.textAlign=a.textAlign)),$=m+h+C;let j=f.x,O=f.y;l.setWidth(this.width),_?T>0&&j+$+u>this.right&&(O=f.y+=N,f.line++,j=f.x=Ea(i,this.left+u,this.right-r[f.line])):T>0&&O+N>this.bottom&&(j=f.x=j+n[f.line].width+u,f.line++,O=f.y=Ea(i,this.top+k+u,this.bottom-n[f.line].height));const F=l.x(j);if(x(F,O,A),j=Ylt(P,j+m+h,_?j+$:this.right,e.rtl),b(l.x(j),O,A),_)f.x+=$+u;else if(typeof A.text!="string"){const B=c.lineHeight;f.y+=vhe(A,B)+u}else f.y+=N}),Gde(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=bi(n.font),s=qa(n.padding);if(!n.display)return;const i=Vv(e.rtl,this.left,this.width),a=this.ctx,o=n.position,l=r.size/2,c=s.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ea(e.align,d,this.right-h);else{const m=this.columnSizes.reduce((y,v)=>Math.max(y,v.height),0);u=c+Ea(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const f=Ea(o,d,d+h);a.textAlign=i.textAlign(e8(o)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,W0(a,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=bi(e.font),r=qa(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Fh(e,this.left,this.right)&&Fh(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Fh(e,s.left,s.left+s.width)&&Fh(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!$ht(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=Eht(s,r);s&&!i&&Pr(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Pr(n.onHover,[e,r,this],this)}else r&&Pr(n.onClick,[e,r,this],this)}}function Pht(t,e,n,r,s){const i=Oht(r,t,e,n),a=jht(s,r,e.lineHeight);return{itemWidth:i,itemHeight:a}}function Oht(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+n.size/2+r.measureText(s).width}function jht(t,e,n){let r=t;return typeof e.text!="string"&&(r=vhe(e,n)),r}function vhe(t,e){const n=t.text?t.text.length:0;return e*n}function $ht(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Dht={id:"legend",_element:BG,start(t,e,n){const r=t.legend=new BG({ctx:t.ctx,options:n,chart:t});Ba.configure(t,r,n),Ba.addBox(t,r)},stop(t){Ba.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ba.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=qa(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class c8 extends Tf{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Qr(r.text)?r.text.length:1;this._padding=qa(r.padding);const i=s*bi(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:a}=this,o=a.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ea(o,r,i),d=n+e,c=i-r):(a.position==="left"?(u=r+e,d=Ea(o,s,n),l=Yn*-.5):(u=i-e,d=Ea(o,n,s),l=Yn*.5),c=s-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=bi(n.font),i=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(i);W0(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:e8(n.align),textBaseline:"middle",translation:[a,o]})}}function Lht(t,e){const n=new c8({ctx:t.ctx,options:e,chart:t});Ba.configure(t,n,e),Ba.addBox(t,n),t.titleBlock=n}var Rht={id:"title",_element:c8,start(t,e,n){Lht(t,n)},stop(t){const e=t.titleBlock;Ba.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ba.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rC=new WeakMap;var Mht={id:"subtitle",start(t,e,n){const r=new c8({ctx:t.ctx,options:n,chart:t});Ba.configure(t,r,n),Ba.addBox(t,r),rC.set(t,r)},stop(t){Ba.removeBox(t,rC.get(t)),rC.delete(t)},beforeUpdate(t,e,n){const r=rC.get(t);Ba.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ww={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=PD(e,c);u<s&&(s=u,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function md(t,e){return e&&(Qr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Sh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Fht(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function WG(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:a,boxHeight:o}=e,l=bi(e.bodyFont),c=bi(e.titleFont),u=bi(e.footerFont),d=i.length,h=s.length,f=r.length,m=qa(e.padding);let y=m.height,v=0,x=r.reduce((k,N)=>k+N.before.length+N.lines.length+N.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){const k=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;y+=f*k+(x-f)*l.lineHeight+(x-1)*e.bodySpacing}h&&(y+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const _=function(k){v=Math.max(v,n.measureText(k).width+b)};return n.save(),n.font=c.string,ur(t.title,_),n.font=l.string,ur(t.beforeBody.concat(t.afterBody),_),b=e.displayColors?a+2+e.boxPadding:0,ur(r,k=>{ur(k.before,_),ur(k.lines,_),ur(k.after,_)}),b=0,n.font=u.string,ur(t.footer,_),n.restore(),v+=m.width,{width:v,height:y}}function zht(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Bht(t,e,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function Wht(t,e,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return r==="center"?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),Bht(c,t,e,n)&&(c="center"),c}function UG(t,e,n){const r=n.yAlign||e.yAlign||zht(t,n);return{xAlign:n.xAlign||e.xAlign||Wht(t,e,n,r),yAlign:r}}function Uht(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Vht(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function VG(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=r0(a);let m=Uht(e,o);const y=Vht(e,l,c);return l==="center"?o==="left"?m+=c:o==="right"&&(m-=c):o==="left"?m-=Math.max(u,h)+s:o==="right"&&(m+=Math.max(d,f)+s),{x:Fi(m,0,r.width-e.width),y:Fi(y,0,r.height-e.height)}}function sC(t,e,n){const r=qa(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function HG(t){return md([],Sh(t))}function Hht(t,e,n){return Dm(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function qG(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const xhe={beforeTitle:wh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:wh,beforeBody:wh,beforeLabel:wh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return En(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:wh,afterBody:wh,beforeFooter:wh,footer:wh,afterFooter:wh};function Uo(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?xhe[e].call(n,r):s}class FD extends Tf{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Jde(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Hht(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Uo(r,"beforeTitle",this,e),i=Uo(r,"title",this,e),a=Uo(r,"afterTitle",this,e);let o=[];return o=md(o,Sh(s)),o=md(o,Sh(i)),o=md(o,Sh(a)),o}getBeforeBody(e,n){return HG(Uo(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ur(e,i=>{const a={before:[],lines:[],after:[]},o=qG(r,i);md(a.before,Sh(Uo(o,"beforeLabel",this,i))),md(a.lines,Uo(o,"label",this,i)),md(a.after,Sh(Uo(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,n){return HG(Uo(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Uo(r,"beforeFooter",this,e),i=Uo(r,"footer",this,e),a=Uo(r,"afterFooter",this,e);let o=[];return o=md(o,Sh(s)),o=md(o,Sh(i)),o=md(o,Sh(a)),o}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],a=[];let o=[],l,c;for(l=0,c=n.length;l<c;++l)o.push(Fht(this.chart,n[l]));return e.filter&&(o=o.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(o=o.sort((u,d)=>e.itemSort(u,d,r))),ur(o,u=>{const d=qG(e.callbacks,u);s.push(Uo(d,"labelColor",this,u)),i.push(Uo(d,"labelPointStyle",this,u)),a.push(Uo(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=ww[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const l=this._size=WG(this,r),c=Object.assign({},o,l),u=UG(this.chart,r,c),d=VG(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=r0(o),{x:h,y:f}=e,{width:m,height:y}=n;let v,x,b,_,k,N;return i==="center"?(k=f+y/2,s==="left"?(v=h,x=v-a,_=k+a,N=k-a):(v=h+m,x=v+a,_=k-a,N=k+a),b=v):(s==="left"?x=h+Math.max(l,u)+a:s==="right"?x=h+m-Math.max(c,d)-a:x=this.caretX,i==="top"?(_=f,k=_-a,v=x-a,b=x+a):(_=f+y,k=_+a,v=x+a,b=x-a),N=_),{x1:v,x2:x,x3:b,y1:_,y2:k,y3:N}}drawTitle(e,n,r){const s=this.title,i=s.length;let a,o,l;if(i){const c=Vv(r.rtl,this.x,this.width);for(e.x=sC(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",a=bi(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===i&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,n,r,s,i){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=bi(i.bodyFont),d=sC(this,"left",i),h=s.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+f;if(i.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=s.leftForLtr(h,c)+c/2,x=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,jD(e,y,v,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,jD(e,y,v,x)}else{e.lineWidth=Fn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const y=s.leftForLtr(h,c),v=s.leftForLtr(s.xPlus(h,1),c-2),x=r0(a.borderRadius);Object.values(x).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,l_(e,{x:y,y:m,w:c,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),l_(e,{x:v,y:m+1,w:c-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,m,c,l),e.strokeRect(y,m,c,l),e.fillStyle=a.backgroundColor,e.fillRect(v,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=bi(r.bodyFont);let h=d.lineHeight,f=0;const m=Vv(r.rtl,this.x,this.width),y=function(C){n.fillText(C,m.x(e.x+f),e.y+h/2),e.y+=h+i},v=m.textAlign(a);let x,b,_,k,N,A,T;for(n.textAlign=a,n.textBaseline="middle",n.font=d.string,e.x=sC(this,v,r),n.fillStyle=r.bodyColor,ur(this.beforeBody,y),f=o&&v!=="right"?a==="center"?c/2+u:c+2+u:0,k=0,A=s.length;k<A;++k){for(x=s[k],b=this.labelTextColors[k],n.fillStyle=b,ur(x.before,y),_=x.lines,o&&_.length&&(this._drawColorBox(n,e,k,m,r),h=Math.max(d.lineHeight,l)),N=0,T=_.length;N<T;++N)y(_[N]),h=d.lineHeight;ur(x.after,y)}f=0,h=d.lineHeight,ur(this.afterBody,y),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let a,o;if(i){const l=Vv(r.rtl,this.x,this.width);for(e.x=sC(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",a=bi(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,o=0;o<i;++o)n.fillText(s[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=r0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(o+d,l),a==="top"&&this.drawCaret(e,n,r,s),n.lineTo(o+c-h,l),n.quadraticCurveTo(o+c,l,o+c,l+h),a==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(o+c,l+u-m),n.quadraticCurveTo(o+c,l+u,o+c-m,l+u),a==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(o+f,l+u),n.quadraticCurveTo(o,l+u,o,l+u-f),a==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(o,l+d),n.quadraticCurveTo(o,l,o+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const a=ww[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=WG(this,e),l=Object.assign({},a,this._size),c=UG(n,e,l),u=VG(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=qa(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),qde(e,n.textDirection),i.y+=a.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Gde(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),i=!QT(r,s),a=this._positionChanged(s,n);(i||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,n,r),o=this._positionChanged(a,e),l=n||!QT(a,i)||o;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&a.reverse(),a}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,a=ww[i.position].call(this,e,n);return a!==!1&&(r!==a.x||s!==a.y)}}vt(FD,"positioners",ww);var qht={id:"tooltip",_element:FD,positioners:ww,afterInit(t,e,n){n&&(t.tooltip=new FD({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xhe},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ght=Object.freeze({__proto__:null,Colors:iht,Decimation:cht,Filler:Aht,Legend:Dht,SubTitle:Mht,Title:Rht,Tooltip:qht});const Kht=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Xht(t,e,n,r){const s=t.indexOf(e);if(s===-1)return Kht(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const Yht=(t,e)=>t===null?null:Fi(Math.round(t),0,e);function GG(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class zD extends hy{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(En(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Xht(r,e,mn(n,e),this._addedLabels),Yht(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)s.push({value:a});return s}getLabelForValue(e){return GG.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}vt(zD,"id","category"),vt(zD,"defaults",{ticks:{callback:GG}});function Zht(t,e){const n=[],{bounds:s,step:i,min:a,max:o,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=i||1,m=u-1,{min:y,max:v}=e,x=!En(a),b=!En(o),_=!En(c),k=(v-y)/(d+1);let N=Wq((v-y)/m/f)*f,A,T,C,P;if(N<1e-14&&!x&&!b)return[{value:y},{value:v}];P=Math.ceil(v/N)-Math.floor(y/N),P>m&&(N=Wq(P*N/m/f)*f),En(l)||(A=Math.pow(10,l),N=Math.ceil(N*A)/A),s==="ticks"?(T=Math.floor(y/N)*N,C=Math.ceil(v/N)*N):(T=y,C=v),x&&b&&i&&Ult((o-a)/i,N/1e3)?(P=Math.round(Math.min((o-a)/N,u)),N=(o-a)/P,T=a,C=o):_?(T=x?a:T,C=b?o:C,P=c-1,N=(C-T)/P):(P=(C-T)/N,Bw(P,Math.round(P),N/1e3)?P=Math.round(P):P=Math.ceil(P));const $=Math.max(Uq(N),Uq(T));A=Math.pow(10,En(l)?$:l),T=Math.round(T*A)/A,C=Math.round(C*A)/A;let j=0;for(x&&(h&&T!==a?(n.push({value:a}),T<a&&j++,Bw(Math.round((T+j*N)*A)/A,a,KG(a,k,t))&&j++):T<a&&j++);j<P;++j){const O=Math.round((T+j*N)*A)/A;if(b&&O>o)break;n.push({value:O})}return b&&h&&C!==o?n.length&&Bw(n[n.length-1].value,o,KG(o,k,t))?n[n.length-1].value=o:n.push({value:o}):(!b||C===o)&&n.push({value:C}),n}function KG(t,e,{horizontal:n,minRotation:r}){const s=Tu(r),i=(n?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class oI extends hy{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return En(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const a=l=>s=n?s:l,o=l=>i=r?i:l;if(e){const l=Fd(s),c=Fd(i);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||a(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=Zht(s,i);return e.bounds==="ticks"&&Ade(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return TS(e,this.chart.options.locale,this.options.ticks.format)}}class BD extends oI{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ks(e)?e:0,this.max=ks(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Tu(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}vt(BD,"id","linear"),vt(BD,"defaults",{ticks:{callback:UP.formatters.numeric}});const u_=t=>Math.floor(Ip(t)),fg=(t,e)=>Math.pow(10,u_(t)+e);function XG(t){return t/Math.pow(10,u_(t))===1}function YG(t,e,n){const r=Math.pow(10,n),s=Math.floor(t/r);return Math.ceil(e/r)-s}function Jht(t,e){const n=e-t;let r=u_(n);for(;YG(t,e,r)>10;)r++;for(;YG(t,e,r)<10;)r--;return Math.min(r,u_(t))}function Qht(t,{min:e,max:n}){e=_l(t.min,e);const r=[],s=u_(e);let i=Jht(e,n),a=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),l=s>i?Math.pow(10,s):0,c=Math.round((e-l)*a)/a,u=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,i)),h=_l(t.min,Math.round((l+u+d*Math.pow(10,i))*a)/a);for(;h<n;)r.push({value:h,major:XG(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(i++,d=2,a=i>=0?1:a),h=Math.round((l+u+d*Math.pow(10,i))*a)/a;const f=_l(t.max,h);return r.push({value:f,major:XG(f),significand:d}),r}class WD extends hy{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=oI.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ks(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ks(e)?Math.max(0,e):null,this.max=ks(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ks(this._userMin)&&(this.min=e===fg(this.min,0)?fg(this.min,-1):fg(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,s=this.max;const i=o=>r=e?r:o,a=o=>s=n?s:o;r===s&&(r<=0?(i(1),a(10)):(i(fg(r,-1)),a(fg(s,1)))),r<=0&&i(fg(s,-1)),s<=0&&a(fg(r,1)),this.min=r,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Qht(n,this);return e.bounds==="ticks"&&Ade(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":TS(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ip(e),this._valueRange=Ip(this.max)-Ip(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ip(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}vt(WD,"id","logarithmic"),vt(WD,"defaults",{ticks:{callback:UP.formatters.logarithmic,major:{enabled:!0}}});function UD(t){const e=t.ticks;if(e.display&&t.display){const n=qa(e.backdropPadding);return mn(e.font&&e.font.size,ns.font.size)+n.height}return 0}function eft(t,e,n){return n=Qr(n)?n:[n],{w:act(t,e.string,n),h:n.length*e.lineHeight}}function ZG(t,e,n,r,s){return t===r||t===s?{start:e-n/2,end:e+n/2}:t<r||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function tft(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],s=[],i=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?Yn/i:0;for(let l=0;l<i;l++){const c=a.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],o),d=bi(c.font),h=eft(t.ctx,d,t._pointLabels[l]);r[l]=h;const f=ja(t.getIndexAngle(l)+o),m=Math.round(Jz(f)),y=ZG(m,u.x,h.w,0,180),v=ZG(m,u.y,h.h,90,270);nft(n,e,f,y,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=ift(t,r,s)}function nft(t,e,n,r,s){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<e.l?(o=(e.l-r.start)/i,t.l=Math.min(t.l,e.l-o)):r.end>e.r&&(o=(r.end-e.r)/i,t.r=Math.max(t.r,e.r+o)),s.start<e.t?(l=(e.t-s.start)/a,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function rft(t,e,n){const r=t.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=n,l=t.getPointPosition(e,r+s+a,i),c=Math.round(Jz(ja(l.angle+Ms))),u=lft(l.y,o.h,c),d=aft(c),h=oft(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function sft(t,e){if(!e)return!0;const{left:n,top:r,right:s,bottom:i}=t;return!(Bh({x:n,y:r},e)||Bh({x:n,y:i},e)||Bh({x:s,y:r},e)||Bh({x:s,y:i},e))}function ift(t,e,n){const r=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:UD(i)/2,additionalAngle:a?Yn/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const d=rft(t,u,l);r.push(d),o==="auto"&&(d.visible=sft(d,c),d.visible&&(c=d))}return r}function aft(t){return t===0||t===180?"center":t<180?"left":"right"}function oft(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function lft(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function cft(t,e,n){const{left:r,top:s,right:i,bottom:a}=n,{backdropColor:o}=e;if(!En(o)){const l=r0(e.borderRadius),c=qa(e.backdropPadding);t.fillStyle=o;const u=r-c.left,d=s-c.top,h=i-r+c.width,f=a-s+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),l_(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function uft(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const a=r.setContext(t.getPointLabelContext(s));cft(n,a,i);const o=bi(a.font),{x:l,y:c,textAlign:u}=i;W0(n,t._pointLabels[s],l,c+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function bhe(t,e,n,r){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Vr);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let a=1;a<r;a++)i=t.getPointPosition(a,e),s.lineTo(i.x,i.y)}}function dft(t,e,n,r,s){const i=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!r||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),bhe(t,n,a,r),i.closePath(),i.stroke(),i.restore())}function hft(t,e,n){return Dm(t,{label:n,index:e,type:"pointLabel"})}class _w extends oI{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=qa(UD(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ks(e)&&!isNaN(e)?e:0,this.max=ks(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/UD(this.options))}generateTickLabels(e){oI.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const s=Pr(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?tft(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,s))}getIndexAngle(e){const n=Vr/(this._pointLabels.length||1),r=this.options.startAngle||0;return ja(e*n+Tu(r))}getDistanceFromCenterForValue(e){if(En(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(En(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return hft(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const s=this.getIndexAngle(e)-Ms+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:s,bottom:i}=this._pointLabelItems[e];return{left:n,top:r,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),bhe(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:s,border:i}=n,a=this._pointLabels.length;let o,l,c;if(n.pointLabels.display&&uft(this,a),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=s.setContext(h),m=i.setContext(h);dft(this,f,l,a,m)}}),r.display){for(e.save(),o=a-1;o>=0;o--){const u=r.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=bi(c.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=qa(c.backdropPadding);e.fillRect(-a/2-d.left,-i-u.size/2-d.top,a+d.width,u.size+d.height)}W0(e,o.label,0,-i,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}vt(_w,"id","radialLinear"),vt(_w,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:UP.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),vt(_w,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),vt(_w,"descriptors",{angleLines:{_fallback:"grid"}});const YP={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zo=Object.keys(YP);function JG(t,e){return t-e}function QG(t,e){if(En(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),ks(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(s&&(a=s==="week"&&(Tx(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,s)),+a)}function eK(t,e,n,r){const s=Zo.length;for(let i=Zo.indexOf(t);i<s-1;++i){const a=YP[Zo[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-e)/(o*a.size))<=r)return Zo[i]}return Zo[s-1]}function fft(t,e,n,r,s){for(let i=Zo.length-1;i>=Zo.indexOf(n);i--){const a=Zo[i];if(YP[a].common&&t._adapter.diff(s,r,a)>=e-1)return a}return Zo[n?Zo.indexOf(n):0]}function pft(t){for(let e=Zo.indexOf(t)+1,n=Zo.length;e<n;++e)if(YP[Zo[e]].common)return Zo[e]}function tK(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Qz(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function mft(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),a=e[e.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(e[l].major=!0);return e}function nK(t,e,n){const r=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,r.push({value:o,major:!1});return i===0||!n?r:mft(t,r,s,n)}class d_ extends hy{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new kut._date(e.adapters.date);s.init(n),zw(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:QG(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!o&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ks(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=ks(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=Glt(s,i,a);return this._unit=n.unit||(r.autoSkip?eK(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):fft(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:pft(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),nK(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;n=Fi(n,0,a),r=Fi(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,a=i.unit||eK(i.minUnit,n,r,this._getLabelCapacity(n)),o=mn(s.ticks.stepSize,1),l=a==="week"?i.isoWeekday:!1,c=Tx(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(r,n,a)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+a);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,o,a),f++)tK(u,h,m);return(h===r||s.bounds==="ticks"||f===1)&&tK(u,h,m),Object.keys(u).sort(JG).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,a=n||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,s){const i=this.options,a=i.ticks.callback;if(a)return Pr(a,[e,n,r],this);const o=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],d=c&&o[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,s||(f?d:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Tu(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:r*i+o*a,h:r*a+o*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,nK(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(QG(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ode(e.sort(JG))}}vt(d_,"id","time"),vt(d_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function iC(t,e,n){let r=0,s=t.length-1,i,a,o,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=zh(t,"pos",e)),{pos:i,time:o}=t[r],{pos:a,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=zh(t,"time",e)),{time:i,pos:o}=t[r],{time:a,pos:l}=t[s]);const c=a-i;return c?o+(l-o)*(e-i)/c:o}class VD extends d_{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=iC(n,this.min),this._tableRange=iC(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;++a)c=e[a],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,o=s.length;a<o;++a)u=s[a+1],l=s[a-1],c=s[a],Math.round((u+l)/2)!==c&&i.push({time:c,pos:a/(o-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(iC(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return iC(this._table,r*this._tableRange+this._minPos,!0)}}vt(VD,"id","timeseries"),vt(VD,"defaults",d_.defaults);var gft=Object.freeze({__proto__:null,CategoryScale:zD,LinearScale:BD,LogarithmicScale:WD,RadialLinearScale:_w,TimeScale:d_,TimeSeriesScale:VD});const yft=[_ut,Jdt,Ght,gft];KP.register(...yft);const whe="label";function rK(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function vft(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function _he(t,e){t.labels=e}function khe(t,e,n=whe){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(a=>a[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function xft(t,e=whe){const n={labels:[],datasets:[]};return _he(n,t.labels),khe(n,t.datasets,e),n}function bft(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:a,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=R.useRef(null),m=R.useRef(null),y=()=>{f.current&&(m.current=new KP(f.current,{type:a,data:xft(o,i),options:l&&{...l},plugins:c}),rK(e,m.current))},v=()=>{rK(e,null),m.current&&(m.current.destroy(),m.current=null)};return R.useEffect(()=>{!s&&m.current&&l&&vft(m.current,l)},[s,l]),R.useEffect(()=>{!s&&m.current&&_he(m.current.config.data,o.labels)},[s,o.labels]),R.useEffect(()=>{!s&&m.current&&o.datasets&&khe(m.current.config.data,o.datasets,i)},[s,o.datasets]),R.useEffect(()=>{m.current&&(s?(v(),setTimeout(y)):m.current.update(d))},[s,l,o.labels,o.datasets,d]),R.useEffect(()=>{m.current&&(v(),setTimeout(y))},[a]),R.useEffect(()=>(y(),()=>v()),[]),p.jsx("canvas",{ref:f,role:"img",height:n,width:r,...h,children:u})}const wft=R.forwardRef(bft);function u8(t,e){return KP.register(e),R.forwardRef((n,r)=>p.jsx(wft,{...n,ref:r,type:t}))}const _ft=u8("line",Hw),sK=u8("bar",Vw),kft=u8("pie",sI);var She={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Ac,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},l=0,c={};function u(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(P){var $=N(P);$.chunkSize=parseInt($.chunkSize),P.step||P.chunk||($.chunkSize=null),this._handle=new y($),(this._handle.streamer=this)._config=$}).call(this,C),this.parseChunk=function(P,$){var j=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<j){let F=this._config.newline;F||(O=this._config.quoteChar||'"',F=this._handle.guessLineEndings(P,O)),P=[...P.split(F).slice(j)].join(F)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(P))!==void 0&&(P=O),this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+P,O=(this._partialLine="",this._handle.parse(j,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(P=O.meta.cursor,j=(this._finished||(this._partialLine=j.substring(P-this._baseIndex),this._baseIndex=P),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:O,workerId:c.WORKER_ID,finished:j});else if(T(this._config.chunk)&&!$){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!j||!T(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(P){T(this._config.error)?this._config.error(P):a&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:P,finished:!1})}}function d(C){var P;(C=C||{}).chunkSize||(C.chunkSize=c.RemoteChunkSize),u.call(this,C),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function($){this._input=$,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(P=new XMLHttpRequest,this._config.withCredentials&&(P.withCredentials=this._config.withCredentials),i||(P.onload=A(this._chunkLoaded,this),P.onerror=A(this._chunkError,this)),P.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var $,j=this._config.downloadRequestHeaders;for($ in j)P.setRequestHeader($,j[$])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,P.setRequestHeader("Range","bytes="+this._start+"-"+O));try{P.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}i&&P.status===0&&this._chunkError()}},this._chunkLoaded=function(){P.readyState===4&&(P.status<200||400<=P.status?this._chunkError():(this._start+=this._config.chunkSize||P.responseText.length,this._finished=!this._config.chunkSize||this._start>=($=>($=$.getResponseHeader("Content-Range"))!==null?parseInt($.substring($.lastIndexOf("/")+1)):-1)(P),this.parseChunk(P.responseText)))},this._chunkError=function($){$=P.statusText||$,this._sendError(new Error($))}}function h(C){(C=C||{}).chunkSize||(C.chunkSize=c.LocalChunkSize),u.call(this,C);var P,$,j=typeof FileReader<"u";this.stream=function(O){this._input=O,$=O.slice||O.webkitSlice||O.mozSlice,j?((P=new FileReader).onload=A(this._chunkLoaded,this),P.onerror=A(this._chunkError,this)):P=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,F=(this._config.chunkSize&&(F=Math.min(this._start+this._config.chunkSize,this._input.size),O=$.call(O,this._start,F)),P.readAsText(O,this._config.encoding));j||this._chunkLoaded({target:{result:F}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(P.error)}}function f(C){var P;u.call(this,C=C||{}),this.stream=function($){return P=$,this._nextChunk()},this._nextChunk=function(){var $,j;if(!this._finished)return $=this._config.chunkSize,P=$?(j=P.substring(0,$),P.substring($)):(j=P,""),this._finished=!P,this.parseChunk(j)}}function m(C){u.call(this,C=C||{});var P=[],$=!0,j=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){j&&P.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),P.length?this.parseChunk(P.shift()):$=!0},this._streamData=A(function(O){try{P.push(typeof O=="string"?O:O.toString(this._config.encoding)),$&&($=!1,this._checkIsFinished(),this.parseChunk(P.shift()))}catch(F){this._streamError(F)}},this),this._streamError=A(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=A(function(){this._streamCleanUp(),j=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(C){var P,$,j,O,F=Math.pow(2,53),B=-F,Z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,U=0,K=0,ee=!1,oe=!1,W=[],Y={data:[],errors:[],meta:{}};function Q(ge){return C.skipEmptyLines==="greedy"?ge.join("").trim()==="":ge.length===1&&ge[0].length===0}function J(){if(Y&&j&&(me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),j=!1),C.skipEmptyLines&&(Y.data=Y.data.filter(function(_e){return!Q(_e)})),te()){let _e=function(we,He){T(C.transformHeader)&&(we=C.transformHeader(we,He)),W.push(we)};if(Y)if(Array.isArray(Y.data[0])){for(var ge=0;te()&&ge<Y.data.length;ge++)Y.data[ge].forEach(_e);Y.data.splice(0,1)}else Y.data.forEach(_e)}function ce(_e,we){for(var He=C.header?{}:[],Qe=0;Qe<_e.length;Qe++){var Ae=Qe,he=_e[Qe],he=((ht,Me)=>(Ve=>(C.dynamicTypingFunction&&C.dynamicTyping[Ve]===void 0&&(C.dynamicTyping[Ve]=C.dynamicTypingFunction(Ve)),(C.dynamicTyping[Ve]||C.dynamicTyping)===!0))(ht)?Me==="true"||Me==="TRUE"||Me!=="false"&&Me!=="FALSE"&&((Ve=>{if(Z.test(Ve)&&(Ve=parseFloat(Ve),B<Ve&&Ve<F))return 1})(Me)?parseFloat(Me):V.test(Me)?new Date(Me):Me===""?null:Me):Me)(Ae=C.header?Qe>=W.length?"__parsed_extra":W[Qe]:Ae,he=C.transform?C.transform(he,Ae):he);Ae==="__parsed_extra"?(He[Ae]=He[Ae]||[],He[Ae].push(he)):He[Ae]=he}return C.header&&(Qe>W.length?me("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+Qe,K+we):Qe<W.length&&me("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+Qe,K+we)),He}var Ce;Y&&(C.header||C.dynamicTyping||C.transform)&&(Ce=1,!Y.data.length||Array.isArray(Y.data[0])?(Y.data=Y.data.map(ce),Ce=Y.data.length):Y.data=ce(Y.data,0),C.header&&Y.meta&&(Y.meta.fields=W),K+=Ce)}function te(){return C.header&&W.length===0}function me(ge,ce,Ce,_e){ge={type:ge,code:ce,message:Ce},_e!==void 0&&(ge.row=_e),Y.errors.push(ge)}T(C.step)&&(O=C.step,C.step=function(ge){Y=ge,te()?J():(J(),Y.data.length!==0&&(U+=ge.data.length,C.preview&&U>C.preview?$.abort():(Y.data=Y.data[0],O(Y,G))))}),this.parse=function(ge,ce,Ce){var _e=C.quoteChar||'"',_e=(C.newline||(C.newline=this.guessLineEndings(ge,_e)),j=!1,C.delimiter?T(C.delimiter)&&(C.delimiter=C.delimiter(ge),Y.meta.delimiter=C.delimiter):((_e=((we,He,Qe,Ae,he)=>{var ht,Me,Ve,nt;he=he||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var pe=0;pe<he.length;pe++){for(var xe,je=he[pe],qe=0,Ge=0,Ue=0,st=(Ve=void 0,new x({comments:Ae,delimiter:je,newline:He,preview:10}).parse(we)),wt=0;wt<st.data.length;wt++)Qe&&Q(st.data[wt])?Ue++:(xe=st.data[wt].length,Ge+=xe,Ve===void 0?Ve=xe:0<xe&&(qe+=Math.abs(xe-Ve),Ve=xe));0<st.data.length&&(Ge/=st.data.length-Ue),(Me===void 0||qe<=Me)&&(nt===void 0||nt<Ge)&&1.99<Ge&&(Me=qe,ht=je,nt=Ge)}return{successful:!!(C.delimiter=ht),bestDelimiter:ht}})(ge,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=_e.bestDelimiter:(j=!0,C.delimiter=c.DefaultDelimiter),Y.meta.delimiter=C.delimiter),N(C));return C.preview&&C.header&&_e.preview++,P=ge,$=new x(_e),Y=$.parse(P,ce,Ce),J(),ee?{meta:{paused:!0}}:Y||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,$.abort(),P=T(C.chunk)?"":P.substring($.getCharIndex())},this.resume=function(){G.streamer._halted?(ee=!1,G.streamer.parseChunk(P,!0)):setTimeout(G.resume,3)},this.aborted=function(){return oe},this.abort=function(){oe=!0,$.abort(),Y.meta.aborted=!0,T(C.complete)&&C.complete(Y),P=""},this.guessLineEndings=function(we,_e){we=we.substring(0,1048576);var _e=new RegExp(v(_e)+"([^]*?)"+v(_e),"gm"),Ce=(we=we.replace(_e,"")).split("\r"),_e=we.split(`
`),we=1<_e.length&&_e[0].length<Ce[0].length;if(Ce.length===1||we)return`
`;for(var He=0,Qe=0;Qe<Ce.length;Qe++)Ce[Qe][0]===`
`&&He++;return He>=Ce.length/2?`\r
`:"\r"}}function v(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(C){var P=(C=C||{}).delimiter,$=C.newline,j=C.comments,O=C.step,F=C.preview,B=C.fastMode,Z=null,V=!1,G=C.quoteChar==null?'"':C.quoteChar,U=G;if(C.escapeChar!==void 0&&(U=C.escapeChar),(typeof P!="string"||-1<c.BAD_DELIMITERS.indexOf(P))&&(P=","),j===P)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<c.BAD_DELIMITERS.indexOf(j))&&(j=!1),$!==`
`&&$!=="\r"&&$!==`\r
`&&($=`
`);var K=0,ee=!1;this.parse=function(oe,W,Y){if(typeof oe!="string")throw new Error("Input must be a string");var Q=oe.length,J=P.length,te=$.length,me=j.length,ge=T(O),ce=[],Ce=[],_e=[],we=K=0;if(!oe)return qe();if(B||B!==!1&&oe.indexOf(G)===-1){for(var He=oe.split($),Qe=0;Qe<He.length;Qe++){if(_e=He[Qe],K+=_e.length,Qe!==He.length-1)K+=$.length;else if(Y)return qe();if(!j||_e.substring(0,me)!==j){if(ge){if(ce=[],nt(_e.split(P)),Ge(),ee)return qe()}else nt(_e.split(P));if(F&&F<=Qe)return ce=ce.slice(0,F),qe(!0)}}return qe()}for(var Ae=oe.indexOf(P,K),he=oe.indexOf($,K),ht=new RegExp(v(U)+v(G),"g"),Me=oe.indexOf(G,K);;)if(oe[K]===G)for(Me=K,K++;;){if((Me=oe.indexOf(G,Me+1))===-1)return Y||Ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:K}),xe();if(Me===Q-1)return xe(oe.substring(K,Me).replace(ht,G));if(G===U&&oe[Me+1]===U)Me++;else if(G===U||Me===0||oe[Me-1]!==U){Ae!==-1&&Ae<Me+1&&(Ae=oe.indexOf(P,Me+1));var Ve=pe((he=he!==-1&&he<Me+1?oe.indexOf($,Me+1):he)===-1?Ae:Math.min(Ae,he));if(oe.substr(Me+1+Ve,J)===P){_e.push(oe.substring(K,Me).replace(ht,G)),oe[K=Me+1+Ve+J]!==G&&(Me=oe.indexOf(G,K)),Ae=oe.indexOf(P,K),he=oe.indexOf($,K);break}if(Ve=pe(he),oe.substring(Me+1+Ve,Me+1+Ve+te)===$){if(_e.push(oe.substring(K,Me).replace(ht,G)),je(Me+1+Ve+te),Ae=oe.indexOf(P,K),Me=oe.indexOf(G,K),ge&&(Ge(),ee))return qe();if(F&&ce.length>=F)return qe(!0);break}Ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:K}),Me++}}else if(j&&_e.length===0&&oe.substring(K,K+me)===j){if(he===-1)return qe();K=he+te,he=oe.indexOf($,K),Ae=oe.indexOf(P,K)}else if(Ae!==-1&&(Ae<he||he===-1))_e.push(oe.substring(K,Ae)),K=Ae+J,Ae=oe.indexOf(P,K);else{if(he===-1)break;if(_e.push(oe.substring(K,he)),je(he+te),ge&&(Ge(),ee))return qe();if(F&&ce.length>=F)return qe(!0)}return xe();function nt(Ue){ce.push(Ue),we=K}function pe(Ue){var st=0;return st=Ue!==-1&&(Ue=oe.substring(Me+1,Ue))&&Ue.trim()===""?Ue.length:st}function xe(Ue){return Y||(Ue===void 0&&(Ue=oe.substring(K)),_e.push(Ue),K=Q,nt(_e),ge&&Ge()),qe()}function je(Ue){K=Ue,nt(_e),_e=[],he=oe.indexOf($,K)}function qe(Ue){if(C.header&&!W&&ce.length&&!V){var st=ce[0],wt=Object.create(null),gt=new Set(st);let zt=!1;for(let ft=0;ft<st.length;ft++){let wn=st[ft];if(wt[wn=T(C.transformHeader)?C.transformHeader(wn,ft):wn]){let nn,qr=wt[wn];for(;nn=wn+"_"+qr,qr++,gt.has(nn););gt.add(nn),st[ft]=nn,wt[wn]++,zt=!0,(Z=Z===null?{}:Z)[nn]=wn}else wt[wn]=1,st[ft]=wn;gt.add(wn)}zt&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:ce,errors:Ce,meta:{delimiter:P,linebreak:$,aborted:ee,truncated:!!Ue,cursor:we+(W||0),renamedHeaders:Z}}}function Ge(){O(qe()),ce=[],Ce=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return K}}function b(C){var P=C.data,$=o[P.workerId],j=!1;if(P.error)$.userError(P.error,P.file);else if(P.results&&P.results.data){var O={abort:function(){j=!0,_(P.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:k,resume:k};if(T($.userStep)){for(var F=0;F<P.results.data.length&&($.userStep({data:P.results.data[F],errors:P.results.errors,meta:P.results.meta},O),!j);F++);delete P.results}else T($.userChunk)&&($.userChunk(P.results,O,P.file),delete P.results)}P.finished&&!j&&_(P.workerId,P.results)}function _(C,P){var $=o[C];T($.userComplete)&&$.userComplete(P),$.terminate(),delete o[C]}function k(){throw new Error("Not implemented.")}function N(C){if(typeof C!="object"||C===null)return C;var P,$=Array.isArray(C)?[]:{};for(P in C)$[P]=N(C[P]);return $}function A(C,P){return function(){C.apply(P,arguments)}}function T(C){return typeof C=="function"}return c.parse=function(C,P){var $=(P=P||{}).dynamicTyping||!1;if(T($)&&(P.dynamicTypingFunction=$,$={}),P.dynamicTyping=$,P.transform=!!T(P.transform)&&P.transform,!P.worker||!c.WORKERS_SUPPORTED)return $=null,c.NODE_STREAM_INPUT,typeof C=="string"?(C=(j=>j.charCodeAt(0)!==65279?j:j.slice(1))(C),$=new(P.download?d:f)(P)):C.readable===!0&&T(C.read)&&T(C.on)?$=new m(P):(r.File&&C instanceof File||C instanceof Object)&&($=new h(P)),$.stream(C);($=(()=>{var j;return!!c.WORKERS_SUPPORTED&&(j=(()=>{var O=r.URL||r.webkitURL||null,F=n.toString();return c.BLOB_URL||(c.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))})(),(j=new r.Worker(j)).onmessage=b,j.id=l++,o[j.id]=j)})()).userStep=P.step,$.userChunk=P.chunk,$.userComplete=P.complete,$.userError=P.error,P.step=T(P.step),P.chunk=T(P.chunk),P.complete=T(P.complete),P.error=T(P.error),delete P.worker,$.postMessage({input:C,config:P,workerId:$.id})},c.unparse=function(C,P){var $=!1,j=!0,O=",",F=`\r
`,B='"',Z=B+B,V=!1,G=null,U=!1,K=((()=>{if(typeof P=="object"){if(typeof P.delimiter!="string"||c.BAD_DELIMITERS.filter(function(W){return P.delimiter.indexOf(W)!==-1}).length||(O=P.delimiter),typeof P.quotes!="boolean"&&typeof P.quotes!="function"&&!Array.isArray(P.quotes)||($=P.quotes),typeof P.skipEmptyLines!="boolean"&&typeof P.skipEmptyLines!="string"||(V=P.skipEmptyLines),typeof P.newline=="string"&&(F=P.newline),typeof P.quoteChar=="string"&&(B=P.quoteChar),typeof P.header=="boolean"&&(j=P.header),Array.isArray(P.columns)){if(P.columns.length===0)throw new Error("Option columns is empty");G=P.columns}P.escapeChar!==void 0&&(Z=P.escapeChar+B),P.escapeFormulae instanceof RegExp?U=P.escapeFormulae:typeof P.escapeFormulae=="boolean"&&P.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(B),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return ee(null,C,V);if(typeof C[0]=="object")return ee(G||Object.keys(C[0]),C,V)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||G),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),ee(C.fields||[],C.data||[],V);throw new Error("Unable to serialize unrecognized input");function ee(W,Y,Q){var J="",te=(typeof W=="string"&&(W=JSON.parse(W)),typeof Y=="string"&&(Y=JSON.parse(Y)),Array.isArray(W)&&0<W.length),me=!Array.isArray(Y[0]);if(te&&j){for(var ge=0;ge<W.length;ge++)0<ge&&(J+=O),J+=oe(W[ge],ge);0<Y.length&&(J+=F)}for(var ce=0;ce<Y.length;ce++){var Ce=(te?W:Y[ce]).length,_e=!1,we=te?Object.keys(Y[ce]).length===0:Y[ce].length===0;if(Q&&!te&&(_e=Q==="greedy"?Y[ce].join("").trim()==="":Y[ce].length===1&&Y[ce][0].length===0),Q==="greedy"&&te){for(var He=[],Qe=0;Qe<Ce;Qe++){var Ae=me?W[Qe]:Qe;He.push(Y[ce][Ae])}_e=He.join("").trim()===""}if(!_e){for(var he=0;he<Ce;he++){0<he&&!we&&(J+=O);var ht=te&&me?W[he]:he;J+=oe(Y[ce][ht],he)}ce<Y.length-1&&(!Q||0<Ce&&!we)&&(J+=F)}}return J}function oe(W,Y){var Q,J;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(J=!1,U&&typeof W=="string"&&U.test(W)&&(W="'"+W,J=!0),Q=W.toString().replace(K,Z),(J=J||$===!0||typeof $=="function"&&$(W,Y)||Array.isArray($)&&$[Y]||((te,me)=>{for(var ge=0;ge<me.length;ge++)if(-1<te.indexOf(me[ge]))return!0;return!1})(Q,c.BAD_DELIMITERS)||-1<Q.indexOf(O)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?B+Q+B:Q)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=x,c.ParserHandle=y,c.NetworkStreamer=d,c.FileStreamer=h,c.StringStreamer=f,c.ReadableStreamStreamer=m,r.jQuery&&((s=r.jQuery).fn.parse=function(C){var P=C.config||{},$=[];return this.each(function(F){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)$.push({file:this.files[B],inputElem:this,instanceConfig:s.extend({},P)})}),j(),this;function j(){if($.length===0)T(C.complete)&&C.complete();else{var F,B,Z,V,G=$[0];if(T(C.before)){var U=C.before(G.file,G.inputElem);if(typeof U=="object"){if(U.action==="abort")return F="AbortError",B=G.file,Z=G.inputElem,V=U.reason,void(T(C.error)&&C.error({name:F},B,Z,V));if(U.action==="skip")return void O();typeof U.config=="object"&&(G.instanceConfig=s.extend(G.instanceConfig,U.config))}else if(U==="skip")return void O()}var K=G.instanceConfig.complete;G.instanceConfig.complete=function(ee){T(K)&&K(ee,G.file,G.inputElem),O()},c.parse(G.file,G.instanceConfig)}}function O(){$.splice(0,1),j()}}),a&&(r.onmessage=function(C){C=C.data,c.WORKER_ID===void 0&&C&&(c.WORKER_ID=C.workerId),typeof C.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(C.input,C.config),finished:!0}):(r.File&&C.input instanceof File||C.input instanceof Object)&&(C=c.parse(C.input,C.config))&&r.postMessage({workerId:c.WORKER_ID,results:C,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(h.prototype=Object.create(u.prototype)).constructor=h,(f.prototype=Object.create(f.prototype)).constructor=f,(m.prototype=Object.create(u.prototype)).constructor=m,c})})(She);var Sft=She.exports;const Nft=Bc(Sft);function fr(t){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(t)}var Fa=Uint8Array,jl=Uint16Array,d8=Int32Array,ZP=new Fa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JP=new Fa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HD=new Fa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nhe=function(t,e){for(var n=new jl(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new d8(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Che=Nhe(ZP,2),The=Che.b,qD=Che.r;The[28]=258,qD[258]=28;var Ihe=Nhe(JP,0),Cft=Ihe.b,iK=Ihe.r,GD=new jl(32768);for(var Br=0;Br<32768;++Br){var rp=(Br&43690)>>1|(Br&21845)<<1;rp=(rp&52428)>>2|(rp&13107)<<2,rp=(rp&61680)>>4|(rp&3855)<<4,GD[Br]=((rp&65280)>>8|(rp&255)<<8)>>1}var zd=function(t,e,n){for(var r=t.length,s=0,i=new jl(e);s<r;++s)t[s]&&++i[t[s]-1];var a=new jl(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(n){o=new jl(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],d=a[t[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[GD[d]>>l]=c}else for(o=new jl(r),s=0;s<r;++s)t[s]&&(o[s]=GD[a[t[s]-1]++]>>15-t[s]);return o},mm=new Fa(288);for(var Br=0;Br<144;++Br)mm[Br]=8;for(var Br=144;Br<256;++Br)mm[Br]=9;for(var Br=256;Br<280;++Br)mm[Br]=7;for(var Br=280;Br<288;++Br)mm[Br]=8;var h_=new Fa(32);for(var Br=0;Br<32;++Br)h_[Br]=5;var Tft=zd(mm,9,0),Ift=zd(mm,9,1),Aft=zd(h_,5,0),Eft=zd(h_,5,1),s4=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},lu=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},i4=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},h8=function(t){return(t+7)/8|0},Ahe=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Fa(t.subarray(e,n))},Pft=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gu=function(t,e,n){var r=new Error(e||Pft[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gu),!n)throw r;return r},Oft=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new Fa(0);var a=!n,o=a||e.i!=2,l=e.i;a&&(n=new Fa(s*3));var c=function(_e){var we=n.length;if(_e>we){var He=new Fa(Math.max(we*2,_e));He.set(n),n=He}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,m=e.d,y=e.m,v=e.n,x=s*8;do{if(!f){u=lu(t,d,1);var b=lu(t,d+1,3);if(d+=3,b)if(b==1)f=Ift,m=Eft,y=9,v=5;else if(b==2){var A=lu(t,d,31)+257,T=lu(t,d+10,15)+4,C=A+lu(t,d+5,31)+1;d+=14;for(var P=new Fa(C),$=new Fa(19),j=0;j<T;++j)$[HD[j]]=lu(t,d+j*3,7);d+=T*3;for(var O=s4($),F=(1<<O)-1,B=zd($,O,1),j=0;j<C;){var Z=B[lu(t,d,F)];d+=Z&15;var _=Z>>4;if(_<16)P[j++]=_;else{var V=0,G=0;for(_==16?(G=3+lu(t,d,3),d+=2,V=P[j-1]):_==17?(G=3+lu(t,d,7),d+=3):_==18&&(G=11+lu(t,d,127),d+=7);G--;)P[j++]=V}}var U=P.subarray(0,A),K=P.subarray(A);y=s4(U),v=s4(K),f=zd(U,y,1),m=zd(K,v,1)}else gu(1);else{var _=h8(d)+4,k=t[_-4]|t[_-3]<<8,N=_+k;if(N>s){l&&gu(0);break}o&&c(h+k),n.set(t.subarray(_,N),h),e.b=h+=k,e.p=d=N*8,e.f=u;continue}if(d>x){l&&gu(0);break}}o&&c(h+131072);for(var ee=(1<<y)-1,oe=(1<<v)-1,W=d;;W=d){var V=f[i4(t,d)&ee],Y=V>>4;if(d+=V&15,d>x){l&&gu(0);break}if(V||gu(2),Y<256)n[h++]=Y;else if(Y==256){W=d,f=null;break}else{var Q=Y-254;if(Y>264){var j=Y-257,J=ZP[j];Q=lu(t,d,(1<<J)-1)+The[j],d+=J}var te=m[i4(t,d)&oe],me=te>>4;te||gu(3),d+=te&15;var K=Cft[me];if(me>3){var J=JP[me];K+=i4(t,d)&(1<<J)-1,d+=J}if(d>x){l&&gu(0);break}o&&c(h+131072);var ge=h+Q;if(h<K){var ce=i-K,Ce=Math.min(K,ge);for(ce+h<0&&gu(3);h<Ce;++h)n[h]=r[ce+h]}for(;h<ge;++h)n[h]=n[h-K]}}e.l=f,e.p=W,e.b=h,e.f=u,f&&(u=1,e.m=y,e.d=m,e.n=v)}while(!u);return h!=n.length&&a?Ahe(n,0,h):n.subarray(0,h)},_h=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ew=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},a4=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:Phe,l:0};if(s==1){var a=new Fa(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(N,A){return N.f-A.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=i[0].s,r=1;r<s;++r)i[r].s>h&&(h=i[r].s);var f=new jl(h+1),m=KD(n[u-1],f,0);if(m>e){var r=0,y=0,v=m-e,x=1<<v;for(i.sort(function(A,T){return f[T.s]-f[A.s]||A.f-T.f});r<s;++r){var b=i[r].s;if(f[b]>e)y+=x-(1<<m-f[b]),f[b]=e;else break}for(y>>=v;y>0;){var _=i[r].s;f[_]<e?y-=1<<e-f[_]++-1:++r}for(;r>=0&&y;--r){var k=i[r].s;f[k]==e&&(--f[k],++y)}m=e}return{t:new Fa(f),l:m}},KD=function(t,e,n){return t.s==-1?Math.max(KD(t.l,e,n+1),KD(t.r,e,n+1)):e[t.s]=n},aK=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new jl(++e),r=0,s=t[0],i=1,a=function(l){n[r++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:n.subarray(0,r),n:e}},tw=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Ehe=function(t,e,n){var r=n.length,s=h8(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},oK=function(t,e,n,r,s,i,a,o,l,c,u){_h(e,u++,n),++s[256];for(var d=a4(s,15),h=d.t,f=d.l,m=a4(i,15),y=m.t,v=m.l,x=aK(h),b=x.c,_=x.n,k=aK(y),N=k.c,A=k.n,T=new jl(19),C=0;C<b.length;++C)++T[b[C]&31];for(var C=0;C<N.length;++C)++T[N[C]&31];for(var P=a4(T,7),$=P.t,j=P.l,O=19;O>4&&!$[HD[O-1]];--O);var F=c+5<<3,B=tw(s,mm)+tw(i,h_)+a,Z=tw(s,h)+tw(i,y)+a+14+3*O+tw(T,$)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&F<=B&&F<=Z)return Ehe(e,u,t.subarray(l,l+c));var V,G,U,K;if(_h(e,u,1+(Z<B)),u+=2,Z<B){V=zd(h,f,0),G=h,U=zd(y,v,0),K=y;var ee=zd($,j,0);_h(e,u,_-257),_h(e,u+5,A-1),_h(e,u+10,O-4),u+=14;for(var C=0;C<O;++C)_h(e,u+3*C,$[HD[C]]);u+=3*O;for(var oe=[b,N],W=0;W<2;++W)for(var Y=oe[W],C=0;C<Y.length;++C){var Q=Y[C]&31;_h(e,u,ee[Q]),u+=$[Q],Q>15&&(_h(e,u,Y[C]>>5&127),u+=Y[C]>>12)}}else V=Tft,G=mm,U=Aft,K=h_;for(var C=0;C<o;++C){var J=r[C];if(J>255){var Q=J>>18&31;ew(e,u,V[Q+257]),u+=G[Q+257],Q>7&&(_h(e,u,J>>23&31),u+=ZP[Q]);var te=J&31;ew(e,u,U[te]),u+=K[te],te>3&&(ew(e,u,J>>5&8191),u+=JP[te])}else ew(e,u,V[J]),u+=G[J]}return ew(e,u,V[256]),u+G[256]},jft=new d8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Phe=new Fa(0),$ft=function(t,e,n,r,s,i){var a=i.z||t.length,o=new Fa(r+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(r,o.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var d=jft[e-1],h=d>>13,f=d&8191,m=(1<<n)-1,y=i.p||new jl(32768),v=i.h||new jl(m+1),x=Math.ceil(n/3),b=2*x,_=function(Qe){return(t[Qe]^t[Qe+1]<<x^t[Qe+2]<<b)&m},k=new d8(25e3),N=new jl(288),A=new jl(32),T=0,C=0,P=i.i||0,$=0,j=i.w||0,O=0;P+2<a;++P){var F=_(P),B=P&32767,Z=v[F];if(y[B]=Z,v[F]=B,j<=P){var V=a-P;if((T>7e3||$>24576)&&(V>423||!c)){u=oK(t,l,0,k,N,A,C,$,O,P-O,u),$=T=C=0,O=P;for(var G=0;G<286;++G)N[G]=0;for(var G=0;G<30;++G)A[G]=0}var U=2,K=0,ee=f,oe=B-Z&32767;if(V>2&&F==_(P-oe))for(var W=Math.min(h,V)-1,Y=Math.min(32767,P),Q=Math.min(258,V);oe<=Y&&--ee&&B!=Z;){if(t[P+U]==t[P+U-oe]){for(var J=0;J<Q&&t[P+J]==t[P+J-oe];++J);if(J>U){if(U=J,K=oe,J>W)break;for(var te=Math.min(oe,J-2),me=0,G=0;G<te;++G){var ge=P-oe+G&32767,ce=y[ge],Ce=ge-ce&32767;Ce>me&&(me=Ce,Z=ge)}}}B=Z,Z=y[B],oe+=B-Z&32767}if(K){k[$++]=268435456|qD[U]<<18|iK[K];var _e=qD[U]&31,we=iK[K]&31;C+=ZP[_e]+JP[we],++N[257+_e],++A[we],j=P+U,++T}else k[$++]=t[P],++N[t[P]]}}for(P=Math.max(P,j);P<a;++P)k[$++]=t[P],++N[t[P]];u=oK(t,l,c,k,N,A,C,$,O,P-O,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=v,i.p=y,i.i=P,i.w=j)}else{for(var P=i.w||0;P<a+c;P+=65535){var He=P+65535;He>=a&&(l[u/8|0]=c,He=a),u=Ehe(l,u+1,t.subarray(P,He))}i.i=a}return Ahe(o,0,r+h8(u)+s)},Ohe=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=n[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Dft=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Fa(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return $ft(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},jhe=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Lft=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=Ohe();s.p(e.dictionary),jhe(t,2,s.d())}},Rft=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gu(6,"invalid zlib data"),(t[1]>>5&1)==1&&gu(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function XD(t,e){e||(e={});var n=Ohe();n.p(t);var r=Dft(t,e,e.dictionary?6:2,4);return Lft(r,e),jhe(r,r.length-4,n.d()),r}function Mft(t,e){return Oft(t.subarray(Rft(t),-4),{i:2},e,e)}var Fft=typeof TextDecoder<"u"&&new TextDecoder,zft=0;try{Fft.decode(Phe,{stream:!0}),zft=1}catch{}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function o4(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var kr={log:o4,warn:function(t){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):o4.call(null,arguments))},error:function(t){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):o4(t))}};function l4(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ng(r.response,e,n)},r.onerror=function(){kr.error("could not download file")},r.send()}function lK(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function aC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gw,YD,Ng=tn.saveAs||((typeof window>"u"?"undefined":fr(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=tn.URL||tn.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?lK(s.href)?l4(t,e,n):aC(s,s.target="_blank"):aC(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){aC(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(lK(t))l4(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){aC(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:fr(i)!=="object"&&(kr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return l4(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(tn.HTMLElement)||tn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":fr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},o.readAsDataURL(t)}else{var l=tn.URL||tn.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $he(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c4(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=Ca(n,r,s,i,e[0],7,-680876936),i=Ca(i,n,r,s,e[1],12,-389564586),s=Ca(s,i,n,r,e[2],17,606105819),r=Ca(r,s,i,n,e[3],22,-1044525330),n=Ca(n,r,s,i,e[4],7,-176418897),i=Ca(i,n,r,s,e[5],12,1200080426),s=Ca(s,i,n,r,e[6],17,-1473231341),r=Ca(r,s,i,n,e[7],22,-45705983),n=Ca(n,r,s,i,e[8],7,1770035416),i=Ca(i,n,r,s,e[9],12,-1958414417),s=Ca(s,i,n,r,e[10],17,-42063),r=Ca(r,s,i,n,e[11],22,-1990404162),n=Ca(n,r,s,i,e[12],7,1804603682),i=Ca(i,n,r,s,e[13],12,-40341101),s=Ca(s,i,n,r,e[14],17,-1502002290),n=Ta(n,r=Ca(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Ta(i,n,r,s,e[6],9,-1069501632),s=Ta(s,i,n,r,e[11],14,643717713),r=Ta(r,s,i,n,e[0],20,-373897302),n=Ta(n,r,s,i,e[5],5,-701558691),i=Ta(i,n,r,s,e[10],9,38016083),s=Ta(s,i,n,r,e[15],14,-660478335),r=Ta(r,s,i,n,e[4],20,-405537848),n=Ta(n,r,s,i,e[9],5,568446438),i=Ta(i,n,r,s,e[14],9,-1019803690),s=Ta(s,i,n,r,e[3],14,-187363961),r=Ta(r,s,i,n,e[8],20,1163531501),n=Ta(n,r,s,i,e[13],5,-1444681467),i=Ta(i,n,r,s,e[2],9,-51403784),s=Ta(s,i,n,r,e[7],14,1735328473),n=Ia(n,r=Ta(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Ia(i,n,r,s,e[8],11,-2022574463),s=Ia(s,i,n,r,e[11],16,1839030562),r=Ia(r,s,i,n,e[14],23,-35309556),n=Ia(n,r,s,i,e[1],4,-1530992060),i=Ia(i,n,r,s,e[4],11,1272893353),s=Ia(s,i,n,r,e[7],16,-155497632),r=Ia(r,s,i,n,e[10],23,-1094730640),n=Ia(n,r,s,i,e[13],4,681279174),i=Ia(i,n,r,s,e[0],11,-358537222),s=Ia(s,i,n,r,e[3],16,-722521979),r=Ia(r,s,i,n,e[6],23,76029189),n=Ia(n,r,s,i,e[9],4,-640364487),i=Ia(i,n,r,s,e[12],11,-421815835),s=Ia(s,i,n,r,e[15],16,530742520),n=Aa(n,r=Ia(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Aa(i,n,r,s,e[7],10,1126891415),s=Aa(s,i,n,r,e[14],15,-1416354905),r=Aa(r,s,i,n,e[5],21,-57434055),n=Aa(n,r,s,i,e[12],6,1700485571),i=Aa(i,n,r,s,e[3],10,-1894986606),s=Aa(s,i,n,r,e[10],15,-1051523),r=Aa(r,s,i,n,e[1],21,-2054922799),n=Aa(n,r,s,i,e[8],6,1873313359),i=Aa(i,n,r,s,e[15],10,-30611744),s=Aa(s,i,n,r,e[6],15,-1560198380),r=Aa(r,s,i,n,e[13],21,1309151649),n=Aa(n,r,s,i,e[4],6,-145523070),i=Aa(i,n,r,s,e[11],10,-1120210379),s=Aa(s,i,n,r,e[2],15,718787259),r=Aa(r,s,i,n,e[9],21,-343485551),t[0]=Op(n,t[0]),t[1]=Op(r,t[1]),t[2]=Op(s,t[2]),t[3]=Op(i,t[3])}function QP(t,e,n,r,s,i){return e=Op(Op(e,t),Op(r,i)),Op(e<<s|e>>>32-s,n)}function Ca(t,e,n,r,s,i,a){return QP(e&n|~e&r,t,e,s,i,a)}function Ta(t,e,n,r,s,i,a){return QP(e&r|n&~r,t,e,s,i,a)}function Ia(t,e,n,r,s,i,a){return QP(e^n^r,t,e,s,i,a)}function Aa(t,e,n,r,s,i,a){return QP(n^(e|~r),t,e,s,i,a)}function Dhe(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)c4(r,Bft(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(c4(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,c4(r,s),r}function Bft(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gw=tn.atob.bind(tn),YD=tn.btoa.bind(tn);var cK="0123456789abcdef".split("");function Wft(t){for(var e="",n=0;n<4;n++)e+=cK[t>>8*n+4&15]+cK[t>>8*n&15];return e}function Uft(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ZD(t){return Dhe(t).map(Uft).join("")}var Vft=function(t){for(var e=0;e<t.length;e++)t[e]=Wft(t[e]);return t.join("")}(Dhe("hello"))!="5d41402abc4b2a76b9719d911017c592";function Op(t,e){if(Vft){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function JD(t,e){var n,r,s,i;if(t!==n){for(var a=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=t,r=o}else o=r;var d=e.length,h=0,f=0,m="";for(l=0;l<d;l++)f=(f+(u=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=u,a=o[(o[h]+o[f])%256],m+=String.fromCharCode(e.charCodeAt(l)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var uK={print:4,modify:8,copy:16,"annot-forms":32};function cv(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(uK.perm!==void 0)throw new Error("Invalid permission: "+o);s+=uK[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=ZD(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=JD(this.encryptionKey,this.padding)}function uv(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function dK(t){if(fr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var a=e[n][i];try{a[0].apply(t,r)}catch(o){tn.console&&kr.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function f_(t){if(!(this instanceof f_))return new f_(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Lhe(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vp(t,e,n,r,s){if(!(this instanceof vp))return new vp(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Lhe.call(this,r,s)}function qg(t,e,n,r,s){if(!(this instanceof qg))return new qg(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Lhe.call(this,r,s)}function Yt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,l=16,c="S",u=null;fr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=dK;var m="1.3",y=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(D){m=D};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var x=f.__private__.getPageFormat=function(D){return v[D]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},_=b.COMPAT;function k(){this.saveGraphicsState(),he(new Jt(ft,0,0,-ft,0,nd()*ft).toString()+" cm"),this.setFontSize(this.getFontSize()/ft),c="n",_=b.ADVANCED}function N(){this.restoreGraphicsState(),c="S",_=b.COMPAT}var A=f.__private__.combineFontStyleAndFontWeight=function(D,re){if(D=="bold"&&re=="normal"||D=="bold"&&re==400||D=="normal"&&re=="italic"||D=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(D=re==400||re==="normal"?D==="italic"?"italic":"normal":re!=700&&re!=="bold"||D!=="normal"?(re==700?"bold":re)+""+D:"bold"),D};f.advancedAPI=function(D){var re=_===b.COMPAT;return re&&k.call(this),typeof D!="function"||(D(this),re&&N.call(this)),this},f.compatAPI=function(D){var re=_===b.ADVANCED;return re&&N.call(this),typeof D!="function"||(D(this),re&&k.call(this)),this},f.isAdvancedAPI=function(){return _===b.ADVANCED};var T,C=function(D){if(_!==b.ADVANCED)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=f.roundToPrecision=f.__private__.roundToPrecision=function(D,re){var ve=e||re;if(isNaN(D)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(ve).replace(/0+$/,"")};T=f.hpf=f.__private__.hpf=typeof l=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return P(D,l)}:l==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return P(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return P(D,16)};var $=f.f2=f.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return P(D,2)},j=f.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return P(D,3)},O=f.scale=f.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return _===b.COMPAT?D*ft:_===b.ADVANCED?D:void 0},F=function(D){return _===b.COMPAT?nd()-D:_===b.ADVANCED?D:void 0},B=function(D){return O(F(D))};f.__private__.setPrecision=f.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(e=parseInt(D,10))};var Z,V="00000000000000000000000000000000",G=f.__private__.getFileId=function(){return V},U=f.__private__.setFileId=function(D){return V=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(As=new cv(u.userPermissions,u.userPassword,u.ownerPassword,V)),V};f.setFileId=function(D){return U(D),this},f.getFileId=function(){return G()};var K=f.__private__.convertDateToPDFDate=function(D){var re=D.getTimezoneOffset(),ve=re<0?"+":"-",Te=Math.floor(Math.abs(re/60)),Le=Math.abs(re%60),Je=[ve,Q(Te),"'",Q(Le),"'"].join("");return["D:",D.getFullYear(),Q(D.getMonth()+1),Q(D.getDate()),Q(D.getHours()),Q(D.getMinutes()),Q(D.getSeconds()),Je].join("")},ee=f.__private__.convertPDFDateToDate=function(D){var re=parseInt(D.substr(2,4),10),ve=parseInt(D.substr(6,2),10)-1,Te=parseInt(D.substr(8,2),10),Le=parseInt(D.substr(10,2),10),Je=parseInt(D.substr(12,2),10),dt=parseInt(D.substr(14,2),10);return new Date(re,ve,Te,Le,Je,dt,0)},oe=f.__private__.setCreationDate=function(D){var re;if(D===void 0&&(D=new Date),D instanceof Date)re=K(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=D}return Z=re},W=f.__private__.getCreationDate=function(D){var re=Z;return D==="jsDate"&&(re=ee(Z)),re};f.setCreationDate=function(D){return oe(D),this},f.getCreationDate=function(D){return W(D)};var Y,Q=f.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},J=f.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},te=0,me=[],ge=[],ce=0,Ce=[],_e=[],we=!1,He=ge,Qe=function(){te=0,ce=0,ge=[],me=[],Ce=[],Zl=St(),Oo=St()};f.__private__.setCustomOutputDestination=function(D){we=!0,He=D};var Ae=function(D){we||(He=D)};f.__private__.resetCustomOutputDestination=function(){we=!1,He=ge};var he=f.__private__.out=function(D){return D=D.toString(),ce+=D.length+1,He.push(D),He},ht=f.__private__.write=function(D){return he(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},Me=f.__private__.getArrayBuffer=function(D){for(var re=D.length,ve=new ArrayBuffer(re),Te=new Uint8Array(ve);re--;)Te[re]=D.charCodeAt(re);return ve},Ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ve};var nt=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(D){return nt=_===b.ADVANCED?D/ft:D,this};var pe,xe=f.__private__.getFontSize=f.getFontSize=function(){return _===b.COMPAT?nt:nt*ft},je=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(D){return je=D,this},f.__private__.getR2L=f.getR2L=function(){return je};var qe,Ge=f.__private__.setZoomMode=function(D){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))pe=D;else if(isNaN(D)){if(re.indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');pe=D}else pe=parseInt(D,10)};f.__private__.getZoomMode=function(){return pe};var Ue,st=f.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');qe=D};f.__private__.getPageMode=function(){return qe};var wt=f.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Ue=D};f.__private__.getLayoutMode=function(){return Ue},f.__private__.setDisplayMode=f.setDisplayMode=function(D,re,ve){return Ge(D),wt(re),st(ve),this};var gt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(D){if(Object.keys(gt).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gt[D]},f.__private__.getDocumentProperties=function(){return gt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(D){for(var re in gt)gt.hasOwnProperty(re)&&D[re]&&(gt[re]=D[re]);return this},f.__private__.setDocumentProperty=function(D,re){if(Object.keys(gt).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gt[D]=re};var zt,ft,wn,nn,qr,Dn={},gr={},si=[],Wn={},Gl={},Rr={},Eo={},Kl=null,Gr=0,on=[],Kn=new dK(f),th=t.hotfixes||[],ii={},Xl={},Po=[],Jt=function D(re,ve,Te,Le,Je,dt){if(!(this instanceof D))return new D(re,ve,Te,Le,Je,dt);isNaN(re)&&(re=1),isNaN(ve)&&(ve=0),isNaN(Te)&&(Te=0),isNaN(Le)&&(Le=1),isNaN(Je)&&(Je=0),isNaN(dt)&&(dt=0),this._matrix=[re,ve,Te,Le,Je,dt]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(D)},Jt.prototype.multiply=function(D){var re=D.sx*this.sx+D.shy*this.shx,ve=D.sx*this.shy+D.shy*this.sy,Te=D.shx*this.sx+D.sy*this.shx,Le=D.shx*this.shy+D.sy*this.sy,Je=D.tx*this.sx+D.ty*this.shx+this.tx,dt=D.tx*this.shy+D.ty*this.sy+this.ty;return new Jt(re,ve,Te,Le,Je,dt)},Jt.prototype.decompose=function(){var D=this.sx,re=this.shy,ve=this.shx,Te=this.sy,Le=this.tx,Je=this.ty,dt=Math.sqrt(D*D+re*re),Nt=(D/=dt)*ve+(re/=dt)*Te;ve-=D*Nt,Te-=re*Nt;var Ot=Math.sqrt(ve*ve+Te*Te);return Nt/=Ot,D*(Te/=Ot)<re*(ve/=Ot)&&(D=-D,re=-re,Nt=-Nt,dt=-dt),{scale:new Jt(dt,0,0,Ot,0,0),translate:new Jt(1,0,0,1,Le,Je),rotate:new Jt(D,re,-re,D,0,0),skew:new Jt(1,0,Nt,1,0,0)}},Jt.prototype.toString=function(D){return this.join(" ")},Jt.prototype.inversed=function(){var D=this.sx,re=this.shy,ve=this.shx,Te=this.sy,Le=this.tx,Je=this.ty,dt=1/(D*Te-re*ve),Nt=Te*dt,Ot=-re*dt,cn=-ve*dt,an=D*dt;return new Jt(Nt,Ot,cn,an,-Nt*Le-cn*Je,-Ot*Le-an*Je)},Jt.prototype.applyToPoint=function(D){var re=D.x*this.sx+D.y*this.shx+this.tx,ve=D.x*this.shy+D.y*this.sy+this.ty;return new mh(re,ve)},Jt.prototype.applyToRectangle=function(D){var re=this.applyToPoint(D),ve=this.applyToPoint(new mh(D.x+D.w,D.y+D.h));return new Do(re.x,re.y,ve.x-re.x,ve.y-re.y)},Jt.prototype.clone=function(){var D=this.sx,re=this.shy,ve=this.shx,Te=this.sy,Le=this.tx,Je=this.ty;return new Jt(D,re,ve,Te,Le,Je)},f.Matrix=Jt;var pl=f.matrixMult=function(D,re){return re.multiply(D)},Yl=new Jt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Yl;var va=function(D,re){if(!Gl[D]){var ve=(re instanceof vp?"Sh":"P")+(Object.keys(Wn).length+1).toString(10);re.id=ve,Gl[D]=ve,Wn[ve]=re,Kn.publish("addPattern",re)}};f.ShadingPattern=vp,f.TilingPattern=qg,f.addShadingPattern=function(D,re){return C("addShadingPattern()"),va(D,re),this},f.beginTilingPattern=function(D){C("beginTilingPattern()"),Hm(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},f.endTilingPattern=function(D,re){C("endTilingPattern()"),re.stream=_e[Y].join(`
`),va(D,re),Kn.publish("endTilingPattern",re),Po.pop().restore()};var er=f.__private__.newObject=function(){var D=St();return xa(D,!0),D},St=f.__private__.newObjectDeferred=function(){return te++,me[te]=function(){return ce},te},xa=function(D,re){return re=typeof re=="boolean"&&re,me[D]=ce,re&&he(D+" 0 obj"),D},nh=f.__private__.newAdditionalObject=function(){var D={objId:St(),content:""};return Ce.push(D),D},Zl=St(),Oo=St(),Za=f.__private__.decodeColorString=function(D){var re=D.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var ve=parseFloat(re[0]);re=[ve,ve,ve,"r"]}for(var Te="#",Le=0;Le<3;Le++)Te+=("0"+Math.floor(255*parseFloat(re[Le])).toString(16)).slice(-2);return Te},jo=f.__private__.encodeColorString=function(D){var re;typeof D=="string"&&(D={ch1:D});var ve=D.ch1,Te=D.ch2,Le=D.ch3,Je=D.ch4,dt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var Nt=new $he(ve);if(Nt.ok)ve=Nt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var Ot=parseInt(ve.substr(1),16);ve=Ot>>16&255,Te=Ot>>8&255,Le=255&Ot}if(Te===void 0||Je===void 0&&ve===Te&&Te===Le)if(typeof ve=="string")re=ve+" "+dt[0];else switch(D.precision){case 2:re=$(ve/255)+" "+dt[0];break;case 3:default:re=j(ve/255)+" "+dt[0]}else if(Je===void 0||fr(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return re=["1.","1.","1.",dt[1]].join(" ");if(typeof ve=="string")re=[ve,Te,Le,dt[1]].join(" ");else switch(D.precision){case 2:re=[$(ve/255),$(Te/255),$(Le/255),dt[1]].join(" ");break;default:case 3:re=[j(ve/255),j(Te/255),j(Le/255),dt[1]].join(" ")}}else if(typeof ve=="string")re=[ve,Te,Le,Je,dt[2]].join(" ");else switch(D.precision){case 2:re=[$(ve),$(Te),$(Le),$(Je),dt[2]].join(" ");break;case 3:default:re=[j(ve),j(Te),j(Le),j(Je),dt[2]].join(" ")}return re},Qi=f.__private__.getFilters=function(){return a},Ja=f.__private__.putStream=function(D){var re=(D=D||{}).data||"",ve=D.filters||Qi(),Te=D.alreadyAppliedFilters||[],Le=D.addLength1||!1,Je=re.length,dt=D.objectId,Nt=function(Ii){return Ii};if(u!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nt=As.encryptor(dt,0));var Ot={};ve===!0&&(ve=["FlateEncode"]);var cn=D.additionalKeyValues||[],an=(Ot=Yt.API.processDataByFilters!==void 0?Yt.API.processDataByFilters(re,ve):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Te)?Te.join(" "):Te.toString());if(Ot.data.length!==0&&(cn.push({key:"Length",value:Ot.data.length}),Le===!0&&cn.push({key:"Length1",value:Je})),an.length!=0)if(an.split("/").length-1==1)cn.push({key:"Filter",value:an});else{cn.push({key:"Filter",value:"["+an+"]"});for(var Rn=0;Rn<cn.length;Rn+=1)if(cn[Rn].key==="DecodeParms"){for(var br=[],Ir=0;Ir<Ot.reverseChain.split("/").length-1;Ir+=1)br.push("null");br.push(cn[Rn].value),cn[Rn].value="["+br.join(" ")+"]"}}he("<<");for(var ps=0;ps<cn.length;ps++)he("/"+cn[ps].key+" "+cn[ps].value);he(">>"),Ot.data.length!==0&&(he("stream"),he(Nt(Ot.data)),he("endstream"))},Jl=f.__private__.putPage=function(D){var re=D.number,ve=D.data,Te=D.objId,Le=D.contentsObjId;xa(Te,!0),he("<</Type /Page"),he("/Parent "+D.rootDictionaryObjId+" 0 R"),he("/Resources "+D.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(T(D.mediaBox.bottomLeftX))+" "+parseFloat(T(D.mediaBox.bottomLeftY))+" "+T(D.mediaBox.topRightX)+" "+T(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&he("/CropBox ["+T(D.cropBox.bottomLeftX)+" "+T(D.cropBox.bottomLeftY)+" "+T(D.cropBox.topRightX)+" "+T(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&he("/BleedBox ["+T(D.bleedBox.bottomLeftX)+" "+T(D.bleedBox.bottomLeftY)+" "+T(D.bleedBox.topRightX)+" "+T(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&he("/TrimBox ["+T(D.trimBox.bottomLeftX)+" "+T(D.trimBox.bottomLeftY)+" "+T(D.trimBox.topRightX)+" "+T(D.trimBox.topRightY)+"]"),D.artBox!==null&&he("/ArtBox ["+T(D.artBox.bottomLeftX)+" "+T(D.artBox.bottomLeftY)+" "+T(D.artBox.topRightX)+" "+T(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&he("/UserUnit "+D.userUnit),Kn.publish("putPage",{objId:Te,pageContext:on[re],pageNumber:re,page:ve}),he("/Contents "+Le+" 0 R"),he(">>"),he("endobj");var Je=ve.join(`
`);return _===b.ADVANCED&&(Je+=`
Q`),xa(Le,!0),Ja({data:Je,filters:Qi(),objectId:Le}),he("endobj"),Te},rh=f.__private__.putPages=function(){var D,re,ve=[];for(D=1;D<=Gr;D++)on[D].objId=St(),on[D].contentsObjId=St();for(D=1;D<=Gr;D++)ve.push(Jl({number:D,data:_e[D],objId:on[D].objId,contentsObjId:on[D].contentsObjId,mediaBox:on[D].mediaBox,cropBox:on[D].cropBox,bleedBox:on[D].bleedBox,trimBox:on[D].trimBox,artBox:on[D].artBox,userUnit:on[D].userUnit,rootDictionaryObjId:Zl,resourceDictionaryObjId:Oo}));xa(Zl,!0),he("<</Type /Pages");var Te="/Kids [";for(re=0;re<Gr;re++)Te+=ve[re]+" 0 R ";he(Te+"]"),he("/Count "+Gr),he(">>"),he("endobj"),Kn.publish("postPutPages")},If=function(D){Kn.publish("putFont",{font:D,out:he,newObject:er,putStream:Ja}),D.isAlreadyPutted!==!0&&(D.objectNumber=er(),he("<<"),he("/Type /Font"),he("/BaseFont /"+uv(D.postScriptName)),he("/Subtype /Type1"),typeof D.encoding=="string"&&he("/Encoding /"+D.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Af=function(){for(var D in Dn)Dn.hasOwnProperty(D)&&(d===!1||d===!0&&h.hasOwnProperty(D))&&If(Dn[D])},sh=function(D){D.objectNumber=er();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[T(D.x),T(D.y),T(D.x+D.width),T(D.y+D.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var ve=D.pages[1].join(`
`);Ja({data:ve,additionalKeyValues:re,objectId:D.objectNumber}),he("endobj")},Ef=function(){for(var D in ii)ii.hasOwnProperty(D)&&sh(ii[D])},ih=function(D,re){var ve,Te=[],Le=1/(re-1);for(ve=0;ve<1;ve+=Le)Te.push(ve);if(Te.push(1),D[0].offset!=0){var Je={offset:0,color:D[0].color};D.unshift(Je)}if(D[D.length-1].offset!=1){var dt={offset:1,color:D[D.length-1].color};D.push(dt)}for(var Nt="",Ot=0,cn=0;cn<Te.length;cn++){for(ve=Te[cn];ve>D[Ot+1].offset;)Ot++;var an=D[Ot].offset,Rn=(ve-an)/(D[Ot+1].offset-an),br=D[Ot].color,Ir=D[Ot+1].color;Nt+=J(Math.round((1-Rn)*br[0]+Rn*Ir[0]).toString(16))+J(Math.round((1-Rn)*br[1]+Rn*Ir[1]).toString(16))+J(Math.round((1-Rn)*br[2]+Rn*Ir[2]).toString(16))}return Nt.trim()},h1=function(D,re){re||(re=21);var ve=er(),Te=ih(D.colors,re),Le=[];Le.push({key:"FunctionType",value:"0"}),Le.push({key:"Domain",value:"[0.0 1.0]"}),Le.push({key:"Size",value:"["+re+"]"}),Le.push({key:"BitsPerSample",value:"8"}),Le.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Le.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ja({data:Te,additionalKeyValues:Le,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),he("endobj"),D.objectNumber=er(),he("<< /ShadingType "+D.type),he("/ColorSpace /DeviceRGB");var Je="/Coords ["+T(parseFloat(D.coords[0]))+" "+T(parseFloat(D.coords[1]))+" ";D.type===2?Je+=T(parseFloat(D.coords[2]))+" "+T(parseFloat(D.coords[3])):Je+=T(parseFloat(D.coords[2]))+" "+T(parseFloat(D.coords[3]))+" "+T(parseFloat(D.coords[4]))+" "+T(parseFloat(D.coords[5])),he(Je+="]"),D.matrix&&he("/Matrix ["+D.matrix.toString()+"]"),he("/Function "+ve+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},f1=function(D,re){var ve=St(),Te=er();re.push({resourcesOid:ve,objectOid:Te}),D.objectNumber=Te;var Le=[];Le.push({key:"Type",value:"/Pattern"}),Le.push({key:"PatternType",value:"1"}),Le.push({key:"PaintType",value:"1"}),Le.push({key:"TilingType",value:"1"}),Le.push({key:"BBox",value:"["+D.boundingBox.map(T).join(" ")+"]"}),Le.push({key:"XStep",value:T(D.xStep)}),Le.push({key:"YStep",value:T(D.yStep)}),Le.push({key:"Resources",value:ve+" 0 R"}),D.matrix&&Le.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),Ja({data:D.stream,additionalKeyValues:Le,objectId:D.objectNumber}),he("endobj")},Pf=function(D){var re;for(re in Wn)Wn.hasOwnProperty(re)&&(Wn[re]instanceof vp?h1(Wn[re]):Wn[re]instanceof qg&&f1(Wn[re],D))},py=function(D){for(var re in D.objectNumber=er(),he("<<"),D)switch(re){case"opacity":he("/ca "+$(D[re]));break;case"stroke-opacity":he("/CA "+$(D[re]))}he(">>"),he("endobj")},p1=function(){var D;for(D in Rr)Rr.hasOwnProperty(D)&&py(Rr[D])},ah=function(){for(var D in he("/XObject <<"),ii)ii.hasOwnProperty(D)&&ii[D].objectNumber>=0&&he("/"+D+" "+ii[D].objectNumber+" 0 R");Kn.publish("putXobjectDict"),he(">>")},oh=function(){As.oid=er(),he("<<"),he("/Filter /Standard"),he("/V "+As.v),he("/R "+As.r),he("/U <"+As.toHexString(As.U)+">"),he("/O <"+As.toHexString(As.O)+">"),he("/P "+As.P),he(">>"),he("endobj")},Lm=function(){for(var D in he("/Font <<"),Dn)Dn.hasOwnProperty(D)&&(d===!1||d===!0&&h.hasOwnProperty(D))&&he("/"+D+" "+Dn[D].objectNumber+" 0 R");he(">>")},my=function(){if(Object.keys(Wn).length>0){for(var D in he("/Shading <<"),Wn)Wn.hasOwnProperty(D)&&Wn[D]instanceof vp&&Wn[D].objectNumber>=0&&he("/"+D+" "+Wn[D].objectNumber+" 0 R");Kn.publish("putShadingPatternDict"),he(">>")}},Ql=function(D){if(Object.keys(Wn).length>0){for(var re in he("/Pattern <<"),Wn)Wn.hasOwnProperty(re)&&Wn[re]instanceof f.TilingPattern&&Wn[re].objectNumber>=0&&Wn[re].objectNumber<D&&he("/"+re+" "+Wn[re].objectNumber+" 0 R");Kn.publish("putTilingPatternDict"),he(">>")}},Ln=function(){if(Object.keys(Rr).length>0){var D;for(D in he("/ExtGState <<"),Rr)Rr.hasOwnProperty(D)&&Rr[D].objectNumber>=0&&he("/"+D+" "+Rr[D].objectNumber+" 0 R");Kn.publish("putGStateDict"),he(">>")}},un=function(D){xa(D.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Lm(),my(),Ql(D.objectOid),Ln(),ah(),he(">>"),he("endobj")},lh=function(){var D=[];Af(),p1(),Ef(),Pf(D),Kn.publish("putResources"),D.forEach(un),un({resourcesOid:Oo,objectOid:Number.MAX_SAFE_INTEGER}),Kn.publish("postPutResources")},Kc=function(){Kn.publish("putAdditionalObjects");for(var D=0;D<Ce.length;D++){var re=Ce[D];xa(re.objId,!0),he(re.content),he("endobj")}Kn.publish("postPutAdditionalObjects")},Xc=function(D){gr[D.fontName]=gr[D.fontName]||{},gr[D.fontName][D.fontStyle]=D.id},ch=function(D,re,ve,Te,Le){var Je={id:"F"+(Object.keys(Dn).length+1).toString(10),postScriptName:D,fontName:re,fontStyle:ve,encoding:Te,isStandardFont:Le||!1,metadata:{}};return Kn.publish("addFont",{font:Je,instance:this}),Dn[Je.id]=Je,Xc(Je),Je.id},hn=function(D){for(var re=0,ve=Ve.length;re<ve;re++){var Te=ch.call(this,D[re][0],D[re][1],D[re][2],Ve[re][3],!0);d===!1&&(h[Te]=!0);var Le=D[re][0].split("-");Xc({id:Te,fontName:Le[0],fontStyle:Le[1]||""})}Kn.publish("addFonts",{fonts:Dn,dictionary:gr})},Vn=function(D){return D.foo=function(){try{return D.apply(this,arguments)}catch(Te){var re=Te.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var ve="Error in function "+re.split(`
`)[0].split("<")[0]+": "+Te.message;if(!tn.console)throw new Error(ve);tn.console.error(ve,Te),tn.alert&&alert(ve)}},D.foo.bar=D,D.foo},Xu=function(D,re){var ve,Te,Le,Je,dt,Nt,Ot,cn,an;if(Le=(re=re||{}).sourceEncoding||"Unicode",dt=re.outputEncoding,(re.autoencode||dt)&&Dn[zt].metadata&&Dn[zt].metadata[Le]&&Dn[zt].metadata[Le].encoding&&(Je=Dn[zt].metadata[Le].encoding,!dt&&Dn[zt].encoding&&(dt=Dn[zt].encoding),!dt&&Je.codePages&&(dt=Je.codePages[0]),typeof dt=="string"&&(dt=Je[dt]),dt)){for(Ot=!1,Nt=[],ve=0,Te=D.length;ve<Te;ve++)(cn=dt[D.charCodeAt(ve)])?Nt.push(String.fromCharCode(cn)):Nt.push(D[ve]),Nt[ve].charCodeAt(0)>>8&&(Ot=!0);D=Nt.join("")}for(ve=D.length;Ot===void 0&&ve!==0;)D.charCodeAt(ve-1)>>8&&(Ot=!0),ve--;if(!Ot)return D;for(Nt=re.noBOM?[]:[254,255],ve=0,Te=D.length;ve<Te;ve++){if((an=(cn=D.charCodeAt(ve))>>8)>>8)throw new Error("Character at position "+ve+" of string '"+D+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nt.push(an),Nt.push(cn-(an<<8))}return String.fromCharCode.apply(void 0,Nt)},ai=f.__private__.pdfEscape=f.pdfEscape=function(D,re){return Xu(D,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ti=f.__private__.beginPage=function(D){_e[++Gr]=[],on[Gr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},ec(Gr),Ae(_e[Y])},gy=function(D,re){var ve,Te,Le;switch(n=re||n,typeof D=="string"&&(ve=x(D.toLowerCase()),Array.isArray(ve)&&(Te=ve[0],Le=ve[1])),Array.isArray(D)&&(Te=D[0]*ft,Le=D[1]*ft),isNaN(Te)&&(Te=s[0],Le=s[1]),(Te>14400||Le>14400)&&(kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Te=Math.min(14400,Te),Le=Math.min(14400,Le)),s=[Te,Le],n.substr(0,1)){case"l":Le>Te&&(s=[Le,Te]);break;case"p":Te>Le&&(s=[Le,Te])}Ti(s),xy(Lf),he(to),Vm!==0&&he(Vm+" J"),ba!==0&&he(ba+" j"),Kn.publish("addPage",{pageNumber:Gr})},Of=function(D){D>0&&D<=Gr&&(_e.splice(D,1),on.splice(D,1),Gr--,Y>Gr&&(Y=Gr),this.setPage(Y))},ec=function(D){D>0&&D<=Gr&&(Y=D)},Kr=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return _e.length-1},tc=function(D,re,ve){var Te,Le=void 0;return ve=ve||{},D=D!==void 0?D:Dn[zt].fontName,re=re!==void 0?re:Dn[zt].fontStyle,Te=D.toLowerCase(),gr[Te]!==void 0&&gr[Te][re]!==void 0?Le=gr[Te][re]:gr[D]!==void 0&&gr[D][re]!==void 0?Le=gr[D][re]:ve.disableWarning===!1&&kr.warn("Unable to look up font label for font '"+D+"', '"+re+"'. Refer to getFontList() for available fonts."),Le||ve.noFallback||(Le=gr.times[re])==null&&(Le=gr.times.normal),Le},uh=f.__private__.putInfo=function(){var D=er(),re=function(Te){return Te};for(var ve in u!==null&&(re=As.encryptor(D,0)),he("<<"),he("/Producer ("+ai(re("jsPDF "+Yt.version))+")"),gt)gt.hasOwnProperty(ve)&&gt[ve]&&he("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+ai(re(gt[ve]))+")");he("/CreationDate ("+ai(re(Z))+")"),he(">>"),he("endobj")},Yc=f.__private__.putCatalog=function(D){var re=(D=D||{}).rootDictionaryObjId||Zl;switch(er(),he("<<"),he("/Type /Catalog"),he("/Pages "+re+" 0 R"),pe||(pe="fullwidth"),pe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+pe;ve.substr(ve.length-1)==="%"&&(pe=parseInt(pe)/100),typeof pe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+$(pe)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}qe&&he("/PageMode /"+qe),Kn.publish("putCatalog"),he(">>"),he("endobj")},Rm=f.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(te+1)),he("/Root "+te+" 0 R"),he("/Info "+(te-1)+" 0 R"),u!==null&&he("/Encrypt "+As.oid+" 0 R"),he("/ID [ <"+V+"> <"+V+"> ]"),he(">>")},dh=f.__private__.putHeader=function(){he("%PDF-"+m),he("%")},Mm=f.__private__.putXRef=function(){var D="0000000000";he("xref"),he("0 "+(te+1)),he("0000000000 65535 f ");for(var re=1;re<=te;re++)typeof me[re]=="function"?he((D+me[re]()).slice(-10)+" 00000 n "):me[re]!==void 0?he((D+me[re]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},ml=f.__private__.buildDocument=function(){Qe(),Ae(ge),Kn.publish("buildDocument"),dh(),rh(),Kc(),lh(),u!==null&&oh(),uh(),Yc();var D=ce;return Mm(),Rm(),he("startxref"),he(""+D),he("%%EOF"),Ae(_e[Y]),ge.join(`
`)},Zc=f.__private__.getBlob=function(D){return new Blob([Me(D)],{type:"application/pdf"})},Yu=f.output=f.__private__.output=Vn(function(D,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",D){case void 0:return ml();case"save":f.save(re.filename);break;case"arraybuffer":return Me(ml());case"blob":return Zc(ml());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Zc(ml()))||void 0;kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",Te=ml();try{ve=YD(Te)}catch{ve=YD(unescape(encodeURIComponent(Te)))}return"data:application/pdf;filename="+re.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Le="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(Le=re.pdfObjectUrl,Je="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Le+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",Nt=tn.open();return Nt!==null&&Nt.document.write(dt),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',cn=tn.open();if(cn!==null){cn.document.write(Ot);var an=this;cn.document.documentElement.querySelector("#pdfViewer").onload=function(){cn.document.title=re.filename,cn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(an.output("bloburl"))}}return cn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',br=tn.open();if(br!==null&&(br.document.write(Rn),br.document.title=re.filename),br||typeof safari>"u")return br;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",re);default:return null}}),jf=function(D){return Array.isArray(th)===!0&&th.indexOf(D)>-1};switch(r){case"pt":ft=1;break;case"mm":ft=72/25.4;break;case"cm":ft=72/2.54;break;case"in":ft=72;break;case"px":ft=jf("px_scaling")==1?.75:96/72;break;case"pc":case"em":ft=12;break;case"ex":ft=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ft=r}var As=null;oe(),U();var yy=function(D){return u!==null?As.encryptor(D,0):function(re){return re}},$f=f.__private__.getPageInfo=f.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:on[D].objId,pageNumber:D,pageContext:on[D]}},sn=f.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in on)if(on[re].objId===D)break;return $f(re)},ln=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:on[Y].objId,pageNumber:Y,pageContext:on[Y]}};f.addPage=function(){return gy.apply(this,arguments),this},f.setPage=function(){return ec.apply(this,arguments),Ae.call(this,_e[Y]),this},f.insertPage=function(D){return this.addPage(),this.movePage(Y,D),this},f.movePage=function(D,re){var ve,Te;if(D>re){ve=_e[D],Te=on[D];for(var Le=D;Le>re;Le--)_e[Le]=_e[Le-1],on[Le]=on[Le-1];_e[re]=ve,on[re]=Te,this.setPage(re)}else if(D<re){ve=_e[D],Te=on[D];for(var Je=D;Je<re;Je++)_e[Je]=_e[Je+1],on[Je]=on[Je+1];_e[re]=ve,on[re]=Te,this.setPage(re)}return this},f.deletePage=function(){return Of.apply(this,arguments),this},f.__private__.text=f.text=function(D,re,ve,Te,Le){var Je,dt,Nt,Ot,cn,an,Rn,br,Ir,ps=(Te=Te||{}).scope||this;if(typeof D=="number"&&typeof re=="number"&&(typeof ve=="string"||Array.isArray(ve))){var Ii=ve;ve=re,re=D,D=Ii}if(arguments[3]instanceof Jt?(C("The transform parameter of text() with a Matrix value"),Ir=Le):(Nt=arguments[4],Ot=arguments[5],fr(Rn=arguments[3])==="object"&&Rn!==null||(typeof Nt=="string"&&(Ot=Nt,Nt=null),typeof Rn=="string"&&(Ot=Rn,Rn=null),typeof Rn=="number"&&(Nt=Rn,Rn=null),Te={flags:Rn,angle:Nt,align:Ot})),isNaN(re)||isNaN(ve)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return ps;var Es="",gl=!1,Mr=typeof Te.lineHeightFactor=="number"?Te.lineHeightFactor:ph,ea=ps.internal.scaleFactor;function ky(rr){return rr=rr.split("	").join(Array(Te.TabLen||9).join(" ")),ai(rr,Rn)}function no(rr){for(var sr,as=rr.concat(),ir=[],ic=as.length;ic--;)typeof(sr=as.shift())=="string"?ir.push(sr):Array.isArray(rr)&&(sr.length===1||sr[1]===void 0&&sr[2]===void 0)?ir.push(sr[0]):ir.push([sr[0],sr[1],sr[2]]);return ir}function Km(rr,sr){var as;if(typeof rr=="string")as=sr(rr)[0];else if(Array.isArray(rr)){for(var ir,ic,Hf=rr.concat(),ac=[],Ny=Hf.length;Ny--;)typeof(ir=Hf.shift())=="string"?ac.push(sr(ir)[0]):Array.isArray(ir)&&typeof ir[0]=="string"&&(ic=sr(ir[0],ir[1],ir[2]),ac.push([ic[0],ic[1],ic[2]]));as=ac}return as}var yl=!1,Xm=!0;if(typeof D=="string")yl=!0;else if(Array.isArray(D)){var eu=D.concat();dt=[];for(var gh,ms=eu.length;ms--;)(typeof(gh=eu.shift())!="string"||Array.isArray(gh)&&typeof gh[0]!="string")&&(Xm=!1);yl=Xm}if(yl===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var Bf=nt/ps.internal.scaleFactor,ro=Bf*(Mr-1);switch(Te.baseline){case"bottom":ve-=ro;break;case"top":ve+=Bf-ro;break;case"hanging":ve+=Bf-2*ro;break;case"middle":ve+=Bf/2-ro}if((an=Te.maxWidth||0)>0&&(typeof D=="string"?D=ps.splitTextToSize(D,an):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(rr,sr){return rr.concat(ps.splitTextToSize(sr,an))},[]))),Je={text:D,x:re,y:ve,options:Te,mutex:{pdfEscape:ai,activeFontKey:zt,fonts:Dn,activeFontSize:nt}},Kn.publish("preProcessText",Je),D=Je.text,Nt=(Te=Je.options).angle,!(Ir instanceof Jt)&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,Te.rotationDirection===0&&(Nt=-Nt),_===b.ADVANCED&&(Nt=-Nt);var tu=Math.cos(Nt),Ym=Math.sin(Nt);Ir=new Jt(tu,Ym,-Ym,tu,0,0)}else Nt&&Nt instanceof Jt&&(Ir=Nt);_!==b.ADVANCED||Ir||(Ir=Yl),(cn=Te.charSpace||Rf)!==void 0&&(Es+=T(O(cn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(br=Te.horizontalScale)!==void 0&&(Es+=T(100*br)+` Tz
`),Te.lang;var Ai=-1,g1=Te.renderingMode!==void 0?Te.renderingMode:Te.stroke,so=ps.internal.getCurrentPageInfo().pageContext;switch(g1){case 0:case!1:case"fill":Ai=0;break;case 1:case!0:case"stroke":Ai=1;break;case 2:case"fillThenStroke":Ai=2;break;case 3:case"invisible":Ai=3;break;case 4:case"fillAndAddForClipping":Ai=4;break;case 5:case"strokeAndAddPathForClipping":Ai=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ai=6;break;case 7:case"addToPathForClipping":Ai=7}var Sy=so.usedRenderingMode!==void 0?so.usedRenderingMode:-1;Ai!==-1?Es+=Ai+` Tr
`:Sy!==-1&&(Es+=`0 Tr
`),Ai!==-1&&(so.usedRenderingMode=Ai),Ot=Te.align||"left";var oi,Wf=nt*Mr,Lo=ps.internal.pageSize.getWidth(),yh=Dn[zt];cn=Te.charSpace||Rf,an=Te.maxWidth||0,Rn=Object.assign({autoencode:!0,noBOM:!0},Te.flags);var nu=[],ru=function(rr){return ps.getStringUnitWidth(rr,{font:yh,charSpace:cn,fontSize:nt,doKerning:!1})*nt/ea};if(Object.prototype.toString.call(D)==="[object Array]"){var li;dt=no(D),Ot!=="left"&&(oi=dt.map(ru));var ci,vl=0;if(Ot==="right"){re-=oi[0],D=[],ms=dt.length;for(var wa=0;wa<ms;wa++)wa===0?(ci=fs(re),li=eo(ve)):(ci=O(vl-oi[wa]),li=-Wf),D.push([dt[wa],ci,li]),vl=oi[wa]}else if(Ot==="center"){re-=oi[0]/2,D=[],ms=dt.length;for(var Ro=0;Ro<ms;Ro++)Ro===0?(ci=fs(re),li=eo(ve)):(ci=O((vl-oi[Ro])/2),li=-Wf),D.push([dt[Ro],ci,li]),vl=oi[Ro]}else if(Ot==="left"){D=[],ms=dt.length;for(var rd=0;rd<ms;rd++)D.push(dt[rd])}else if(Ot==="justify"&&yh.encoding==="Identity-H"){D=[],ms=dt.length,an=an!==0?an:Lo;for(var nc=0,is=0;is<ms;is++)if(li=is===0?eo(ve):-Wf,ci=is===0?fs(re):nc,is<ms-1){var sd=O((an-oi[is])/(dt[is].split(" ").length-1)),ta=dt[is].split(" ");D.push([ta[0]+" ",ci,li]),nc=0;for(var io=1;io<ta.length;io++){var Uf=(ru(ta[io-1]+" "+ta[io])-ru(ta[io]))*ea+sd;io==ta.length-1?D.push([ta[io],Uf,0]):D.push([ta[io]+" ",Uf,0]),nc-=Uf}}else D.push([dt[is],ci,li]);D.push(["",nc,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],ms=dt.length,an=an!==0?an:Lo,is=0;is<ms;is++)li=is===0?eo(ve):-Wf,ci=is===0?fs(re):0,is<ms-1?nu.push(T(O((an-oi[is])/(dt[is].split(" ").length-1)))):nu.push(0),D.push([dt[is],ci,li])}}var Zm=typeof Te.R2L=="boolean"?Te.R2L:je;Zm===!0&&(D=Km(D,function(rr,sr,as){return[rr.split("").reverse().join(""),sr,as]})),Je={text:D,x:re,y:ve,options:Te,mutex:{pdfEscape:ai,activeFontKey:zt,fonts:Dn,activeFontSize:nt}},Kn.publish("postProcessText",Je),D=Je.text,gl=Je.mutex.isHex||!1;var Jm=Dn[zt].encoding;Jm!=="WinAnsiEncoding"&&Jm!=="StandardEncoding"||(D=Km(D,function(rr,sr,as){return[ky(rr),sr,as]})),dt=no(D),D=[];for(var Ei,rc,id,sc=0,Vf=1,ad=Array.isArray(dt[0])?Vf:sc,od="",su=function(rr,sr,as){var ir="";return as instanceof Jt?(as=typeof Te.angle=="number"?pl(as,new Jt(1,0,0,1,rr,sr)):pl(new Jt(1,0,0,1,rr,sr),as),_===b.ADVANCED&&(as=pl(new Jt(1,0,0,-1,0,0),as)),ir=as.join(" ")+` Tm
`):ir=T(rr)+" "+T(sr)+` Td
`,ir},Mo=0;Mo<dt.length;Mo++){switch(od="",ad){case Vf:id=(gl?"<":"(")+dt[Mo][0]+(gl?">":")"),Ei=parseFloat(dt[Mo][1]),rc=parseFloat(dt[Mo][2]);break;case sc:id=(gl?"<":"(")+dt[Mo]+(gl?">":")"),Ei=fs(re),rc=eo(ve)}nu!==void 0&&nu[Mo]!==void 0&&(od=nu[Mo]+` Tw
`),Mo===0?D.push(od+su(Ei,rc,Ir)+id):ad===sc?D.push(od+id):ad===Vf&&D.push(od+su(Ei,rc,Ir)+id)}D=ad===sc?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var ui=`BT
/`;return ui+=zt+" "+nt+` Tf
`,ui+=T(nt*Mr)+` TL
`,ui+=ed+`
`,ui+=Es,ui+=D,he(ui+="ET"),h[zt]=!0,ps};var $o=f.__private__.clip=f.clip=function(D){return he(D==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return $o("evenodd")},f.__private__.discardPath=f.discardPath=function(){return he("n"),this};var An=f.__private__.isValidStyle=function(D){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(re=!0),re};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(D){return An(D)&&(c=D),this};var Fm=f.__private__.getStyle=f.getStyle=function(D){var re=c;switch(D){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=D}return re},Df=f.close=function(){return he("h"),this};f.stroke=function(){return he("S"),this},f.fill=function(D){return Zu("f",D),this},f.fillEvenOdd=function(D){return Zu("f*",D),this},f.fillStroke=function(D){return Zu("B",D),this},f.fillStrokeEvenOdd=function(D){return Zu("B*",D),this};var Zu=function(D,re){fr(re)==="object"?zm(re,D):he(D)},hh=function(D){D===null||_===b.ADVANCED&&D===void 0||(D=Fm(D),he(D))};function Jc(D,re,ve,Te,Le){var Je=new qg(re||this.boundingBox,ve||this.xStep,Te||this.yStep,this.gState,Le||this.matrix);Je.stream=this.stream;var dt=D+"$$"+this.cloneIndex+++"$$";return va(dt,Je),Je}var zm=function(D,re){var ve=Gl[D.key],Te=Wn[ve];if(Te instanceof vp)he("q"),he(fh(re)),Te.gState&&f.setGState(Te.gState),he(D.matrix.toString()+" cm"),he("/"+ve+" sh"),he("Q");else if(Te instanceof qg){var Le=new Jt(1,0,0,-1,0,nd());D.matrix&&(Le=Le.multiply(D.matrix||Yl),ve=Jc.call(Te,D.key,D.boundingBox,D.xStep,D.yStep,Le).id),he("q"),he("/Pattern cs"),he("/"+ve+" scn"),Te.gState&&f.setGState(Te.gState),he(re),he("Q")}},fh=function(D){switch(D){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ss=f.moveTo=function(D,re){return he(T(O(D))+" "+T(B(re))+" m"),this},Qa=f.lineTo=function(D,re){return he(T(O(D))+" "+T(B(re))+" l"),this},Qc=f.curveTo=function(D,re,ve,Te,Le,Je){return he([T(O(D)),T(B(re)),T(O(ve)),T(B(Te)),T(O(Le)),T(B(Je)),"c"].join(" ")),this};f.__private__.line=f.line=function(D,re,ve,Te,Le){if(isNaN(D)||isNaN(re)||isNaN(ve)||isNaN(Te)||!An(Le))throw new Error("Invalid arguments passed to jsPDF.line");return _===b.COMPAT?this.lines([[ve-D,Te-re]],D,re,[1,1],Le||"S"):this.lines([[ve-D,Te-re]],D,re,[1,1]).stroke()},f.__private__.lines=f.lines=function(D,re,ve,Te,Le,Je){var dt,Nt,Ot,cn,an,Rn,br,Ir,ps,Ii,Es,gl;if(typeof D=="number"&&(gl=ve,ve=re,re=D,D=gl),Te=Te||[1,1],Je=Je||!1,isNaN(re)||isNaN(ve)||!Array.isArray(D)||!Array.isArray(Te)||!An(Le)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ss(re,ve),dt=Te[0],Nt=Te[1],cn=D.length,Ii=re,Es=ve,Ot=0;Ot<cn;Ot++)(an=D[Ot]).length===2?(Ii=an[0]*dt+Ii,Es=an[1]*Nt+Es,Qa(Ii,Es)):(Rn=an[0]*dt+Ii,br=an[1]*Nt+Es,Ir=an[2]*dt+Ii,ps=an[3]*Nt+Es,Ii=an[4]*dt+Ii,Es=an[5]*Nt+Es,Qc(Rn,br,Ir,ps,Ii,Es));return Je&&Df(),hh(Le),this},f.path=function(D){for(var re=0;re<D.length;re++){var ve=D[re],Te=ve.c;switch(ve.op){case"m":ss(Te[0],Te[1]);break;case"l":Qa(Te[0],Te[1]);break;case"c":Qc.apply(this,Te);break;case"h":Df()}}return this},f.__private__.rect=f.rect=function(D,re,ve,Te,Le){if(isNaN(D)||isNaN(re)||isNaN(ve)||isNaN(Te)||!An(Le))throw new Error("Invalid arguments passed to jsPDF.rect");return _===b.COMPAT&&(Te=-Te),he([T(O(D)),T(B(re)),T(O(ve)),T(O(Te)),"re"].join(" ")),hh(Le),this},f.__private__.triangle=f.triangle=function(D,re,ve,Te,Le,Je,dt){if(isNaN(D)||isNaN(re)||isNaN(ve)||isNaN(Te)||isNaN(Le)||isNaN(Je)||!An(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-D,Te-re],[Le-ve,Je-Te],[D-Le,re-Je]],D,re,[1,1],dt,!0),this},f.__private__.roundedRect=f.roundedRect=function(D,re,ve,Te,Le,Je,dt){if(isNaN(D)||isNaN(re)||isNaN(ve)||isNaN(Te)||isNaN(Le)||isNaN(Je)||!An(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return Le=Math.min(Le,.5*ve),Je=Math.min(Je,.5*Te),this.lines([[ve-2*Le,0],[Le*Nt,0,Le,Je-Je*Nt,Le,Je],[0,Te-2*Je],[0,Je*Nt,-Le*Nt,Je,-Le,Je],[2*Le-ve,0],[-Le*Nt,0,-Le,-Je*Nt,-Le,-Je],[0,2*Je-Te],[0,-Je*Nt,Le*Nt,-Je,Le,-Je]],D+Le,re,[1,1],dt,!0),this},f.__private__.ellipse=f.ellipse=function(D,re,ve,Te,Le){if(isNaN(D)||isNaN(re)||isNaN(ve)||isNaN(Te)||!An(Le))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*ve,dt=4/3*(Math.SQRT2-1)*Te;return ss(D+ve,re),Qc(D+ve,re-dt,D+Je,re-Te,D,re-Te),Qc(D-Je,re-Te,D-ve,re-dt,D-ve,re),Qc(D-ve,re+dt,D-Je,re+Te,D,re+Te),Qc(D+Je,re+Te,D+ve,re+dt,D+ve,re),hh(Le),this},f.__private__.circle=f.circle=function(D,re,ve,Te){if(isNaN(D)||isNaN(re)||isNaN(ve)||!An(Te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,re,ve,ve,Te)},f.setFont=function(D,re,ve){return ve&&(re=A(re,ve)),zt=tc(D,re,{disableWarning:!1}),this};var vy=f.__private__.getFont=f.getFont=function(){return Dn[tc.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var D,re,ve={};for(D in gr)if(gr.hasOwnProperty(D))for(re in ve[D]=[],gr[D])gr[D].hasOwnProperty(re)&&ve[D].push(re);return ve},f.addFont=function(D,re,ve,Te,Le){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Le=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(ve=A(ve,Te)),Le=Le||"Identity-H",ch.call(this,D,re,ve,Le)};var ph,Lf=t.lineWidth||.200025,Ju=f.__private__.getLineWidth=f.getLineWidth=function(){return Lf},xy=f.__private__.setLineWidth=f.setLineWidth=function(D){return Lf=D,he(T(O(D))+" w"),this};f.__private__.setLineDash=Yt.API.setLineDash=Yt.API.setLineDashPattern=function(D,re){if(D=D||[],re=re||0,isNaN(re)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(ve){return T(O(ve))}).join(" "),re=T(O(re)),he("["+D+"] "+re+" d"),this};var Bm=f.__private__.getLineHeight=f.getLineHeight=function(){return nt*ph};f.__private__.getLineHeight=f.getLineHeight=function(){return nt*ph};var Cn=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(ph=D),this},by=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return ph};Cn(t.lineHeight);var fs=f.__private__.getHorizontalCoordinate=function(D){return O(D)},eo=f.__private__.getVerticalCoordinate=function(D){return _===b.ADVANCED?D:on[Y].mediaBox.topRightY-on[Y].mediaBox.bottomLeftY-O(D)},wy=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(D){return T(fs(D))},Qu=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(D){return T(eo(D))},to=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Za(to)},f.__private__.setStrokeColor=f.setDrawColor=function(D,re,ve,Te){return to=jo({ch1:D,ch2:re,ch3:ve,ch4:Te,pdfColorType:"draw",precision:2}),he(to),this};var Wm=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Za(Wm)},f.__private__.setFillColor=f.setFillColor=function(D,re,ve,Te){return Wm=jo({ch1:D,ch2:re,ch3:ve,ch4:Te,pdfColorType:"fill",precision:2}),he(Wm),this};var ed=t.textColor||"0 g",m1=f.__private__.getTextColor=f.getTextColor=function(){return Za(ed)};f.__private__.setTextColor=f.setTextColor=function(D,re,ve,Te){return ed=jo({ch1:D,ch2:re,ch3:ve,ch4:Te,pdfColorType:"text",precision:3}),this};var Rf=t.charSpace,Um=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Rf||0)};f.__private__.setCharSpace=f.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rf=D,this};var Vm=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(D){var re=f.CapJoinStyles[D];if(re===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vm=re,he(re+" J"),this};var ba=0;f.__private__.setLineJoin=f.setLineJoin=function(D){var re=f.CapJoinStyles[D];if(re===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ba=re,he(re+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(T(O(D))+" M"),this},f.GState=f_,f.setGState=function(D){(D=typeof D=="string"?Rr[Eo[D]]:_y(null,D)).equals(Kl)||(he("/"+D.id+" gs"),Kl=D)};var _y=function(D,re){if(!D||!Eo[D]){var ve=!1;for(var Te in Rr)if(Rr.hasOwnProperty(Te)&&Rr[Te].equals(re)){ve=!0;break}if(ve)re=Rr[Te];else{var Le="GS"+(Object.keys(Rr).length+1).toString(10);Rr[Le]=re,re.id=Le}return D&&(Eo[D]=re.id),Kn.publish("addGState",re),re}};f.addGState=function(D,re){return _y(D,re),this},f.saveGraphicsState=function(){return he("q"),si.push({key:zt,size:nt,color:ed}),this},f.restoreGraphicsState=function(){he("Q");var D=si.pop();return zt=D.key,nt=D.size,ed=D.color,Kl=null,this},f.setCurrentTransformationMatrix=function(D){return he(D.toString()+" cm"),this},f.comment=function(D){return he("#"+D),this};var mh=function(D,re){var ve=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(Je){isNaN(Je)||(ve=parseFloat(Je))}});var Te=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Te},set:function(Je){isNaN(Je)||(Te=parseFloat(Je))}});var Le="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Le},set:function(Je){Le=Je.toString()}}),this},Do=function(D,re,ve,Te){mh.call(this,D,re),this.type="rect";var Le=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Le},set:function(dt){isNaN(dt)||(Le=parseFloat(dt))}});var Je=Te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(dt){isNaN(dt)||(Je=parseFloat(dt))}}),this},Mf=function(){this.page=Gr,this.currentPage=Y,this.pages=_e.slice(0),this.pagesContext=on.slice(0),this.x=wn,this.y=nn,this.matrix=qr,this.width=td(Y),this.height=nd(Y),this.outputDestination=He,this.id="",this.objectNumber=-1};Mf.prototype.restore=function(){Gr=this.page,Y=this.currentPage,on=this.pagesContext,_e=this.pages,wn=this.x,nn=this.y,qr=this.matrix,zf(Y,this.width),Gm(Y,this.height),He=this.outputDestination};var Hm=function(D,re,ve,Te,Le){Po.push(new Mf),Gr=Y=0,_e=[],wn=D,nn=re,qr=Le,Ti([ve,Te])},qm=function(D){if(Xl[D])Po.pop().restore();else{var re=new Mf,ve="Xo"+(Object.keys(ii).length+1).toString(10);re.id=ve,Xl[D]=ve,ii[ve]=re,Kn.publish("addFormObject",re),Po.pop().restore()}};for(var Ff in f.beginFormObject=function(D,re,ve,Te,Le){return Hm(D,re,ve,Te,Le),this},f.endFormObject=function(D){return qm(D),this},f.doFormObject=function(D,re){var ve=ii[Xl[D]];return he("q"),he(re.toString()+" cm"),he("/"+ve.id+" Do"),he("Q"),this},f.getFormObject=function(D){var re=ii[Xl[D]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},f.save=function(D,re){return D=D||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(Ng(Zc(ml()),D),typeof Ng.unload=="function"&&tn.setTimeout&&setTimeout(Ng.unload,911),this):new Promise(function(ve,Te){try{var Le=Ng(Zc(ml()),D);typeof Ng.unload=="function"&&tn.setTimeout&&setTimeout(Ng.unload,911),ve(Le)}catch(Je){Te(Je.message)}})},Yt.API)Yt.API.hasOwnProperty(Ff)&&(Ff==="events"&&Yt.API.events.length?function(D,re){var ve,Te,Le;for(Le=re.length-1;Le!==-1;Le--)ve=re[Le][0],Te=re[Le][1],D.subscribe.apply(D,[ve].concat(typeof Te=="function"?[Te]:Te))}(Kn,Yt.API.events):f[Ff]=Yt.API[Ff]);var td=f.getPageWidth=function(D){return(on[D=D||Y].mediaBox.topRightX-on[D].mediaBox.bottomLeftX)/ft},zf=f.setPageWidth=function(D,re){on[D].mediaBox.topRightX=re*ft+on[D].mediaBox.bottomLeftX},nd=f.getPageHeight=function(D){return(on[D=D||Y].mediaBox.topRightY-on[D].mediaBox.bottomLeftY)/ft},Gm=f.setPageHeight=function(D,re){on[D].mediaBox.topRightY=re*ft+on[D].mediaBox.bottomLeftY};return f.internal={pdfEscape:ai,getStyle:Fm,getFont:vy,getFontSize:xe,getCharSpace:Um,getTextColor:m1,getLineHeight:Bm,getLineHeightFactor:by,getLineWidth:Ju,write:ht,getHorizontalCoordinate:fs,getVerticalCoordinate:eo,getCoordinateString:wy,getVerticalCoordinateString:Qu,collections:{},newObject:er,newAdditionalObject:nh,newObjectDeferred:St,newObjectDeferredBegin:xa,getFilters:Qi,putStream:Ja,events:Kn,scaleFactor:ft,pageSize:{getWidth:function(){return td(Y)},setWidth:function(D){zf(Y,D)},getHeight:function(){return nd(Y)},setHeight:function(D){Gm(Y,D)}},encryptionOptions:u,encryption:As,getEncryptor:yy,output:Yu,getNumberOfPages:Kr,pages:_e,out:he,f2:$,f3:j,getPageInfo:$f,getPageInfoByObjId:sn,getCurrentPageInfo:ln,getPDFVersion:y,Point:mh,Rectangle:Do,Matrix:Jt,hasHotfix:jf},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return td(Y)},set:function(D){zf(Y,D)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return nd(Y)},set:function(D){Gm(Y,D)},enumerable:!0,configurable:!0}),hn.call(f,Ve),zt="F1",gy(s,n),Kn.publish("initialized"),f}cv.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},cv.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cv.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},cv.prototype.processOwnerPassword=function(t,e){return JD(ZD(e).substr(0,5),t)},cv.prototype.encryptor=function(t,e){var n=ZD(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return JD(n,r)}},f_.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||fr(t)!==fr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Yt.API={events:[]},Yt.version="2.5.2";var ys=Yt.API,f8=1,fy=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jy=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},fn=function(t){return t.toFixed(2)},sp=function(t){return t.toFixed(5)};ys.__acroform__={};var fl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},hK=function(t){return t*f8},gd=function(t){var e=new Mhe,n=Lt.internal.getHeight(t)||0,r=Lt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(fn(r)),Number(fn(n))],e},Hft=ys.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},qft=ys.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Gft=ys.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ds=ys.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Gft(t,e-1)},Ls=ys.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Hft(t,e-1)},Rs=ys.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qft(t,e-1)},Kft=ys.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+o)||0,l.upperRight_X=n(s+a)||0,l.upperRight_Y=r(i)||0,[Number(fn(l.lowerLeft_X)),Number(fn(l.lowerLeft_Y)),Number(fn(l.upperRight_X)),Number(fn(l.upperRight_Y))]},Xft=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=QD(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+fn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=gd(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},QD=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(j){return j.split(`
`)}):s.map(function(j){return[j]});var i=n,a=Lt.internal.getHeight(t)||0;a=a<0?-a:a;var o=Lt.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(j,O,F){if(j+1<s.length){var B=O+" "+s[j+1][0];return oC(B,t,F).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,d=oC("3",t,i).height,h=t.multiline?a-i:(a-d)/2,f=h+=2,m=0,y=0,v=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+oC(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var x="",b=0,_=0;_<s.length;_++)if(s.hasOwnProperty(_)){var k=!1;if(s[_].length!==1&&v!==s[_].length-1){if((d+2)*(b+2)+2>a)continue e;x+=s[_][v],k=!0,y=_,_--}else{x=(x+=s[_][v]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var N=parseInt(_),A=l(N,x,i),T=_>=s.length-1;if(A&&!T){x+=" ",v=0;continue}if(A||T){if(T)y=N;else if(t.multiline&&(d+2)*(b+2)+2>a)continue e}else{if(!t.multiline||(d+2)*(b+2)+2>a)continue e;y=N}}for(var C="",P=m;P<=y;P++){var $=s[P];if(t.multiline){if(P===y){C+=$[v]+" ",v=(v+1)%$.length;continue}if(P===m){C+=$[$.length-1]+" ";continue}}C+=$[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,u=oC(C,t,i).width,t.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=fn(c)+" "+fn(f)+` Td
`,e+="("+fy(C)+`) Tj
`,e+=-fn(c)+` 0 Td
`,f=-(i+2),u=0,m=k?y:y+1,b++,x=""}break}return r.text=e,r.fontSize=i,r},oC=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Yft={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Zft=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Jft=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),fr(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},Qft=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Gu.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Yft)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");f8=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Fhe,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&Zft(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=Kft(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Lt.createDefaultAppearanceStream(o),fr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=Xft(o);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var f=o.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var m=f[a];typeof m=="function"&&(m=m.call(s,o)),d+="/"+a+" "+m+" ",s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m)}}else typeof(m=f)=="function"&&(m=m.call(s,o)),d+="/"+a+" "+m,s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}i&&Jft(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Rhe=ys.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),fr(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+fy(r(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},u4=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+fy(r(t))+")"},Id=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Id.prototype.toString=function(){return this.objId+" 0 R"},Id.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Id.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:Rhe(s,this.objId,this.scope)}):s instanceof Id?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var Mhe=function(){Id.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};fl(Mhe,Id);var Fhe=function(){Id.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+fy(n(t))+")"}},set:function(n){t=n}})};fl(Fhe,Id);var Gu=function t(){Id.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ds(e,3)},set:function(x){x?this.F=Ls(e,3):this.F=Rs(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof lI)return;i="FieldObject"+t.FieldNum++}var x=function(b){return b};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+fy(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/f8:c},set:function(x){c=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof lI||this instanceof Yp))return u4(d,this.objId,this.scope)},set:function(x){x=x.toString(),d=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof mi?h:u4(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof mi?x:x.substr(0,1)==="("?Jy(x.substr(1,x.length-2)):Jy(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mi?Jy(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof mi?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof mi?f:u4(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof mi?x:x.substr(0,1)==="("?Jy(x.substr(1,x.length-2)):Jy(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mi?Jy(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof mi?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(x){x=!!x,y=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,1)},set:function(x){x?this.Ff=Ls(this.Ff,1):this.Ff=Rs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,2)},set:function(x){x?this.Ff=Ls(this.Ff,2):this.Ff=Rs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,3)},set:function(x){x?this.Ff=Ls(this.Ff,3):this.Ff=Rs(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');v=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(v){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};fl(Gu,Id);var i0=function(){Gu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Rhe(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,a,o){o||(o=1);for(var l,c=[];l=a.exec(i);)c.push(l[o]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,18)},set:function(n){n?this.Ff=Ls(this.Ff,18):this.Ff=Rs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ls(this.Ff,19):this.Ff=Rs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,20)},set:function(n){n?(this.Ff=Ls(this.Ff,20),e.sort()):this.Ff=Rs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,22)},set:function(n){n?this.Ff=Ls(this.Ff,22):this.Ff=Rs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,23)},set:function(n){n?this.Ff=Ls(this.Ff,23):this.Ff=Rs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,27)},set:function(n){n?this.Ff=Ls(this.Ff,27):this.Ff=Rs(this.Ff,27)}}),this.hasAppearanceStream=!1};fl(i0,Gu);var a0=function(){i0.call(this),this.fontName="helvetica",this.combo=!1};fl(a0,i0);var o0=function(){a0.call(this),this.combo=!0};fl(o0,a0);var Kw=function(){o0.call(this),this.edit=!0};fl(Kw,o0);var mi=function(){Gu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,15)},set:function(n){n?this.Ff=Ls(this.Ff,15):this.Ff=Rs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,16)},set:function(n){n?this.Ff=Ls(this.Ff,16):this.Ff=Rs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,17)},set:function(n){n?this.Ff=Ls(this.Ff,17):this.Ff=Rs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,26)},set:function(n){n?this.Ff=Ls(this.Ff,26):this.Ff=Rs(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+fy(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){fr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};fl(mi,Gu);var Xw=function(){mi.call(this),this.pushButton=!0};fl(Xw,mi);var l0=function(){mi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};fl(l0,mi);var lI=function(){var t,e;Gu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+fy(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){fr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fl(lI,Gu),l0.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},l0.prototype.createOption=function(t){var e=new lI;return e.Parent=this,e.optionName=t,this.Kids.push(e),ept.call(this.scope,e),e};var Yw=function(){mi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lt.CheckBox.createAppearanceStream()};fl(Yw,mi);var Yp=function(){Gu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,13)},set:function(e){e?this.Ff=Ls(this.Ff,13):this.Ff=Rs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,21)},set:function(e){e?this.Ff=Ls(this.Ff,21):this.Ff=Rs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,23)},set:function(e){e?this.Ff=Ls(this.Ff,23):this.Ff=Rs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,24)},set:function(e){e?this.Ff=Ls(this.Ff,24):this.Ff=Rs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,25)},set:function(e){e?this.Ff=Ls(this.Ff,25):this.Ff=Rs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,26)},set:function(e){e?this.Ff=Ls(this.Ff,26):this.Ff=Rs(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fl(Yp,Gu);var Zw=function(){Yp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ds(this.Ff,14)},set:function(t){t?this.Ff=Ls(this.Ff,14):this.Ff=Rs(this.Ff,14)}}),this.password=!0};fl(Zw,Yp);var Lt={CheckBox:{createAppearanceStream:function(){return{N:{On:Lt.CheckBox.YesNormal},D:{On:Lt.CheckBox.YesPushDown,Off:Lt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=QD(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+fn(Lt.internal.getWidth(t))+" "+fn(Lt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+fn(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=gd(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=Lt.internal.getHeight(t),a=Lt.internal.getWidth(t),o=QD(t,t.caption);return s.push("1 g"),s.push("0 0 "+fn(a)+" "+fn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+fn(a-1)+" "+fn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+fn(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+fn(Lt.internal.getWidth(t))+" "+fn(Lt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Lt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Lt.RadioButton.Circle.YesNormal,e.D[t]=Lt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=gd(t);e.scope=t.scope;var n=[],r=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Lt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sp(Lt.internal.getWidth(t)/2)+" "+sp(Lt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=[],r=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Lt.internal.Bezier_C).toFixed(5)),a=Number((r*Lt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sp(Lt.internal.getWidth(t)/2)+" "+sp(Lt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sp(Lt.internal.getWidth(t)/2)+" "+sp(Lt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=[],r=Lt.internal.getWidth(t)<=Lt.internal.getHeight(t)?Lt.internal.getWidth(t)/4:Lt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Lt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sp(Lt.internal.getWidth(t)/2)+" "+sp(Lt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Lt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Lt.RadioButton.Cross.YesNormal,e.D[t]=Lt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=gd(t);e.scope=t.scope;var n=[],r=Lt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+fn(Lt.internal.getWidth(t)-2)+" "+fn(Lt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(fn(r.x1.x)+" "+fn(r.x1.y)+" m"),n.push(fn(r.x2.x)+" "+fn(r.x2.y)+" l"),n.push(fn(r.x4.x)+" "+fn(r.x4.y)+" m"),n.push(fn(r.x3.x)+" "+fn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=Lt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+fn(Lt.internal.getWidth(t))+" "+fn(Lt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+fn(Lt.internal.getWidth(t)-2)+" "+fn(Lt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(fn(n.x1.x)+" "+fn(n.x1.y)+" m"),r.push(fn(n.x2.x)+" "+fn(n.x2.y)+" l"),r.push(fn(n.x4.x)+" "+fn(n.x4.y)+" m"),r.push(fn(n.x3.x)+" "+fn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=gd(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+fn(Lt.internal.getWidth(t))+" "+fn(Lt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Lt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Lt.internal.getWidth(t),n=Lt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Lt.internal.getWidth=function(t){var e=0;return fr(t)==="object"&&(e=hK(t.Rect[2])),e},Lt.internal.getHeight=function(t){var e=0;return fr(t)==="object"&&(e=hK(t.Rect[3])),e};var ept=ys.addField=function(t){if(Qft(this,t),!(t instanceof Gu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=i0,ys.AcroFormListBox=a0,ys.AcroFormComboBox=o0,ys.AcroFormEditBox=Kw,ys.AcroFormButton=mi,ys.AcroFormPushButton=Xw,ys.AcroFormRadioButton=l0,ys.AcroFormCheckBox=Yw,ys.AcroFormTextField=Yp,ys.AcroFormPasswordField=Zw,ys.AcroFormAppearance=Lt,ys.AcroForm={ChoiceField:i0,ListBox:a0,ComboBox:o0,EditBox:Kw,Button:mi,PushButton:Xw,RadioButton:l0,CheckBox:Yw,TextField:Yp,PasswordField:Zw,Appearance:Lt},Yt.AcroForm={ChoiceField:i0,ListBox:a0,ComboBox:o0,EditBox:Kw,Button:mi,PushButton:Xw,RadioButton:l0,CheckBox:Yw,TextField:Yp,PasswordField:Zw,Appearance:Lt};var tpt=Yt.AcroForm;function zhe(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(j,O){var F,B,Z,V,G,U=e;if((O=O||e)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(A(j))for(G in n)for(Z=n[G],F=0;F<Z.length;F+=1){for(V=!0,B=0;B<Z[F].length;B+=1)if(Z[F][B]!==void 0&&Z[F][B]!==j[B]){V=!1;break}if(V===!0){U=G;break}}else for(G in n)for(Z=n[G],F=0;F<Z.length;F+=1){for(V=!0,B=0;B<Z[F].length;B+=1)if(Z[F][B]!==void 0&&Z[F][B]!==j.charCodeAt(B)){V=!1;break}if(V===!0){U=G;break}}return U===e&&O!==e&&(U=O),U},s=function j(O){for(var F=this.internal.write,B=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:O.width}),V.push({key:"Height",value:O.height}),O.colorSpace===v.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===v.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var G="",U=0,K=O.transparency.length;U<K;U++)G+=O.transparency[U]+" "+O.transparency[U]+" ";V.push({key:"Mask",value:"["+G+"]"})}O.sMask!==void 0&&V.push({key:"SMask",value:O.objectId+1+" 0 R"});var ee=O.filter!==void 0?["/"+O.filter]:void 0;if(B({data:O.data,additionalKeyValues:V,alreadyAppliedFilters:ee,objectId:O.objectId}),F("endobj"),"sMask"in O&&O.sMask!==void 0){var oe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,W={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:oe,data:O.sMask};"filter"in O&&(W.filter=O.filter),j.call(this,W)}if(O.colorSpace===v.INDEXED){var Y=this.internal.newObject();B({data:C(new Uint8Array(O.palette)),objectId:Y}),F("endobj")}},i=function(){var j=this.internal.collections.addImage_images;for(var O in j)s.call(this,j[O])},a=function(){var j,O=this.internal.collections.addImage_images,F=this.internal.write;for(var B in O)F("/I"+(j=O[B]).index,j.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var j=this.internal.collections.addImage_images;return o.call(this),j},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(j){return typeof t["process"+j.toUpperCase()]=="function"},d=function(j){return fr(j)==="object"&&j.nodeType===1},h=function(j,O){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var F=""+j.getAttribute("src");if(F.indexOf("data:image/")===0)return Gw(unescape(F).split("base64,").pop());var B=t.loadFile(F,!0);if(B!==void 0)return B}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var Z;switch(O){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Gw(j.toDataURL(Z,1).split("base64,").pop())}},f=function(j){var O=this.internal.collections.addImage_images;if(O){for(var F in O)if(j===O[F].alias)return O[F]}},m=function(j,O,F){return j||O||(j=-96,O=-96),j<0&&(j=-1*F.width*72/j/this.internal.scaleFactor),O<0&&(O=-1*F.height*72/O/this.internal.scaleFactor),j===0&&(j=O*F.width/F.height),O===0&&(O=j*F.height/F.width),[j,O]},y=function(j,O,F,B,Z,V){var G=m.call(this,F,B,Z),U=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,ee=l.call(this);if(F=G[0],B=G[1],ee[Z.index]=Z,V){V*=Math.PI/180;var oe=Math.cos(V),W=Math.sin(V),Y=function(J){return J.toFixed(4)},Q=[Y(oe),Y(W),Y(-1*W),Y(oe),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,U(j),K(O+B),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([U(F),"0","0",U(B),"0","0","cm"].join(" "))):this.internal.write([U(F),"0","0",U(B),U(j),K(O+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(j){var O,F,B=0;if(typeof j=="string")for(F=j.length,O=0;O<F;O++)B=(B<<5)-B+j.charCodeAt(O),B|=0;else if(A(j))for(F=j.byteLength/2,O=0;O<F;O++)B=(B<<5)-B+j[O],B|=0;return B},_=t.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var O=!0;return j.length===0&&(O=!1),j.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(O=!1),O},k=t.__addimage__.extractImageFromDataUrl=function(j){var O=(j=j||"").split("base64,"),F=null;if(O.length===2){var B=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(B)&&(F={mimeType:B[1],charset:B[2],data:O[1]})}return F},N=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(j){return N()&&j instanceof ArrayBuffer};var A=t.__addimage__.isArrayBufferView=function(j){return N()&&typeof Uint32Array<"u"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(j){for(var O=j.length,F=new Uint8Array(O),B=0;B<O;B++)F[B]=j.charCodeAt(B);return F},C=t.__addimage__.arrayBufferToBinaryString=function(j){for(var O="",F=A(j)?j:new Uint8Array(j),B=0;B<F.length;B+=8192)O+=String.fromCharCode.apply(null,F.subarray(B,B+8192));return O};t.addImage=function(){var j,O,F,B,Z,V,G,U,K;if(typeof arguments[1]=="number"?(O=e,F=arguments[1],B=arguments[2],Z=arguments[3],V=arguments[4],G=arguments[5],U=arguments[6],K=arguments[7]):(O=arguments[1],F=arguments[2],B=arguments[3],Z=arguments[4],V=arguments[5],G=arguments[6],U=arguments[7],K=arguments[8]),fr(j=arguments[0])==="object"&&!d(j)&&"imageData"in j){var ee=j;j=ee.imageData,O=ee.format||O||e,F=ee.x||F||0,B=ee.y||B||0,Z=ee.w||ee.width||Z,V=ee.h||ee.height||V,G=ee.alias||G,U=ee.compression||U,K=ee.rotation||ee.angle||K}var oe=this.internal.getFilters();if(U===void 0&&oe.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(F)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var W=P.call(this,j,O,G,U);return y.call(this,F,B,Z,V,W,K),this};var P=function(j,O,F,B){var Z,V,G;if(typeof j=="string"&&r(j)===e){j=unescape(j);var U=$(j,!1);(U!==""||(U=t.loadFile(j,!0))!==void 0)&&(j=U)}if(d(j)&&(j=h(j,O)),O=r(j,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((G=F)==null||G.length===0)&&(F=function(K){return typeof K=="string"||A(K)?b(K):A(K.data)?b(K.data):null}(j)),(Z=f.call(this,F))||(N()&&(j instanceof Uint8Array||O==="RGBA"||(V=j,j=T(j))),Z=this["process"+O.toUpperCase()](j,c.call(this),F,function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in t.image_compression?K:x.NONE}(B),V)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},$=t.__addimage__.convertBase64ToBinaryString=function(j,O){var F;O=typeof O!="boolean"||O;var B,Z="";if(typeof j=="string"){B=(F=k(j))!==null?F.data:j;try{Z=Gw(B)}catch(V){if(O)throw _(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(j){var O,F,B="";if(d(j)&&(j=h(j)),typeof j=="string"&&r(j)===e&&((B=$(j,!1))===""&&(B=t.loadFile(j)||""),j=B),F=r(j),!u(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(!N()||j instanceof Uint8Array||(j=T(j)),!(O=this["process"+F.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=F,O}})(Yt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Yt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,m=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(y.objId),b=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+f(x(r.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+f(x(b))+") >>",y.content=i;var _=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(y.objId,"0 R",v.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(m(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var N=this.annotations._nameMap[r.options.name];r.options.pageNumber=N.page,r.options.top=N.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(m(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var A=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+A+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+s),h:c(r+i)},options:a,type:"link"})},t.textWithLink=function(n,r,s,i){var a,o,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(n,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(n,r,s,i),s+=.2*c,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-c,o,a,i),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Yt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&i(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var v=0,x=n,b="",_=0;for(v=0;v<y.length;v+=1)x[y.charCodeAt(v)]!==void 0?(_++,typeof(x=x[y.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(x),x=n,_=0),v===y.length-1&&(x=n,b+=y.charAt(v-(_-1)),v-=_-1,_=0)):(x=n,b+=y.charAt(v-_),v-=_,_=0);return b};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(y,v,x){return a(y)?i(y)===!1?-1:!c(y)||!a(v)&&!a(x)||!a(x)&&o(v)||o(y)&&!a(v)||o(y)&&l(v)||o(y)&&o(v)?0:u(y)&&a(v)&&!o(v)&&a(x)&&c(x)?3:o(y)||!a(x)?1:2:-1},f=function(y){var v=0,x=0,b=0,_="",k="",N="",A=(y=y||"").split("\\s+"),T=[];for(v=0;v<A.length;v+=1){for(T.push(""),x=0;x<A[v].length;x+=1)_=A[v][x],k=A[v][x-1],N=A[v][x+1],a(_)?(b=h(_,k,N),T[v]+=b!==-1?String.fromCharCode(e[_.charCodeAt(0)][b]):_):T[v]+=_;T[v]=d(T[v])}return T.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var y,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(v)){var b=0;for(x=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?x.push([f(v[b][0]),v[b][1],v[b][2]]):x.push([f(v[b])]);y=x}else y=f(v);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",m])}(Yt.API),Yt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(o){n=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Yt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(y){m=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,m=0,y=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,k){return _.concat(v.splitTextToSize(k,x))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)f<(y=this.getStringUnitWidth(l[b],{font:d})*u)&&(f=y);return f!==0&&(m=l.length),{w:f/=h,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,m,y,v,x=[],b=[],_=[],k={},N={},A=[],T=[],C=(h=h||{}).autoSize||!1,P=h.printHeaders!==!1,$=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,j=h.margins||Object.assign({width:this.getPageWidth()},e),O=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",B=h.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=B,this.setFontSize($),d==null)b=x=Object.keys(u[0]),_=x.map(function(){return"left"});else if(Array.isArray(d)&&fr(d[0])==="object")for(x=d.map(function(ee){return ee.name}),b=d.map(function(ee){return ee.prompt||ee.name||""}),_=d.map(function(ee){return ee.align||"left"}),f=0;f<d.length;f+=1)N[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(b=x=d,_=x.map(function(){return"left"}));if(C||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<x.length;f+=1){for(k[v=x[f]]=u.map(function(ee){return ee[v]}),this.setFont(void 0,"bold"),A.push(this.getTextDimensions(b[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=k[v],this.setFont(void 0,"normal"),y=0;y<m.length;y+=1)A.push(this.getTextDimensions(m[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[v]=Math.max.apply(null,A)+O+O,A=[]}if(P){var Z={};for(f=0;f<x.length;f+=1)Z[x[f]]={},Z[x[f]].text=b[f],Z[x[f]].align=_[f];var V=o.call(this,Z,N);T=x.map(function(ee){return new i(l,c,N[ee],V,Z[ee].text,void 0,Z[ee].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var G=d.reduce(function(ee,oe){return ee[oe.name]=oe.align,ee},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var U=o.call(this,u[f],N);for(y=0;y<x.length;y+=1){var K=u[f][x[y]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:y,data:K},this),a.call(this,new i(l,c,N[x[y]],U,K,f+2,G[x[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var m=l[f];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,m){return Math.max(f,m)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(Yt.API);var Bhe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Whe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],eL=zhe(Whe),Uhe=[100,200,300,400,500,600,700,800,900],npt=zhe(Uhe);function tL(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return Bhe[i=i||"normal"]?i:"normal"}(t.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof eL[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function fK(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var rpt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pK={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function mK(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function spt(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},rpt,n.genericFontFamilies||{}),i=null,a=null,o=0;o<e.length;++o)if(s[(i=tL(e[o])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){a=t[i.family];break}if(!(a=a||t[r]))throw new Error("Could not find a font-family for the rule '"+mK(i)+"' and default family '"+r+"'.");if(a=function(l,c){if(c[l])return c[l];var u=eL[l],d=u<=eL.normal?-1:1,h=fK(c,Whe,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=Bhe[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(i.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=npt[l],d=fK(c,Uhe,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+mK(i)+"'.");return a}function gK(t){return t.trimLeft()}function ipt(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function apt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var lC,yK,vK,d4=["times"];(function(t){var e,n,r,s,i,a,o,l,c,u=function(W){return W=W||{},this.isStrokeTransparent=W.isStrokeTransparent||!1,this.strokeOpacity=W.strokeOpacity||1,this.strokeStyle=W.strokeStyle||"#000000",this.fillStyle=W.fillStyle||"#000000",this.isFillTransparent=W.isFillTransparent||!1,this.fillOpacity=W.fillOpacity||1,this.font=W.font||"10px sans-serif",this.textBaseline=W.textBaseline||"alphabetic",this.textAlign=W.textAlign||"left",this.lineWidth=W.lineWidth||1,this.lineJoin=W.lineJoin||"miter",this.lineCap=W.lineCap||"butt",this.path=W.path||[],this.transform=W.transform!==void 0?W.transform.clone():new l,this.globalCompositeOperation=W.globalCompositeOperation||"normal",this.globalAlpha=W.globalAlpha||1,this.clip_path=W.clip_path||[],this.currentPoint=W.currentPoint||new a,this.miterLimit=W.miterLimit||10,this.lastPoint=W.lastPoint||new a,this.lineDashOffset=W.lineDashOffset||0,this.lineDash=W.lineDash||[],this.margin=W.margin||[0,0,0,0],this.prevPageLastElemOffset=W.prevPageLastElemOffset||0,this.ignoreClearRect=typeof W.ignoreClearRect!="boolean"||W.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(W){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=W;Object.defineProperty(this,"pdf",{get:function(){return Y}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Ae){Q=!!Ae}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Ae){J=!!Ae}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Ae){isNaN(Ae)||(te=Ae)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Ae){isNaN(Ae)||(me=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ae){var he;typeof Ae=="number"?he=[Ae,Ae,Ae,Ae]:((he=new Array(4))[0]=Ae[0],he[1]=Ae.length>=2?Ae[1]:he[0],he[2]=Ae.length>=3?Ae[2]:he[0],he[3]=Ae.length>=4?Ae[3]:he[1]),c.margin=he}});var ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ge},set:function(Ae){ge=Ae}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Ae){ce=Ae}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Ae){Ce=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ae){Ae instanceof u&&(c=Ae)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ae){c.path=Ae}});var _e=[];Object.defineProperty(this,"ctxStack",{get:function(){return _e},set:function(Ae){_e=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var he;he=h(Ae),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var he=h(Ae);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var we=null;function He(Ae,he){if(we===null){var ht=function(Me){var Ve=[];return Object.keys(Me).forEach(function(nt){Me[nt].forEach(function(pe){var xe=null;switch(pe){case"bold":xe={family:nt,weight:"bold"};break;case"italic":xe={family:nt,style:"italic"};break;case"bolditalic":xe={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:nt}}xe!==null&&(xe.ref={name:nt,style:pe},Ve.push(xe))})}),Ve}(Ae.getFontList());we=function(Me){for(var Ve={},nt=0;nt<Me.length;++nt){var pe=tL(Me[nt]),xe=pe.family,je=pe.stretch,qe=pe.style,Ge=pe.weight;Ve[xe]=Ve[xe]||{},Ve[xe][je]=Ve[xe][je]||{},Ve[xe][je][qe]=Ve[xe][je][qe]||{},Ve[xe][je][qe][Ge]=pe}return Ve}(ht.concat(he))}return we}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(Ae){we=null,Qe=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var he;if(this.ctx.font=Ae,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var ht=he[1],Me=(he[2],he[3]),Ve=he[4],nt=(he[5],he[6]),pe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(pe==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:pe==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var xe=function(gt){var zt,ft,wn=[],nn=gt.trim();if(nn==="")return d4;if(nn in pK)return[pK[nn]];for(;nn!=="";){switch(ft=null,zt=(nn=gK(nn)).charAt(0)){case'"':case"'":ft=ipt(nn.substring(1),zt);break;default:ft=apt(nn)}if(ft===null||(wn.push(ft[0]),(nn=gK(ft[1]))!==""&&nn.charAt(0)!==","))return d4;nn=nn.replace(/^,/,"")}return wn}(nt);if(this.fontFaces){var je=spt(He(this.pdf,this.fontFaces),xe.map(function(gt){return{family:gt,stretch:"normal",weight:Me,style:ht}}));this.pdf.setFont(je.ref.name,je.ref.style)}else{var qe="";(Me==="bold"||parseInt(Me,10)>=700||ht==="bold")&&(qe="bold"),ht==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Ge="",Ue={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},st=0;st<xe.length;st++){if(this.pdf.internal.getFont(xe[st],qe,{noFallback:!0,disableWarning:!0})!==void 0){Ge=xe[st];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(xe[st],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ge=xe[st],qe="bold";else if(this.pdf.internal.getFont(xe[st],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ge=xe[st],qe="normal";break}}if(Ge===""){for(var wt=0;wt<xe.length;wt++)if(Ue[xe[wt]]){Ge=Ue[xe[wt]];break}}Ge=Ge===""?"Times":Ge,this.pdf.setFont(Ge,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};d.prototype.setLineDash=function(W){this.lineDash=W},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){k.call(this,"fill",!1)},d.prototype.stroke=function(){k.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(W,Y){if(isNaN(W)||isNaN(Y))throw kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new a(W,Y));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(W,Y)},d.prototype.closePath=function(){var W=new a(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&fr(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){W=new a(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(W.x,W.y)},d.prototype.lineTo=function(W,Y){if(isNaN(W)||isNaN(Y))throw kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new a(W,Y));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},d.prototype.quadraticCurveTo=function(W,Y,Q,J){if(isNaN(Q)||isNaN(J)||isNaN(W)||isNaN(Y))throw kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(Q,J)),me=this.ctx.transform.applyToPoint(new a(W,Y));this.path.push({type:"qct",x1:me.x,y1:me.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},d.prototype.bezierCurveTo=function(W,Y,Q,J,te,me){if(isNaN(te)||isNaN(me)||isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J))throw kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ge=this.ctx.transform.applyToPoint(new a(te,me)),ce=this.ctx.transform.applyToPoint(new a(W,Y)),Ce=this.ctx.transform.applyToPoint(new a(Q,J));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:Ce.x,y2:Ce.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new a(ge.x,ge.y)},d.prototype.arc=function(W,Y,Q,J,te,me){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J)||isNaN(te))throw kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var ge=this.ctx.transform.applyToPoint(new a(W,Y));W=ge.x,Y=ge.y;var ce=this.ctx.transform.applyToPoint(new a(0,Q)),Ce=this.ctx.transform.applyToPoint(new a(0,0));Q=Math.sqrt(Math.pow(ce.x-Ce.x,2)+Math.pow(ce.y-Ce.y,2))}Math.abs(te-J)>=2*Math.PI&&(J=0,te=2*Math.PI),this.path.push({type:"arc",x:W,y:Y,radius:Q,startAngle:J,endAngle:te,counterclockwise:me})},d.prototype.arcTo=function(W,Y,Q,J,te){throw new Error("arcTo not implemented.")},d.prototype.rect=function(W,Y,Q,J){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J))throw kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(W,Y),this.lineTo(W+Q,Y),this.lineTo(W+Q,Y+J),this.lineTo(W,Y+J),this.lineTo(W,Y),this.lineTo(W+Q,Y),this.lineTo(W,Y)},d.prototype.fillRect=function(W,Y,Q,J){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J))throw kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(W,Y,Q,J),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},d.prototype.strokeRect=function(W,Y,Q,J){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J))throw kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(W,Y,Q,J),this.stroke())},d.prototype.clearRect=function(W,Y,Q,J){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J))throw kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(W,Y,Q,J))},d.prototype.save=function(W){W=typeof W!="boolean"||W;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),W){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},d.prototype.restore=function(W){W=typeof W!="boolean"||W;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),W&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(W){var Y,Q,J,te;if(W.isCanvasGradient===!0&&(W=W.getColor()),!W)return{r:0,g:0,b:0,a:0,style:W};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(W))Y=0,Q=0,J=0,te=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(W);if(me!==null)Y=parseInt(me[1]),Q=parseInt(me[2]),J=parseInt(me[3]),te=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(W))!==null)Y=parseInt(me[1]),Q=parseInt(me[2]),J=parseInt(me[3]),te=parseFloat(me[4]);else{if(te=1,typeof W=="string"&&W.charAt(0)!=="#"){var ge=new $he(W);W=ge.ok?ge.toHex():"#000000"}W.length===4?(Y=W.substring(1,2),Y+=Y,Q=W.substring(2,3),Q+=Q,J=W.substring(3,4),J+=J):(Y=W.substring(1,3),Q=W.substring(3,5),J=W.substring(5,7)),Y=parseInt(Y,16),Q=parseInt(Q,16),J=parseInt(J,16)}}return{r:Y,g:Q,b:J,a:te,style:W}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(W,Y,Q,J){if(isNaN(Y)||isNaN(Q)||typeof W!="string")throw kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!f.call(this)){var te=U(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;O.call(this,{text:W,x:Y,y:Q,scale:me,angle:te,align:this.textAlign,maxWidth:J})}},d.prototype.strokeText=function(W,Y,Q,J){if(isNaN(Y)||isNaN(Q)||typeof W!="string")throw kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){J=isNaN(J)?void 0:J;var te=U(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;O.call(this,{text:W,x:Y,y:Q,scale:me,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:J})}},d.prototype.measureText=function(W){if(typeof W!="string")throw kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,Q=this.pdf.internal.scaleFactor,J=Y.internal.getFontSize(),te=Y.getStringUnitWidth(W)*J/Y.internal.scaleFactor,me=function(ge){var ce=(ge=ge||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new me({width:te*=Math.round(96*Q/72*1e4)/1e4})},d.prototype.scale=function(W,Y){if(isNaN(W)||isNaN(Y))throw kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new l(W,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},d.prototype.rotate=function(W){if(isNaN(W))throw kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(W),Math.sin(W),-Math.sin(W),Math.cos(W),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.translate=function(W,Y){if(isNaN(W)||isNaN(Y))throw kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new l(1,0,0,1,W,Y);this.ctx.transform=this.ctx.transform.multiply(Q)},d.prototype.transform=function(W,Y,Q,J,te,me){if(isNaN(W)||isNaN(Y)||isNaN(Q)||isNaN(J)||isNaN(te)||isNaN(me))throw kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ge=new l(W,Y,Q,J,te,me);this.ctx.transform=this.ctx.transform.multiply(ge)},d.prototype.setTransform=function(W,Y,Q,J,te,me){W=isNaN(W)?1:W,Y=isNaN(Y)?0:Y,Q=isNaN(Q)?0:Q,J=isNaN(J)?1:J,te=isNaN(te)?0:te,me=isNaN(me)?0:me,this.ctx.transform=new l(W,Y,Q,J,te,me)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(W,Y,Q,J,te,me,ge,ce,Ce){var _e=this.pdf.getImageProperties(W),we=1,He=1,Qe=1,Ae=1;J!==void 0&&ce!==void 0&&(Qe=ce/J,Ae=Ce/te,we=_e.width/J*ce/J,He=_e.height/te*Ce/te),me===void 0&&(me=Y,ge=Q,Y=0,Q=0),J!==void 0&&ce===void 0&&(ce=J,Ce=te),J===void 0&&ce===void 0&&(ce=_e.width,Ce=_e.height);for(var he,ht=this.ctx.transform.decompose(),Me=U(ht.rotate.shx),Ve=new l,nt=(Ve=(Ve=(Ve=Ve.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new o(me-Y*Qe,ge-Q*Ae,J*we,te*He)),pe=v.call(this,nt),xe=[],je=0;je<pe.length;je+=1)xe.indexOf(pe[je])===-1&&xe.push(pe[je]);if(_(xe),this.autoPaging)for(var qe=xe[0],Ge=xe[xe.length-1],Ue=qe;Ue<Ge+1;Ue++){this.pdf.setPage(Ue);var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=Ue===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Ue===1?0:gt+(Ue-2)*zt;if(this.ctx.clip_path.length!==0){var wn=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(he,this.posX+this.margin[3],-ft+wt+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=wn}var nn=JSON.parse(JSON.stringify(nt));nn=b([nn],this.posX+this.margin[3],-ft+wt+this.ctx.prevPageLastElemOffset)[0];var qr=(Ue>qe||Ue<Ge)&&y.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,zt,null).clip().discardPath()),this.pdf.addImage(W,"JPEG",nn.x,nn.y,nn.w,nn.h,null,null,Me),qr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(W,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,Me)};var v=function(W,Y,Q){var J=[];Y=Y||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(W.type){default:case"mt":case"lt":J.push(Math.floor((W.y+te)/Q)+1);break;case"arc":J.push(Math.floor((W.y+te-W.radius)/Q)+1),J.push(Math.floor((W.y+te+W.radius)/Q)+1);break;case"qct":var me=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x,W.y);J.push(Math.floor((me.y+te)/Q)+1),J.push(Math.floor((me.y+me.h+te)/Q)+1);break;case"bct":var ge=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,W.x1,W.y1,W.x2,W.y2,W.x,W.y);J.push(Math.floor((ge.y+te)/Q)+1),J.push(Math.floor((ge.y+ge.h+te)/Q)+1);break;case"rect":J.push(Math.floor((W.y+te)/Q)+1),J.push(Math.floor((W.y+W.h+te)/Q)+1)}for(var ce=0;ce<J.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<J[ce];)x.call(this);return J},x=function(){var W=this.fillStyle,Y=this.strokeStyle,Q=this.font,J=this.lineCap,te=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=W,this.strokeStyle=Y,this.font=Q,this.lineCap=J,this.lineWidth=te,this.lineJoin=me},b=function(W,Y,Q){for(var J=0;J<W.length;J++)switch(W[J].type){case"bct":W[J].x2+=Y,W[J].y2+=Q;case"qct":W[J].x1+=Y,W[J].y1+=Q;case"mt":case"lt":case"arc":default:W[J].x+=Y,W[J].y+=Q}return W},_=function(W){return W.sort(function(Y,Q){return Y-Q})},k=function(W,Y){for(var Q,J,te=this.fillStyle,me=this.strokeStyle,ge=this.lineCap,ce=this.lineWidth,Ce=Math.abs(ce*this.ctx.transform.scaleX),_e=this.lineJoin,we=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Qe=[],Ae=0;Ae<He.length;Ae++)if(He[Ae].x!==void 0)for(var he=v.call(this,He[Ae]),ht=0;ht<he.length;ht+=1)Qe.indexOf(he[ht])===-1&&Qe.push(he[ht]);for(var Me=0;Me<Qe.length;Me++)for(;this.pdf.internal.getNumberOfPages()<Qe[Me];)x.call(this);if(_(Qe),this.autoPaging)for(var Ve=Qe[0],nt=Qe[Qe.length-1],pe=Ve;pe<nt+1;pe++){this.pdf.setPage(pe),this.fillStyle=te,this.strokeStyle=me,this.lineCap=ge,this.lineWidth=Ce,this.lineJoin=_e;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=pe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=pe===1?0:qe+(pe-2)*Ge;if(this.ctx.clip_path.length!==0){var st=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Q,this.posX+this.margin[3],-Ue+je+this.ctx.prevPageLastElemOffset),N.call(this,W,!0),this.path=st}if(J=JSON.parse(JSON.stringify(we)),this.path=b(J,this.posX+this.margin[3],-Ue+je+this.ctx.prevPageLastElemOffset),Y===!1||pe===0){var wt=(pe>Ve||pe<nt)&&y.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Ge,null).clip().discardPath()),N.call(this,W,Y),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=Ce,N.call(this,W,Y),this.lineWidth=ce;this.path=we},N=function(W,Y){if((W!=="stroke"||Y||!m.call(this))&&(W==="stroke"||Y||!f.call(this))){for(var Q,J,te=[],me=this.path,ge=0;ge<me.length;ge++){var ce=me[ge];switch(ce.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ce,deltas:[],abs:[]});break;case"lt":var Ce=te.length;if(me[ge-1]&&!isNaN(me[ge-1].x)&&(Q=[ce.x-me[ge-1].x,ce.y-me[ge-1].y],Ce>0)){for(;Ce>=0;Ce--)if(te[Ce-1].close!==!0&&te[Ce-1].begin!==!0){te[Ce-1].deltas.push(Q),te[Ce-1].abs.push(ce);break}}break;case"bct":Q=[ce.x1-me[ge-1].x,ce.y1-me[ge-1].y,ce.x2-me[ge-1].x,ce.y2-me[ge-1].y,ce.x-me[ge-1].x,ce.y-me[ge-1].y],te[te.length-1].deltas.push(Q);break;case"qct":var _e=me[ge-1].x+2/3*(ce.x1-me[ge-1].x),we=me[ge-1].y+2/3*(ce.y1-me[ge-1].y),He=ce.x+2/3*(ce.x1-ce.x),Qe=ce.y+2/3*(ce.y1-ce.y),Ae=ce.x,he=ce.y;Q=[_e-me[ge-1].x,we-me[ge-1].y,He-me[ge-1].x,Qe-me[ge-1].y,Ae-me[ge-1].x,he-me[ge-1].y],te[te.length-1].deltas.push(Q);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ce)}}J=Y?null:W==="stroke"?"stroke":"fill";for(var ht=!1,Me=0;Me<te.length;Me++)if(te[Me].arc)for(var Ve=te[Me].abs,nt=0;nt<Ve.length;nt++){var pe=Ve[nt];pe.type==="arc"?C.call(this,pe.x,pe.y,pe.radius,pe.startAngle,pe.endAngle,pe.counterclockwise,void 0,Y,!ht):F.call(this,pe.x,pe.y),ht=!0}else if(te[Me].close===!0)this.pdf.internal.out("h"),ht=!1;else if(te[Me].begin!==!0){var xe=te[Me].start.x,je=te[Me].start.y;B.call(this,te[Me].deltas,xe,je),ht=!0}J&&P.call(this,J),Y&&$.call(this)}},A=function(W){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return W-Q;case"top":return W+Y-Q;case"hanging":return W+Y-2*Q;case"middle":return W+Y/2-Q;case"ideographic":return W;case"alphabetic":default:return W}},T=function(W){return W+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var W=function(){};return W.colorStops=[],W.addColorStop=function(Y,Q){this.colorStops.push([Y,Q])},W.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},W.isCanvasGradient=!0,W},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(W,Y,Q,J,te,me,ge,ce,Ce){for(var _e=V.call(this,Q,J,te,me),we=0;we<_e.length;we++){var He=_e[we];we===0&&(Ce?j.call(this,He.x1+W,He.y1+Y):F.call(this,He.x1+W,He.y1+Y)),Z.call(this,W,Y,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}ce?$.call(this):P.call(this,ge)},P=function(W){switch(W){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(W,Y){this.pdf.internal.out(n(W)+" "+r(Y)+" m")},O=function(W){var Y;switch(W.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var Q=this.pdf.getTextDimensions(W.text),J=A.call(this,W.y),te=T.call(this,J)-Q.h,me=this.ctx.transform.applyToPoint(new a(W.x,J)),ge=this.ctx.transform.decompose(),ce=new l;ce=(ce=(ce=ce.multiply(ge.translate)).multiply(ge.skew)).multiply(ge.scale);for(var Ce,_e,we,He=this.ctx.transform.applyToRectangle(new o(W.x,J,Q.w,Q.h)),Qe=ce.applyToRectangle(new o(W.x,te,Q.w,Q.h)),Ae=v.call(this,Qe),he=[],ht=0;ht<Ae.length;ht+=1)he.indexOf(Ae[ht])===-1&&he.push(Ae[ht]);if(_(he),this.autoPaging)for(var Me=he[0],Ve=he[he.length-1],nt=Me;nt<Ve+1;nt++){this.pdf.setPage(nt);var pe=nt===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[2],qe=je-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],Ue=Ge-this.margin[3],st=nt===1?0:xe+(nt-2)*qe;if(this.ctx.clip_path.length!==0){var wt=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Ce,this.posX+this.margin[3],-1*st+pe),N.call(this,"fill",!0),this.path=wt}var gt=b([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset)[0];W.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*W.scale),we=this.lineWidth,this.lineWidth=we*W.scale);var zt=this.autoPaging!=="text";if(zt||gt.y+gt.h<=je){if(zt||gt.y>=pe&&gt.x<=Ge){var ft=zt?W.text:this.pdf.splitTextToSize(W.text,W.maxWidth||Ge-gt.x)[0],wn=b([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset)[0],nn=zt&&(nt>Me||nt<Ve)&&y.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,qe,null).clip().discardPath()),this.pdf.text(ft,wn.x,wn.y,{angle:W.angle,align:Y,renderingMode:W.renderingMode}),nn&&this.pdf.restoreGraphicsState()}}else gt.y<je&&(this.ctx.prevPageLastElemOffset+=je-gt.y);W.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=we)}else W.scale>=.01&&(_e=this.pdf.internal.getFontSize(),this.pdf.setFontSize(_e*W.scale),we=this.lineWidth,this.lineWidth=we*W.scale),this.pdf.text(W.text,me.x+this.posX,me.y+this.posY,{angle:W.angle,align:Y,renderingMode:W.renderingMode,maxWidth:W.maxWidth}),W.scale>=.01&&(this.pdf.setFontSize(_e),this.lineWidth=we)},F=function(W,Y,Q,J){Q=Q||0,J=J||0,this.pdf.internal.out(n(W+Q)+" "+r(Y+J)+" l")},B=function(W,Y,Q){return this.pdf.lines(W,Y,Q,null,null)},Z=function(W,Y,Q,J,te,me,ge,ce){this.pdf.internal.out([e(s(Q+W)),e(i(J+Y)),e(s(te+W)),e(i(me+Y)),e(s(ge+W)),e(i(ce+Y)),"c"].join(" "))},V=function(W,Y,Q,J){for(var te=2*Math.PI,me=Math.PI/2;Y>Q;)Y-=te;var ge=Math.abs(Q-Y);ge<te&&J&&(ge=te-ge);for(var ce=[],Ce=J?-1:1,_e=Y;ge>1e-5;){var we=_e+Ce*Math.min(ge,me);ce.push(G.call(this,W,_e,we)),ge-=Math.abs(we-_e),_e=we}return ce},G=function(W,Y,Q){var J=(Q-Y)/2,te=W*Math.cos(J),me=W*Math.sin(J),ge=te,ce=-me,Ce=ge*ge+ce*ce,_e=Ce+ge*te+ce*me,we=4/3*(Math.sqrt(2*Ce*_e)-_e)/(ge*me-ce*te),He=ge-we*ce,Qe=ce+we*ge,Ae=He,he=-Qe,ht=J+Y,Me=Math.cos(ht),Ve=Math.sin(ht);return{x1:W*Math.cos(Y),y1:W*Math.sin(Y),x2:He*Me-Qe*Ve,y2:He*Ve+Qe*Me,x3:Ae*Me-he*Ve,y3:Ae*Ve+he*Me,x4:W*Math.cos(Q),y4:W*Math.sin(Q)}},U=function(W){return 180*W/Math.PI},K=function(W,Y,Q,J,te,me){var ge=W+.5*(Q-W),ce=Y+.5*(J-Y),Ce=te+.5*(Q-te),_e=me+.5*(J-me),we=Math.min(W,te,ge,Ce),He=Math.max(W,te,ge,Ce),Qe=Math.min(Y,me,ce,_e),Ae=Math.max(Y,me,ce,_e);return new o(we,Qe,He-we,Ae-Qe)},ee=function(W,Y,Q,J,te,me,ge,ce){var Ce,_e,we,He,Qe,Ae,he,ht,Me,Ve,nt,pe,xe,je,qe=Q-W,Ge=J-Y,Ue=te-Q,st=me-J,wt=ge-te,gt=ce-me;for(_e=0;_e<41;_e++)Me=(he=(we=W+(Ce=_e/40)*qe)+Ce*((Qe=Q+Ce*Ue)-we))+Ce*(Qe+Ce*(te+Ce*wt-Qe)-he),Ve=(ht=(He=Y+Ce*Ge)+Ce*((Ae=J+Ce*st)-He))+Ce*(Ae+Ce*(me+Ce*gt-Ae)-ht),_e==0?(nt=Me,pe=Ve,xe=Me,je=Ve):(nt=Math.min(nt,Me),pe=Math.min(pe,Ve),xe=Math.max(xe,Me),je=Math.max(je,Ve));return new o(Math.round(nt),Math.round(pe),Math.round(xe-nt),Math.round(je-pe))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var W,Y,Q=(W=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:W,lineDashOffset:Y}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Yt.API),function(t){var e=function(i){var a,o,l,c,u,d,h,f,m,y;for(o=[],l=0,c=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(y=u%85))/85)-(m=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,o.push(d+33,h+33,f+33,m+33,y+33)):o.push(122);return function(v,x){for(var b=x;b>0;b--)v.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},n=function(i){var a,o,l,c,u,d=String,h="length",f=255,m="charCodeAt",y="slice",v="replace";for(i[y](-2),i=i[y](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(i+=a="uuuuu"[y](i[h]%5||5))[h];u>c;c+=5)o=52200625*(i[m](c)-33)+614125*(i[m](c+1)-33)+7225*(i[m](c+2)-33)+85*(i[m](c+3)-33)+(i[m](c+4)-33),l.push(f&o>>24,f&o>>16,f&o>>8,f&o);return function(x,b){for(var _=b;_>0;_--)x.pop()}(l,a[h]),d.fromCharCode.apply(d,l)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},s=function(i){for(var a=new Uint8Array(i.length),o=i.length;o--;)a[o]=i.charCodeAt(o);return i=(a=XD(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,a){var o=0,l=i||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Yt.API),function(t){t.loadFile=function(e,n,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(m){var y=m.length,v=[],x=String.fromCharCode;for(h=0;h<y;h+=1)v.push(x(255&m.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(s,i,a)}catch{}return o}(e,n,r)},t.loadImageFile=t.loadFile}(Yt.API),function(t){function e(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):Jh(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):Jh(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=fr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,o){return a.__proto__=o||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],m=f.src.find(function(y){return y.format==="truetype"});m&&l.addFont(m.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},i.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(a,o){return this.then(function(){var l=a in i.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Yt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},i.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},i.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return i.convert(o,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Yt.getPageSize=function(a,o,l){if(fr(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var f,m=0,y=0;if(h.hasOwnProperty(d))m=h[d][1]/u,y=h[d][0]/u;else try{m=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",y>m&&(f=y,y=m,m=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",m>y&&(f=y,y=m,m=f)}return{width:y,height:m,unit:o,k:u,orientation:a}},t.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(tL):null;var l=new i(o);return o.worker?l:l.from(a).doCallback()}}(Yt.API),Yt.API.addJS=function(t){return vK=t,this.internal.events.subscribe("postPutResources",function(){lC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(lC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),yK=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+vK+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){lC!==void 0&&yK!==void 0&&this.internal.out("/Names <</JavaScript "+lC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=r.exec(a);if(o!=null){var l=o[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(Yt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,y={width:0,height:0,numcomponents:1},v=4;v<m;v+=2){if(v+=f,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),y={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}f=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:r,alias:s}}return u}}(Yt.API);var Qy,cC,xK,bK,wK,opt=function(){var t,e,n;function r(i){var a,o,l,c,u,d,h,f,m,y,v,x,b,_;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),m=(function(){var k,N;for(N=[],k=0;k<4;++k)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,a-=4),i=(d!=null?d.data:void 0)||this.imgData,x=0;0<=a?x<a:x>a;0<=a?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(b=0;0<=y?b<y:b>y;0<=y?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":h=(v=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,v.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,o;for(o=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(d,h,f,m){var y,v,x,b,_,k,N,A,T,C,P,$,j,O,F,B,Z,V,G,U,K,ee=Math.ceil((c.width-d)/f),oe=Math.ceil((c.height-h)/m),W=c.width==ee&&c.height==oe;for(O=a*ee,$=W?o:new Uint8Array(O*oe),k=i.length,j=0,v=0;j<oe&&l<k;){switch(i[l++]){case 0:for(b=Z=0;Z<O;b=Z+=1)$[v++]=i[l++];break;case 1:for(b=V=0;V<O;b=V+=1)y=i[l++],_=b<a?0:$[v-a],$[v++]=(y+_)%256;break;case 2:for(b=G=0;G<O;b=G+=1)y=i[l++],x=(b-b%a)/a,F=j&&$[(j-1)*O+x*a+b%a],$[v++]=(F+y)%256;break;case 3:for(b=U=0;U<O;b=U+=1)y=i[l++],x=(b-b%a)/a,_=b<a?0:$[v-a],F=j&&$[(j-1)*O+x*a+b%a],$[v++]=(y+Math.floor((_+F)/2))%256;break;case 4:for(b=K=0;K<O;b=K+=1)y=i[l++],x=(b-b%a)/a,_=b<a?0:$[v-a],j===0?F=B=0:(F=$[(j-1)*O+x*a+b%a],B=x&&$[(j-1)*O+(x-1)*a+b%a]),N=_+F-B,A=Math.abs(N-_),C=Math.abs(N-F),P=Math.abs(N-B),T=A<=C&&A<=P?_:C<=P?F:B,$[v++]=(y+T)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!W){var Y=((h+j*m)*c.width+d)*a,Q=j*O;for(b=0;b<ee;b+=1){for(var J=0;J<a;J+=1)o[Y++]=$[Q++];Y+=(f-1)*a}}j++}}return i=Mft(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},r.prototype.decodePalette=function(){var i,a,o,l,c,u,d,h,f;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,a=d=0,h=o.length;d<h;a=d+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(f=u[i++])!=null?f:255;return c},r.prototype.copyToImageData=function(i,a){var o,l,c,u,d,h,f,m,y,v,x;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,o=!0),m=(c=i.data||i).length,d=y||a,u=h=0,l===1)for(;u<m;)f=y?4*a[u/4]:h,v=d[f++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=o?d[f++]:255,h=f;else for(;u<m;)f=y?4*a[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=o?d[f++]:255,h=f},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(tn)==="[object Window]"){try{e=tn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var a;if(s()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,o,l,c,u,d,h,f;if(this.animation){for(f=[],o=u=0,d=(h=this.animation.frames).length;u<d;o=++u)a=h[o],l=i.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,f.push(a.image=t(l));return f}},r.prototype.renderFrame=function(i,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(i){var a,o,l,c,u,d,h=this;return o=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(a=function(){var f,m;if(f=o++%c,m=l[f],h.renderFrame(i,f),c>1&&o/c<u)return h.animation._timeout=setTimeout(a,m.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function lpt(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;i&&(o=e,l=a,e+=3*a);var c=!0,u=[],d=0,h=null,f=0,m=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],!(1&y)&&(h=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,k=t[e++],N=k>>6&1,A=1<<(7&k)+1,T=o,C=l,P=!1;k>>7&&(P=!0,T=e,C=A,e+=3*A);var $=e;for(e++;;){var j;if(!((j=t[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}u.push({x:v,y:x,width:b,height:_,has_local_palette:P,palette_offset:T,palette_size:C,data_offset:$,data_length:e-$,transparent_index:h,interlaced:!!N,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,F){var B=this.frameInfo(O),Z=B.width*B.height,V=new Uint8Array(Z);_K(t,B.data_offset,V,Z);var G=B.palette_offset,U=B.transparent_index;U===null&&(U=256);var K=B.width,ee=n-K,oe=K,W=4*(B.y*n+B.x),Y=4*((B.y+B.height)*n+B.x),Q=W,J=4*ee;B.interlaced===!0&&(J+=4*n*7);for(var te=8,me=0,ge=V.length;me<ge;++me){var ce=V[me];if(oe===0&&(oe=K,(Q+=J)>=Y&&(J=4*ee+4*n*(te-1),Q=W+(K+ee)*(te<<1),te>>=1)),ce===U)Q+=4;else{var Ce=t[G+3*ce],_e=t[G+3*ce+1],we=t[G+3*ce+2];F[Q++]=we,F[Q++]=_e,F[Q++]=Ce,F[Q++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(O,F){var B=this.frameInfo(O),Z=B.width*B.height,V=new Uint8Array(Z);_K(t,B.data_offset,V,Z);var G=B.palette_offset,U=B.transparent_index;U===null&&(U=256);var K=B.width,ee=n-K,oe=K,W=4*(B.y*n+B.x),Y=4*((B.y+B.height)*n+B.x),Q=W,J=4*ee;B.interlaced===!0&&(J+=4*n*7);for(var te=8,me=0,ge=V.length;me<ge;++me){var ce=V[me];if(oe===0&&(oe=K,(Q+=J)>=Y&&(J=4*ee+4*n*(te-1),Q=W+(K+ee)*(te<<1),te>>=1)),ce===U)Q+=4;else{var Ce=t[G+3*ce],_e=t[G+3*ce+1],we=t[G+3*ce+2];F[Q++]=Ce,F[Q++]=_e,F[Q++]=we,F[Q++]=255}--oe}}}function _K(t,e,n,r){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],m=new Int32Array(4096),y=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var v=d&c;if(d>>=l,u-=l,v!==i){if(v===a)break;for(var x=v<o?v:y,b=0,_=x;_>i;)_=m[_]>>8,++b;var k=_;if(h+b+(x!==v?1:0)>r)return void kr.log("Warning, gif stream longer than expected.");n[h++]=k;var N=h+=b;for(x!==v&&(n[h++]=k),_=x;b--;)_=m[_],n[--N]=255&_,_>>=8;y!==null&&o<4096&&(m[o++]=y<<8|k,o>=c+1&&l<12&&(++l,c=c<<1|1)),y=v}else o=a+1,c=(1<<(l=s+1))-1,y=null}return h!==r&&kr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function h4(t){var e,n,r,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),m=new Array(64),y=[],v=0,x=7,b=new Array(64),_=new Array(64),k=new Array(64),N=new Array(256),A=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(W,Y){for(var Q=0,J=0,te=new Array,me=1;me<=16;me++){for(var ge=1;ge<=W[me];ge++)te[Y[J]]=[],te[Y[J]][0]=Q,te[Y[J]][1]=me,J++,Q++;Q*=2}return te}function G(W){for(var Y=W[0],Q=W[1]-1;Q>=0;)Y&1<<Q&&(v|=1<<x),Q--,--x<0&&(v==255?(U(255),U(0)):U(v),x=7,v=0)}function U(W){y.push(W)}function K(W){U(W>>8&255),U(255&W)}function ee(W,Y,Q,J,te){for(var me,ge=te[0],ce=te[240],Ce=function(Ve,nt){var pe,xe,je,qe,Ge,Ue,st,wt,gt,zt,ft=0;for(gt=0;gt<8;++gt){pe=Ve[ft],xe=Ve[ft+1],je=Ve[ft+2],qe=Ve[ft+3],Ge=Ve[ft+4],Ue=Ve[ft+5],st=Ve[ft+6];var wn=pe+(wt=Ve[ft+7]),nn=pe-wt,qr=xe+st,Dn=xe-st,gr=je+Ue,si=je-Ue,Wn=qe+Ge,Gl=qe-Ge,Rr=wn+Wn,Eo=wn-Wn,Kl=qr+gr,Gr=qr-gr;Ve[ft]=Rr+Kl,Ve[ft+4]=Rr-Kl;var on=.707106781*(Gr+Eo);Ve[ft+2]=Eo+on,Ve[ft+6]=Eo-on;var Kn=.382683433*((Rr=Gl+si)-(Gr=Dn+nn)),th=.5411961*Rr+Kn,ii=1.306562965*Gr+Kn,Xl=.707106781*(Kl=si+Dn),Po=nn+Xl,Jt=nn-Xl;Ve[ft+5]=Jt+th,Ve[ft+3]=Jt-th,Ve[ft+1]=Po+ii,Ve[ft+7]=Po-ii,ft+=8}for(ft=0,gt=0;gt<8;++gt){pe=Ve[ft],xe=Ve[ft+8],je=Ve[ft+16],qe=Ve[ft+24],Ge=Ve[ft+32],Ue=Ve[ft+40],st=Ve[ft+48];var pl=pe+(wt=Ve[ft+56]),Yl=pe-wt,va=xe+st,er=xe-st,St=je+Ue,xa=je-Ue,nh=qe+Ge,Zl=qe-Ge,Oo=pl+nh,Za=pl-nh,jo=va+St,Qi=va-St;Ve[ft]=Oo+jo,Ve[ft+32]=Oo-jo;var Ja=.707106781*(Qi+Za);Ve[ft+16]=Za+Ja,Ve[ft+48]=Za-Ja;var Jl=.382683433*((Oo=Zl+xa)-(Qi=er+Yl)),rh=.5411961*Oo+Jl,If=1.306562965*Qi+Jl,Af=.707106781*(jo=xa+er),sh=Yl+Af,Ef=Yl-Af;Ve[ft+40]=Ef+rh,Ve[ft+24]=Ef-rh,Ve[ft+8]=sh+If,Ve[ft+56]=sh-If,ft++}for(gt=0;gt<64;++gt)zt=Ve[gt]*nt[gt],f[gt]=zt>0?zt+.5|0:zt-.5|0;return f}(W,Y),_e=0;_e<64;++_e)m[T[_e]]=Ce[_e];var we=m[0]-Q;Q=m[0],we==0?G(J[0]):(G(J[h[me=32767+we]]),G(d[me]));for(var He=63;He>0&&m[He]==0;)He--;if(He==0)return G(ge),Q;for(var Qe,Ae=1;Ae<=He;){for(var he=Ae;m[Ae]==0&&Ae<=He;)++Ae;var ht=Ae-he;if(ht>=16){Qe=ht>>4;for(var Me=1;Me<=Qe;++Me)G(ce);ht&=15}me=32767+m[Ae],G(te[(ht<<4)+h[me]]),G(d[me]),Ae++}return He!=63&&G(ge),Q}function oe(W){W=Math.min(Math.max(W,1),100),i!=W&&(function(Y){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var te=a((Q[J]*Y+50)/100);te=Math.min(Math.max(te,1),255),o[T[J]]=te}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ge=0;ge<64;ge++){var ce=a((me[ge]*Y+50)/100);ce=Math.min(Math.max(ce,1),255),l[T[ge]]=ce}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],_e=0,we=0;we<8;we++)for(var He=0;He<8;He++)c[_e]=1/(o[T[_e]]*Ce[we]*Ce[He]*8),u[_e]=1/(l[T[_e]]*Ce[we]*Ce[He]*8),_e++}(W<50?Math.floor(5e3/W):Math.floor(200-2*W)),i=W)}this.encode=function(W,Y){Y&&oe(Y),y=new Array,v=0,x=7,K(65496),K(65504),K(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),K(1),K(1),U(0),U(0),function(){K(65499),K(132),U(0);for(var xe=0;xe<64;xe++)U(o[xe]);U(1);for(var je=0;je<64;je++)U(l[je])}(),function(xe,je){K(65472),K(17),U(8),K(je),K(xe),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(W.width,W.height),function(){K(65476),K(418),U(0);for(var xe=0;xe<16;xe++)U(C[xe+1]);for(var je=0;je<=11;je++)U(P[je]);U(16);for(var qe=0;qe<16;qe++)U($[qe+1]);for(var Ge=0;Ge<=161;Ge++)U(j[Ge]);U(1);for(var Ue=0;Ue<16;Ue++)U(O[Ue+1]);for(var st=0;st<=11;st++)U(F[st]);U(17);for(var wt=0;wt<16;wt++)U(B[wt+1]);for(var gt=0;gt<=161;gt++)U(Z[gt])}(),K(65498),K(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var Q=0,J=0,te=0;v=0,x=7,this.encode.displayName="_encode_";for(var me,ge,ce,Ce,_e,we,He,Qe,Ae,he=W.data,ht=W.width,Me=W.height,Ve=4*ht,nt=0;nt<Me;){for(me=0;me<Ve;){for(_e=Ve*nt+me,He=-1,Qe=0,Ae=0;Ae<64;Ae++)we=_e+(Qe=Ae>>3)*Ve+(He=4*(7&Ae)),nt+Qe>=Me&&(we-=Ve*(nt+1+Qe-Me)),me+He>=Ve&&(we-=me+He-Ve+4),ge=he[we++],ce=he[we++],Ce=he[we++],b[Ae]=(A[ge]+A[ce+256>>0]+A[Ce+512>>0]>>16)-128,_[Ae]=(A[ge+768>>0]+A[ce+1024>>0]+A[Ce+1280>>0]>>16)-128,k[Ae]=(A[ge+1280>>0]+A[ce+1536>>0]+A[Ce+1792>>0]>>16)-128;Q=ee(b,c,Q,e,r),J=ee(_,u,J,n,s),te=ee(k,u,te,n,s),me+=32}nt+=8}if(x>=0){var pe=[];pe[1]=x+1,pe[0]=(1<<x+1)-1,G(pe)}return K(65497),new Uint8Array(y)},t=t||50,function(){for(var W=String.fromCharCode,Y=0;Y<256;Y++)N[Y]=W(Y)}(),e=V(C,P),n=V(O,F),r=V($,j),s=V(B,Z),function(){for(var W=1,Y=2,Q=1;Q<=15;Q++){for(var J=W;J<Y;J++)h[32767+J]=Q,d[32767+J]=[],d[32767+J][1]=Q,d[32767+J][0]=J;for(var te=-(Y-1);te<=-W;te++)h[32767+te]=Q,d[32767+te]=[],d[32767+te][1]=Q,d[32767+te][0]=Y-1+te;W<<=1,Y<<=1}}(),function(){for(var W=0;W<256;W++)A[W]=19595*W,A[W+256>>0]=38470*W,A[W+512>>0]=7471*W+32768,A[W+768>>0]=-11059*W,A[W+1024>>0]=-21709*W,A[W+1280>>0]=32768*W+8421375,A[W+1536>>0]=-27439*W,A[W+1792>>0]=-5329*W}(),oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kK(t){function e(C){if(!C)throw Error("assert :P")}function n(C,P,$){for(var j=0;4>j;j++)if(C[P+j]!=$.charCodeAt(j))return!0;return!1}function r(C,P,$,j,O){for(var F=0;F<O;F++)C[P+F]=$[j+F]}function s(C,P,$,j){for(var O=0;O<j;O++)C[P+O]=$}function i(C){return new Int32Array(C)}function a(C,P){for(var $=[],j=0;j<C;j++)$.push(new P);return $}function o(C,P){var $=[];return function j(O,F,B){for(var Z=B[F],V=0;V<Z&&(O.push(B.length>F+1?[]:new P),!(B.length<F+1));V++)j(O[V],F+1,B)}($,0,C),$}var l=function(){var C=this;function P(S,E){for(var z=1<<E-1>>>0;S&z;)z>>>=1;return z?(S&z-1)+z:S}function $(S,E,z,H,ne){e(!(H%z));do S[E+(H-=z)]=ne;while(0<H)}function j(S,E,z,H,ne){if(e(2328>=ne),512>=ne)var se=i(512);else if((se=i(ne))==null)return 0;return function(ie,ue,fe,ye,Pe,ze){var Be,De,at=ue,et=1<<fe,Oe=i(16),$e=i(16);for(e(Pe!=0),e(ye!=null),e(ie!=null),e(0<fe),De=0;De<Pe;++De){if(15<ye[De])return 0;++Oe[ye[De]]}if(Oe[0]==Pe)return 0;for($e[1]=0,Be=1;15>Be;++Be){if(Oe[Be]>1<<Be)return 0;$e[Be+1]=$e[Be]+Oe[Be]}for(De=0;De<Pe;++De)Be=ye[De],0<ye[De]&&(ze[$e[Be]++]=De);if($e[15]==1)return(ye=new O).g=0,ye.value=ze[0],$(ie,at,1,et,ye),et;var rt,ct=-1,it=et-1,Et=0,kt=1,Qt=1,Ct=1<<fe;for(De=0,Be=1,Pe=2;Be<=fe;++Be,Pe<<=1){if(kt+=Qt<<=1,0>(Qt-=Oe[Be]))return 0;for(;0<Oe[Be];--Oe[Be])(ye=new O).g=Be,ye.value=ze[De++],$(ie,at+Et,Pe,Ct,ye),Et=P(Et,Be)}for(Be=fe+1,Pe=2;15>=Be;++Be,Pe<<=1){if(kt+=Qt<<=1,0>(Qt-=Oe[Be]))return 0;for(;0<Oe[Be];--Oe[Be]){if(ye=new O,(Et&it)!=ct){for(at+=Ct,rt=1<<(ct=Be)-fe;15>ct&&!(0>=(rt-=Oe[ct]));)++ct,rt<<=1;et+=Ct=1<<(rt=ct-fe),ie[ue+(ct=Et&it)].g=rt+fe,ie[ue+ct].value=at-ue-ct}ye.g=Be-fe,ye.value=ze[De++],$(ie,at+(Et>>fe),Pe,Ct,ye),Et=P(Et,Be)}}return kt!=2*$e[15]-1?0:et}(S,E,z,H,ne,se)}function O(){this.value=this.g=0}function F(){this.value=this.g=0}function B(){this.G=a(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ms,F)}function Z(S,E,z,H){e(S!=null),e(E!=null),e(2147483648>H),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=E,S.pa=z,S.Jd=E,S.Yc=z+H,S.Zc=4<=H?z+H-4+1:z,me(S)}function V(S,E){for(var z=0;0<E--;)z|=ce(S,128)<<E;return z}function G(S,E){var z=V(S,E);return ge(S)?-z:z}function U(S,E,z,H){var ne,se=0;for(e(S!=null),e(E!=null),e(4294967288>H),S.Sb=H,S.Ra=0,S.u=0,S.h=0,4<H&&(H=4),ne=0;ne<H;++ne)se+=E[z+ne]<<8*ne;S.Ra=se,S.bb=H,S.oa=E,S.pa=z}function K(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<tu-8>>>0,++S.bb,S.u-=8;Q(S)&&(S.h=1,S.u=0)}function ee(S,E){if(e(0<=E),!S.h&&E<=ro){var z=Y(S)&Bf[E];return S.u+=E,K(S),z}return S.h=1,S.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(S){return S.Ra>>>(S.u&tu-1)>>>0}function Q(S){return e(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>tu}function J(S,E){S.u=E,S.h=Q(S)}function te(S){S.u>=Ym&&(e(S.u>=Ym),K(S))}function me(S){e(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(e(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function ge(S){return V(S,1)}function ce(S,E){var z=S.Ca;0>S.b&&me(S);var H=S.b,ne=z*E>>>8,se=(S.I>>>H>ne)+0;for(se?(z-=ne,S.I-=ne+1<<H>>>0):z=ne+1,H=z,ne=0;256<=H;)ne+=8,H>>=8;return H=7^ne+Ai[H],S.b-=H,S.Ca=(z<<H)-1,se}function Ce(S,E,z){S[E+0]=z>>24&255,S[E+1]=z>>16&255,S[E+2]=z>>8&255,S[E+3]=z>>0&255}function _e(S,E){return S[E+0]<<0|S[E+1]<<8}function we(S,E){return _e(S,E)|S[E+2]<<16}function He(S,E){return _e(S,E)|_e(S,E+2)<<16}function Qe(S,E){var z=1<<E;return e(S!=null),e(0<E),S.X=i(z),S.X==null?0:(S.Mb=32-E,S.Xa=E,1)}function Ae(S,E){e(S!=null),e(E!=null),e(S.Xa==E.Xa),r(E.X,0,S.X,0,1<<E.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function ht(S,E,z,H){e(z!=null),e(H!=null);var ne=z[0],se=H[0];return ne==0&&(ne=(S*se+E/2)/E),se==0&&(se=(E*ne+S/2)/S),0>=ne||0>=se?0:(z[0]=ne,H[0]=se,1)}function Me(S,E){return S+(1<<E)-1>>>E}function Ve(S,E){return((4278255360&S)+(4278255360&E)>>>0&4278255360)+((16711935&S)+(16711935&E)>>>0&16711935)>>>0}function nt(S,E){C[E]=function(z,H,ne,se,ie,ue,fe){var ye;for(ye=0;ye<ie;++ye){var Pe=C[S](ue[fe+ye-1],ne,se+ye);ue[fe+ye]=Ve(z[H+ye],Pe)}}}function pe(){this.ud=this.hd=this.jd=0}function xe(S,E){return((4278124286&(S^E))>>>1)+(S&E)>>>0}function je(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function qe(S,E){return je(S+(S-E+.5>>1))}function Ge(S,E,z){return Math.abs(E-z)-Math.abs(S-z)}function Ue(S,E,z,H,ne,se,ie){for(H=se[ie-1],z=0;z<ne;++z)se[ie+z]=H=Ve(S[E+z],H)}function st(S,E,z,H,ne){var se;for(se=0;se<z;++se){var ie=S[E+se],ue=ie>>8&255,fe=16711935&(fe=(fe=16711935&ie)+((ue<<16)+ue));H[ne+se]=(4278255360&ie)+fe>>>0}}function wt(S,E){E.jd=S>>0&255,E.hd=S>>8&255,E.ud=S>>16&255}function gt(S,E,z,H,ne,se){var ie;for(ie=0;ie<H;++ie){var ue=E[z+ie],fe=ue>>>8,ye=ue,Pe=255&(Pe=(Pe=ue>>>16)+((S.jd<<24>>24)*(fe<<24>>24)>>>5));ye=255&(ye=(ye=ye+((S.hd<<24>>24)*(fe<<24>>24)>>>5))+((S.ud<<24>>24)*(Pe<<24>>24)>>>5)),ne[se+ie]=(4278255360&ue)+(Pe<<16)+ye}}function zt(S,E,z,H,ne){C[E]=function(se,ie,ue,fe,ye,Pe,ze,Be,De){for(fe=ze;fe<Be;++fe)for(ze=0;ze<De;++ze)ye[Pe++]=ne(ue[H(se[ie++])])},C[S]=function(se,ie,ue,fe,ye,Pe,ze){var Be=8>>se.b,De=se.Ea,at=se.K[0],et=se.w;if(8>Be)for(se=(1<<se.b)-1,et=(1<<Be)-1;ie<ue;++ie){var Oe,$e=0;for(Oe=0;Oe<De;++Oe)Oe&se||($e=H(fe[ye++])),Pe[ze++]=ne(at[$e&et]),$e>>=Be}else C["VP8LMapColor"+z](fe,ye,at,et,Pe,ze,ie,ue,De)}}function ft(S,E,z,H,ne){for(z=E+z;E<z;){var se=S[E++];H[ne++]=se>>16&255,H[ne++]=se>>8&255,H[ne++]=se>>0&255}}function wn(S,E,z,H,ne){for(z=E+z;E<z;){var se=S[E++];H[ne++]=se>>16&255,H[ne++]=se>>8&255,H[ne++]=se>>0&255,H[ne++]=se>>24&255}}function nn(S,E,z,H,ne){for(z=E+z;E<z;){var se=(ie=S[E++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;H[ne++]=se,H[ne++]=ie}}function qr(S,E,z,H,ne){for(z=E+z;E<z;){var se=(ie=S[E++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;H[ne++]=se,H[ne++]=ie}}function Dn(S,E,z,H,ne){for(z=E+z;E<z;){var se=S[E++];H[ne++]=se>>0&255,H[ne++]=se>>8&255,H[ne++]=se>>16&255}}function gr(S,E,z,H,ne,se){if(se==0)for(z=E+z;E<z;)Ce(H,((se=S[E++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),ne+=32;else r(H,ne,S,E,z)}function si(S,E){C[E][0]=C[S+"0"],C[E][1]=C[S+"1"],C[E][2]=C[S+"2"],C[E][3]=C[S+"3"],C[E][4]=C[S+"4"],C[E][5]=C[S+"5"],C[E][6]=C[S+"6"],C[E][7]=C[S+"7"],C[E][8]=C[S+"8"],C[E][9]=C[S+"9"],C[E][10]=C[S+"10"],C[E][11]=C[S+"11"],C[E][12]=C[S+"12"],C[E][13]=C[S+"13"],C[E][14]=C[S+"0"],C[E][15]=C[S+"0"]}function Wn(S){return S==Iy||S==Ay||S==Ey||S==g}function Gl(){this.eb=[],this.size=this.A=this.fb=0}function Rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Eo(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gl,this.f.kb=new Rr,this.sd=null}function Kl(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Gr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function on(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Kn(S,E){var z=S.T,H=E.ba.f.RGBA,ne=H.eb,se=H.fb+S.ka*H.A,ie=ra[E.ba.S],ue=S.y,fe=S.O,ye=S.f,Pe=S.N,ze=S.ea,Be=S.W,De=E.cc,at=E.dc,et=E.Mc,Oe=E.Nc,$e=S.ka,rt=S.ka+S.T,ct=S.U,it=ct+1>>1;for($e==0?ie(ue,fe,null,null,ye,Pe,ze,Be,ye,Pe,ze,Be,ne,se,null,null,ct):(ie(E.ec,E.fc,ue,fe,De,at,et,Oe,ye,Pe,ze,Be,ne,se-H.A,ne,se,ct),++z);$e+2<rt;$e+=2)De=ye,at=Pe,et=ze,Oe=Be,Pe+=S.Rc,Be+=S.Rc,se+=2*H.A,ie(ue,(fe+=2*S.fa)-S.fa,ue,fe,De,at,et,Oe,ye,Pe,ze,Be,ne,se-H.A,ne,se,ct);return fe+=S.fa,S.j+rt<S.o?(r(E.ec,E.fc,ue,fe,ct),r(E.cc,E.dc,ye,Pe,it),r(E.Mc,E.Nc,ze,Be,it),z--):1&rt||ie(ue,fe,null,null,ye,Pe,ze,Be,ye,Pe,ze,Be,ne,se+H.A,null,null,ct),z}function th(S,E,z){var H=S.F,ne=[S.J];if(H!=null){var se=S.U,ie=E.ba.S,ue=ie==tg||ie==Ey;E=E.ba.f.RGBA;var fe=[0],ye=S.ka;fe[0]=S.T,S.Kb&&(ye==0?--fe[0]:(--ye,ne[0]-=S.width),S.j+S.ka+S.T==S.o&&(fe[0]=S.o-S.j-ye));var Pe=E.eb;ye=E.fb+ye*E.A,S=sr(H,ne[0],S.width,se,fe,Pe,ye+(ue?0:3),E.A),e(z==fe),S&&Wn(ie)&&ui(Pe,ye,ue,se,fe,E.A)}return 0}function ii(S){var E=S.ma,z=E.ba.S,H=11>z,ne=z==Qm||z==eg||z==tg||z==Ty||z==12||Wn(z);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Xm(E.Oa,S,ne?11:12))return 0;if(ne&&Wn(z)&&dt(),S.da)alert("todo:use_scaling");else{if(H){if(E.Ib=on,S.Kb){if(z=S.U+1>>1,E.memory=i(S.U+2*z),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+S.U,E.Mc=E.cc,E.Nc=E.dc+z,E.Ib=Kn,dt()}}else alert("todo:EmitYUV");ne&&(E.Jb=th,H&&Le())}if(H&&!p8){for(S=0;256>S;++S)Khe[S]=89858*(S-128)+OS>>PS,Zhe[S]=-22014*(S-128)+OS,Yhe[S]=-45773*(S-128),Xhe[S]=113618*(S-128)+OS>>PS;for(S=b1;S<sO;++S)E=76283*(S-16)+OS>>PS,Jhe[S-b1]=Mr(E,255),Qhe[S-b1]=Mr(E+8>>4,15);p8=1}return 1}function Xl(S){var E=S.ma,z=S.U,H=S.T;return e(!(1&S.ka)),0>=z||0>=H?0:(z=E.Ib(S,E),E.Jb!=null&&E.Jb(S,E,z),E.Dc+=z,1)}function Po(S){S.ma.memory=null}function Jt(S,E,z,H){return ee(S,8)!=47?0:(E[0]=ee(S,14)+1,z[0]=ee(S,14)+1,H[0]=ee(S,1),ee(S,3)!=0?0:!S.h)}function pl(S,E){if(4>S)return S+1;var z=S-2>>1;return(2+(1&S)<<z)+ee(E,z)+1}function Yl(S,E){return 120<E?E-120:1<=(z=((z=ke[E-1])>>4)*S+(8-(15&z)))?z:1;var z}function va(S,E,z){var H=Y(z),ne=S[E+=255&H].g-8;return 0<ne&&(J(z,z.u+8),H=Y(z),E+=S[E].value,E+=H&(1<<ne)-1),J(z,z.u+S[E].g),S[E].value}function er(S,E,z){return z.g+=S.g,z.value+=S.value<<E>>>0,e(8>=z.g),S.g}function St(S,E,z){var H=S.xc;return e((E=H==0?0:S.vc[S.md*(z>>H)+(E>>H)])<S.Wb),S.Ya[E]}function xa(S,E,z,H){var ne=S.ab,se=S.c*E,ie=S.C;E=ie+E;var ue=z,fe=H;for(H=S.Ta,z=S.Ua;0<ne--;){var ye=S.gc[ne],Pe=ie,ze=E,Be=ue,De=fe,at=(fe=H,ue=z,ye.Ea);switch(e(Pe<ze),e(ze<=ye.nc),ye.hc){case 2:Sy(Be,De,(ze-Pe)*at,fe,ue);break;case 0:var et=Pe,Oe=ze,$e=fe,rt=ue,ct=(Ct=ye).Ea;et==0&&(g1(Be,De,null,null,1,$e,rt),Ue(Be,De+1,0,0,ct-1,$e,rt+1),De+=ct,rt+=ct,++et);for(var it=1<<Ct.b,Et=it-1,kt=Me(ct,Ct.b),Qt=Ct.K,Ct=Ct.w+(et>>Ct.b)*kt;et<Oe;){var Jn=Qt,or=Ct,Hn=1;for(so(Be,De,$e,rt-ct,1,$e,rt);Hn<ct;){var Mn=(Hn&~Et)+it;Mn>ct&&(Mn=ct),(0,nu[Jn[or++]>>8&15])(Be,De+ +Hn,$e,rt+Hn-ct,Mn-Hn,$e,rt+Hn),Hn=Mn}De+=ct,rt+=ct,++et&Et||(Ct+=kt)}ze!=ye.nc&&r(fe,ue-at,fe,ue+(ze-Pe-1)*at,at);break;case 1:for(at=Be,Oe=De,ct=(Be=ye.Ea)-(rt=Be&~($e=(De=1<<ye.b)-1)),et=Me(Be,ye.b),it=ye.K,ye=ye.w+(Pe>>ye.b)*et;Pe<ze;){for(Et=it,kt=ye,Qt=new pe,Ct=Oe+rt,Jn=Oe+Be;Oe<Ct;)wt(Et[kt++],Qt),ru(Qt,at,Oe,De,fe,ue),Oe+=De,ue+=De;Oe<Jn&&(wt(Et[kt++],Qt),ru(Qt,at,Oe,ct,fe,ue),Oe+=ct,ue+=ct),++Pe&$e||(ye+=et)}break;case 3:if(Be==fe&&De==ue&&0<ye.b){for(Oe=fe,Be=at=ue+(ze-Pe)*at-(rt=(ze-Pe)*Me(ye.Ea,ye.b)),De=fe,$e=ue,et=[],rt=(ct=rt)-1;0<=rt;--rt)et[rt]=De[$e+rt];for(rt=ct-1;0<=rt;--rt)Oe[Be+rt]=et[rt];oi(ye,Pe,ze,fe,at,fe,ue)}else oi(ye,Pe,ze,Be,De,fe,ue)}ue=H,fe=z}fe!=z&&r(H,z,ue,fe,se)}function nh(S,E){var z=S.V,H=S.Ba+S.c*S.C,ne=E-S.C;if(e(E<=S.l.o),e(16>=ne),0<ne){var se=S.l,ie=S.Ta,ue=S.Ua,fe=se.width;if(xa(S,ne,z,H),ne=ue=[ue],e((z=S.C)<(H=E)),e(se.v<se.va),H>se.o&&(H=se.o),z<se.j){var ye=se.j-z;z=se.j,ne[0]+=ye*fe}if(z>=H?z=0:(ne[0]+=4*se.v,se.ka=z-se.j,se.U=se.va-se.v,se.T=H-z,z=1),z){if(ue=ue[0],11>(z=S.ca).S){var Pe=z.f.RGBA,ze=(H=z.S,ne=se.U,se=se.T,ye=Pe.eb,Pe.A),Be=se;for(Pe=Pe.fb+S.Ma*Pe.A;0<Be--;){var De=ie,at=ue,et=ne,Oe=ye,$e=Pe;switch(H){case Cy:li(De,at,et,Oe,$e);break;case Qm:ci(De,at,et,Oe,$e);break;case Iy:ci(De,at,et,Oe,$e),ui(Oe,$e,0,et,1,0);break;case y1:Ro(De,at,et,Oe,$e);break;case eg:gr(De,at,et,Oe,$e,1);break;case Ay:gr(De,at,et,Oe,$e,1),ui(Oe,$e,0,et,1,0);break;case tg:gr(De,at,et,Oe,$e,0);break;case Ey:gr(De,at,et,Oe,$e,0),ui(Oe,$e,1,et,1,0);break;case Ty:vl(De,at,et,Oe,$e);break;case g:vl(De,at,et,Oe,$e),rr(Oe,$e,et,1,0);break;case IS:wa(De,at,et,Oe,$e);break;default:e(0)}ue+=fe,Pe+=ze}S.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(S.Ma<=z.height)}}S.C=E,e(S.C<=S.i)}function Zl(S){var E;if(0<S.ua)return 0;for(E=0;E<S.Wb;++E){var z=S.Ya[E].G,H=S.Ya[E].H;if(0<z[1][H[1]+0].g||0<z[2][H[2]+0].g||0<z[3][H[3]+0].g)return 0}return 1}function Oo(S,E,z,H,ne,se){if(S.Z!=0){var ie=S.qd,ue=S.rd;for(e(ar[S.Z]!=null);E<z;++E)ar[S.Z](ie,ue,H,ne,H,ne,se),ie=H,ue=ne,ne+=se;S.qd=ie,S.rd=ue}}function Za(S,E){var z=S.l.ma,H=z.Z==0||z.Z==1?S.l.j:S.C;if(H=S.C<H?H:S.C,e(E<=S.l.o),E>H){var ne=S.l.width,se=z.ca,ie=z.tb+ne*H,ue=S.V,fe=S.Ba+S.c*H,ye=S.gc;e(S.ab==1),e(ye[0].hc==3),Lo(ye[0],H,E,ue,fe,se,ie),Oo(z,H,E,se,ie,ne)}S.C=S.Ma=E}function jo(S,E,z,H,ne,se,ie){var ue=S.$/H,fe=S.$%H,ye=S.m,Pe=S.s,ze=z+S.$,Be=ze;ne=z+H*ne;var De=z+H*se,at=280+Pe.ua,et=S.Pb?ue:16777216,Oe=0<Pe.ua?Pe.Wa:null,$e=Pe.wc,rt=ze<De?St(Pe,fe,ue):null;e(S.C<se),e(De<=ne);var ct=!1;e:for(;;){for(;ct||ze<De;){var it=0;if(ue>=et){var Et=ze-z;e((et=S).Pb),et.wd=et.m,et.xd=Et,0<et.s.ua&&Ae(et.s.Wa,et.s.vb),et=ue+Ke}if(fe&$e||(rt=St(Pe,fe,ue)),e(rt!=null),rt.Qb&&(E[ze]=rt.qb,ct=!0),!ct)if(te(ye),rt.jc){it=ye,Et=E;var kt=ze,Qt=rt.pd[Y(it)&ms-1];e(rt.jc),256>Qt.g?(J(it,it.u+Qt.g),Et[kt]=Qt.value,it=0):(J(it,it.u+Qt.g-256),e(256<=Qt.value),it=Qt.value),it==0&&(ct=!0)}else it=va(rt.G[0],rt.H[0],ye);if(ye.h)break;if(ct||256>it){if(!ct)if(rt.nd)E[ze]=(rt.qb|it<<8)>>>0;else{if(te(ye),ct=va(rt.G[1],rt.H[1],ye),te(ye),Et=va(rt.G[2],rt.H[2],ye),kt=va(rt.G[3],rt.H[3],ye),ye.h)break;E[ze]=(kt<<24|ct<<16|it<<8|Et)>>>0}if(ct=!1,++ze,++fe>=H&&(fe=0,++ue,ie!=null&&ue<=se&&!(ue%16)&&ie(S,ue),Oe!=null))for(;Be<ze;)it=E[Be++],Oe.X[(506832829*it&4294967295)>>>Oe.Mb]=it}else if(280>it){if(it=pl(it-256,ye),Et=va(rt.G[4],rt.H[4],ye),te(ye),Et=Yl(H,Et=pl(Et,ye)),ye.h)break;if(ze-z<Et||ne-ze<it)break e;for(kt=0;kt<it;++kt)E[ze+kt]=E[ze+kt-Et];for(ze+=it,fe+=it;fe>=H;)fe-=H,++ue,ie!=null&&ue<=se&&!(ue%16)&&ie(S,ue);if(e(ze<=ne),fe&$e&&(rt=St(Pe,fe,ue)),Oe!=null)for(;Be<ze;)it=E[Be++],Oe.X[(506832829*it&4294967295)>>>Oe.Mb]=it}else{if(!(it<at))break e;for(ct=it-280,e(Oe!=null);Be<ze;)it=E[Be++],Oe.X[(506832829*it&4294967295)>>>Oe.Mb]=it;it=ze,e(!(ct>>>(Et=Oe).Xa)),E[it]=Et.X[ct],ct=!0}ct||e(ye.h==Q(ye))}if(S.Pb&&ye.h&&ze<ne)e(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ae(S.s.vb,S.s.Wa);else{if(ye.h)break e;ie!=null&&ie(S,ue>se?se:ue),S.a=0,S.$=ze-z}return 1}return S.a=3,0}function Qi(S){e(S!=null),S.vc=null,S.yc=null,S.Ya=null;var E=S.Wa;E!=null&&(E.X=null),S.vb=null,e(S!=null)}function Ja(){var S=new qm;return S==null?null:(S.a=0,S.xb=v1,si("Predictor","VP8LPredictors"),si("Predictor","VP8LPredictors_C"),si("PredictorAdd","VP8LPredictorsAdd"),si("PredictorAdd","VP8LPredictorsAdd_C"),Sy=st,ru=gt,li=ft,ci=wn,vl=nn,wa=qr,Ro=Dn,C.VP8LMapColor32b=Wf,C.VP8LMapColor8b=yh,S)}function Jl(S,E,z,H,ne){var se=1,ie=[S],ue=[E],fe=H.m,ye=H.s,Pe=null,ze=0;e:for(;;){if(z)for(;se&&ee(fe,1);){var Be=ie,De=ue,at=H,et=1,Oe=at.m,$e=at.gc[at.ab],rt=ee(Oe,2);if(at.Oc&1<<rt)se=0;else{switch(at.Oc|=1<<rt,$e.hc=rt,$e.Ea=Be[0],$e.nc=De[0],$e.K=[null],++at.ab,e(4>=at.ab),rt){case 0:case 1:$e.b=ee(Oe,3)+2,et=Jl(Me($e.Ea,$e.b),Me($e.nc,$e.b),0,at,$e.K),$e.K=$e.K[0];break;case 3:var ct,it=ee(Oe,8)+1,Et=16<it?0:4<it?1:2<it?2:3;if(Be[0]=Me($e.Ea,Et),$e.b=Et,ct=et=Jl(it,1,0,at,$e.K)){var kt,Qt=it,Ct=$e,Jn=1<<(8>>Ct.b),or=i(Jn);if(or==null)ct=0;else{var Hn=Ct.K[0],Mn=Ct.w;for(or[0]=Ct.K[0][0],kt=1;kt<1*Qt;++kt)or[kt]=Ve(Hn[Mn+kt],or[kt-1]);for(;kt<4*Jn;++kt)or[kt]=0;Ct.K[0]=null,Ct.K[0]=or,ct=1}}et=ct;break;case 2:break;default:e(0)}se=et}}if(ie=ie[0],ue=ue[0],se&&ee(fe,1)&&!(se=1<=(ze=ee(fe,4))&&11>=ze)){H.a=3;break e}var wr;if(wr=se)t:{var yr,vn,zs,zo=H,Bs=ie,Bo=ue,lr=ze,bl=z,wl=zo.m,Pi=zo.s,sa=[null],oo=1,lc=0,ud=Fe[lr];n:for(;;){if(bl&&ee(wl,1)){var Oi=ee(wl,3)+2,vh=Me(Bs,Oi),ng=Me(Bo,Oi),Oy=vh*ng;if(!Jl(vh,ng,0,zo,sa))break n;for(sa=sa[0],Pi.xc=Oi,yr=0;yr<Oy;++yr){var Kf=sa[yr]>>8&65535;sa[yr]=Kf,Kf>=oo&&(oo=Kf+1)}}if(wl.h)break n;for(vn=0;5>vn;++vn){var gs=M[vn];!vn&&0<lr&&(gs+=1<<lr),lc<gs&&(lc=gs)}var iO=a(oo*ud,O),y8=oo,v8=a(y8,B);if(v8==null)var $S=null;else e(65536>=y8),$S=v8;var w1=i(lc);if($S==null||w1==null||iO==null){zo.a=1;break n}var DS=iO;for(yr=zs=0;yr<oo;++yr){var iu=$S[yr],jy=iu.G,$y=iu.H,x8=0,LS=1,b8=0;for(vn=0;5>vn;++vn){gs=M[vn],jy[vn]=DS,$y[vn]=zs,!vn&&0<lr&&(gs+=1<<lr);s:{var RS,aO=gs,MS=zo,_1=w1,nfe=DS,rfe=zs,oO=0,Xf=MS.m,sfe=ee(Xf,1);if(s(_1,0,0,aO),sfe){var ife=ee(Xf,1)+1,afe=ee(Xf,1),w8=ee(Xf,afe==0?1:8);_1[w8]=1,ife==2&&(_1[w8=ee(Xf,8)]=1);var FS=1}else{var _8=i(19),k8=ee(Xf,4)+4;if(19<k8){MS.a=3;var zS=0;break s}for(RS=0;RS<k8;++RS)_8[ae[RS]]=ee(Xf,3);var lO=void 0,k1=void 0,S8=MS,ofe=_8,BS=aO,N8=_1,cO=0,Yf=S8.m,C8=8,T8=a(128,O);r:for(;j(T8,0,7,ofe,19);){if(ee(Yf,1)){var lfe=2+2*ee(Yf,3);if((lO=2+ee(Yf,lfe))>BS)break r}else lO=BS;for(k1=0;k1<BS&&lO--;){te(Yf);var I8=T8[0+(127&Y(Yf))];J(Yf,Yf.u+I8.g);var Dy=I8.value;if(16>Dy)N8[k1++]=Dy,Dy!=0&&(C8=Dy);else{var cfe=Dy==16,A8=Dy-16,ufe=I[A8],E8=ee(Yf,w[A8])+ufe;if(k1+E8>BS)break r;for(var dfe=cfe?C8:0;0<E8--;)N8[k1++]=dfe}}cO=1;break r}cO||(S8.a=3),FS=cO}(FS=FS&&!Xf.h)&&(oO=j(nfe,rfe,8,_1,aO)),FS&&oO!=0?zS=oO:(MS.a=3,zS=0)}if(zS==0)break n;if(LS&&X[vn]==1&&(LS=DS[zs].g==0),x8+=DS[zs].g,zs+=zS,3>=vn){var S1,uO=w1[0];for(S1=1;S1<gs;++S1)w1[S1]>uO&&(uO=w1[S1]);b8+=uO}}if(iu.nd=LS,iu.Qb=0,LS&&(iu.qb=(jy[3][$y[3]+0].value<<24|jy[1][$y[1]+0].value<<16|jy[2][$y[2]+0].value)>>>0,x8==0&&256>jy[0][$y[0]+0].value&&(iu.Qb=1,iu.qb+=jy[0][$y[0]+0].value<<8)),iu.jc=!iu.Qb&&6>b8,iu.jc){var WS,xh=iu;for(WS=0;WS<ms;++WS){var Zf=WS,Jf=xh.pd[Zf],US=xh.G[0][xh.H[0]+Zf];256<=US.value?(Jf.g=US.g+256,Jf.value=US.value):(Jf.g=0,Jf.value=0,Zf>>=er(US,8,Jf),Zf>>=er(xh.G[1][xh.H[1]+Zf],16,Jf),Zf>>=er(xh.G[2][xh.H[2]+Zf],0,Jf),er(xh.G[3][xh.H[3]+Zf],24,Jf))}}}Pi.vc=sa,Pi.Wb=oo,Pi.Ya=$S,Pi.yc=iO,wr=1;break t}wr=0}if(!(se=wr)){H.a=3;break e}if(0<ze){if(ye.ua=1<<ze,!Qe(ye.Wa,ze)){H.a=1,se=0;break e}}else ye.ua=0;var dO=H,P8=ie,hfe=ue,hO=dO.s,fO=hO.xc;if(dO.c=P8,dO.i=hfe,hO.md=Me(P8,fO),hO.wc=fO==0?-1:(1<<fO)-1,z){H.xb=tO;break e}if((Pe=i(ie*ue))==null){H.a=1,se=0;break e}se=(se=jo(H,Pe,0,ie,ue,ue,null))&&!fe.h;break e}return se?(ne!=null?ne[0]=Pe:(e(Pe==null),e(z)),H.$=0,z||Qi(ye)):Qi(ye),se}function rh(S,E){var z=S.c*S.i,H=z+E+16*E;return e(S.c<=E),S.V=i(H),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+z+E,1)}function If(S,E){var z=S.C,H=E-z,ne=S.V,se=S.Ba+S.c*z;for(e(E<=S.l.o);0<H;){var ie=16<H?16:H,ue=S.l.ma,fe=S.l.width,ye=fe*ie,Pe=ue.ca,ze=ue.tb+fe*z,Be=S.Ta,De=S.Ua;xa(S,ie,ne,se),as(Be,De,Pe,ze,ye),Oo(ue,z,z+ie,Pe,ze,fe),H-=ie,ne+=ie*S.c,z+=ie}e(z==E),S.C=S.Ma=E}function Af(){this.ub=this.yd=this.td=this.Rb=0}function sh(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ef(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ih(){this.Yb=function(){var S=[];return function E(z,H,ne){for(var se=ne[H],ie=0;ie<se&&(z.push(ne.length>H+1?[]:0),!(ne.length<H+1));ie++)E(z[ie],H+1,ne)}(S,0,[3,11]),S}()}function h1(){this.jb=i(3),this.Wc=o([4,8],ih),this.Xc=o([4,17],ih)}function f1(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Pf(){this.ld=this.La=this.dd=this.tc=0}function py(){this.Na=this.la=0}function p1(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ah(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function oh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pf),this.Y=0,this.ya=Array(new ah),this.aa=0,this.l=new Ql}function Lm(){this.y=i(16),this.f=i(8),this.ea=i(8)}function my(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Af,this.Kc=new sh,this.ed=new f1,this.Qa=new Ef,this.Ic=this.$c=this.Aa=0,this.D=new oh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,oe),this.ia=0,this.pb=a(4,p1),this.Pa=new h1,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Lm),this.Hd=0,this.rb=Array(new py),this.sb=0,this.wa=Array(new Pf),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ah),this.L=this.aa=0,this.gd=o([4,2],Pf),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ql(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ln(){var S=new my;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Xt||(Xt=Xc)),S}function un(S,E,z){return S.a==0&&(S.a=E,S.sc=z,S.cb=0),0}function lh(S,E,z){return 3<=z&&S[E+0]==157&&S[E+1]==1&&S[E+2]==42}function Kc(S,E){if(S==null)return 0;if(S.a=0,S.sc="OK",E==null)return un(S,2,"null VP8Io passed to VP8GetHeaders()");var z=E.data,H=E.w,ne=E.ha;if(4>ne)return un(S,7,"Truncated header.");var se=z[H+0]|z[H+1]<<8|z[H+2]<<16,ie=S.Od;if(ie.Rb=!(1&se),ie.td=se>>1&7,ie.yd=se>>4&1,ie.ub=se>>5,3<ie.td)return un(S,3,"Incorrect keyframe parameters.");if(!ie.yd)return un(S,4,"Frame not displayable.");H+=3,ne-=3;var ue=S.Kc;if(ie.Rb){if(7>ne)return un(S,7,"cannot parse picture header");if(!lh(z,H,ne))return un(S,3,"Bad code word");ue.c=16383&(z[H+4]<<8|z[H+3]),ue.Td=z[H+4]>>6,ue.i=16383&(z[H+6]<<8|z[H+5]),ue.Ud=z[H+6]>>6,H+=7,ne-=7,S.za=ue.c+15>>4,S.Ub=ue.i+15>>4,E.width=ue.c,E.height=ue.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,s((se=S.Pa).jb,0,255,se.jb.length),e((se=S.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,s(se.Zb,0,0,se.Zb.length),s(se.Lb,0,0,se.Lb)}if(ie.ub>ne)return un(S,7,"bad partition length");Z(se=S.m,z,H,ie.ub),H+=ie.ub,ne-=ie.ub,ie.Rb&&(ue.Ld=ge(se),ue.Kd=ge(se)),ue=S.Qa;var fe,ye=S.Pa;if(e(se!=null),e(ue!=null),ue.Cb=ge(se),ue.Cb){if(ue.Bb=ge(se),ge(se)){for(ue.Fb=ge(se),fe=0;4>fe;++fe)ue.Zb[fe]=ge(se)?G(se,7):0;for(fe=0;4>fe;++fe)ue.Lb[fe]=ge(se)?G(se,6):0}if(ue.Bb)for(fe=0;3>fe;++fe)ye.jb[fe]=ge(se)?V(se,8):255}else ue.Bb=0;if(se.Ka)return un(S,3,"cannot parse segment header");if((ue=S.ed).zd=ge(se),ue.Tb=V(se,6),ue.wb=V(se,3),ue.Pc=ge(se),ue.Pc&&ge(se)){for(ye=0;4>ye;++ye)ge(se)&&(ue.vd[ye]=G(se,6));for(ye=0;4>ye;++ye)ge(se)&&(ue.od[ye]=G(se,6))}if(S.L=ue.Tb==0?0:ue.zd?1:2,se.Ka)return un(S,3,"cannot parse filter header");var Pe=ne;if(ne=fe=H,H=fe+Pe,ue=Pe,S.Xb=(1<<V(S.m,2))-1,Pe<3*(ye=S.Xb))z=7;else{for(fe+=3*ye,ue-=3*ye,Pe=0;Pe<ye;++Pe){var ze=z[ne+0]|z[ne+1]<<8|z[ne+2]<<16;ze>ue&&(ze=ue),Z(S.Jc[+Pe],z,fe,ze),fe+=ze,ue-=ze,ne+=3}Z(S.Jc[+ye],z,fe,ue),z=fe<H?0:5}if(z!=0)return un(S,z,"cannot parse partitions");for(z=V(fe=S.m,7),ne=ge(fe)?G(fe,4):0,H=ge(fe)?G(fe,4):0,ue=ge(fe)?G(fe,4):0,ye=ge(fe)?G(fe,4):0,fe=ge(fe)?G(fe,4):0,Pe=S.Qa,ze=0;4>ze;++ze){if(Pe.Cb){var Be=Pe.Zb[ze];Pe.Fb||(Be+=z)}else{if(0<ze){S.pb[ze]=S.pb[0];continue}Be=z}var De=S.pb[ze];De.Sc[0]=lt[Mr(Be+ne,127)],De.Sc[1]=Tt[Mr(Be+0,127)],De.Eb[0]=2*lt[Mr(Be+H,127)],De.Eb[1]=101581*Tt[Mr(Be+ue,127)]>>16,8>De.Eb[1]&&(De.Eb[1]=8),De.Qc[0]=lt[Mr(Be+ye,117)],De.Qc[1]=Tt[Mr(Be+fe,127)],De.lc=Be+fe}if(!ie.Rb)return un(S,4,"Not a key frame.");for(ge(se),ie=S.Pa,z=0;4>z;++z){for(ne=0;8>ne;++ne)for(H=0;3>H;++H)for(ue=0;11>ue;++ue)ye=ce(se,Gf[z][ne][H][ue])?V(se,8):Fo[z][ne][H][ue],ie.Wc[z][ne].Yb[H][ue]=ye;for(ne=0;17>ne;++ne)ie.Xc[z][ne]=ie.Wc[z][eO[ne]]}return S.kc=ge(se),S.kc&&(S.Bd=V(se,8)),S.cb=1}function Xc(S,E,z,H,ne,se,ie){var ue=E[ne].Yb[z];for(z=0;16>ne;++ne){if(!ce(S,ue[z+0]))return ne;for(;!ce(S,ue[z+1]);)if(ue=E[++ne].Yb[0],z=0,ne==16)return 16;var fe=E[ne+1].Yb;if(ce(S,ue[z+2])){var ye=S,Pe=0;if(ce(ye,(Be=ue)[(ze=z)+3]))if(ce(ye,Be[ze+6])){for(ue=0,ze=2*(Pe=ce(ye,Be[ze+8]))+(Be=ce(ye,Be[ze+9+Pe])),Pe=0,Be=_n[ze];Be[ue];++ue)Pe+=Pe+ce(ye,Be[ue]);Pe+=3+(8<<ze)}else ce(ye,Be[ze+7])?(Pe=7+2*ce(ye,165),Pe+=ce(ye,145)):Pe=5+ce(ye,159);else Pe=ce(ye,Be[ze+4])?3+ce(ye,Be[ze+5]):2;ue=fe[2]}else Pe=1,ue=fe[1];fe=ie+na[ne],0>(ye=S).b&&me(ye);var ze,Be=ye.b,De=(ze=ye.Ca>>1)-(ye.I>>Be)>>31;--ye.b,ye.Ca+=De,ye.Ca|=1,ye.I-=(ze+1&De)<<Be,se[fe]=((Pe^De)-De)*H[(0<ne)+0]}return 16}function ch(S){var E=S.rb[S.sb-1];E.la=0,E.Na=0,s(S.zc,0,0,S.zc.length),S.ja=0}function hn(S,E){if(S==null)return 0;if(E==null)return un(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!Kc(S,E))return 0;if(e(S.cb),E.ac==null||E.ac(E)){E.ob&&(S.L=0);var z=jS[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=E.v-z>>4,S.zb=E.j-z>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=E.o+15+z>>4,S.Hb=E.va+15+z>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var H=S.ed;for(z=0;4>z;++z){var ne;if(S.Qa.Cb){var se=S.Qa.Lb[z];S.Qa.Fb||(se+=H.Tb)}else se=H.Tb;for(ne=0;1>=ne;++ne){var ie=S.gd[z][ne],ue=se;if(H.Pc&&(ue+=H.vd[0],ne&&(ue+=H.od[0])),0<(ue=0>ue?0:63<ue?63:ue)){var fe=ue;0<H.wb&&(fe=4<H.wb?fe>>2:fe>>1)>9-H.wb&&(fe=9-H.wb),1>fe&&(fe=1),ie.dd=fe,ie.tc=2*ue+fe,ie.ld=40<=ue?2:15<=ue?1:0}else ie.tc=0;ie.La=ne}}}z=0}else un(S,6,"Frame setup failed"),z=S.a;if(z=z==0){if(z){S.$c=0,0<S.Aa||(S.Ic=tfe);e:{z=S.Ic,H=4*(fe=S.za);var ye=32*fe,Pe=fe+1,ze=0<S.L?fe*(0<S.Aa?2:1):0,Be=(S.Aa==2?2:1)*fe;if((ie=H+832+(ne=3*(16*z+jS[S.L])/2*ye)+(se=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=ie)z=0;else{if(ie>S.Vb){if(S.Vb=0,S.Ec=i(ie),S.Fc=0,S.Ec==null){z=un(S,1,"no memory during frame initialization.");break e}S.Vb=ie}ie=S.Ec,ue=S.Fc,S.Ac=ie,S.Bc=ue,ue+=H,S.Gd=a(ye,Lm),S.Hd=0,S.rb=a(Pe+1,py),S.sb=1,S.wa=ze?a(ze,Pf):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=fe),e(!0),S.oc=ie,S.pc=ue,ue+=832,S.ya=a(Be,ah),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=fe),S.R=16*fe,S.B=8*fe,fe=(ye=jS[S.L])*S.R,ye=ye/2*S.B,S.sa=ie,S.ta=ue+fe,S.qa=S.sa,S.ra=S.ta+16*z*S.R+ye,S.Ha=S.qa,S.Ia=S.ra+8*z*S.B+ye,S.$c=0,ue+=ne,S.mb=se?ie:null,S.nb=se?ue:null,e(ue+se<=S.Fc+S.Vb),ch(S),s(S.Ac,S.Bc,0,H),z=1}}if(z){if(E.ka=0,E.y=S.sa,E.O=S.ta,E.f=S.qa,E.N=S.ra,E.ea=S.Ha,E.Vd=S.Ia,E.fa=S.R,E.Rc=S.B,E.F=null,E.J=0,!Ny){for(z=-255;255>=z;++z)ir[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)ic[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)Hf[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)ac[255+z]=0>z?0:255<z?255:z;Ny=1}rd=uh,nc=Of,sd=ec,ta=Kr,io=tc,is=gy,Uf=Wm,Zm=ed,Jm=Um,Ei=Vm,rc=m1,id=Rf,sc=ba,Vf=_y,ad=by,od=fs,su=eo,Mo=wy,xl[0]=An,xl[1]=Rm,xl[2]=ln,xl[3]=$o,xl[4]=Fm,xl[5]=Zu,xl[6]=Df,xl[7]=hh,xl[8]=zm,xl[9]=Jc,cd[0]=jf,cd[1]=Mm,cd[2]=ml,cd[3]=Zc,cd[4]=As,cd[5]=yy,cd[6]=$f,oc[0]=Qc,oc[1]=dh,oc[2]=fh,oc[3]=ss,oc[4]=ph,oc[5]=vy,oc[6]=Lf,z=1}else z=0}z&&(z=function(De,at){for(De.M=0;De.M<De.Va;++De.M){var et,Oe=De.Jc[De.M&De.Xb],$e=De.m,rt=De;for(et=0;et<rt.za;++et){var ct=$e,it=rt,Et=it.Ac,kt=it.Bc+4*et,Qt=it.zc,Ct=it.ya[it.aa+et];if(it.Qa.Bb?Ct.$b=ce(ct,it.Pa.jb[0])?2+ce(ct,it.Pa.jb[2]):ce(ct,it.Pa.jb[1]):Ct.$b=0,it.kc&&(Ct.Ad=ce(ct,it.Bd)),Ct.Za=!ce(ct,145)+0,Ct.Za){var Jn=Ct.Ob,or=0;for(it=0;4>it;++it){var Hn,Mn=Qt[0+it];for(Hn=0;4>Hn;++Hn){Mn=ka[Et[kt+Hn]][Mn];for(var wr=Ps[ce(ct,Mn[0])];0<wr;)wr=Ps[2*wr+ce(ct,Mn[wr])];Mn=-wr,Et[kt+Hn]=Mn}r(Jn,or,Et,kt,4),or+=4,Qt[0+it]=Mn}}else Mn=ce(ct,156)?ce(ct,128)?1:3:ce(ct,163)?2:0,Ct.Ob[0]=Mn,s(Et,kt,Mn,4),s(Qt,0,Mn,4);Ct.Dd=ce(ct,142)?ce(ct,114)?ce(ct,183)?1:3:2:0}if(rt.m.Ka)return un(De,7,"Premature end-of-partition0 encountered.");for(;De.ja<De.za;++De.ja){if(rt=Oe,ct=($e=De).rb[$e.sb-1],Et=$e.rb[$e.sb+$e.ja],et=$e.ya[$e.aa+$e.ja],kt=$e.kc?et.Ad:0)ct.la=Et.la=0,et.Za||(ct.Na=Et.Na=0),et.Hc=0,et.Gc=0,et.ia=0;else{var yr,vn;if(ct=Et,Et=rt,kt=$e.Pa.Xc,Qt=$e.ya[$e.aa+$e.ja],Ct=$e.pb[Qt.$b],it=Qt.ad,Jn=0,or=$e.rb[$e.sb-1],Mn=Hn=0,s(it,Jn,0,384),Qt.Za)var zs=0,zo=kt[3];else{wr=i(16);var Bs=ct.Na+or.Na;if(Bs=Xt(Et,kt[1],Bs,Ct.Eb,0,wr,0),ct.Na=or.Na=(0<Bs)+0,1<Bs)rd(wr,0,it,Jn);else{var Bo=wr[0]+3>>3;for(wr=0;256>wr;wr+=16)it[Jn+wr]=Bo}zs=1,zo=kt[0]}var lr=15&ct.la,bl=15&or.la;for(wr=0;4>wr;++wr){var wl=1&bl;for(Bo=vn=0;4>Bo;++Bo)lr=lr>>1|(wl=(Bs=Xt(Et,zo,Bs=wl+(1&lr),Ct.Sc,zs,it,Jn))>zs)<<7,vn=vn<<2|(3<Bs?3:1<Bs?2:it[Jn+0]!=0),Jn+=16;lr>>=4,bl=bl>>1|wl<<7,Hn=(Hn<<8|vn)>>>0}for(zo=lr,zs=bl>>4,yr=0;4>yr;yr+=2){for(vn=0,lr=ct.la>>4+yr,bl=or.la>>4+yr,wr=0;2>wr;++wr){for(wl=1&bl,Bo=0;2>Bo;++Bo)Bs=wl+(1&lr),lr=lr>>1|(wl=0<(Bs=Xt(Et,kt[2],Bs,Ct.Qc,0,it,Jn)))<<3,vn=vn<<2|(3<Bs?3:1<Bs?2:it[Jn+0]!=0),Jn+=16;lr>>=2,bl=bl>>1|wl<<5}Mn|=vn<<4*yr,zo|=lr<<4<<yr,zs|=(240&bl)<<yr}ct.la=zo,or.la=zs,Qt.Hc=Hn,Qt.Gc=Mn,Qt.ia=43690&Mn?0:Ct.ia,kt=!(Hn|Mn)}if(0<$e.L&&($e.wa[$e.Y+$e.ja]=$e.gd[et.$b][et.Za],$e.wa[$e.Y+$e.ja].La|=!kt),rt.Ka)return un(De,7,"Premature end-of-file encountered.")}if(ch(De),$e=at,rt=1,et=(Oe=De).D,ct=0<Oe.L&&Oe.M>=Oe.zb&&Oe.M<=Oe.Va,Oe.Aa==0)e:{if(et.M=Oe.M,et.uc=ct,Km(Oe,et),rt=1,et=(vn=Oe.D).Nb,ct=(Mn=jS[Oe.L])*Oe.R,Et=Mn/2*Oe.B,wr=16*et*Oe.R,Bo=8*et*Oe.B,kt=Oe.sa,Qt=Oe.ta-ct+wr,Ct=Oe.qa,it=Oe.ra-Et+Bo,Jn=Oe.Ha,or=Oe.Ia-Et+Bo,bl=(lr=vn.M)==0,Hn=lr>=Oe.Va-1,Oe.Aa==2&&Km(Oe,vn),vn.uc)for(wl=(Bs=Oe).D.M,e(Bs.D.uc),vn=Bs.yb;vn<Bs.Hb;++vn){zs=vn,zo=wl;var Pi=(sa=(gs=Bs).D).Nb;yr=gs.R;var sa=sa.wa[sa.Y+zs],oo=gs.sa,lc=gs.ta+16*Pi*yr+16*zs,ud=sa.dd,Oi=sa.tc;if(Oi!=0)if(e(3<=Oi),gs.L==1)0<zs&&od(oo,lc,yr,Oi+4),sa.La&&Mo(oo,lc,yr,Oi),0<zo&&ad(oo,lc,yr,Oi+4),sa.La&&su(oo,lc,yr,Oi);else{var vh=gs.B,ng=gs.qa,Oy=gs.ra+8*Pi*vh+8*zs,Kf=gs.Ha,gs=gs.Ia+8*Pi*vh+8*zs;Pi=sa.ld,0<zs&&(Zm(oo,lc,yr,Oi+4,ud,Pi),Ei(ng,Oy,Kf,gs,vh,Oi+4,ud,Pi)),sa.La&&(id(oo,lc,yr,Oi,ud,Pi),Vf(ng,Oy,Kf,gs,vh,Oi,ud,Pi)),0<zo&&(Uf(oo,lc,yr,Oi+4,ud,Pi),Jm(ng,Oy,Kf,gs,vh,Oi+4,ud,Pi)),sa.La&&(rc(oo,lc,yr,Oi,ud,Pi),sc(ng,Oy,Kf,gs,vh,Oi,ud,Pi))}}if(Oe.ia&&alert("todo:DitherRow"),$e.put!=null){if(vn=16*lr,lr=16*(lr+1),bl?($e.y=Oe.sa,$e.O=Oe.ta+wr,$e.f=Oe.qa,$e.N=Oe.ra+Bo,$e.ea=Oe.Ha,$e.W=Oe.Ia+Bo):(vn-=Mn,$e.y=kt,$e.O=Qt,$e.f=Ct,$e.N=it,$e.ea=Jn,$e.W=or),Hn||(lr-=Mn),lr>$e.o&&(lr=$e.o),$e.F=null,$e.J=null,Oe.Fa!=null&&0<Oe.Fa.length&&vn<lr&&($e.J=Gm(Oe,$e,vn,lr-vn),$e.F=Oe.mb,$e.F==null&&$e.F.length==0)){rt=un(Oe,3,"Could not decode alpha data.");break e}vn<$e.j&&(Mn=$e.j-vn,vn=$e.j,e(!(1&Mn)),$e.O+=Oe.R*Mn,$e.N+=Oe.B*(Mn>>1),$e.W+=Oe.B*(Mn>>1),$e.F!=null&&($e.J+=$e.width*Mn)),vn<lr&&($e.O+=$e.v,$e.N+=$e.v>>1,$e.W+=$e.v>>1,$e.F!=null&&($e.J+=$e.v),$e.ka=vn-$e.j,$e.U=$e.va-$e.v,$e.T=lr-vn,rt=$e.put($e))}et+1!=Oe.Ic||Hn||(r(Oe.sa,Oe.ta-ct,kt,Qt+16*Oe.R,ct),r(Oe.qa,Oe.ra-Et,Ct,it+8*Oe.B,Et),r(Oe.Ha,Oe.Ia-Et,Jn,or+8*Oe.B,Et))}if(!rt)return un(De,6,"Output aborted.")}return 1}(S,E)),E.bc!=null&&E.bc(E),z&=1}return z?(S.cb=0,z):0}function Vn(S,E,z,H,ne){ne=S[E+z+32*H]+(ne>>3),S[E+z+32*H]=-256&ne?0>ne?0:255:ne}function Xu(S,E,z,H,ne,se){Vn(S,E,0,z,H+ne),Vn(S,E,1,z,H+se),Vn(S,E,2,z,H-se),Vn(S,E,3,z,H-ne)}function ai(S){return(20091*S>>16)+S}function Ti(S,E,z,H){var ne,se=0,ie=i(16);for(ne=0;4>ne;++ne){var ue=S[E+0]+S[E+8],fe=S[E+0]-S[E+8],ye=(35468*S[E+4]>>16)-ai(S[E+12]),Pe=ai(S[E+4])+(35468*S[E+12]>>16);ie[se+0]=ue+Pe,ie[se+1]=fe+ye,ie[se+2]=fe-ye,ie[se+3]=ue-Pe,se+=4,E++}for(ne=se=0;4>ne;++ne)ue=(S=ie[se+0]+4)+ie[se+8],fe=S-ie[se+8],ye=(35468*ie[se+4]>>16)-ai(ie[se+12]),Vn(z,H,0,0,ue+(Pe=ai(ie[se+4])+(35468*ie[se+12]>>16))),Vn(z,H,1,0,fe+ye),Vn(z,H,2,0,fe-ye),Vn(z,H,3,0,ue-Pe),se++,H+=32}function gy(S,E,z,H){var ne=S[E+0]+4,se=35468*S[E+4]>>16,ie=ai(S[E+4]),ue=35468*S[E+1]>>16;Xu(z,H,0,ne+ie,S=ai(S[E+1]),ue),Xu(z,H,1,ne+se,S,ue),Xu(z,H,2,ne-se,S,ue),Xu(z,H,3,ne-ie,S,ue)}function Of(S,E,z,H,ne){Ti(S,E,z,H),ne&&Ti(S,E+16,z,H+4)}function ec(S,E,z,H){nc(S,E+0,z,H,1),nc(S,E+32,z,H+128,1)}function Kr(S,E,z,H){var ne;for(S=S[E+0]+4,ne=0;4>ne;++ne)for(E=0;4>E;++E)Vn(z,H,E,ne,S)}function tc(S,E,z,H){S[E+0]&&ta(S,E+0,z,H),S[E+16]&&ta(S,E+16,z,H+4),S[E+32]&&ta(S,E+32,z,H+128),S[E+48]&&ta(S,E+48,z,H+128+4)}function uh(S,E,z,H){var ne,se=i(16);for(ne=0;4>ne;++ne){var ie=S[E+0+ne]+S[E+12+ne],ue=S[E+4+ne]+S[E+8+ne],fe=S[E+4+ne]-S[E+8+ne],ye=S[E+0+ne]-S[E+12+ne];se[0+ne]=ie+ue,se[8+ne]=ie-ue,se[4+ne]=ye+fe,se[12+ne]=ye-fe}for(ne=0;4>ne;++ne)ie=(S=se[0+4*ne]+3)+se[3+4*ne],ue=se[1+4*ne]+se[2+4*ne],fe=se[1+4*ne]-se[2+4*ne],ye=S-se[3+4*ne],z[H+0]=ie+ue>>3,z[H+16]=ye+fe>>3,z[H+32]=ie-ue>>3,z[H+48]=ye-fe>>3,H+=64}function Yc(S,E,z){var H,ne=E-32,se=_a,ie=255-S[ne-1];for(H=0;H<z;++H){var ue,fe=se,ye=ie+S[E-1];for(ue=0;ue<z;++ue)S[E+ue]=fe[ye+S[ne+ue]];E+=32}}function Rm(S,E){Yc(S,E,4)}function dh(S,E){Yc(S,E,8)}function Mm(S,E){Yc(S,E,16)}function ml(S,E){var z;for(z=0;16>z;++z)r(S,E+32*z,S,E-32,16)}function Zc(S,E){var z;for(z=16;0<z;--z)s(S,E,S[E-1],16),E+=32}function Yu(S,E,z){var H;for(H=0;16>H;++H)s(E,z+32*H,S,16)}function jf(S,E){var z,H=16;for(z=0;16>z;++z)H+=S[E-1+32*z]+S[E+z-32];Yu(H>>5,S,E)}function As(S,E){var z,H=8;for(z=0;16>z;++z)H+=S[E-1+32*z];Yu(H>>4,S,E)}function yy(S,E){var z,H=8;for(z=0;16>z;++z)H+=S[E+z-32];Yu(H>>4,S,E)}function $f(S,E){Yu(128,S,E)}function sn(S,E,z){return S+2*E+z+2>>2}function ln(S,E){var z,H=E-32;for(H=new Uint8Array([sn(S[H-1],S[H+0],S[H+1]),sn(S[H+0],S[H+1],S[H+2]),sn(S[H+1],S[H+2],S[H+3]),sn(S[H+2],S[H+3],S[H+4])]),z=0;4>z;++z)r(S,E+32*z,H,0,H.length)}function $o(S,E){var z=S[E-1],H=S[E-1+32],ne=S[E-1+64],se=S[E-1+96];Ce(S,E+0,16843009*sn(S[E-1-32],z,H)),Ce(S,E+32,16843009*sn(z,H,ne)),Ce(S,E+64,16843009*sn(H,ne,se)),Ce(S,E+96,16843009*sn(ne,se,se))}function An(S,E){var z,H=4;for(z=0;4>z;++z)H+=S[E+z-32]+S[E-1+32*z];for(H>>=3,z=0;4>z;++z)s(S,E+32*z,H,4)}function Fm(S,E){var z=S[E-1+0],H=S[E-1+32],ne=S[E-1+64],se=S[E-1-32],ie=S[E+0-32],ue=S[E+1-32],fe=S[E+2-32],ye=S[E+3-32];S[E+0+96]=sn(H,ne,S[E-1+96]),S[E+1+96]=S[E+0+64]=sn(z,H,ne),S[E+2+96]=S[E+1+64]=S[E+0+32]=sn(se,z,H),S[E+3+96]=S[E+2+64]=S[E+1+32]=S[E+0+0]=sn(ie,se,z),S[E+3+64]=S[E+2+32]=S[E+1+0]=sn(ue,ie,se),S[E+3+32]=S[E+2+0]=sn(fe,ue,ie),S[E+3+0]=sn(ye,fe,ue)}function Df(S,E){var z=S[E+1-32],H=S[E+2-32],ne=S[E+3-32],se=S[E+4-32],ie=S[E+5-32],ue=S[E+6-32],fe=S[E+7-32];S[E+0+0]=sn(S[E+0-32],z,H),S[E+1+0]=S[E+0+32]=sn(z,H,ne),S[E+2+0]=S[E+1+32]=S[E+0+64]=sn(H,ne,se),S[E+3+0]=S[E+2+32]=S[E+1+64]=S[E+0+96]=sn(ne,se,ie),S[E+3+32]=S[E+2+64]=S[E+1+96]=sn(se,ie,ue),S[E+3+64]=S[E+2+96]=sn(ie,ue,fe),S[E+3+96]=sn(ue,fe,fe)}function Zu(S,E){var z=S[E-1+0],H=S[E-1+32],ne=S[E-1+64],se=S[E-1-32],ie=S[E+0-32],ue=S[E+1-32],fe=S[E+2-32],ye=S[E+3-32];S[E+0+0]=S[E+1+64]=se+ie+1>>1,S[E+1+0]=S[E+2+64]=ie+ue+1>>1,S[E+2+0]=S[E+3+64]=ue+fe+1>>1,S[E+3+0]=fe+ye+1>>1,S[E+0+96]=sn(ne,H,z),S[E+0+64]=sn(H,z,se),S[E+0+32]=S[E+1+96]=sn(z,se,ie),S[E+1+32]=S[E+2+96]=sn(se,ie,ue),S[E+2+32]=S[E+3+96]=sn(ie,ue,fe),S[E+3+32]=sn(ue,fe,ye)}function hh(S,E){var z=S[E+0-32],H=S[E+1-32],ne=S[E+2-32],se=S[E+3-32],ie=S[E+4-32],ue=S[E+5-32],fe=S[E+6-32],ye=S[E+7-32];S[E+0+0]=z+H+1>>1,S[E+1+0]=S[E+0+64]=H+ne+1>>1,S[E+2+0]=S[E+1+64]=ne+se+1>>1,S[E+3+0]=S[E+2+64]=se+ie+1>>1,S[E+0+32]=sn(z,H,ne),S[E+1+32]=S[E+0+96]=sn(H,ne,se),S[E+2+32]=S[E+1+96]=sn(ne,se,ie),S[E+3+32]=S[E+2+96]=sn(se,ie,ue),S[E+3+64]=sn(ie,ue,fe),S[E+3+96]=sn(ue,fe,ye)}function Jc(S,E){var z=S[E-1+0],H=S[E-1+32],ne=S[E-1+64],se=S[E-1+96];S[E+0+0]=z+H+1>>1,S[E+2+0]=S[E+0+32]=H+ne+1>>1,S[E+2+32]=S[E+0+64]=ne+se+1>>1,S[E+1+0]=sn(z,H,ne),S[E+3+0]=S[E+1+32]=sn(H,ne,se),S[E+3+32]=S[E+1+64]=sn(ne,se,se),S[E+3+64]=S[E+2+64]=S[E+0+96]=S[E+1+96]=S[E+2+96]=S[E+3+96]=se}function zm(S,E){var z=S[E-1+0],H=S[E-1+32],ne=S[E-1+64],se=S[E-1+96],ie=S[E-1-32],ue=S[E+0-32],fe=S[E+1-32],ye=S[E+2-32];S[E+0+0]=S[E+2+32]=z+ie+1>>1,S[E+0+32]=S[E+2+64]=H+z+1>>1,S[E+0+64]=S[E+2+96]=ne+H+1>>1,S[E+0+96]=se+ne+1>>1,S[E+3+0]=sn(ue,fe,ye),S[E+2+0]=sn(ie,ue,fe),S[E+1+0]=S[E+3+32]=sn(z,ie,ue),S[E+1+32]=S[E+3+64]=sn(H,z,ie),S[E+1+64]=S[E+3+96]=sn(ne,H,z),S[E+1+96]=sn(se,ne,H)}function fh(S,E){var z;for(z=0;8>z;++z)r(S,E+32*z,S,E-32,8)}function ss(S,E){var z;for(z=0;8>z;++z)s(S,E,S[E-1],8),E+=32}function Qa(S,E,z){var H;for(H=0;8>H;++H)s(E,z+32*H,S,8)}function Qc(S,E){var z,H=8;for(z=0;8>z;++z)H+=S[E+z-32]+S[E-1+32*z];Qa(H>>4,S,E)}function vy(S,E){var z,H=4;for(z=0;8>z;++z)H+=S[E+z-32];Qa(H>>3,S,E)}function ph(S,E){var z,H=4;for(z=0;8>z;++z)H+=S[E-1+32*z];Qa(H>>3,S,E)}function Lf(S,E){Qa(128,S,E)}function Ju(S,E,z){var H=S[E-z],ne=S[E+0],se=3*(ne-H)+qf[1020+S[E-2*z]-S[E+z]],ie=ld[112+(se+4>>3)];S[E-z]=_a[255+H+ld[112+(se+3>>3)]],S[E+0]=_a[255+ne-ie]}function xy(S,E,z,H){var ne=S[E+0],se=S[E+z];return ao[255+S[E-2*z]-S[E-z]]>H||ao[255+se-ne]>H}function Bm(S,E,z,H){return 4*ao[255+S[E-z]-S[E+0]]+ao[255+S[E-2*z]-S[E+z]]<=H}function Cn(S,E,z,H,ne){var se=S[E-3*z],ie=S[E-2*z],ue=S[E-z],fe=S[E+0],ye=S[E+z],Pe=S[E+2*z],ze=S[E+3*z];return 4*ao[255+ue-fe]+ao[255+ie-ye]>H?0:ao[255+S[E-4*z]-se]<=ne&&ao[255+se-ie]<=ne&&ao[255+ie-ue]<=ne&&ao[255+ze-Pe]<=ne&&ao[255+Pe-ye]<=ne&&ao[255+ye-fe]<=ne}function by(S,E,z,H){var ne=2*H+1;for(H=0;16>H;++H)Bm(S,E+H,z,ne)&&Ju(S,E+H,z)}function fs(S,E,z,H){var ne=2*H+1;for(H=0;16>H;++H)Bm(S,E+H*z,1,ne)&&Ju(S,E+H*z,1)}function eo(S,E,z,H){var ne;for(ne=3;0<ne;--ne)by(S,E+=4*z,z,H)}function wy(S,E,z,H){var ne;for(ne=3;0<ne;--ne)fs(S,E+=4,z,H)}function Qu(S,E,z,H,ne,se,ie,ue){for(se=2*se+1;0<ne--;){if(Cn(S,E,z,se,ie))if(xy(S,E,z,ue))Ju(S,E,z);else{var fe=S,ye=E,Pe=z,ze=fe[ye-2*Pe],Be=fe[ye-Pe],De=fe[ye+0],at=fe[ye+Pe],et=fe[ye+2*Pe],Oe=27*(rt=qf[1020+3*(De-Be)+qf[1020+ze-at]])+63>>7,$e=18*rt+63>>7,rt=9*rt+63>>7;fe[ye-3*Pe]=_a[255+fe[ye-3*Pe]+rt],fe[ye-2*Pe]=_a[255+ze+$e],fe[ye-Pe]=_a[255+Be+Oe],fe[ye+0]=_a[255+De-Oe],fe[ye+Pe]=_a[255+at-$e],fe[ye+2*Pe]=_a[255+et-rt]}E+=H}}function to(S,E,z,H,ne,se,ie,ue){for(se=2*se+1;0<ne--;){if(Cn(S,E,z,se,ie))if(xy(S,E,z,ue))Ju(S,E,z);else{var fe=S,ye=E,Pe=z,ze=fe[ye-Pe],Be=fe[ye+0],De=fe[ye+Pe],at=ld[112+((et=3*(Be-ze))+4>>3)],et=ld[112+(et+3>>3)],Oe=at+1>>1;fe[ye-2*Pe]=_a[255+fe[ye-2*Pe]+Oe],fe[ye-Pe]=_a[255+ze+et],fe[ye+0]=_a[255+Be-at],fe[ye+Pe]=_a[255+De-Oe]}E+=H}}function Wm(S,E,z,H,ne,se){Qu(S,E,z,1,16,H,ne,se)}function ed(S,E,z,H,ne,se){Qu(S,E,1,z,16,H,ne,se)}function m1(S,E,z,H,ne,se){var ie;for(ie=3;0<ie;--ie)to(S,E+=4*z,z,1,16,H,ne,se)}function Rf(S,E,z,H,ne,se){var ie;for(ie=3;0<ie;--ie)to(S,E+=4,1,z,16,H,ne,se)}function Um(S,E,z,H,ne,se,ie,ue){Qu(S,E,ne,1,8,se,ie,ue),Qu(z,H,ne,1,8,se,ie,ue)}function Vm(S,E,z,H,ne,se,ie,ue){Qu(S,E,1,ne,8,se,ie,ue),Qu(z,H,1,ne,8,se,ie,ue)}function ba(S,E,z,H,ne,se,ie,ue){to(S,E+4*ne,ne,1,8,se,ie,ue),to(z,H+4*ne,ne,1,8,se,ie,ue)}function _y(S,E,z,H,ne,se,ie,ue){to(S,E+4,1,ne,8,se,ie,ue),to(z,H+4,1,ne,8,se,ie,ue)}function mh(){this.ba=new Eo,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Gr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Do(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hm(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new O}function qm(){this.xb=this.a=0,this.l=new Ql,this.ca=new Eo,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hm,this.ab=0,this.gc=a(4,Mf),this.Oc=0}function Ff(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ql,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function td(S,E,z,H,ne,se,ie){for(S=S==null?0:S[E+0],E=0;E<ie;++E)ne[se+E]=S+z[H+E]&255,S=ne[se+E]}function zf(S,E,z,H,ne,se,ie){var ue;if(S==null)td(null,null,z,H,ne,se,ie);else for(ue=0;ue<ie;++ue)ne[se+ue]=S[E+ue]+z[H+ue]&255}function nd(S,E,z,H,ne,se,ie){if(S==null)td(null,null,z,H,ne,se,ie);else{var ue,fe=S[E+0],ye=fe,Pe=fe;for(ue=0;ue<ie;++ue)ye=Pe+(fe=S[E+ue])-ye,Pe=z[H+ue]+(-256&ye?0>ye?0:255:ye)&255,ye=fe,ne[se+ue]=Pe}}function Gm(S,E,z,H){var ne=E.width,se=E.o;if(e(S!=null&&E!=null),0>z||0>=H||z+H>se)return null;if(!S.Cc){if(S.ga==null){var ie;if(S.ga=new Ff,(ie=S.ga==null)||(ie=E.width*E.o,e(S.Gb.length==0),S.Gb=i(ie),S.Uc=0,S.Gb==null?ie=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,ie=1),ie=!ie),!ie){ie=S.ga;var ue=S.Fa,fe=S.P,ye=S.qc,Pe=S.mb,ze=S.nb,Be=fe+1,De=ye-1,at=ie.l;if(e(ue!=null&&Pe!=null&&E!=null),ar[0]=null,ar[1]=td,ar[2]=zf,ar[3]=nd,ie.ca=Pe,ie.tb=ze,ie.c=E.width,ie.i=E.height,e(0<ie.c&&0<ie.i),1>=ye)E=0;else if(ie.$a=ue[fe+0]>>0&3,ie.Z=ue[fe+0]>>2&3,ie.Lc=ue[fe+0]>>4&3,fe=ue[fe+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||fe)E=0;else if(at.put=Xl,at.ac=ii,at.bc=Po,at.ma=ie,at.width=E.width,at.height=E.height,at.Da=E.Da,at.v=E.v,at.va=E.va,at.j=E.j,at.o=E.o,ie.$a)e:{e(ie.$a==1),E=Ja();t:for(;;){if(E==null){E=0;break e}if(e(ie!=null),ie.mc=E,E.c=ie.c,E.i=ie.i,E.l=ie.l,E.l.ma=ie,E.l.width=ie.c,E.l.height=ie.i,E.a=0,U(E.m,ue,Be,De),!Jl(ie.c,ie.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&Zl(E.s)?(ie.ic=1,ue=E.c*E.i,E.Ta=null,E.Ua=0,E.V=i(ue),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(ie.ic=0,E=rh(E,ie.c)),!E))break t;E=1;break e}ie.mc=null,E=0}else E=De>=ie.c*ie.i;ie=!E}if(ie)return null;S.ga.Lc!=1?S.Ga=0:H=se-z}e(S.ga!=null),e(z+H<=se);e:{if(E=(ue=S.ga).c,se=ue.l.o,ue.$a==0){if(Be=S.rc,De=S.Vc,at=S.Fa,fe=S.P+1+z*E,ye=S.mb,Pe=S.nb+z*E,e(fe<=S.P+S.qc),ue.Z!=0)for(e(ar[ue.Z]!=null),ie=0;ie<H;++ie)ar[ue.Z](Be,De,at,fe,ye,Pe,E),Be=ye,De=Pe,Pe+=E,fe+=E;else for(ie=0;ie<H;++ie)r(ye,Pe,at,fe,E),Be=ye,De=Pe,Pe+=E,fe+=E;S.rc=Be,S.Vc=De}else{if(e(ue.mc!=null),E=z+H,e((ie=ue.mc)!=null),e(E<=ie.i),ie.C>=E)E=1;else if(ue.ic||Le(),ue.ic){ue=ie.V,Be=ie.Ba,De=ie.c;var et=ie.i,Oe=(at=1,fe=ie.$/De,ye=ie.$%De,Pe=ie.m,ze=ie.s,ie.$),$e=De*et,rt=De*E,ct=ze.wc,it=Oe<rt?St(ze,ye,fe):null;e(Oe<=$e),e(E<=et),e(Zl(ze));t:for(;;){for(;!Pe.h&&Oe<rt;){if(ye&ct||(it=St(ze,ye,fe)),e(it!=null),te(Pe),256>(et=va(it.G[0],it.H[0],Pe)))ue[Be+Oe]=et,++Oe,++ye>=De&&(ye=0,++fe<=E&&!(fe%16)&&Za(ie,fe));else{if(!(280>et)){at=0;break t}et=pl(et-256,Pe);var Et,kt=va(it.G[4],it.H[4],Pe);if(te(Pe),!(Oe>=(kt=Yl(De,kt=pl(kt,Pe)))&&$e-Oe>=et)){at=0;break t}for(Et=0;Et<et;++Et)ue[Be+Oe+Et]=ue[Be+Oe+Et-kt];for(Oe+=et,ye+=et;ye>=De;)ye-=De,++fe<=E&&!(fe%16)&&Za(ie,fe);Oe<rt&&ye&ct&&(it=St(ze,ye,fe))}e(Pe.h==Q(Pe))}Za(ie,fe>E?E:fe);break t}!at||Pe.h&&Oe<$e?(at=0,ie.a=Pe.h?5:3):ie.$=Oe,E=at}else E=jo(ie,ie.V,ie.Ba,ie.c,ie.i,E,If);if(!E){H=0;break e}}z+H>=se&&(S.Cc=1),H=1}if(!H)return null;if(S.Cc&&((H=S.ga)!=null&&(H.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+z*ne}function D(S,E,z,H,ne,se){for(;0<ne--;){var ie,ue=S,fe=E+(z?1:0),ye=S,Pe=E+(z?0:3);for(ie=0;ie<H;++ie){var ze=ye[Pe+4*ie];ze!=255&&(ze*=32897,ue[fe+4*ie+0]=ue[fe+4*ie+0]*ze>>23,ue[fe+4*ie+1]=ue[fe+4*ie+1]*ze>>23,ue[fe+4*ie+2]=ue[fe+4*ie+2]*ze>>23)}E+=se}}function re(S,E,z,H,ne){for(;0<H--;){var se;for(se=0;se<z;++se){var ie=S[E+2*se+0],ue=15&(ye=S[E+2*se+1]),fe=4369*ue,ye=(240&ye|ye>>4)*fe>>16;S[E+2*se+0]=(240&ie|ie>>4)*fe>>16&240|(15&ie|ie<<4)*fe>>16>>4&15,S[E+2*se+1]=240&ye|ue}E+=ne}}function ve(S,E,z,H,ne,se,ie,ue){var fe,ye,Pe=255;for(ye=0;ye<ne;++ye){for(fe=0;fe<H;++fe){var ze=S[E+fe];se[ie+4*fe]=ze,Pe&=ze}E+=z,ie+=ue}return Pe!=255}function Te(S,E,z,H,ne){var se;for(se=0;se<ne;++se)z[H+se]=S[E+se]>>8}function Le(){ui=D,rr=re,sr=ve,as=Te}function Je(S,E,z){C[S]=function(H,ne,se,ie,ue,fe,ye,Pe,ze,Be,De,at,et,Oe,$e,rt,ct){var it,Et=ct-1>>1,kt=ue[fe+0]|ye[Pe+0]<<16,Qt=ze[Be+0]|De[at+0]<<16;e(H!=null);var Ct=3*kt+Qt+131074>>2;for(E(H[ne+0],255&Ct,Ct>>16,et,Oe),se!=null&&(Ct=3*Qt+kt+131074>>2,E(se[ie+0],255&Ct,Ct>>16,$e,rt)),it=1;it<=Et;++it){var Jn=ue[fe+it]|ye[Pe+it]<<16,or=ze[Be+it]|De[at+it]<<16,Hn=kt+Jn+Qt+or+524296,Mn=Hn+2*(Jn+Qt)>>3;Ct=Mn+kt>>1,kt=(Hn=Hn+2*(kt+or)>>3)+Jn>>1,E(H[ne+2*it-1],255&Ct,Ct>>16,et,Oe+(2*it-1)*z),E(H[ne+2*it-0],255&kt,kt>>16,et,Oe+(2*it-0)*z),se!=null&&(Ct=Hn+Qt>>1,kt=Mn+or>>1,E(se[ie+2*it-1],255&Ct,Ct>>16,$e,rt+(2*it-1)*z),E(se[ie+2*it+0],255&kt,kt>>16,$e,rt+(2*it+0)*z)),kt=Jn,Qt=or}1&ct||(Ct=3*kt+Qt+131074>>2,E(H[ne+ct-1],255&Ct,Ct>>16,et,Oe+(ct-1)*z),se!=null&&(Ct=3*Qt+kt+131074>>2,E(se[ie+ct-1],255&Ct,Ct>>16,$e,rt+(ct-1)*z)))}}function dt(){ra[Cy]=nO,ra[Qm]=AS,ra[y1]=rO,ra[eg]=Py,ra[tg]=x1,ra[Ty]=ES,ra[IS]=qhe,ra[Iy]=AS,ra[Ay]=Py,ra[Ey]=x1,ra[g]=ES}function Nt(S){return S&-16384?0>S?0:255:S>>Ghe}function Ot(S,E){return Nt((19077*S>>8)+(26149*E>>8)-14234)}function cn(S,E,z){return Nt((19077*S>>8)-(6419*E>>8)-(13320*z>>8)+8708)}function an(S,E){return Nt((19077*S>>8)+(33050*E>>8)-17685)}function Rn(S,E,z,H,ne){H[ne+0]=Ot(S,z),H[ne+1]=cn(S,E,z),H[ne+2]=an(S,E)}function br(S,E,z,H,ne){H[ne+0]=an(S,E),H[ne+1]=cn(S,E,z),H[ne+2]=Ot(S,z)}function Ir(S,E,z,H,ne){var se=cn(S,E,z);E=se<<3&224|an(S,E)>>3,H[ne+0]=248&Ot(S,z)|se>>5,H[ne+1]=E}function ps(S,E,z,H,ne){var se=240&an(S,E)|15;H[ne+0]=240&Ot(S,z)|cn(S,E,z)>>4,H[ne+1]=se}function Ii(S,E,z,H,ne){H[ne+0]=255,Rn(S,E,z,H,ne+1)}function Es(S,E,z,H,ne){br(S,E,z,H,ne),H[ne+3]=255}function gl(S,E,z,H,ne){Rn(S,E,z,H,ne),H[ne+3]=255}function Mr(S,E){return 0>S?0:S>E?E:S}function ea(S,E,z){C[S]=function(H,ne,se,ie,ue,fe,ye,Pe,ze){for(var Be=Pe+(-2&ze)*z;Pe!=Be;)E(H[ne+0],se[ie+0],ue[fe+0],ye,Pe),E(H[ne+1],se[ie+0],ue[fe+0],ye,Pe+z),ne+=2,++ie,++fe,Pe+=2*z;1&ze&&E(H[ne+0],se[ie+0],ue[fe+0],ye,Pe)}}function ky(S,E,z){return z==0?S==0?E==0?6:5:E==0?4:0:z}function no(S,E,z,H,ne){switch(S>>>30){case 3:nc(E,z,H,ne,0);break;case 2:is(E,z,H,ne);break;case 1:ta(E,z,H,ne)}}function Km(S,E){var z,H,ne=E.M,se=E.Nb,ie=S.oc,ue=S.pc+40,fe=S.oc,ye=S.pc+584,Pe=S.oc,ze=S.pc+600;for(z=0;16>z;++z)ie[ue+32*z-1]=129;for(z=0;8>z;++z)fe[ye+32*z-1]=129,Pe[ze+32*z-1]=129;for(0<ne?ie[ue-1-32]=fe[ye-1-32]=Pe[ze-1-32]=129:(s(ie,ue-32-1,127,21),s(fe,ye-32-1,127,9),s(Pe,ze-32-1,127,9)),H=0;H<S.za;++H){var Be=E.ya[E.aa+H];if(0<H){for(z=-1;16>z;++z)r(ie,ue+32*z-4,ie,ue+32*z+12,4);for(z=-1;8>z;++z)r(fe,ye+32*z-4,fe,ye+32*z+4,4),r(Pe,ze+32*z-4,Pe,ze+32*z+4,4)}var De=S.Gd,at=S.Hd+H,et=Be.ad,Oe=Be.Hc;if(0<ne&&(r(ie,ue-32,De[at].y,0,16),r(fe,ye-32,De[at].f,0,8),r(Pe,ze-32,De[at].ea,0,8)),Be.Za){var $e=ie,rt=ue-32+16;for(0<ne&&(H>=S.za-1?s($e,rt,De[at].y[15],4):r($e,rt,De[at+1].y,0,4)),z=0;4>z;z++)$e[rt+128+z]=$e[rt+256+z]=$e[rt+384+z]=$e[rt+0+z];for(z=0;16>z;++z,Oe<<=2)$e=ie,rt=ue+m8[z],xl[Be.Ob[z]]($e,rt),no(Oe,et,16*+z,$e,rt)}else if($e=ky(H,ne,Be.Ob[0]),cd[$e](ie,ue),Oe!=0)for(z=0;16>z;++z,Oe<<=2)no(Oe,et,16*+z,ie,ue+m8[z]);for(z=Be.Gc,$e=ky(H,ne,Be.Dd),oc[$e](fe,ye),oc[$e](Pe,ze),Oe=et,$e=fe,rt=ye,255&(Be=z>>0)&&(170&Be?sd(Oe,256,$e,rt):io(Oe,256,$e,rt)),Be=Pe,Oe=ze,255&(z>>=8)&&(170&z?sd(et,320,Be,Oe):io(et,320,Be,Oe)),ne<S.Ub-1&&(r(De[at].y,0,ie,ue+480,16),r(De[at].f,0,fe,ye+224,8),r(De[at].ea,0,Pe,ze+224,8)),z=8*se*S.B,De=S.sa,at=S.ta+16*H+16*se*S.R,et=S.qa,Be=S.ra+8*H+z,Oe=S.Ha,$e=S.Ia+8*H+z,z=0;16>z;++z)r(De,at+z*S.R,ie,ue+32*z,16);for(z=0;8>z;++z)r(et,Be+z*S.B,fe,ye+32*z,8),r(Oe,$e+z*S.B,Pe,ze+32*z,8)}}function yl(S,E,z,H,ne,se,ie,ue,fe){var ye=[0],Pe=[0],ze=0,Be=fe!=null?fe.kd:0,De=fe??new Do;if(S==null||12>z)return 7;De.data=S,De.w=E,De.ha=z,E=[E],z=[z],De.gb=[De.gb];e:{var at=E,et=z,Oe=De.gb;if(e(S!=null),e(et!=null),e(Oe!=null),Oe[0]=0,12<=et[0]&&!n(S,at[0],"RIFF")){if(n(S,at[0]+8,"WEBP")){Oe=3;break e}var $e=He(S,at[0]+4);if(12>$e||4294967286<$e){Oe=3;break e}if(Be&&$e>et[0]-8){Oe=7;break e}Oe[0]=$e,at[0]+=12,et[0]-=12}Oe=0}if(Oe!=0)return Oe;for($e=0<De.gb[0],z=z[0];;){e:{var rt=S;et=E,Oe=z;var ct=ye,it=Pe,Et=at=[0];if((Ct=ze=[ze])[0]=0,8>Oe[0])Oe=7;else{if(!n(rt,et[0],"VP8X")){if(He(rt,et[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var kt=He(rt,et[0]+8),Qt=1+we(rt,et[0]+12);if(2147483648<=Qt*(rt=1+we(rt,et[0]+15))){Oe=3;break e}Et!=null&&(Et[0]=kt),ct!=null&&(ct[0]=Qt),it!=null&&(it[0]=rt),et[0]+=18,Oe[0]-=18,Ct[0]=1}Oe=0}}if(ze=ze[0],at=at[0],Oe!=0)return Oe;if(et=!!(2&at),!$e&&ze)return 3;if(se!=null&&(se[0]=!!(16&at)),ie!=null&&(ie[0]=et),ue!=null&&(ue[0]=0),ie=ye[0],at=Pe[0],ze&&et&&fe==null){Oe=0;break}if(4>z){Oe=7;break}if($e&&ze||!$e&&!ze&&!n(S,E[0],"ALPH")){z=[z],De.na=[De.na],De.P=[De.P],De.Sa=[De.Sa];e:{kt=S,Oe=E,$e=z;var Ct=De.gb;ct=De.na,it=De.P,Et=De.Sa,Qt=22,e(kt!=null),e($e!=null),rt=Oe[0];var Jn=$e[0];for(e(ct!=null),e(Et!=null),ct[0]=null,it[0]=null,Et[0]=0;;){if(Oe[0]=rt,$e[0]=Jn,8>Jn){Oe=7;break e}var or=He(kt,rt+4);if(4294967286<or){Oe=3;break e}var Hn=8+or+1&-2;if(Qt+=Hn,0<Ct&&Qt>Ct){Oe=3;break e}if(!n(kt,rt,"VP8 ")||!n(kt,rt,"VP8L")){Oe=0;break e}if(Jn[0]<Hn){Oe=7;break e}n(kt,rt,"ALPH")||(ct[0]=kt,it[0]=rt+8,Et[0]=or),rt+=Hn,Jn-=Hn}}if(z=z[0],De.na=De.na[0],De.P=De.P[0],De.Sa=De.Sa[0],Oe!=0)break}z=[z],De.Ja=[De.Ja],De.xa=[De.xa];e:if(Ct=S,Oe=E,$e=z,ct=De.gb[0],it=De.Ja,Et=De.xa,kt=Oe[0],rt=!n(Ct,kt,"VP8 "),Qt=!n(Ct,kt,"VP8L"),e(Ct!=null),e($e!=null),e(it!=null),e(Et!=null),8>$e[0])Oe=7;else{if(rt||Qt){if(Ct=He(Ct,kt+4),12<=ct&&Ct>ct-12){Oe=3;break e}if(Be&&Ct>$e[0]-8){Oe=7;break e}it[0]=Ct,Oe[0]+=8,$e[0]-=8,Et[0]=Qt}else Et[0]=5<=$e[0]&&Ct[kt+0]==47&&!(Ct[kt+4]>>5),it[0]=$e[0];Oe=0}if(z=z[0],De.Ja=De.Ja[0],De.xa=De.xa[0],E=E[0],Oe!=0)break;if(4294967286<De.Ja)return 3;if(ue==null||et||(ue[0]=De.xa?2:1),ie=[ie],at=[at],De.xa){if(5>z){Oe=7;break}ue=ie,Be=at,et=se,S==null||5>z?S=0:5<=z&&S[E+0]==47&&!(S[E+4]>>5)?($e=[0],Ct=[0],ct=[0],U(it=new W,S,E,z),Jt(it,$e,Ct,ct)?(ue!=null&&(ue[0]=$e[0]),Be!=null&&(Be[0]=Ct[0]),et!=null&&(et[0]=ct[0]),S=1):S=0):S=0}else{if(10>z){Oe=7;break}ue=at,S==null||10>z||!lh(S,E+3,z-3)?S=0:(Be=S[E+0]|S[E+1]<<8|S[E+2]<<16,et=16383&(S[E+7]<<8|S[E+6]),S=16383&(S[E+9]<<8|S[E+8]),1&Be||3<(Be>>1&7)||!(Be>>4&1)||Be>>5>=De.Ja||!et||!S?S=0:(ie&&(ie[0]=et),ue&&(ue[0]=S),S=1))}if(!S||(ie=ie[0],at=at[0],ze&&(ye[0]!=ie||Pe[0]!=at)))return 3;fe!=null&&(fe[0]=De,fe.offset=E-fe.w,e(4294967286>E-fe.w),e(fe.offset==fe.ha-z));break}return Oe==0||Oe==7&&ze&&fe==null?(se!=null&&(se[0]|=De.na!=null&&0<De.na.length),H!=null&&(H[0]=ie),ne!=null&&(ne[0]=at),0):Oe}function Xm(S,E,z){var H=E.width,ne=E.height,se=0,ie=0,ue=H,fe=ne;if(E.Da=S!=null&&0<S.Da,E.Da&&(ue=S.cd,fe=S.bd,se=S.v,ie=S.j,11>z||(se&=-2,ie&=-2),0>se||0>ie||0>=ue||0>=fe||se+ue>H||ie+fe>ne))return 0;if(E.v=se,E.j=ie,E.va=se+ue,E.o=ie+fe,E.U=ue,E.T=fe,E.da=S!=null&&0<S.da,E.da){if(!ht(ue,fe,z=[S.ib],se=[S.hb]))return 0;E.ib=z[0],E.hb=se[0]}return E.ob=S!=null&&S.ob,E.Kb=S==null||!S.Sd,E.da&&(E.ob=E.ib<3*H/4&&E.hb<3*ne/4,E.Kb=0),1}function eu(S){if(S==null)return 2;if(11>S.S){var E=S.f.RGBA;E.fb+=(S.height-1)*E.A,E.A=-E.A}else E=S.f.kb,S=S.height,E.O+=(S-1)*E.fa,E.fa=-E.fa,E.N+=(S-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(S-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(S-1)*E.lb,E.lb=-E.lb);return 0}function gh(S,E,z,H){if(H==null||0>=S||0>=E)return 2;if(z!=null){if(z.Da){var ne=z.cd,se=z.bd,ie=-2&z.v,ue=-2&z.j;if(0>ie||0>ue||0>=ne||0>=se||ie+ne>S||ue+se>E)return 2;S=ne,E=se}if(z.da){if(!ht(S,E,ne=[z.ib],se=[z.hb]))return 2;S=ne[0],E=se[0]}}H.width=S,H.height=E;e:{var fe=H.width,ye=H.height;if(S=H.S,0>=fe||0>=ye||!(S>=Cy&&13>S))S=2;else{if(0>=H.Rd&&H.sd==null){ie=se=ne=E=0;var Pe=(ue=fe*g8[S])*ye;if(11>S||(se=(ye+1)/2*(E=(fe+1)/2),S==12&&(ie=(ne=fe)*ye)),(ye=i(Pe+2*se+ie))==null){S=1;break e}H.sd=ye,11>S?((fe=H.f.RGBA).eb=ye,fe.fb=0,fe.A=ue,fe.size=Pe):((fe=H.f.kb).y=ye,fe.O=0,fe.fa=ue,fe.Fd=Pe,fe.f=ye,fe.N=0+Pe,fe.Ab=E,fe.Cd=se,fe.ea=ye,fe.W=0+Pe+se,fe.Db=E,fe.Ed=se,S==12&&(fe.F=ye,fe.J=0+Pe+2*se),fe.Tc=ie,fe.lb=ne)}if(E=1,ne=H.S,se=H.width,ie=H.height,ne>=Cy&&13>ne)if(11>ne)S=H.f.RGBA,E&=(ue=Math.abs(S.A))*(ie-1)+se<=S.size,E&=ue>=se*g8[ne],E&=S.eb!=null;else{S=H.f.kb,ue=(se+1)/2,Pe=(ie+1)/2,fe=Math.abs(S.fa),ye=Math.abs(S.Ab);var ze=Math.abs(S.Db),Be=Math.abs(S.lb),De=Be*(ie-1)+se;E&=fe*(ie-1)+se<=S.Fd,E&=ye*(Pe-1)+ue<=S.Cd,E=(E&=ze*(Pe-1)+ue<=S.Ed)&fe>=se&ye>=ue&ze>=ue,E&=S.y!=null,E&=S.f!=null,E&=S.ea!=null,ne==12&&(E&=Be>=se,E&=De<=S.Tc,E&=S.F!=null)}else E=0;S=E?0:2}}return S!=0||z!=null&&z.fd&&(S=eu(H)),S}var ms=64,Bf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ro=24,tu=32,Ym=8,Ai=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(S){return S},C.Predictor2=function(S,E,z){return E[z+0]},C.Predictor3=function(S,E,z){return E[z+1]},C.Predictor4=function(S,E,z){return E[z-1]},C.Predictor5=function(S,E,z){return xe(xe(S,E[z+1]),E[z+0])},C.Predictor6=function(S,E,z){return xe(S,E[z-1])},C.Predictor7=function(S,E,z){return xe(S,E[z+0])},C.Predictor8=function(S,E,z){return xe(E[z-1],E[z+0])},C.Predictor9=function(S,E,z){return xe(E[z+0],E[z+1])},C.Predictor10=function(S,E,z){return xe(xe(S,E[z-1]),xe(E[z+0],E[z+1]))},C.Predictor11=function(S,E,z){var H=E[z+0];return 0>=Ge(H>>24&255,S>>24&255,(E=E[z-1])>>24&255)+Ge(H>>16&255,S>>16&255,E>>16&255)+Ge(H>>8&255,S>>8&255,E>>8&255)+Ge(255&H,255&S,255&E)?H:S},C.Predictor12=function(S,E,z){var H=E[z+0];return(je((S>>24&255)+(H>>24&255)-((E=E[z-1])>>24&255))<<24|je((S>>16&255)+(H>>16&255)-(E>>16&255))<<16|je((S>>8&255)+(H>>8&255)-(E>>8&255))<<8|je((255&S)+(255&H)-(255&E)))>>>0},C.Predictor13=function(S,E,z){var H=E[z-1];return(qe((S=xe(S,E[z+0]))>>24&255,H>>24&255)<<24|qe(S>>16&255,H>>16&255)<<16|qe(S>>8&255,H>>8&255)<<8|qe(S>>0&255,H>>0&255))>>>0};var g1=C.PredictorAdd0;C.PredictorAdd1=Ue,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var so=C.PredictorAdd2;zt("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var Sy,oi=C.ColorIndexInverseTransform,Wf=C.MapARGB,Lo=C.VP8LColorIndexInverseTransformAlpha,yh=C.MapAlpha,nu=C.VP8LPredictorsAdd=[];nu.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var ru,li,ci,vl,wa,Ro,rd,nc,is,sd,ta,io,Uf,Zm,Jm,Ei,rc,id,sc,Vf,ad,od,su,Mo,ui,rr,sr,as,ir=i(511),ic=i(2041),Hf=i(225),ac=i(767),Ny=0,qf=ic,ld=Hf,_a=ac,ao=ir,Cy=0,Qm=1,y1=2,eg=3,tg=4,Ty=5,IS=6,Iy=7,Ay=8,Ey=9,g=10,w=[2,3,7],I=[3,3,11],M=[280,256,256,256,40],X=[0,1,1,1,0],ae=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ke=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Fe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ke=8,lt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Tt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xt=null,_n=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],na=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ps=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ka=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Gf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eO=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cd=[],xl=[],oc=[],tO=1,v1=2,ar=[],ra=[];Je("UpsampleRgbLinePair",Rn,3),Je("UpsampleBgrLinePair",br,3),Je("UpsampleRgbaLinePair",gl,4),Je("UpsampleBgraLinePair",Es,4),Je("UpsampleArgbLinePair",Ii,4),Je("UpsampleRgba4444LinePair",ps,2),Je("UpsampleRgb565LinePair",Ir,2);var nO=C.UpsampleRgbLinePair,rO=C.UpsampleBgrLinePair,AS=C.UpsampleRgbaLinePair,Py=C.UpsampleBgraLinePair,x1=C.UpsampleArgbLinePair,ES=C.UpsampleRgba4444LinePair,qhe=C.UpsampleRgb565LinePair,PS=16,OS=1<<PS-1,b1=-227,sO=482,Ghe=6,p8=0,Khe=i(256),Xhe=i(256),Yhe=i(256),Zhe=i(256),Jhe=i(sO-b1),Qhe=i(sO-b1);ea("YuvToRgbRow",Rn,3),ea("YuvToBgrRow",br,3),ea("YuvToRgbaRow",gl,4),ea("YuvToBgraRow",Es,4),ea("YuvToArgbRow",Ii,4),ea("YuvToRgba4444Row",ps,2),ea("YuvToRgb565Row",Ir,2);var m8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],jS=[0,2,8],efe=[8,7,6,4,4,2,2,2,1,1,1,1],tfe=1;this.WebPDecodeRGBA=function(S,E,z,H,ne){var se=Qm,ie=new mh,ue=new Eo;ie.ba=ue,ue.S=se,ue.width=[ue.width],ue.height=[ue.height];var fe=ue.width,ye=ue.height,Pe=new Kl;if(Pe==null||S==null)var ze=2;else e(Pe!=null),ze=yl(S,E,z,Pe.width,Pe.height,Pe.Pd,Pe.Qd,Pe.format,null);if(ze!=0?fe=0:(fe!=null&&(fe[0]=Pe.width[0]),ye!=null&&(ye[0]=Pe.height[0]),fe=1),fe){ue.width=ue.width[0],ue.height=ue.height[0],H!=null&&(H[0]=ue.width),ne!=null&&(ne[0]=ue.height);e:{if(H=new Ql,(ne=new Do).data=S,ne.w=E,ne.ha=z,ne.kd=1,E=[0],e(ne!=null),((S=yl(ne.data,ne.w,ne.ha,null,null,null,E,null,ne))==0||S==7)&&E[0]&&(S=4),(E=S)==0){if(e(ie!=null),H.data=ne.data,H.w=ne.w+ne.offset,H.ha=ne.ha-ne.offset,H.put=Xl,H.ac=ii,H.bc=Po,H.ma=ie,ne.xa){if((S=Ja())==null){ie=1;break e}if(function(Be,De){var at=[0],et=[0],Oe=[0];t:for(;;){if(Be==null)return 0;if(De==null)return Be.a=2,0;if(Be.l=De,Be.a=0,U(Be.m,De.data,De.w,De.ha),!Jt(Be.m,at,et,Oe)){Be.a=3;break t}if(Be.xb=v1,De.width=at[0],De.height=et[0],!Jl(at[0],et[0],1,Be,null))break t;return 1}return e(Be.a!=0),0}(S,H)){if(H=(E=gh(H.width,H.height,ie.Oa,ie.ba))==0){t:{H=S;n:for(;;){if(H==null){H=0;break t}if(e(H.s.yc!=null),e(H.s.Ya!=null),e(0<H.s.Wb),e((z=H.l)!=null),e((ne=z.ma)!=null),H.xb!=0){if(H.ca=ne.ba,H.tb=ne.tb,e(H.ca!=null),!Xm(ne.Oa,z,eg)){H.a=2;break n}if(!rh(H,z.width)||z.da)break n;if((z.da||Wn(H.ca.S))&&Le(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&Le()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!Qe(H.s.vb,H.s.Wa.Xa)){H.a=1;break n}H.xb=0}if(!jo(H,H.V,H.Ba,H.c,H.i,z.o,nh))break n;ne.Dc=H.Ma,H=1;break t}e(H.a!=0),H=0}H=!H}H&&(E=S.a)}else E=S.a}else{if((S=new Ln)==null){ie=1;break e}if(S.Fa=ne.na,S.P=ne.P,S.qc=ne.Sa,Kc(S,H)){if((E=gh(H.width,H.height,ie.Oa,ie.ba))==0){if(S.Aa=0,z=ie.Oa,e((ne=S)!=null),z!=null){if(0<(fe=0>(fe=z.Md)?0:100<fe?255:255*fe/100)){for(ye=Pe=0;4>ye;++ye)12>(ze=ne.pb[ye]).lc&&(ze.ia=fe*efe[0>ze.lc?0:ze.lc]>>3),Pe|=ze.ia;Pe&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=z.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}hn(S,H)||(E=S.a)}}else E=S.a}E==0&&ie.Oa!=null&&ie.Oa.fd&&(E=eu(ie.ba))}ie=E}se=ie!=0?null:11>se?ue.f.RGBA.eb:ue.f.kb.y}else se=null;return se};var g8=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(C,P){for(var $="",j=0;j<4;j++)$+=String.fromCharCode(C[P++]);return $}function u(C,P){return(C[P+0]<<0|C[P+1]<<8|C[P+2]<<16)>>>0}function d(C,P){return(C[P+0]<<0|C[P+1]<<8|C[P+2]<<16|C[P+3]<<24)>>>0}new l;var h=[0],f=[0],m=[],y=new l,v=t,x=function(C,P){var $={},j=0,O=!1,F=0,B=0;if($.frames=[],!function(Y,Q,J,te){for(var me=0;me<te;me++)if(Y[Q+me]!=J.charCodeAt(me))return!0;return!1}(C,P,"RIFF",4)){var Z,V;for(d(C,P+=4),P+=8;P<C.length;){var G=c(C,P),U=d(C,P+=4);P+=4;var K=U+(1&U);switch(G){case"VP8 ":case"VP8L":$.frames[j]===void 0&&($.frames[j]={}),(W=$.frames[j]).src_off=O?B:P-8,W.src_size=F+U+8,j++,O&&(O=!1,F=0,B=0);break;case"VP8X":(W=$.header={}).feature_flags=C[P];var ee=P+4;W.canvas_width=1+u(C,ee),ee+=3,W.canvas_height=1+u(C,ee),ee+=3;break;case"ALPH":O=!0,F=K+8,B=P-8;break;case"ANIM":(W=$.header).bgcolor=d(C,P),ee=P+4,W.loop_count=(Z=C)[(V=ee)+0]<<0|Z[V+1]<<8,ee+=2;break;case"ANMF":var oe,W;(W=$.frames[j]={}).offset_x=2*u(C,P),P+=3,W.offset_y=2*u(C,P),P+=3,W.width=1+u(C,P),P+=3,W.height=1+u(C,P),P+=3,W.duration=u(C,P),P+=3,oe=C[P++],W.dispose=1&oe,W.blend=oe>>1&1}G!="ANMF"&&(P+=K)}return $}}(v,0);x.response=v,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,_=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],f=[b.canvas_width];for(var k=0;k<_.length&&_[k].blend!=0;k++);}var N=_[0],A=y.WebPDecodeRGBA(v,N.src_off,N.src_size,f,h);N.rgba=A,N.imgwidth=f[0],N.imgheight=h[0];for(var T=0;T<f[0]*h[0]*4;T++)m[T]=A[T];return this.width=f,this.height=h,this.data=m,this}(function(t){var e=function(){return typeof XD=="function"},n=function(h,f,m,y){var v=4,x=a;switch(y){case t.image_compression.FAST:v=1,x=i;break;case t.image_compression.MEDIUM:v=6,x=o;break;case t.image_compression.SLOW:v=9,x=l}h=r(h,f,m,x);var b=XD(h,{level:v});return t.__addimage__.arrayBufferToBinaryString(b)},r=function(h,f,m,y){for(var v,x,b,_=h.length/f,k=new Uint8Array(h.length+_),N=u(),A=0;A<_;A+=1){if(b=A*f,v=h.subarray(b,b+f),y)k.set(y(v,m,x),b+A);else{for(var T,C=N.length,P=[];T<C;T+=1)P[T]=N[T](v,m,x);var $=d(P.concat());k.set(P[$],b+A)}x=v}return k},s=function(h){var f=Array.apply([],h);return f.unshift(0),f},i=function(h,f){var m,y=[],v=h.length;y[0]=1;for(var x=0;x<v;x+=1)m=h[x-f]||0,y[x+1]=h[x]-m+256&255;return y},a=function(h,f,m){var y,v=[],x=h.length;v[0]=2;for(var b=0;b<x;b+=1)y=m&&m[b]||0,v[b+1]=h[b]-y+256&255;return v},o=function(h,f,m){var y,v,x=[],b=h.length;x[0]=3;for(var _=0;_<b;_+=1)y=h[_-f]||0,v=m&&m[_]||0,x[_+1]=h[_]+256-(y+v>>>1)&255;return x},l=function(h,f,m){var y,v,x,b,_=[],k=h.length;_[0]=4;for(var N=0;N<k;N+=1)y=h[N-f]||0,v=m&&m[N]||0,x=m&&m[N-f]||0,b=c(y,v,x),_[N+1]=h[N]-b+256&255;return _},c=function(h,f,m){if(h===f&&f===m)return h;var y=Math.abs(f-m),v=Math.abs(h-m),x=Math.abs(h+f-m-m);return y<=v&&y<=x?h:v<=x?f:m},u=function(){return[s,i,a,o,l]},d=function(h){var f=h.map(function(m){return m.reduce(function(y,v){return y+Math.abs(v)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(h,f,m,y){var v,x,b,_,k,N,A,T,C,P,$,j,O,F,B,Z=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new opt(h)).imgData,x=b.bits,v=b.colorSpace,k=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){C=(T=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,$=new Uint8Array(C*b.colors),P=new Uint8Array(C);var G,U=b.pixelBitlength-b.bits;for(F=0,B=0;F<C;F++){for(O=T[F],G=0;G<U;)$[B++]=O>>>G&255,G+=b.bits;P[F]=O>>>G&255}}if(b.bits===16){C=(T=new Uint32Array(b.decodePixels().buffer)).length,$=new Uint8Array(C*(32/b.pixelBitlength)*b.colors),P=new Uint8Array(C*(32/b.pixelBitlength)),j=b.colors>1,F=0,B=0;for(var K=0;F<C;)O=T[F++],$[B++]=O>>>0&255,j&&($[B++]=O>>>16&255,O=T[F++],$[B++]=O>>>0&255),P[K++]=O>>>16&255;x=8}y!==t.image_compression.NONE&&e()?(h=n($,b.width*b.colors,b.colors,y),A=n(P,b.width,1,y)):(h=$,A=P,Z=void 0)}if(b.colorType===3&&(v=this.color_spaces.INDEXED,N=b.palette,b.transparency.indexed)){var ee=b.transparency.indexed,oe=0;for(F=0,C=ee.length;F<C;++F)oe+=ee[F];if((oe/=255)===C-1&&ee.indexOf(0)!==-1)_=[ee.indexOf(0)];else if(oe!==C){for(T=b.decodePixels(),P=new Uint8Array(T.length),F=0,C=T.length;F<C;F++)P[F]=ee[T[F]];A=n(P,b.width,1)}}var W=function(Y){var Q;switch(Y){case t.image_compression.FAST:Q=11;break;case t.image_compression.MEDIUM:Q=13;break;case t.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(y);return Z===this.decode.FLATE_DECODE&&(V="/Predictor "+W+" "),V+="/Colors "+k+" /BitsPerComponent "+x+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:m,data:h,index:f,filter:Z,decodeParameters:V,transparency:_,palette:N,sMask:A,predictor:W,width:b.width,height:b.height,bitsPerComponent:x,colorSpace:v}}}})(Yt.API),function(t){t.processGIF89A=function(e,n,r,s){var i=new lpt(e),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new h4(100).encode(c,100);return t.processJPEG.call(this,u,n,r,s)},t.processGIF87A=t.processGIF89A}(Yt.API),cu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){kr.log("bit decode error:"+n)}},cu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}n!==0&&(this.pos+=4-n)}},cu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},cu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},cu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=t}},cu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},cu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},cu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},cu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var i=new cu(e,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new h4(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(Yt.API),kK.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var i=new kK(e),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new h4(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(Yt.API),Yt.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];i[o++]=u,i[o++]=d,i[o++]=h,a[l++]=f}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Yt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qy=Yt.API,cC=Qy.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,m=0,y=o[0]||l,v=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?v.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(h=d&&fr(c[r])==="object"&&!isNaN(parseInt(c[r][m],10))?c[r][m]/u:0,v.push((o[r]||y)/l+h)),m=r;return v},xK=Qy.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Qy.processArabic&&(t=Qy.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:cC.apply(this,arguments).reduce(function(i,a){return i+a},0)},bK=function(t,e,n,r){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<n;)o+=e[i],i++;s.push(t.slice(0,i));var l=i;for(o=0;i!==a;)o+e[i]>r&&(s.push(t.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},wK=function(t,e,n){n||(n={});var r,s,i,a,o,l,c,u=[],d=[u],h=n.textIndent||0,f=0,m=0,y=t.split(" "),v=cC.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),b=[];y.map(function(k){(k=k.split(/\s*\n/)).length>1?b=b.concat(k.map(function(N,A){return(A&&N.length?`
`:"")+N})):b.push(k[0])}),y=b,l=xK.apply(this,[x,n])}for(i=0,a=y.length;i<a;i++){var _=0;if(r=y[i],l&&r[0]==`
`&&(r=r.substr(1),_=1),h+f+(m=(s=cC.apply(this,[r,n])).reduce(function(k,N){return k+N},0))>e||_){if(m>e){for(o=bK.apply(this,[r,s,e-(h+f),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);m=s.slice(r.length-(u[0]?u[0].length:0)).reduce(function(k,N){return k+N},0)}else u=[r];d.push(u),h=m+l,f=v}else u.push(r),h+=f+m,f=v}return c=l?function(k,N){return(N?x:"")+k.join(" ")}:function(k){return k.join(" ")},d.map(c)},Qy.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(wK.apply(this,[r[o],a,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},a=t.__fontmetrics__.compress=function(d){var h,f,m,y,v=["{"];for(var x in d){if(h=d[x],isNaN(parseInt(x,10))?f="'"+x+"'":(x=parseInt(x,10),f=(f=i(x).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(m=i(h).slice(3),y="-"):(m=i(h).slice(2),y=""),m=y+m.slice(0,-1)+r[m.slice(-1)];else{if(fr(h)!=="object")throw new Error("Don't know what to do with value type "+fr(h)+".");m=a(h)}v.push(f+m)}return v.push("}"),v.join("")},o=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,m,y,v={},x=1,b=v,_=[],k="",N="",A=d.length-1,T=1;T<A;T+=1)(y=d[T])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(_.push([b,m]),b={},m=void 0):y=="}"?((f=_.pop())[0][f[1]]=b,m=void 0,b=f[0]):y=="-"?x=-1:m===void 0?n.hasOwnProperty(y)?(k+=n[y],m=parseInt(k,16)*x,x=1,k=""):k+=y:n.hasOwnProperty(y)?(N+=n[y],b[m]=parseInt(N,16)*x,x=1,m=void 0,N=""):N+=y;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var m=c.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(Yt.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Gw(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(Yt),function(t){function e(){return(tn.canvg?Promise.resolve(tn.canvg):Jh(()=>import("./index.es-De--NUvB.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Yt.API.addSvgAsImage=function(n,r,s,i,a,o,l,c){if(isNaN(r)||isNaN(s))throw kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(m){return m.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,s,i,a,l,c)})}}(),Yt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},Yt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,d=0;function h(m,y){var v,x=!1;for(v=0;v<m.length;v+=1)m[v]===y&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(d=0;d<f;d+=1)n[o[d]].value=n[o[d]].defaultValue,n[o[d]].explicitSet=!1}if(fr(t)==="object"){for(s in t)if(i=t[s],h(o,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&h(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(r=!1);r===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,y=[];for(m in n)n[m].explicitSet===!0&&(n[m].type==="name"?y.push("/"+m+" /"+n[m].value):y.push("/"+m+" "+n[m].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Yt.API),function(t){var e=t.API,n=e.pdfEscape16=function(i,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=i.length;d<h;++d){if(o=a.metadata.characterToGlyph(i.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},r=function(i){var a,o,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(o=Object.keys(i).sort(function(f,m){return f-m})).length;d<h;d++)a=o[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(c=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var y=c();u({data:f,addLength1:!0,objectId:y}),l("endobj");var v=c();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+uv(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+uv(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+uv(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var y=c();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var v=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+uv(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+uv(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",l=i.x,c=i.y,u=i.options||{},d=i.mutex||{},h=d.pdfEscape,f=d.activeFontKey,m=d.fonts,y=f,v="",x=0,b="",_=m[y].encoding;if(m[y].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:d};for(b=o,y=f,Array.isArray(o)&&(b=o[0]),x=0;x<b.length;x+=1)m[y].metadata.hasOwnProperty("cmap")&&(a=m[y].metadata.cmap.unicode.codeMap[b[x].charCodeAt(0)]),a||b[x].charCodeAt(0)<256&&m[y].metadata.hasOwnProperty("Unicode")?v+=b[x]:v+="";var k="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?k=h(v,y).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(k=n(v,m[y])),d.isHex=!0,{text:k,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],l={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);i.text=o}else i.text=s(Object.assign({},l,{text:a})).text}])}(Yt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Yt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,a,o,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,_=0;this.__bidiEngine__={};var k=function(j){var O=j.charCodeAt(),F=O>>8,B=y[F];return B!==void 0?d[256*B+(255&O)]:F===252||F===253?"AL":x.test(F)?"L":F===8?"R":"N"},N=function(j){for(var O,F=0;F<j.length;F++){if((O=k(j.charAt(F)))==="L")return!1;if(O==="R")return!0}return!1},A=function(j,O,F,B){var Z,V,G,U,K=O[B];switch(K){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(K="AN");break;case"AL":b=!0,K="R";break;case"WS":K="N";break;case"CS":B<1||B+1>=O.length||(Z=F[B-1])!=="EN"&&Z!=="AN"||(V=O[B+1])!=="EN"&&V!=="AN"?K="N":b&&(V="AN"),K=V===Z?V:"N";break;case"ES":K=(Z=B>0?F[B-1]:"B")==="EN"&&B+1<O.length&&O[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&F[B-1]==="EN"){K="EN";break}if(b){K="N";break}for(G=B+1,U=O.length;G<U&&O[G]==="ET";)G++;K=G<U&&O[G]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(U=O.length,G=B+1;G<U&&O[G]==="NSM";)G++;if(G<U){var ee=j[B],oe=ee>=1425&&ee<=2303||ee===64286;if(Z=O[G],oe&&(Z==="R"||Z==="AL")){K="R";break}}}K=B<1||(Z=O[B-1])==="B"?"N":F[B-1];break;case"B":b=!1,s=!0,K=_;break;case"S":i=!0,K="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":K="N"}return K},T=function(j,O,F){var B=j.split("");return F&&C(B,F,{hiLevel:_}),B.reverse(),O&&O.reverse(),B.join("")},C=function(j,O,F){var B,Z,V,G,U,K=-1,ee=j.length,oe=0,W=[],Y=_?f:h,Q=[];for(b=!1,s=!1,i=!1,Z=0;Z<ee;Z++)Q[Z]=k(j[Z]);for(V=0;V<ee;V++){if(U=oe,W[V]=A(j,Q,W,V),B=240&(oe=Y[U][m[W[V]]]),oe&=15,O[V]=G=Y[oe][5],B>0)if(B===16){for(Z=K;Z<V;Z++)O[Z]=1;K=-1}else K=-1;if(Y[oe][6])K===-1&&(K=V);else if(K>-1){for(Z=K;Z<V;Z++)O[Z]=G;K=-1}Q[V]==="B"&&(O[V]=0),F.hiLevel|=G}i&&function(J,te,me){for(var ge=0;ge<me;ge++)if(J[ge]==="S"){te[ge]=_;for(var ce=ge-1;ce>=0&&J[ce]==="WS";ce--)te[ce]=_}}(Q,O,ee)},P=function(j,O,F,B,Z){if(!(Z.hiLevel<j)){if(j===1&&_===1&&!s)return O.reverse(),void(F&&F.reverse());for(var V,G,U,K,ee=O.length,oe=0;oe<ee;){if(B[oe]>=j){for(U=oe+1;U<ee&&B[U]>=j;)U++;for(K=oe,G=U-1;K<G;K++,G--)V=O[K],O[K]=O[G],O[G]=V,F&&(V=F[K],F[K]=F[G],F[G]=V);oe=U}oe++}}},$=function(j,O,F){var B=j.split(""),Z={hiLevel:_};return F||(F=[]),C(B,F,Z),function(V,G,U){if(U.hiLevel!==0&&u)for(var K,ee=0;ee<V.length;ee++)G[ee]===1&&(K=v.indexOf(V[ee]))>=0&&(V[ee]=v[K+1])}(B,F,Z),P(2,B,O,F,Z),P(1,B,O,F,Z),B.join("")};return this.__bidiEngine__.doBidiReorder=function(j,O,F){if(function(Z,V){if(V)for(var G=0;G<Z.length;G++)V[G]=G;o===void 0&&(o=N(Z)),c===void 0&&(c=N(Z))}(j,O),a||!l||c)if(a&&l&&o^c)_=o?1:0,j=T(j,O,F);else if(!a&&l&&c)_=o?1:0,j=$(j,O,F),j=T(j,O);else if(!a||o||l||c){if(a&&!l&&o^c)j=T(j,O),o?(_=0,j=$(j,O,F)):(_=1,j=$(j,O,F),j=T(j,O));else if(a&&o&&!l&&c)_=1,j=$(j,O,F),j=T(j,O);else if(!a&&!l&&o^c){var B=u;o?(_=1,j=$(j,O,F),_=0,u=!1,j=$(j,O,F),u=B):(_=0,j=$(j,O,F),j=T(j,O),_=1,u=!1,j=$(j,O,F),u=B,j=T(j,O))}}else _=0,j=$(j,O,F);else _=o?1:0,j=$(j,O,F);return j},this.__bidiEngine__.setOptions=function(j){j&&(a=j.isInputVisual,l=j.isOutputVisual,o=j.isInputRtl,c=j.isOutputRtl,u=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,i=(r.x,r.y,r.options||{}),a=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([n.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([n.doBidiReorder(s[o])]);r.text=a}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(Yt),Yt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new gm(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new kpt(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new cpt(this.contents),this.head=new dpt(this),this.name=new gpt(this),this.cmap=new Vhe(this),this.toUnicode={},this.hhea=new hpt(this),this.maxp=new ypt(this),this.hmtx=new vpt(this),this.post=new ppt(this),this.os2=new fpt(this),this.loca=new _pt(this),this.glyf=new xpt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return a*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ku,gm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,a,o,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*a+256*o+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t}(),cpt=function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,a,o,l,c,u,d,h,f,m,y;for(y in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),a=Math.floor(d/l),u=16*f-d,(s=new gm).writeInt(this.scalarType),s.writeShort(f),s.writeShort(d),s.writeShort(a),s.writeShort(u),i=16*f,c=s.pos+i,o=null,m=[],n)for(h=n[y],s.writeString(y),s.writeInt(t(h)),s.writeInt(c),s.writeInt(h.length),m=m.concat(h),y==="head"&&(o=c),c+=h.length;c%4;)m.push(0),c++;return s.write(m),r=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,a;for(n=Hhe.call(n);n.length%4;)n.push(0);for(i=new gm(n),s=0,r=0,a=n.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),upt={}.hasOwnProperty,eh=function(t,e){for(var n in e)upt.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ku=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var dpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new gm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),SK=function(){function t(e,n){var r,s,i,a,o,l,c,u,d,h,f,m,y,v,x,b,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,i=function(){var k,N;for(N=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)N.push(e.readUInt16());return N}(),e.pos+=2,y=function(){var k,N;for(N=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)N.push(e.readUInt16());return N}(),c=function(){var k,N;for(N=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)N.push(e.readUInt16());return N}(),u=function(){var k,N;for(N=[],l=k=0;0<=h?k<h:k>h;l=0<=h?++k:--k)N.push(e.readUInt16());return N}(),s=(this.length-e.pos+this.offset)/2,o=function(){var k,N;for(N=[],l=k=0;0<=s?k<s:k>s;l=0<=s?++k:--k)N.push(e.readUInt16());return N}(),l=x=0,_=i.length;x<_;l=++x)for(v=i[l],r=b=m=y[l];m<=v?b<=v:b>=v;r=m<=v?++b:--b)u[l]===0?a=r+c[l]:(a=o[u[l]/2+(r-m)-(h-l)]||0)!==0&&(a+=c[l]),this.codeMap[r]=65535&a}e.pos=d}return t.encode=function(e,n){var r,s,i,a,o,l,c,u,d,h,f,m,y,v,x,b,_,k,N,A,T,C,P,$,j,O,F,B,Z,V,G,U,K,ee,oe,W,Y,Q,J,te,me,ge,ce,Ce,_e,we;switch(B=new gm,a=Object.keys(e).sort(function(He,Qe){return He-Qe}),n){case"macroman":for(y=0,v=function(){var He=[];for(m=0;m<256;++m)He.push(0);return He}(),b={0:0},i={},Z=0,K=a.length;Z<K;Z++)b[ce=e[s=a[Z]]]==null&&(b[ce]=++y),i[s]={old:e[s],new:b[e[s]]},v[s]=b[e[s]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(v),{charMap:i,subtable:B.data,maxGlyphID:y+1};case"unicode":for(O=[],d=[],_=0,b={},r={},x=c=null,V=0,ee=a.length;V<ee;V++)b[N=e[s=a[V]]]==null&&(b[N]=++_),r[s]={old:N,new:b[N]},o=b[N]-s,x!=null&&o===c||(x&&d.push(x),O.push(s),c=o),x=s;for(x&&d.push(x),d.push(65535),O.push(65535),$=2*(P=O.length),C=2*Math.pow(Math.log(P)/Math.LN2,2),h=Math.log(C/2)/Math.LN2,T=2*P-C,l=[],A=[],f=[],m=G=0,oe=O.length;G<oe;m=++G){if(j=O[m],u=d[m],j===65535){l.push(0),A.push(0);break}if(j-(F=r[j].new)>=32768)for(l.push(0),A.push(2*(f.length+P-m)),s=U=j;j<=u?U<=u:U>=u;s=j<=u?++U:--U)f.push(r[s].new);else l.push(F-j),A.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*P+2*f.length),B.writeUInt16(0),B.writeUInt16($),B.writeUInt16(C),B.writeUInt16(h),B.writeUInt16(T),me=0,W=d.length;me<W;me++)s=d[me],B.writeUInt16(s);for(B.writeUInt16(0),ge=0,Y=O.length;ge<Y;ge++)s=O[ge],B.writeUInt16(s);for(Ce=0,Q=l.length;Ce<Q;Ce++)o=l[Ce],B.writeUInt16(o);for(_e=0,J=A.length;_e<J;_e++)k=A[_e],B.writeUInt16(k);for(we=0,te=f.length;we<te;we++)y=f[we],B.writeUInt16(y);return{charMap:r,subtable:B.data,maxGlyphID:_+1}}},t}(),Vhe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new SK(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,i;return r==null&&(r="macroman"),s=SK.encode(n,r),(i=new gm).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),hpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),fpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),ppt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(s=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(n.readUInt32());return c}).call(this)}},e}(),mpt=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},gpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,i,a,o,l,c,u,d,h,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},a=d=0,h=s.length;d<h;a=++d)i=s[a],n.pos=i.offset,u=n.readString(i.length),o=new mpt(u,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ypt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),vpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,i,a,o,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(n.readInt16());return d}(),this.widths=(function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)a=h[u],f.push(a.advance);return f}).call(this),s=this.widths[this.widths.length-1],c=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Hhe=[].slice,xpt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,i,a,o,l,c,u,d,h;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,s=a.indexOf(n),(i=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,o=(l=new gm(r.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=o===-1?new wpt(l,u,h,c,d):new bpt(l,o,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,s){var i,a,o,l,c;for(o=[],a=[],l=0,c=r.length;l<c;l++)i=n[r[l]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),bpt=function(){function t(e,n,r,s,i,a){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),wpt=function(){function t(e,n,r,s,i){var a,o;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new gm(Hhe.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),_pt=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,Ku),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(n.readUInt32());return a}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<r.length&&r[a]==o){++a,s[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),d=0;d<s.length;++d)u[4*d+3]=255&s[d],u[4*d+2]=(65280&s[d])>>8,u[4*d+1]=(16711680&s[d])>>16,u[4*d]=(4278190080&s[d])>>24;return u},e}(),kpt=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,a,o,l,c,u,d,h,f,m,y,v,x;for(s in r=Vhe.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},x=r.charMap)f[(l=x[s]).old]=l.new;for(m in h=r.maxGlyphID,a)m in f||(f[m]=h++);return u=function(b){var _,k;for(_ in k={},b)k[b[_]]=_;return k}(f),d=Object.keys(u).sort(function(b,_){return b-_}),y=function(){var b,_,k;for(k=[],b=0,_=d.length;b<_;b++)o=d[b],k.push(u[o]);return k}(),i=this.font.glyf.encode(a,y,f),c=this.font.loca.encode(i.offsets,y),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();Yt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,a;if(Array.isArray(n))return"["+function(){var o,l,c;for(c=[],o=0,l=n.length;o<l;o++)r=n[o],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)a=n[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+n},e}();const Spt=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:tpt,AcroFormAppearance:Lt,AcroFormButton:mi,AcroFormCheckBox:Yw,AcroFormChoiceField:i0,AcroFormComboBox:o0,AcroFormEditBox:Kw,AcroFormListBox:a0,AcroFormPasswordField:Zw,AcroFormPushButton:Xw,AcroFormRadioButton:l0,AcroFormTextField:Yp,GState:f_,ShadingPattern:vp,TilingPattern:qg,default:Yt,jsPDF:Yt},Symbol.toStringTag,{value:"Module"}));var Npt={exports:{}};const Cpt=cI(Spt);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,s){t.exports=s(function(){try{return Cpt}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Ac<"u"?Ac:typeof window<"u"?window:typeof self<"u"?self:Ac,function(n){return function(){var r={172:function(o,l){var c=this&&this.__extends||function(){var h=function(f,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(y[x]=v[x])},h(f,m)};return function(f,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(f,m);function y(){this.constructor=f}f.prototype=m===null?Object.create(m):(y.prototype=m.prototype,new y)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function h(f,m,y){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=y,this.doc=f.getDocument()}return h}();l.HookData=u;var d=function(h){c(f,h);function f(m,y,v,x,b,_){var k=h.call(this,m,y,_)||this;return k.cell=v,k.row=x,k.column=b,k.section=x.section,k}return f}(u);l.CellHookData=d},340:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),d=c(136),h=c(744),f=c(776),m=c(664),y=c(972);function v(x){x.API.autoTable=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];var k;b.length===1?k=b[0]:(console.error("Use of deprecated autoTable initiation"),k=b[2]||{},k.columns=b[0],k.body=b[1]);var N=(0,f.parseInput)(this,k),A=(0,y.createTable)(this,N);return(0,m.drawTable)(this,A),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(b,_,k,N){(0,d.default)(b,_,k,N,this)},x.API.autoTableSetDefaults=function(b){return h.DocHandler.setDefaults(b,this),this},x.autoTableSetDefaults=function(b,_){h.DocHandler.setDefaults(b,_)},x.API.autoTableHtmlToJson=function(b,_){var k;if(_===void 0&&(_=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var N=new h.DocHandler(this),A=(0,u.parseHtml)(N,b,window,_,!1),T=A.head,C=A.body,P=((k=T[0])===null||k===void 0?void 0:k.map(function($){return $.content}))||[];return{columns:P,rows:C,data:C}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},x.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=b,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=v},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,d,h,f,m){f=f||{};var y=1.15,v=m.internal.scaleFactor,x=m.internal.getFontSize()/v,b=m.getLineHeightFactor?m.getLineHeightFactor():y,_=x*b,k=/\r\n|\r|\n/g,N="",A=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(N=typeof u=="string"?u.split(k):u,A=N.length||1),h+=x*(2-y),f.valign==="middle"?h-=A/2*_:f.valign==="bottom"&&(h-=A*_),f.halign==="center"||f.halign==="right"){var T=x;if(f.halign==="center"&&(T*=.5),N&&A>=1){for(var C=0;C<N.length;C++)m.text(N[C],d-m.getStringUnitWidth(N[C])*T,h),h+=_;return m}d-=m.getStringUnitWidth(u)*T}return f.halign==="justify"?m.text(u,d,h,{maxWidth:f.maxWidth||100,align:"justify"}):m.text(u,d,h),m}l.default=c},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(m,y,v){v.applyStyles(y,!0);var x=Array.isArray(m)?m:[m],b=x.map(function(_){return v.getTextWidth(_)}).reduce(function(_,k){return Math.max(_,k)},0);return b}l.getStringWidth=c;function u(m,y,v,x){var b=y.settings.tableLineWidth,_=y.settings.tableLineColor;m.applyStyles({lineWidth:b,lineColor:_});var k=d(b,!1);k&&m.rect(v.x,v.y,y.getWidth(m.pageSize().width),x.y-v.y,k)}l.addTableBorder=u;function d(m,y){var v=m>0,x=y||y===0;return v&&x?"DF":v?"S":x?"F":null}l.getFillStyle=d;function h(m,y){var v,x,b,_;if(m=m||y,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=y}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(v=m.left)!==null&&v!==void 0?v:y,top:(x=m.top)!==null&&x!==void 0?x:y,right:(b=m.right)!==null&&b!==void 0?b:y,bottom:(_=m.bottom)!==null&&_!==void 0?_:y}):(typeof m!="number"&&(m=y),{top:m,right:m,bottom:m,left:m})}l.parseSpacing=h;function f(m,y){var v=h(y.settings.margin,0);return m.pageSize().width-(v.left+v.right)}l.getPageAvailableWidth=f},796:function(o,l){var c=this&&this.__extends||function(){var f=function(m,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,x){v.__proto__=x}||function(v,x){for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(v[b]=x[b])},f(m,y)};return function(m,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(m,y);function v(){this.constructor=m}m.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(f){c(m,f);function m(y){var v=f.call(this)||this;return v._element=y,v}return m}(Array);l.HtmlRowInput=u;function d(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function h(f){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[f]}l.getTheme=h},903:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function d(v,x,b,_,k){var N={},A=1.3333333333333333,T=f(x,function(K){return k.getComputedStyle(K).backgroundColor});T!=null&&(N.fillColor=T);var C=f(x,function(K){return k.getComputedStyle(K).color});C!=null&&(N.textColor=C);var P=y(_,b);P&&(N.cellPadding=P);var $="borderTopColor",j=A*b,O=_.borderTopWidth;if(_.borderBottomWidth===O&&_.borderRightWidth===O&&_.borderLeftWidth===O){var F=(parseFloat(O)||0)/j;F&&(N.lineWidth=F)}else N.lineWidth={top:(parseFloat(_.borderTopWidth)||0)/j,right:(parseFloat(_.borderRightWidth)||0)/j,bottom:(parseFloat(_.borderBottomWidth)||0)/j,left:(parseFloat(_.borderLeftWidth)||0)/j},N.lineWidth.top||(N.lineWidth.right?$="borderRightColor":N.lineWidth.bottom?$="borderBottomColor":N.lineWidth.left&&($="borderLeftColor"));var B=f(x,function(K){return k.getComputedStyle(K)[$]});B!=null&&(N.lineColor=B);var Z=["left","right","center","justify"];Z.indexOf(_.textAlign)!==-1&&(N.halign=_.textAlign),Z=["middle","bottom","top"],Z.indexOf(_.verticalAlign)!==-1&&(N.valign=_.verticalAlign);var V=parseInt(_.fontSize||"");isNaN(V)||(N.fontSize=V/A);var G=h(_);G&&(N.fontStyle=G);var U=(_.fontFamily||"").toLowerCase();return v.indexOf(U)!==-1&&(N.font=U),N}l.parseCss=d;function h(v){var x="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(x="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(x+="italic"),x}function f(v,x){var b=m(v,x);if(!b)return null;var _=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!_||!Array.isArray(_))return null;var k=[parseInt(_[1]),parseInt(_[2]),parseInt(_[3])],N=parseInt(_[4]);return N===0||isNaN(k[0])||isNaN(k[1])||isNaN(k[2])?null:k}function m(v,x){var b=x(v);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?v.parentElement==null?null:m(v.parentElement,x):b}function y(v,x){var b=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],_=96/(72/x),k=(parseInt(v.lineHeight)-parseInt(v.fontSize))/x/2,N=b.map(function(T){return parseInt(T||"0")/_}),A=(0,u.parseSpacing)(N,0);return k>A.top&&(A.top=k),k>A.bottom&&(A.bottom=k),A}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function d(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(h,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=h:c=h},d.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},d.prototype.applyStyles=function(h,f){var m,y,v;f===void 0&&(f=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var x=this.jsPDFDocument.internal.getFont(),b=x.fontStyle,_=x.fontName;if(h.font&&(_=h.font),h.fontStyle){b=h.fontStyle;var k=this.getFontList()[_];k&&k.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(k[0]),b=k[0])}if(this.jsPDFDocument.setFont(_,b),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!f){var N=d.unifyColor(h.fillColor);N&&(m=this.jsPDFDocument).setFillColor.apply(m,N),N=d.unifyColor(h.textColor),N&&(y=this.jsPDFDocument).setTextColor.apply(y,N),N=d.unifyColor(h.lineColor),N&&(v=this.jsPDFDocument).setDrawColor.apply(v,N),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},d.prototype.splitTextToSize=function(h,f,m){return this.jsPDFDocument.splitTextToSize(h,f,m)},d.prototype.rect=function(h,f,m,y,v){return this.jsPDFDocument.rect(h,f,m,y,v)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=u},4:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),d=c(796);function h(y,v,x,b,_){var k,N;b===void 0&&(b=!1),_===void 0&&(_=!1);var A;typeof v=="string"?A=x.document.querySelector(v):A=v;var T=Object.keys(y.getFontList()),C=y.scaleFactor(),P=[],$=[],j=[];if(!A)return console.error("Html table could not be found with input: ",v),{head:P,body:$,foot:j};for(var O=0;O<A.rows.length;O++){var F=A.rows[O],B=(N=(k=F==null?void 0:F.parentElement)===null||k===void 0?void 0:k.tagName)===null||N===void 0?void 0:N.toLowerCase(),Z=f(T,C,x,F,b,_);Z&&(B==="thead"?P.push(Z):B==="tfoot"?j.push(Z):$.push(Z))}return{head:P,body:$,foot:j}}l.parseHtml=h;function f(y,v,x,b,_,k){for(var N=new d.HtmlRowInput(b),A=0;A<b.cells.length;A++){var T=b.cells[A],C=x.getComputedStyle(T);if(_||C.display!=="none"){var P=void 0;k&&(P=(0,u.parseCss)(y,T,v,C,x)),N.push({rowSpan:T.rowSpan,colSpan:T.colSpan,styles:P,_element:T,content:m(T)})}}var $=x.getComputedStyle(b);if(N.length>0&&(_||$.display!=="none"))return N}function m(y){var v=y.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),d=c(356),h=c(420),f=c(744),m=c(792);function y(A,T){var C=new f.DocHandler(A),P=C.getDocumentOptions(),$=C.getGlobalOptions();(0,m.default)(C,$,P,T);var j=(0,d.assign)({},$,P,T),O;typeof window<"u"&&(O=window);var F=v($,P,T),B=x($,P,T),Z=b(C,j),V=k(C,j,O);return{id:T.tableId,content:V,hooks:B,styles:F,settings:Z}}l.parseInput=y;function v(A,T,C){for(var P={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},$=function(B){if(B==="columnStyles"){var Z=A[B],V=T[B],G=C[B];P.columnStyles=(0,d.assign)({},Z,V,G)}else{var U=[A,T,C],K=U.map(function(ee){return ee[B]||{}});P[B]=(0,d.assign)({},K[0],K[1],K[2])}},j=0,O=Object.keys(P);j<O.length;j++){var F=O[j];$(F)}return P}function x(A,T,C){for(var P=[A,T,C],$={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},j=0,O=P;j<O.length;j++){var F=O[j];F.didParseCell&&$.didParseCell.push(F.didParseCell),F.willDrawCell&&$.willDrawCell.push(F.willDrawCell),F.didDrawCell&&$.didDrawCell.push(F.didDrawCell),F.willDrawPage&&$.willDrawPage.push(F.willDrawPage),F.didDrawPage&&$.didDrawPage.push(F.didDrawPage)}return $}function b(A,T){var C,P,$,j,O,F,B,Z,V,G,U,K,ee=(0,h.parseSpacing)(T.margin,40/A.scaleFactor()),oe=(C=_(A,T.startY))!==null&&C!==void 0?C:ee.top,W;T.showFoot===!0?W="everyPage":T.showFoot===!1?W="never":W=(P=T.showFoot)!==null&&P!==void 0?P:"everyPage";var Y;T.showHead===!0?Y="everyPage":T.showHead===!1?Y="never":Y=($=T.showHead)!==null&&$!==void 0?$:"everyPage";var Q=(j=T.useCss)!==null&&j!==void 0?j:!1,J=T.theme||(Q?"plain":"striped"),te=!!T.horizontalPageBreak,me=(O=T.horizontalPageBreakRepeat)!==null&&O!==void 0?O:null;return{includeHiddenHtml:(F=T.includeHiddenHtml)!==null&&F!==void 0?F:!1,useCss:Q,theme:J,startY:oe,margin:ee,pageBreak:(B=T.pageBreak)!==null&&B!==void 0?B:"auto",rowPageBreak:(Z=T.rowPageBreak)!==null&&Z!==void 0?Z:"auto",tableWidth:(V=T.tableWidth)!==null&&V!==void 0?V:"auto",showHead:Y,showFoot:W,tableLineWidth:(G=T.tableLineWidth)!==null&&G!==void 0?G:0,tableLineColor:(U=T.tableLineColor)!==null&&U!==void 0?U:200,horizontalPageBreak:te,horizontalPageBreakRepeat:me,horizontalPageBreakBehaviour:(K=T.horizontalPageBreakBehaviour)!==null&&K!==void 0?K:"afterAllRows"}}function _(A,T){var C=A.getLastAutoTable(),P=A.scaleFactor(),$=A.pageNumber(),j=!1;if(C&&C.startPageNumber){var O=C.startPageNumber+C.pageNumber-1;j=O===$}return typeof T=="number"?T:(T==null||T===!1)&&j&&(C==null?void 0:C.finalY)!=null?C.finalY+20/P:null}function k(A,T,C){var P=T.head||[],$=T.body||[],j=T.foot||[];if(T.html){var O=T.includeHiddenHtml;if(C){var F=(0,u.parseHtml)(A,T.html,C,O,T.useCss)||{};P=F.head||P,$=F.body||P,j=F.foot||P}else console.error("Cannot parse html in non browser environment")}var B=T.columns||N(P,$,j);return{columns:B,head:P,body:$,foot:j}}function N(A,T,C){var P=A[0]||T[0]||C[0]||[],$=[];return Object.keys(P).filter(function(j){return j!=="_element"}).forEach(function(j){var O=1,F;Array.isArray(P)?F=P[parseInt(j)]:F=P[j],typeof F=="object"&&!Array.isArray(F)&&(O=(F==null?void 0:F.colSpan)||1);for(var B=0;B<O;B++){var Z=void 0;Array.isArray(P)?Z=$.length:Z=j+(B>0?"_".concat(B):"");var V={dataKey:Z};$.push(V)}}),$}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,h,f,m){for(var y=function(_){_&&typeof _!="object"&&console.error("The options parameter should be of type object, is: "+typeof _),typeof _.extendWidth<"u"&&(_.tableWidth=_.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof _.margins<"u"&&(typeof _.margin>"u"&&(_.margin=_.margins),console.error("Use of deprecated option: margins, use margin instead.")),_.startY&&typeof _.startY!="number"&&(console.error("Invalid value for startY option",_.startY),delete _.startY),!_.didDrawPage&&(_.afterPageContent||_.beforePageContent||_.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),_.didDrawPage=function(j){d.applyStyles(d.userStyles),_.beforePageContent&&_.beforePageContent(j),d.applyStyles(d.userStyles),_.afterPageContent&&_.afterPageContent(j),d.applyStyles(d.userStyles),_.afterPageAdd&&j.pageNumber>1&&j.afterPageAdd(j),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(j){_[j]&&console.error('The "'.concat(j,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(j){var O=j[0],F=j[1];_[F]&&(console.error("Use of deprecated option ".concat(F,". Use ").concat(O," instead")),_[O]=_[F])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(j){var O=typeof j=="string"?j:j[0],F=typeof j=="string"?j:j[1];typeof _[O]<"u"&&(typeof _.styles[F]>"u"&&(_.styles[F]=_[O]),console.error("Use of deprecated option: "+O+", use the style "+F+" instead."))});for(var k=0,N=["styles","bodyStyles","headStyles","footStyles"];k<N.length;k++){var A=N[k];u(_[A]||{})}for(var T=_.columnStyles||{},C=0,P=Object.keys(T);C<P.length;C++){var $=P[C];u(T[$]||{})}},v=0,x=[h,f,m];v<x.length;v++){var b=x[v];y(b)}}l.default=c;function u(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},260:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),d=c(172),h=c(420),f=function(){function x(b,_){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=_.columns,this.head=_.head,this.body=_.body,this.foot=_.foot}return x.prototype.getHeadHeight=function(b){return this.head.reduce(function(_,k){return _+k.getMaxCellHeight(b)},0)},x.prototype.getFootHeight=function(b){return this.foot.reduce(function(_,k){return _+k.getMaxCellHeight(b)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(b,_,k,N,A,T){for(var C=0,P=_;C<P.length;C++){var $=P[C],j=new d.CellHookData(b,this,k,N,A,T),O=$(j)===!1;if(k.text=Array.isArray(k.text)?k.text:[k.text],O)return!1}return!0},x.prototype.callEndPageHooks=function(b,_){b.applyStyles(b.userStyles);for(var k=0,N=this.hooks.didDrawPage;k<N.length;k++){var A=N[k];A(new d.HookData(b,this,_))}},x.prototype.callWillDrawPageHooks=function(b,_){for(var k=0,N=this.hooks.willDrawPage;k<N.length;k++){var A=N[k];A(new d.HookData(b,this,_))}},x.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var _=this.columns.reduce(function(N,A){return N+A.wrappedWidth},0);return _}else{var k=this.settings.margin;return b-k.left-k.right}},x}();l.Table=f;var m=function(){function x(b,_,k,N,A){A===void 0&&(A=!1),this.height=0,this.raw=b,b instanceof u.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=_,this.section=k,this.cells=N,this.spansMultiplePages=A}return x.prototype.getMaxCellHeight=function(b){var _=this;return b.reduce(function(k,N){var A;return Math.max(k,((A=_.cells[N.index])===null||A===void 0?void 0:A.height)||0)},0)},x.prototype.hasRowSpan=function(b){var _=this;return b.filter(function(k){var N=_.cells[k.index];return N?N.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(b,_){return this.getMaxCellHeight(_)<=b},x.prototype.getMinimumRowHeight=function(b,_){var k=this;return b.reduce(function(N,A){var T=k.cells[A.index];if(!T)return 0;var C=_.getLineHeight(T.styles.fontSize),P=T.padding("vertical"),$=P+C;return $>N?$:N},0)},x}();l.Row=m;var y=function(){function x(b,_,k){var N,A;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=_,this.section=k,this.raw=b;var T=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,T=(A=(N=b.content)!==null&&N!==void 0?N:b.title)!==null&&A!==void 0?A:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var C=T!=null?""+T:"",P=/\r\n|\r|\n/g;this.text=C.split(P)}return x.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var _=this.height-this.padding("vertical");b=this.y+_/2+this.padding("top")}var k;if(this.styles.halign==="right")k=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var N=this.width-this.padding("horizontal");k=this.x+N/2+this.padding("left")}else k=this.x+this.padding("left");return{x:k,y:b}},x.prototype.getContentHeight=function(b,_){_===void 0&&(_=1.15);var k=Array.isArray(this.text)?this.text.length:1,N=this.styles.fontSize/b*_,A=k*N+this.padding("vertical");return Math.max(A,this.styles.minCellHeight)},x.prototype.padding=function(b){var _=(0,h.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?_.top+_.bottom:b==="horizontal"?_.left+_.right:_[b]},x}();l.Cell=y;var v=function(){function x(b,_,k){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=_,this.index=k}return x.prototype.getMaxCustomCellWidth=function(b){for(var _=0,k=0,N=b.allRows();k<N.length;k++){var A=N[k],T=A.cells[this.index];T&&typeof T.styles.cellWidth=="number"&&(_=Math.max(_,T.styles.cellWidth))}return _},x}();l.Column=v},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,d,h,f,m){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var y=Object(u),v=1;v<arguments.length;v++){var x=arguments[v];if(x!=null)for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(y[b]=x[b])}return y}l.assign=c},972:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),d=c(260),h=c(324),f=c(796),m=c(356);function y(A,T){var C=new u.DocHandler(A),P=v(T,C.scaleFactor()),$=new d.Table(T,P);return(0,h.calculateWidths)(C,$),C.applyStyles(C.userStyles),$}l.createTable=y;function v(A,T){var C=A.content,P=k(C.columns);if(C.head.length===0){var $=b(P,"head");$&&C.head.push($)}if(C.foot.length===0){var $=b(P,"foot");$&&C.foot.push($)}var j=A.settings.theme,O=A.styles;return{columns:P,head:x("head",C.head,P,O,j,T),body:x("body",C.body,P,O,j,T),foot:x("foot",C.foot,P,O,j,T)}}function x(A,T,C,P,$,j){var O={},F=T.map(function(B,Z){for(var V=0,G={},U=0,K=0,ee=0,oe=C;ee<oe.length;ee++){var W=oe[ee];if(O[W.index]==null||O[W.index].left===0)if(K===0){var Y=void 0;Array.isArray(B)?Y=B[W.index-U-V]:Y=B[W.dataKey];var Q={};typeof Y=="object"&&!Array.isArray(Y)&&(Q=(Y==null?void 0:Y.styles)||{});var J=N(A,W,Z,$,P,j,Q),te=new d.Cell(Y,J,A);G[W.dataKey]=te,G[W.index]=te,K=te.colSpan-1,O[W.index]={left:te.rowSpan-1,times:K}}else K--,U++;else O[W.index].left--,K=O[W.index].times,V++}return new d.Row(B,Z,A,G)});return F}function b(A,T){var C={};return A.forEach(function(P){if(P.raw!=null){var $=_(T,P.raw);$!=null&&(C[P.dataKey]=$)}}),Object.keys(C).length>0?C:null}function _(A,T){if(A==="head"){if(typeof T=="object")return T.header||T.title||null;if(typeof T=="string"||typeof T=="number")return T}else if(A==="foot"&&typeof T=="object")return T.footer;return null}function k(A){return A.map(function(T,C){var P,$,j;return typeof T=="object"?j=($=(P=T.dataKey)!==null&&P!==void 0?P:T.key)!==null&&$!==void 0?$:C:j=C,new d.Column(j,T,C)})}function N(A,T,C,P,$,j,O){var F=(0,f.getTheme)(P),B;A==="head"?B=$.headStyles:A==="body"?B=$.bodyStyles:A==="foot"&&(B=$.footStyles);var Z=(0,m.assign)({},F.table,F[A],$.styles,B),V=$.columnStyles[T.dataKey]||$.columnStyles[T.index]||{},G=A==="body"?V:{},U=A==="body"&&C%2===0?(0,m.assign)({},F.alternateRow,$.alternateRowStyles):{},K=(0,f.defaultStyles)(j),ee=(0,m.assign)({},K,Z,U,G);return(0,m.assign)(ee,O)}},664:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),d=c(260),h=c(744),f=c(356),m=c(136),y=c(224);function v(V,G){var U=G.settings,K=U.startY,ee=U.margin,oe={x:ee.left,y:K},W=G.getHeadHeight(G.columns)+G.getFootHeight(G.columns),Y=K+ee.bottom+W;if(U.pageBreak==="avoid"){var Q=G.body,J=Q.reduce(function(ge,ce){return ge+ce.height},0);Y+=J}var te=new h.DocHandler(V);(U.pageBreak==="always"||U.startY!=null&&Y>te.pageSize().height)&&(Z(te),oe.y=ee.top),G.callWillDrawPageHooks(te,oe);var me=(0,f.assign)({},oe);G.startPageNumber=te.pageNumber(),U.horizontalPageBreak?x(te,G,me,oe):(te.applyStyles(te.userStyles),(U.showHead==="firstPage"||U.showHead==="everyPage")&&G.head.forEach(function(ge){return $(te,G,ge,oe,G.columns)}),te.applyStyles(te.userStyles),G.body.forEach(function(ge,ce){var Ce=ce===G.body.length-1;P(te,G,ge,Ce,me,oe,G.columns)}),te.applyStyles(te.userStyles),(U.showFoot==="lastPage"||U.showFoot==="everyPage")&&G.foot.forEach(function(ge){return $(te,G,ge,oe,G.columns)})),(0,u.addTableBorder)(te,G,me,oe),G.callEndPageHooks(te,oe),G.finalY=oe.y,V.lastAutoTable=G,V.previousAutoTable=G,V.autoTable&&(V.autoTable.previous=G),te.applyStyles(te.userStyles)}l.drawTable=v;function x(V,G,U,K){var ee=(0,y.calculateAllColumnsCanFitInPage)(V,G),oe=G.settings;if(oe.horizontalPageBreakBehaviour==="afterAllRows")ee.forEach(function(J,te){V.applyStyles(V.userStyles),te>0?B(V,G,U,K,J.columns,!0):b(V,G,K,J.columns),_(V,G,U,K,J.columns),N(V,G,K,J.columns)});else for(var W=-1,Y=ee[0],Q=function(){var J=W;if(Y){V.applyStyles(V.userStyles);var te=Y.columns;W>=0?B(V,G,U,K,te,!0):b(V,G,K,te),J=k(V,G,W+1,K,te),N(V,G,K,te)}var me=J-W;ee.slice(1).forEach(function(ge){V.applyStyles(V.userStyles),B(V,G,U,K,ge.columns,!0),k(V,G,W+1,K,ge.columns,me),N(V,G,K,ge.columns)}),W=J};W<G.body.length-1;)Q()}function b(V,G,U,K){var ee=G.settings;V.applyStyles(V.userStyles),(ee.showHead==="firstPage"||ee.showHead==="everyPage")&&G.head.forEach(function(oe){return $(V,G,oe,U,K)})}function _(V,G,U,K,ee){V.applyStyles(V.userStyles),G.body.forEach(function(oe,W){var Y=W===G.body.length-1;P(V,G,oe,Y,U,K,ee)})}function k(V,G,U,K,ee,oe){V.applyStyles(V.userStyles),oe=oe??G.body.length;var W=Math.min(U+oe,G.body.length),Y=-1;return G.body.slice(U,W).forEach(function(Q,J){var te=U+J===G.body.length-1,me=F(V,G,te,K);Q.canEntireRowFit(me,ee)&&($(V,G,Q,K,ee),Y=U+J)}),Y}function N(V,G,U,K){var ee=G.settings;V.applyStyles(V.userStyles),(ee.showFoot==="lastPage"||ee.showFoot==="everyPage")&&G.foot.forEach(function(oe){return $(V,G,oe,U,K)})}function A(V,G,U){var K=U.getLineHeight(V.styles.fontSize),ee=V.padding("vertical"),oe=Math.floor((G-ee)/K);return Math.max(0,oe)}function T(V,G,U,K){var ee={};V.spansMultiplePages=!0,V.height=0;for(var oe=0,W=0,Y=U.columns;W<Y.length;W++){var Q=Y[W],J=V.cells[Q.index];if(J){Array.isArray(J.text)||(J.text=[J.text]);var te=new d.Cell(J.raw,J.styles,J.section);te=(0,f.assign)(te,J),te.text=[];var me=A(J,G,K);J.text.length>me&&(te.text=J.text.splice(me,J.text.length));var ge=K.scaleFactor(),ce=K.getLineHeightFactor();J.contentHeight=J.getContentHeight(ge,ce),J.contentHeight>=G&&(J.contentHeight=G,te.styles.minCellHeight-=G),J.contentHeight>V.height&&(V.height=J.contentHeight),te.contentHeight=te.getContentHeight(ge,ce),te.contentHeight>oe&&(oe=te.contentHeight),ee[Q.index]=te}}var Ce=new d.Row(V.raw,-1,V.section,ee,!0);Ce.height=oe;for(var _e=0,we=U.columns;_e<we.length;_e++){var Q=we[_e],te=Ce.cells[Q.index];te&&(te.height=Ce.height);var J=V.cells[Q.index];J&&(J.height=V.height)}return Ce}function C(V,G,U,K){var ee=V.pageSize().height,oe=K.settings.margin,W=oe.top+oe.bottom,Y=ee-W;G.section==="body"&&(Y-=K.getHeadHeight(K.columns)+K.getFootHeight(K.columns));var Q=G.getMinimumRowHeight(K.columns,V),J=Q<U;if(Q>Y)return console.error("Will not be able to print row ".concat(G.index," correctly since it's minimum height is larger than page height")),!0;if(!J)return!1;var te=G.hasRowSpan(K.columns),me=G.getMaxCellHeight(K.columns)>Y;return me?(te&&console.error("The content of row ".concat(G.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||K.settings.rowPageBreak==="avoid")}function P(V,G,U,K,ee,oe,W){var Y=F(V,G,K,oe);if(U.canEntireRowFit(Y,W))$(V,G,U,oe,W);else if(C(V,U,Y,G)){var Q=T(U,Y,G,V);$(V,G,U,oe,W),B(V,G,ee,oe,W),P(V,G,Q,K,ee,oe,W)}else B(V,G,ee,oe,W),P(V,G,U,K,ee,oe,W)}function $(V,G,U,K,ee){K.x=G.settings.margin.left;for(var oe=0,W=ee;oe<W.length;oe++){var Y=W[oe],Q=U.cells[Y.index];if(!Q){K.x+=Y.width;continue}V.applyStyles(Q.styles),Q.x=K.x,Q.y=K.y;var J=G.callCellHooks(V,G.hooks.willDrawCell,Q,U,Y,K);if(J===!1){K.x+=Y.width;continue}j(V,Q,K);var te=Q.getTextPos();(0,m.default)(Q.text,te.x,te.y,{halign:Q.styles.halign,valign:Q.styles.valign,maxWidth:Math.ceil(Q.width-Q.padding("left")-Q.padding("right"))},V.getDocument()),G.callCellHooks(V,G.hooks.didDrawCell,Q,U,Y,K),K.x+=Y.width}K.y+=U.height}function j(V,G,U){var K=G.styles;if(V.getDocument().setFillColor(V.getDocument().getFillColor()),typeof K.lineWidth=="number"){var ee=(0,u.getFillStyle)(K.lineWidth,K.fillColor);ee&&V.rect(G.x,U.y,G.width,G.height,ee)}else typeof K.lineWidth=="object"&&(K.fillColor&&V.rect(G.x,U.y,G.width,G.height,"F"),O(V,G,U,K.lineWidth))}function O(V,G,U,K){var ee,oe,W,Y;K.top&&(ee=U.x,oe=U.y,W=U.x+G.width,Y=U.y,K.right&&(W+=.5*K.right),K.left&&(ee-=.5*K.left),Q(K.top,ee,oe,W,Y)),K.bottom&&(ee=U.x,oe=U.y+G.height,W=U.x+G.width,Y=U.y+G.height,K.right&&(W+=.5*K.right),K.left&&(ee-=.5*K.left),Q(K.bottom,ee,oe,W,Y)),K.left&&(ee=U.x,oe=U.y,W=U.x,Y=U.y+G.height,K.top&&(oe-=.5*K.top),K.bottom&&(Y+=.5*K.bottom),Q(K.left,ee,oe,W,Y)),K.right&&(ee=U.x+G.width,oe=U.y,W=U.x+G.width,Y=U.y+G.height,K.top&&(oe-=.5*K.top),K.bottom&&(Y+=.5*K.bottom),Q(K.right,ee,oe,W,Y));function Q(J,te,me,ge,ce){V.getDocument().setLineWidth(J),V.getDocument().line(te,me,ge,ce,"S")}}function F(V,G,U,K){var ee=G.settings.margin.bottom,oe=G.settings.showFoot;return(oe==="everyPage"||oe==="lastPage"&&U)&&(ee+=G.getFootHeight(G.columns)),V.pageSize().height-K.y-ee}function B(V,G,U,K,ee,oe){ee===void 0&&(ee=[]),oe===void 0&&(oe=!1),V.applyStyles(V.userStyles),G.settings.showFoot==="everyPage"&&!oe&&G.foot.forEach(function(Y){return $(V,G,Y,K,ee)}),G.callEndPageHooks(V,K);var W=G.settings.margin;(0,u.addTableBorder)(V,G,U,K),Z(V),G.pageNumber++,G.pageCount++,K.x=W.left,K.y=W.top,U.y=W.top,G.callWillDrawPageHooks(V,K),G.settings.showHead==="everyPage"&&(G.head.forEach(function(Y){return $(V,G,Y,K,ee)}),V.applyStyles(V.userStyles))}l.addPage=B;function Z(V){var G=V.pageNumber();V.setPage(G+1);var U=V.pageNumber();return U===G?(V.addPage(),!0):!1}},224:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function d(f,m,y){var v;y===void 0&&(y={});var x=(0,u.getPageAvailableWidth)(f,m),b=new Map,_=[],k=[],N=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?N=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(N=[m.settings.horizontalPageBreakRepeat]),N.forEach(function(P){var $=m.columns.find(function(j){return j.dataKey===P||j.index===P});$&&!b.has($.index)&&(b.set($.index,!0),_.push($.index),k.push(m.columns[$.index]),x-=$.wrappedWidth)});for(var A=!0,T=(v=y==null?void 0:y.start)!==null&&v!==void 0?v:0;T<m.columns.length;){if(b.has(T)){T++;continue}var C=m.columns[T].wrappedWidth;if(A||x>=C)A=!1,_.push(T),k.push(m.columns[T]),x-=C;else break;T++}return{colIndexes:_,columns:k,lastIndex:T-1}}function h(f,m){for(var y=[],v=0;v<m.columns.length;v++){var x=d(f,m,{start:v});x.columns.length&&(y.push(x),v=x.lastIndex)}return y}l.calculateAllColumnsCanFitInPage=h},324:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function d(_,k){h(_,k);var N=[],A=0;k.columns.forEach(function(C){var P=C.getMaxCustomCellWidth(k);P?C.width=P:(C.width=C.wrappedWidth,N.push(C)),A+=C.width});var T=k.getWidth(_.pageSize().width)-A;T&&(T=f(N,T,function(C){return Math.max(C.minReadableWidth,C.minWidth)})),T&&(T=f(N,T,function(C){return C.minWidth})),T=Math.abs(T),!k.settings.horizontalPageBreak&&T>.1/_.scaleFactor()&&(T=T<1?T:Math.round(T),console.warn("Of the table content, ".concat(T," units width could not fit page"))),y(k),v(k,_),m(k)}l.calculateWidths=d;function h(_,k){var N=_.scaleFactor(),A=k.settings.horizontalPageBreak,T=(0,u.getPageAvailableWidth)(_,k);k.allRows().forEach(function(C){for(var P=0,$=k.columns;P<$.length;P++){var j=$[P],O=C.cells[j.index];if(O){var F=k.hooks.didParseCell;k.callCellHooks(_,F,O,C,j,null);var B=O.padding("horizontal");O.contentWidth=(0,u.getStringWidth)(O.text,O.styles,_)+B;var Z=(0,u.getStringWidth)(O.text.join(" ").split(/[^\S\u00A0]+/),O.styles,_);if(O.minReadableWidth=Z+O.padding("horizontal"),typeof O.styles.cellWidth=="number")O.minWidth=O.styles.cellWidth,O.wrappedWidth=O.styles.cellWidth;else if(O.styles.cellWidth==="wrap"||A===!0)O.contentWidth>T?(O.minWidth=T,O.wrappedWidth=T):(O.minWidth=O.contentWidth,O.wrappedWidth=O.contentWidth);else{var V=10/N;O.minWidth=O.styles.minCellWidth||V,O.wrappedWidth=O.contentWidth,O.minWidth>O.wrappedWidth&&(O.wrappedWidth=O.minWidth)}}}}),k.allRows().forEach(function(C){for(var P=0,$=k.columns;P<$.length;P++){var j=$[P],O=C.cells[j.index];if(O&&O.colSpan===1)j.wrappedWidth=Math.max(j.wrappedWidth,O.wrappedWidth),j.minWidth=Math.max(j.minWidth,O.minWidth),j.minReadableWidth=Math.max(j.minReadableWidth,O.minReadableWidth);else{var F=k.styles.columnStyles[j.dataKey]||k.styles.columnStyles[j.index]||{},B=F.cellWidth||F.minCellWidth;B&&typeof B=="number"&&(j.minWidth=B,j.wrappedWidth=B)}O&&(O.colSpan>1&&!j.minWidth&&(j.minWidth=O.minWidth),O.colSpan>1&&!j.wrappedWidth&&(j.wrappedWidth=O.minWidth))}})}function f(_,k,N){for(var A=k,T=_.reduce(function(V,G){return V+G.wrappedWidth},0),C=0;C<_.length;C++){var P=_[C],$=P.wrappedWidth/T,j=A*$,O=P.width+j,F=N(P),B=O<F?F:O;k-=B-P.width,P.width=B}if(k=Math.round(k*1e10)/1e10,k){var Z=_.filter(function(V){return k<0?V.width>N(V):!0});Z.length&&(k=f(Z,k,N))}return k}l.resizeColumns=f;function m(_){for(var k={},N=1,A=_.allRows(),T=0;T<A.length;T++)for(var C=A[T],P=0,$=_.columns;P<$.length;P++){var j=$[P],O=k[j.index];if(N>1)N--,delete C.cells[j.index];else if(O)O.cell.height+=C.height,N=O.cell.colSpan,delete C.cells[j.index],O.left--,O.left<=1&&delete k[j.index];else{var F=C.cells[j.index];if(!F)continue;if(F.height=C.height,F.rowSpan>1){var B=A.length-T,Z=F.rowSpan>B?B:F.rowSpan;k[j.index]={cell:F,left:Z,row:C}}}}}function y(_){for(var k=_.allRows(),N=0;N<k.length;N++)for(var A=k[N],T=null,C=0,P=0,$=0;$<_.columns.length;$++){var j=_.columns[$];if(P-=1,P>1&&_.columns[$+1])C+=j.width,delete A.cells[j.index];else if(T){var O=T;delete A.cells[j.index],T=null,O.width=j.width+C}else{var O=A.cells[j.index];if(!O)continue;if(P=O.colSpan,C=0,O.colSpan>1){T=O,C+=j.width;continue}O.width=j.width+C}}}function v(_,k){for(var N={count:0,height:0},A=0,T=_.allRows();A<T.length;A++){for(var C=T[A],P=0,$=_.columns;P<$.length;P++){var j=$[P],O=C.cells[j.index];if(O){k.applyStyles(O.styles,!0);var F=O.width-O.padding("horizontal");if(O.styles.overflow==="linebreak")O.text=k.splitTextToSize(O.text,F+1/k.scaleFactor(),{fontSize:O.styles.fontSize});else if(O.styles.overflow==="ellipsize")O.text=x(O.text,F,O.styles,k,"...");else if(O.styles.overflow==="hidden")O.text=x(O.text,F,O.styles,k,"");else if(typeof O.styles.overflow=="function"){var B=O.styles.overflow(O.text,F);typeof B=="string"?O.text=[B]:O.text=B}O.contentHeight=O.getContentHeight(k.scaleFactor(),k.getLineHeightFactor());var Z=O.contentHeight/O.rowSpan;O.rowSpan>1&&N.count*N.height<Z*O.rowSpan?N={height:Z,count:O.rowSpan}:N&&N.count>0&&N.height>Z&&(Z=N.height),Z>C.height&&(C.height=Z)}}N.count--}}function x(_,k,N,A,T){return _.map(function(C){return b(C,k,N,A,T)})}l.ellipsize=x;function b(_,k,N,A,T){var C=1e4*A.scaleFactor();if(k=Math.ceil(k*C)/C,k>=(0,u.getStringWidth)(_,N,A))return _;for(;k<(0,u.getStringWidth)(_+T,N,A)&&!(_.length<=1);)_=_.substring(0,_.length-1);return _.trim()+T}},964:function(o){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=n}},s={};function i(o){var l=s[o];if(l!==void 0)return l.exports;var c=s[o]={exports:{}};return r[o].call(c.exports,c,c.exports,i),c.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=i(340),c=i(776),u=i(664),d=i(972),h=i(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return h.Table}});var f=i(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var m=i(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return m.Row}});function y(k){(0,l.default)(k)}o.applyPlugin=y;function v(k,N){var A=(0,c.parseInput)(k,N),T=(0,d.createTable)(k,A);(0,u.drawTable)(k,T)}function x(k,N){var A=(0,c.parseInput)(k,N);return(0,d.createTable)(k,A)}o.__createTable=x;function b(k,N){(0,u.drawTable)(k,N)}o.__drawTable=b;try{var _=i(964);_.jsPDF&&(_=_.jsPDF),y(_)}catch{}o.default=v}(),a}()})})(Npt);const NK=[{label:"Last 7 Days",value:"7d"},{label:"Last 30 Days",value:"30d"},{label:"Last 3 Months",value:"3m"},{label:"Last 6 Months",value:"6m"},{label:"Last Year",value:"1y"},{label:"All Time",value:"all"}];function Tpt(){const[t,e]=R.useState(!0),[n,r]=R.useState(null),[s,i]=R.useState("30d"),[a,o]=R.useState({totalWaste:0,totalRepairs:0,totalSales:0,totalContent:0,activeUsers:0,trends:{waste:0,repairs:0,sales:0,content:0}}),[l,c]=R.useState({repairsByType:null,salesByCategory:null,contentEngagement:null,wasteOverTime:null}),[u,d]=R.useState([]),[h,f]=R.useState(!1),[m,y]=R.useState(!1);R.useEffect(()=>{v()},[s]);const v=async()=>{try{e(!0),r(null);const P=new Date;let $=new Date;switch(s){case"7d":$.setDate($.getDate()-7);break;case"30d":$.setDate($.getDate()-30);break;case"3m":$.setMonth($.getMonth()-3);break;case"6m":$.setMonth($.getMonth()-6);break;case"1y":$.setFullYear($.getFullYear()-1);break;case"all":$=new Date(0);break}const{data:j,error:O}=await tt.from("pickup_requests").select("quantity, created_at").eq("status","completed").gte("created_at",$.toISOString());if(O)throw O;const{data:F,error:B}=await tt.from("repair_requests").select("device_type, status, created_at").eq("status","completed").gte("created_at",$.toISOString());if(B)throw B;const{data:Z,error:V}=await tt.from("orders").select(`
          *,
          buyer:profiles!orders_buyer_id_fkey(full_name),
          seller:profiles!orders_seller_id_fkey(full_name),
          product:products(*)
        `).eq("status","completed").gte("created_at",$.toISOString());if(V)throw V;const{data:G,error:U}=await tt.from("educational_content").select("*").gte("created_at",$.toISOString());if(U)throw U;const{data:K,error:ee}=await tt.from("profiles").select("id").gt("updated_at",Wbe(new Date,1).toISOString());if(ee)throw ee;const oe=j.reduce((Ae,he)=>Ae+(he.quantity||0),0),W=new Date($);W.setDate(W.getDate()-(P.getTime()-$.getTime())/(1e3*60*60*24));const{data:Y}=await tt.from("pickup_requests").select("quantity").eq("status","completed").gte("created_at",W.toISOString()).lt("created_at",$.toISOString()),Q=(Y==null?void 0:Y.reduce((Ae,he)=>Ae+(he.quantity||0),0))||0,J=Q?(oe-Q)/Q*100:0,{data:te}=await tt.from("repair_requests").select("id").eq("status","completed").gte("created_at",W.toISOString()).lt("created_at",$.toISOString()),me=te?(F.length-te.length)/te.length*100:0,{data:ge}=await tt.from("orders").select("id").eq("status","completed").gte("created_at",W.toISOString()).lt("created_at",$.toISOString()),ce=ge?(Z.length-ge.length)/ge.length*100:0,Ce=b(F),_e=_(Z),we=await k(G),He=N(j),Qe=await x();o({totalWaste:oe,totalRepairs:F.length,totalSales:Z.length,totalContent:G.length,activeUsers:K.length,trends:{waste:J,repairs:me,sales:ce,content:0}}),c({repairsByType:Ce,salesByCategory:_e,contentEngagement:we,wasteOverTime:He}),d(Qe)}catch(P){console.error("Error fetching analytics data:",P),r("Failed to load analytics data. Please try again.")}finally{e(!1)}},x=async()=>{const[P,$,j,O]=await Promise.all([tt.from("pickup_requests").select("*, user:profiles!pickup_requests_user_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(5),tt.from("repair_requests").select("*, user:profiles!repair_requests_user_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(5),tt.from("orders").select("*, buyer:profiles!orders_buyer_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(5),tt.from("educational_content").select("*, author:profiles!educational_content_author_id_fkey(full_name)").order("created_at",{ascending:!1}).limit(5)]);return[...(P.data||[]).map(B=>{var Z;return{type:"pickup",title:"New Pickup Request",user:(Z=B.user)==null?void 0:Z.full_name,date:B.created_at,details:`${B.quantity} items for pickup`}}),...($.data||[]).map(B=>{var Z;return{type:"repair",title:"New Repair Request",user:(Z=B.user)==null?void 0:Z.full_name,date:B.created_at,details:`${B.device_type} repair`}}),...(j.data||[]).map(B=>{var Z;return{type:"order",title:"New Marketplace Order",user:(Z=B.buyer)==null?void 0:Z.full_name,date:B.created_at,details:`Order #${B.id.slice(0,8)}`}}),...(O.data||[]).map(B=>{var Z;return{type:"content",title:"New Educational Content",user:(Z=B.author)==null?void 0:Z.full_name,date:B.created_at,details:B.title}})].sort((B,Z)=>new Date(Z.date)-new Date(B.date)).slice(0,10)},b=P=>{const $={};return P.forEach(j=>{$[j.device_type]=($[j.device_type]||0)+1}),{labels:Object.keys($),datasets:[{data:Object.values($),backgroundColor:["#10b981","#3b82f6","#8b5cf6","#ec4899","#f59e0b","#6366f1"]}]}},_=P=>{const $={};return P.forEach(j=>{var F;const O=((F=j.product)==null?void 0:F.category)||"Other";$[O]=($[O]||0)+1}),{labels:Object.keys($),datasets:[{data:Object.values($),backgroundColor:["#10b981","#3b82f6","#8b5cf6","#ec4899","#f59e0b","#6366f1"]}]}},k=async P=>{const{data:$,error:j}=await tt.from("content_engagement").select("views, likes, comments, shares").in("content_id",P.map(F=>F.id));if(j)return console.error("Error fetching content engagement:",j),{labels:["Views","Likes","Comments","Shares"],datasets:[{data:[0,0,0,0],backgroundColor:["#10b981","#3b82f6","#8b5cf6","#ec4899"]}]};const O=$.reduce((F,B)=>({views:(F.views||0)+(B.views||0),likes:(F.likes||0)+(B.likes||0),comments:(F.comments||0)+(B.comments||0),shares:(F.shares||0)+(B.shares||0)}),{});return{labels:["Views","Likes","Comments","Shares"],datasets:[{data:[O.views||0,O.likes||0,O.comments||0,O.shares||0],backgroundColor:["#10b981","#3b82f6","#8b5cf6","#ec4899"]}]}},N=P=>{const $={};return P.forEach(j=>{const O=gi(new Date(j.created_at),"MMM yyyy");$[O]=($[O]||0)+(j.quantity||0)}),{labels:Object.keys($),datasets:[{label:"E-Waste Collected (kg)",data:Object.values($),backgroundColor:"rgba(16, 185, 129, 0.2)",borderColor:"#10b981",borderWidth:2,tension:.4,fill:!0}]}},A=async()=>{f(!0),await v(),f(!1)},T=(P,$)=>{if(!P||!Array.isArray(P)||P.length===0){console.error("No valid data provided for CSV download");return}const j=Nft.unparse(P),O=new Blob([j],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(O),F.download=`${$}_${gi(new Date,"yyyy-MM-dd")}.csv`,F.click()},C=async()=>{var P;try{y(!0);const $=new Yt;$.setFontSize(20),$.text("E-Waste Management Analytics Report",15,20),$.setFontSize(12),$.text(`Report Period: ${(P=NK.find(O=>O.value===s))==null?void 0:P.label}`,15,30),$.text(`Generated on: ${gi(new Date,"PPP")}`,15,38),$.setFontSize(16),$.text("Key Metrics Summary",15,50),$.setFontSize(11),$.text(` Total E-Waste Recycled: ${a.totalWaste} kg`,20,60),$.text(` Total Repairs Completed: ${a.totalRepairs}`,20,68),$.text(` Marketplace Sales: ${a.totalSales}`,20,76),$.text(` Educational Content Created: ${a.totalContent}`,20,84),$.text(` Active Users: ${a.activeUsers}`,20,92),$.setFontSize(16),$.text("Recent Activity",15,105);const j=u.map(O=>[gi(new Date(O.date),"yyyy-MM-dd"),O.title,O.user||"Unknown",O.details]);$.autoTable({head:[["Date","Activity","User","Details"]],body:j,startY:110,margin:{top:10}}),$.save(`ewaste_analytics_report_${gi(new Date,"yyyy-MM-dd")}.pdf`)}catch($){console.error("Error generating PDF:",$),alert("Failed to generate PDF report. Please try again.")}finally{y(!1)}};return t?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):n?p.jsxs("div",{className:"bg-red-50 p-4 rounded-lg flex items-center",children:[p.jsx(Qp,{className:"h-5 w-5 text-red-500 mr-2"}),p.jsx("span",{className:"text-red-700",children:n})]}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("select",{value:s,onChange:P=>i(P.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:NK.map(P=>p.jsx("option",{value:P.value,children:P.label},P.value))}),p.jsx("button",{onClick:A,disabled:h,className:"p-2 text-gray-600 hover:text-gray-900 disabled:opacity-50",children:p.jsx(nR,{className:`h-5 w-5 ${h?"animate-spin":""}`})})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsxs("button",{onClick:()=>T(u,"activity_report"),disabled:!(u!=null&&u.length),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx(JB,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),p.jsxs("button",{onClick:C,disabled:!(u!=null&&u.length)||m,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx(JB,{className:`h-4 w-4 mr-2 ${m?"animate-spin":""}`}),"Export PDF"]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:p.jsx(s7,{className:"h-6 w-6 text-emerald-600"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total E-Waste"}),p.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[a.totalWaste," kg"]})]})]}),p.jsxs("div",{className:`flex items-center ${a.trends.waste>=0?"text-green-600":"text-red-600"}`,children:[a.trends.waste>=0?p.jsx(Hs,{className:"h-4 w-4 mr-1"}):p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.trends.waste).toFixed(1),"%"]})]})]})}),p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:p.jsx(ha,{className:"h-6 w-6 text-blue-600"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Repairs"}),p.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.totalRepairs})]})]}),p.jsxs("div",{className:`flex items-center ${a.trends.repairs>=0?"text-green-600":"text-red-600"}`,children:[a.trends.repairs>=0?p.jsx(Hs,{className:"h-4 w-4 mr-1"}):p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.trends.repairs).toFixed(1),"%"]})]})]})}),p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:p.jsx(m0,{className:"h-6 w-6 text-purple-600"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Marketplace Sales"}),p.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.totalSales})]})]}),p.jsxs("div",{className:`flex items-center ${a.trends.sales>=0?"text-green-600":"text-red-600"}`,children:[a.trends.sales>=0?p.jsx(Hs,{className:"h-4 w-4 mr-1"}):p.jsx(Pd,{className:"h-4 w-4 mr-1"}),p.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.trends.sales).toFixed(1),"%"]})]})]})}),p.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:p.jsx(Lx,{className:"h-6 w-6 text-amber-600"})}),p.jsxs("div",{className:"ml-3",children:[p.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),p.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.activeUsers})]})]}),p.jsxs("div",{className:"flex items-center text-green-600",children:[p.jsx(Hs,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"text-sm font-medium",children:"Active"})]})]})})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"E-Waste Collection Trend"}),p.jsx("div",{className:"h-64",children:l.wasteOverTime&&p.jsx(_ft,{data:l.wasteOverTime,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Amount in kg"}},x:{title:{display:!0,text:"Month"}}}}})})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Repairs by Device Type"}),p.jsx("div",{className:"h-64",children:l.repairsByType&&p.jsx(kft,{data:l.repairsByType,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom",labels:{boxWidth:12}}}}})})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Marketplace Sales by Category"}),p.jsx("div",{className:"h-64",children:l.salesByCategory&&p.jsx(sK,{data:l.salesByCategory,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Educational Content Engagement"}),p.jsx("div",{className:"h-64",children:l.contentEngagement&&p.jsx(sK,{data:l.contentEngagement,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})]}),p.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-gray-200",children:p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),p.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:u.length>0?u.map((P,$)=>p.jsx("div",{className:"p-6 hover:bg-gray-50",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`p-2 rounded-lg ${P.type==="pickup"?"bg-emerald-100 text-emerald-600":P.type==="repair"?"bg-blue-100 text-blue-600":P.type==="order"?"bg-purple-100 text-purple-600":"bg-amber-100 text-amber-600"}`,children:P.type==="pickup"?p.jsx(s7,{className:"h-5 w-5"}):P.type==="repair"?p.jsx(ha,{className:"h-5 w-5"}):P.type==="order"?p.jsx(m0,{className:"h-5 w-5"}):p.jsx(h5,{className:"h-5 w-5"})}),p.jsxs("div",{className:"ml-4 flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.title}),p.jsx("span",{className:"text-sm text-gray-500",children:gi(new Date(P.date),"MMM d, h:mm a")})]}),p.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[P.user," - ",P.details]})]})]})},$)):p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No recent activity"})})]})]})}function Ipt(){const t=Wc(),[e,n]=R.useState([]),[r,s]=R.useState(!0),[i,a]=R.useState(null),[o,l]=R.useState(!1),[c,u]=R.useState(null),[d,h]=R.useState([]),[f,m]=R.useState(!1),[y,v]=R.useState("all"),[x,b]=R.useState(""),[_,k]=R.useState("analytics"),[N,A]=R.useState(new Date().toISOString().slice(0,7)),[T,C]=R.useState(!1);R.useEffect(()=>{P(),$()},[]);const P=async()=>{try{const{data:{user:B}}=await tt.auth.getUser();if(!B){t("/login");return}const{data:Z,error:V}=await tt.from("profiles").select("role").eq("id",B.id).single();if(V)throw V;(Z==null?void 0:Z.role)!=="admin"&&t("/login")}catch(B){console.error("Error checking admin:",B),a("Error verifying admin access")}},$=async()=>{try{s(!0);const{data:B,error:Z}=await tt.from("profiles").select("*").order("created_at",{ascending:!1});if(Z)throw Z;n(B||[])}catch(B){console.error("Error fetching users:",B),a("Error fetching users")}finally{s(!1)}},j=async(B,Z)=>{try{if(B==="delete"){const{error:V}=await tt.from("profiles").delete().eq("id",Z);if(V)throw V;n(U=>U.filter(K=>K.id!==Z));const G={id:Date.now(),message:"User removed successfully",type:"success",time:new Date};h(U=>[G,...U]),m(!0)}else if(B==="update"&&c){const{error:V}=await tt.from("profiles").update({role:c.role,full_name:c.full_name}).eq("id",c.id);if(V)throw V;l(!1),await $()}}catch(V){console.error("Error performing user action:",V);const G={id:Date.now(),message:`Error: ${V.message||"Something went wrong"}`,type:"error",time:new Date};h(U=>[G,...U]),m(!0)}},O=async()=>{try{await tt.auth.signOut(),t("/login")}catch(B){console.error("Error signing out:",B),a("Error signing out")}},F=async()=>{C(!0);try{const[B,Z]=N.split("-"),V=new Date(B,Z-1,1).toISOString(),G=new Date(B,Z,0).toISOString(),{data:U,error:K}=await tt.from("ewaste_records").select("amount").gte("created_at",V).lt("created_at",G);if(K)throw K;const ee=U.reduce((te,me)=>te+me.amount,0),{data:oe,error:W}=await tt.from("profiles").select("id").gte("created_at",V).lt("created_at",G);if(W)throw W;const Y=oe.length,Q=new Yt,J=new Date(B,Z-1).toLocaleString("default",{month:"long",year:"numeric"});Q.setFontSize(16),Q.text(`Monthly Report - ${J}`,10,10),Q.setFontSize(12),Q.text(`Total e-waste collected: ${ee} kg`,10,20),Q.text(`New users: ${Y}`,10,30),Q.save(`report_${N}.pdf`)}catch(B){console.error("Error generating report:",B),a("Error generating report")}finally{C(!1)}};return i?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-md text-center",children:[p.jsx(Qp,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),p.jsx("p",{className:"text-gray-600 mb-4",children:i}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 transition-colors",children:"Try again"})]})}):r?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-emerald-600"})}):p.jsx(clt,{children:p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx("nav",{className:"bg-white shadow-sm",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(Qn,{to:"/",className:"flex items-center",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Admin Dashboard"})]})}),p.jsx("div",{className:"flex items-center space-x-4",children:p.jsx("button",{onClick:O,className:"text-gray-600 hover:text-gray-900",children:p.jsx(Dx,{className:"h-5 w-5"})})})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"mb-6 border-b border-gray-200",children:p.jsxs("nav",{className:"-mb-px flex space-x-8",children:[p.jsxs("button",{onClick:()=>k("analytics"),className:`${_==="analytics"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[p.jsx(d5,{className:"h-5 w-5 mr-2"}),"Analytics"]}),p.jsxs("button",{onClick:()=>k("users"),className:`${_==="users"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"} whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[p.jsx(Lx,{className:"h-5 w-5 mr-2"}),"Users"]})]})}),_==="analytics"?p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4 flex items-center space-x-4",children:[p.jsx("label",{htmlFor:"month-select",className:"text-sm font-medium text-gray-700",children:"Select Month:"}),p.jsx("input",{type:"month",id:"month-select",value:N,onChange:B=>A(B.target.value),className:"border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:ring-emerald-500 focus:border-emerald-500"}),p.jsx("button",{onClick:F,disabled:T,className:`px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 ${T?"opacity-50 cursor-not-allowed":""}`,children:T?"Generating...":"Generate Report"})]}),p.jsx(Tpt,{selectedMonth:N})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(q0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",placeholder:"Search users...",value:x,onChange:B=>b(B.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"})]}),p.jsx("div",{className:"flex items-center space-x-2",children:p.jsxs("select",{value:y,onChange:B=>v(B.target.value),className:"border border-gray-300 rounded-md shadow-sm py-2 pl-3 pr-10 text-gray-700 focus:ring-emerald-500 focus:border-emerald-500",children:[p.jsx("option",{value:"all",children:"All Roles"}),p.jsx("option",{value:"user",children:"Users"}),p.jsx("option",{value:"recycler",children:"Recyclers"}),p.jsx("option",{value:"technician",children:"Technicians"}),p.jsx("option",{value:"educator",children:"Educators"})]})})]})}),p.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-gray-200",children:p.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Users"})}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),p.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.filter(B=>{var Z,V;if(y!=="all"&&B.role!==y)return!1;if(x){const G=x.toLowerCase();return((Z=B.full_name)==null?void 0:Z.toLowerCase().includes(G))||((V=B.email)==null?void 0:V.toLowerCase().includes(G))}return!0}).map(B=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.full_name})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-gray-500",children:B.email})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${B.role==="admin"?"bg-purple-100 text-purple-800":B.role==="recycler"?"bg-green-100 text-green-800":B.role==="technician"?"bg-blue-100 text-blue-800":B.role==="educator"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:B.role})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.created_at).toLocaleDateString()}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[p.jsx("button",{onClick:()=>{u(B),l(!0)},className:"text-emerald-600 hover:text-emerald-900 mr-3",children:p.jsx(cZ,{className:"h-5 w-5"})}),p.jsx("button",{onClick:()=>j("delete",B.id),className:"text-red-600 hover:text-red-900",children:p.jsx(dZ,{className:"h-5 w-5"})})]})]},B.id))})]})})]})]})]}),o&&c&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit User"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),p.jsx("input",{type:"text",value:c.full_name,onChange:B=>u({...c,full_name:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),p.jsxs("select",{value:c.role,onChange:B=>u({...c,role:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:[p.jsx("option",{value:"user",children:"User"}),p.jsx("option",{value:"recycler",children:"Recycler"}),p.jsx("option",{value:"technician",children:"Technician"}),p.jsx("option",{value:"educator",children:"Educator"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[p.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),p.jsx("button",{onClick:()=>j("update"),className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:"Save Changes"})]})]})]})})]})})}const Apt={like_new:"bg-emerald-100 text-emerald-800",good:"bg-blue-100 text-blue-800",fair:"bg-amber-100 text-amber-800"},Ept={like_new:"Like New",good:"Good",fair:"Fair"};function Ppt({product:t}){const e=t.images[0]||"https://images.unsplash.com/photo-1526406915894-7bcd65f60845?w=800&auto=format&fit=crop&q=60";return p.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[p.jsxs("div",{className:"relative aspect-square",children:[p.jsx("img",{src:e,alt:t.title,className:"w-full h-full object-cover"}),p.jsx("div",{className:`absolute top-2 right-2 ${Apt[t.condition]} px-2 py-1 rounded-full text-xs font-medium`,children:Ept[t.condition]})]}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:t.title}),p.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:["$",t.price]})]}),p.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.description}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(uZ,{className:"w-4 h-4 text-gray-500"}),p.jsx("span",{className:"text-sm text-gray-600",children:t.category})]}),p.jsxs(Qn,{to:`/marketplace/${t.id}`,className:"inline-flex items-center px-3 py-2 border border-emerald-600 text-sm font-medium rounded-md text-emerald-600 hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500",children:[p.jsx(x0e,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})]})}const Opt=["Smartphones","Laptops","Tablets","Desktops","Monitors","Accessories","Other"],jpt=[{value:"like_new",label:"Like New"},{value:"good",label:"Good"},{value:"fair",label:"Fair"}];function $pt(){const[t,e]=R.useState([]),[n,r]=R.useState(!0),[s,i]=R.useState({category:"",condition:"",minPrice:"",maxPrice:"",search:""});R.useEffect(()=>{a()},[s]);const a=async()=>{try{let l=tt.from("products").select(`
          *,
          seller:profiles(full_name)
        `).eq("status","available").order("created_at",{ascending:!1});s.category&&(l=l.eq("category",s.category)),s.condition&&(l=l.eq("condition",s.condition)),s.minPrice&&(l=l.gte("price",parseFloat(s.minPrice))),s.maxPrice&&(l=l.lte("price",parseFloat(s.maxPrice))),s.search&&(l=l.or(`title.ilike.%${s.search}%,description.ilike.%${s.search}%`));const{data:c,error:u}=await l;if(u)throw u;e(c||[])}catch(l){console.error("Error fetching products:",l)}finally{r(!1)}},o=()=>{i({category:"",condition:"",minPrice:"",maxPrice:"",search:""})};return n?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:p.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:space-y-0 md:space-x-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"relative",children:[p.jsx(q0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),p.jsx("input",{type:"text",placeholder:"Search products...",value:s.search,onChange:l=>i({...s,search:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"})]})}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsxs("select",{value:s.category,onChange:l=>i({...s,category:l.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500",children:[p.jsx("option",{value:"",children:"All Categories"}),Opt.map(l=>p.jsx("option",{value:l,children:l},l))]}),p.jsxs("select",{value:s.condition,onChange:l=>i({...s,condition:l.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500",children:[p.jsx("option",{value:"",children:"All Conditions"}),jpt.map(l=>p.jsx("option",{value:l.value,children:l.label},l.value))]}),p.jsx("input",{type:"number",placeholder:"Min Price",value:s.minPrice,onChange:l=>i({...s,minPrice:l.target.value}),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"}),p.jsx("input",{type:"number",placeholder:"Max Price",value:s.maxPrice,onChange:l=>i({...s,maxPrice:l.target.value}),className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"}),(s.category||s.condition||s.minPrice||s.maxPrice||s.search)&&p.jsxs("button",{onClick:o,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[p.jsx(il,{className:"h-4 w-4 mr-1"}),"Clear"]})]})]})}),t.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(l=>p.jsx(Ppt,{product:l},l.id))}):p.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[p.jsx(eR,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or search criteria."})]})]})}function Dpt(){const t=$x(),{theme:e}=bJ(),[n,r]=R.useState(""),[s,i]=R.useState(!1),[a,o]=R.useState("buy"),[l,c]=R.useState(!1);return R.useEffect(()=>{var d;if((d=t.state)!=null&&d.message){r(t.state.message);const h=setTimeout(()=>{r("")},5e3);return()=>clearTimeout(h)}(async()=>{const{data:{user:h}}=await tt.auth.getUser();i(!!h)})()},[t]),p.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[p.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(Qn,{to:"/",className:"flex items-center",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 dark:text-white",children:"E-Waste Manager"})]})}),p.jsx("div",{className:"flex items-center space-x-4",children:s?p.jsxs(p.Fragment,{children:[p.jsxs(Qn,{to:"/marketplace/orders",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[p.jsx(m0,{className:"h-4 w-4 mr-2"}),"My Orders"]}),p.jsxs(Qn,{to:"/marketplace/sell",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700",children:[p.jsx(yo,{className:"h-4 w-4 mr-2"}),"Sell Item"]}),p.jsx(Qn,{to:"/login",className:"text-gray-600 hover:text-gray-900",children:p.jsx(Dx,{className:"h-5 w-5"})})]}):p.jsx(Qn,{to:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700",children:"Sign In to Sell"})})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[n&&p.jsx("div",{className:"mb-6 p-4 bg-emerald-50 text-emerald-700 rounded-md",children:n}),p.jsxs("div",{className:"px-4 sm:px-0 mb-6",children:[p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Marketplace"}),p.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Browse refurbished electronics, swap items, or bid on vintage tech"})]}),p.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 p-1 rounded-lg border border-gray-200 dark:border-gray-700",children:[p.jsxs("button",{onClick:()=>o("buy"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${a==="buy"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(m0,{className:"h-4 w-4 inline-block mr-2"}),"Buy"]}),p.jsxs("button",{onClick:()=>o("swap"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${a==="swap"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(y0e,{className:"h-4 w-4 inline-block mr-2"}),"Swap"]}),p.jsxs("button",{onClick:()=>o("auction"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${a==="auction"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[p.jsx(r0e,{className:"h-4 w-4 inline-block mr-2"}),"Auction"]})]})]}),p.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[p.jsxs("button",{onClick:()=>c(!l),className:`flex items-center px-3 py-1.5 rounded-full text-sm font-medium border transition-all ${l?"bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/20 dark:border-emerald-800 dark:text-emerald-400":"bg-white border-gray-200 text-gray-600 hover:border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300"}`,children:[p.jsx(Wi,{className:"h-4 w-4 mr-2"}),"Verified Refurbished"]}),p.jsxs("button",{className:"flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-white border border-gray-200 text-gray-600 hover:border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 transition-all",children:[p.jsx(eR,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),p.jsx("div",{className:"mt-6",children:p.jsx($pt,{type:a,refurbishedOnly:l})})]})]})}const Lpt={like_new:"Like New",good:"Good",fair:"Fair"};function Rpt(){var A;const{id:t}=gge(),e=Wc(),[n,r]=R.useState(null),[s,i]=R.useState(!0),[a,o]=R.useState(0),[l,c]=R.useState(!1),[u,d]=R.useState([]),[h,f]=R.useState(""),[m,y]=R.useState(0),[v,x]=R.useState(0);R.useEffect(()=>{b(),_()},[t]),R.useEffect(()=>{n&&(x(n.price),y(n.price))},[n]);const b=async()=>{try{const{data:T,error:C}=await tt.from("products").select(`
          *,
          seller:profiles(full_name, email)
        `).eq("id",t).single();if(C)throw C;r(T)}catch(T){console.error("Error fetching product:",T),e("/marketplace")}finally{i(!1)}},_=async()=>{try{const{data:{user:T}}=await tt.auth.getUser();if(!T)return;const{data:C,error:P}=await tt.from("user_rewards").select(`
          *,
          reward:rewards(*)
        `).eq("user_id",T.id).eq("is_used",!1).order("redeemed_at",{ascending:!1});if(P)throw P;d(C||[])}catch(T){console.error("Error fetching user rewards:",T)}},k=T=>{const C=T.target.value;if(f(C),!C){y(v);return}const P=u.find($=>$.id===C);if(P){const $=P.reward.discount_percentage,j=v*(1-$/100);y(Math.max(0,j).toFixed(2))}},N=async()=>{try{c(!0);const{data:{user:T}}=await tt.auth.getUser();if(!T){e("/login");return}const{data:C}=await tt.from("profiles").select("full_name, email").eq("id",T.id).single(),{data:P,error:$}=await tt.from("orders").insert([{buyer_id:T.id,seller_id:n.seller_id,product_id:n.id,shipping_address:"Please update your shipping address",status:"pending"}]).select().single();if($)throw $;await tt.from("products").update({status:"sold"}).eq("id",n.id),h&&await tt.from("user_rewards").update({is_used:!0,used_at:new Date().toISOString()}).eq("id",h),e("/marketplace/orders",{state:{message:"Order placed successfully!"}})}catch(T){console.error("Error initiating purchase:",T),alert("There was an error processing your purchase. Please try again.")}finally{c(!1)}};return s?p.jsx("div",{className:"flex justify-center items-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):n?p.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsxs("button",{onClick:()=>e("/marketplace"),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-8",children:[p.jsx(YB,{className:"h-4 w-4 mr-1"}),"Back to Marketplace"]}),p.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 p-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"aspect-square relative rounded-lg overflow-hidden bg-gray-200",children:[p.jsx("img",{src:n.images&&n.images.length>0?n.images[a]:"https://images.unsplash.com/photo-1526406915894-7bcd65f60845?w=800&auto=format&fit=crop&q=60",alt:n.title,className:"w-full h-full object-cover"}),n.images&&n.images.length>1&&p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:()=>o(T=>T===0?n.images.length-1:T-1),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-2 hover:bg-white",children:p.jsx(YB,{className:"h-6 w-6"})}),p.jsx("button",{onClick:()=>o(T=>T===n.images.length-1?0:T+1),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-2 hover:bg-white",children:p.jsx(Zge,{className:"h-6 w-6"})})]})]}),n.images&&n.images.length>1&&p.jsx("div",{className:"grid grid-cols-4 gap-2",children:n.images.map((T,C)=>p.jsx("button",{onClick:()=>o(C),className:`aspect-square rounded-lg overflow-hidden ${C===a?"ring-2 ring-emerald-500":""}`,children:p.jsx("img",{src:T,alt:`Product image ${C+1}`,className:"w-full h-full object-cover"})},C))})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.title}),p.jsx("div",{className:"mt-2 flex items-baseline",children:h&&m<v?p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["$",m]}),p.jsxs("p",{className:"ml-2 text-lg line-through text-gray-500",children:["$",v]})]}):p.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["$",n.price]})})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n.condition==="like_new"?"bg-emerald-100 text-emerald-800":n.condition==="good"?"bg-blue-100 text-blue-800":"bg-amber-100 text-amber-800"}`,children:Lpt[n.condition]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(uZ,{className:"h-4 w-4 mr-1"}),n.category]})]}),p.jsxs("div",{className:"prose max-w-none",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Description"}),p.jsx("p",{className:"mt-2 text-gray-600",children:n.description})]}),p.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(g0,{className:"h-5 w-5 text-gray-400"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Seller"}),p.jsx("p",{className:"font-medium text-gray-900",children:((A=n.seller)==null?void 0:A.full_name)||"Unknown Seller"})]})]}),p.jsxs("div",{className:"mt-4 flex items-center space-x-4",children:[p.jsx(p0,{className:"h-5 w-5 text-gray-400"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-gray-500",children:"Listed"}),p.jsx("p",{className:"font-medium text-gray-900",children:new Date(n.created_at).toLocaleDateString()})]})]})]}),u.length>0&&n.status==="available"&&p.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx(y2,{className:"h-5 w-5 text-emerald-600 mr-2"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Apply Reward"})]}),p.jsxs("select",{value:h,onChange:k,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:[p.jsx("option",{value:"",children:"No reward"}),u.map(T=>p.jsxs("option",{value:T.id,children:[T.reward.title," (",T.reward.discount_percentage,"% off)"]},T.id))]})]}),p.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[p.jsx("button",{onClick:N,disabled:l||n.status!=="available",className:`w-full flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white ${n.status==="available"?"bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500":"bg-gray-400 cursor-not-allowed"} disabled:opacity-50`,children:l?"Processing...":n.status==="available"?"Purchase Now":"Sold Out"}),p.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600 flex items-center justify-center",children:[p.jsx(lZ,{className:"h-4 w-4 mr-1"}),"Secure transaction"]})]})]})]})})]})}):p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[p.jsx(Qp,{className:"h-12 w-12 text-red-500 mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Not Found"}),p.jsx("p",{className:"mt-2 text-gray-600",children:"This product may have been removed or sold."}),p.jsx("button",{onClick:()=>e("/marketplace"),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700",children:"Back to Marketplace"})]})}const nL=["Smartphones","Laptops","Tablets","Desktops","Monitors","Accessories","Other"],Mpt=[{value:"like_new",label:"Like New"},{value:"good",label:"Good"},{value:"fair",label:"Fair"}],Fpt=GJ({title:cp().min(1,"Title is required").max(100),description:cp().min(10,"Description must be at least 10 characters"),price:H1e().min(.01,"Price must be greater than 0"),category:vW(nL),condition:vW(["like_new","good","fair"])});function zpt(){const t=Wc(),[e,n]=R.useState(!1),[r,s]=R.useState([]),[i,a]=R.useState(""),[o,l]=R.useState(null),[c,u]=R.useState(!1),[d,h]=R.useState("");R.useEffect(()=>{(async()=>{try{const{data:{user:N}}=await tt.auth.getUser();if(!N){t("/login",{state:{message:"Please log in to sell items"}});return}const{data:A,error:T}=await tt.from("profiles").select("role").eq("id",N.id).single();if(T){console.error("Error fetching profile:",T),h("Error fetching your profile. Please try again.");return}l(N)}catch(N){console.error("Authentication error:",N),h("Authentication error. Please try again.")}})()},[t]);const{register:f,handleSubmit:m,formState:{errors:y},reset:v}=OI({resolver:UJ(Fpt),defaultValues:{category:nL[0],condition:"like_new",price:""}}),x=async k=>{const N=Array.from(k.target.files);if(N.length+r.length>4){a("Maximum 4 images allowed");return}n(!0),a("");try{const T=["https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60","https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=800&auto=format&fit=crop&q=60"].slice(0,N.length);s(C=>[...C,...T])}catch(A){console.error("Error uploading images:",A),a("Error uploading images. Please try again.")}finally{n(!1)}},b=k=>{s(N=>N.filter((A,T)=>T!==k))},_=async k=>{try{if(u(!0),h(""),!o){t("/login");return}const{data:N,error:A}=await tt.from("products").insert([{seller_id:o.id,title:k.title,description:k.description,price:k.price,category:k.category,condition:k.condition,images:r.length>0?r:[],status:"available"}]).select();if(A){console.error("Error creating product:",A),h("Failed to create listing: "+A.message);return}v(),s([]),t("/marketplace",{state:{message:"Your item has been listed successfully!"}})}catch(N){console.error("Error creating product:",N),h("There was an error creating your listing. Please try again.")}finally{u(!1)}};return p.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("button",{onClick:()=>t("/marketplace"),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[p.jsx(ZY,{className:"h-4 w-4 mr-1"}),"Back to Marketplace"]})}),p.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"List Your Item"}),d&&p.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md",children:d}),p.jsxs("form",{onSubmit:m(_),className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),p.jsx("input",{type:"text",...f("title"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Enter product title"}),y.title&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.title.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("textarea",{...f("description"),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Describe your item (condition, features, etc.)"}),y.description&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.description.message})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price ($)"}),p.jsx("input",{type:"number",step:"0.01",...f("price",{valueAsNumber:!0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",placeholder:"0.00"}),y.price&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.price.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),p.jsx("select",{...f("category"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:nL.map(k=>p.jsx("option",{value:k,children:k},k))}),y.category&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.category.message})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condition"}),p.jsx("select",{...f("condition"),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:Mpt.map(k=>p.jsx("option",{value:k.value,children:k.label},k.value))}),y.condition&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.condition.message})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Images (Optional)"}),p.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsx(hZ,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsxs("div",{className:"flex text-sm text-gray-600",children:[p.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-emerald-600 hover:text-emerald-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-emerald-500",children:[p.jsx("span",{children:"Upload images"}),p.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:x,disabled:e,className:"sr-only"})]}),p.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB (max 4 images)"})]})}),i&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:i}),e&&p.jsxs("div",{className:"mt-2 flex items-center justify-center text-sm text-gray-600",children:[p.jsx(v2,{className:"animate-spin h-4 w-4 mr-2"}),"Uploading..."]}),r.length>0&&p.jsx("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-4 gap-2",children:r.map((k,N)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:k,alt:`Product image ${N+1}`,className:"h-24 w-full object-cover rounded-md"}),p.jsx("button",{type:"button",onClick:()=>b(N),className:"absolute -top-2 -right-2 bg-red-100 rounded-full p-1 text-red-600 hover:bg-red-200",children:p.jsx(il,{className:"h-4 w-4"})})]},N))})]}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx("button",{type:"button",onClick:()=>t("/marketplace"),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:c||e,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:c?"Creating...":"Create Listing"})]})]})]})]})})}const Bpt={pending:"bg-yellow-100 text-yellow-800",paid:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},Wpt={pending:p.jsx(Qp,{className:"h-5 w-5"}),paid:p.jsx(yo,{className:"h-5 w-5"}),shipped:p.jsx(Uh,{className:"h-5 w-5"}),completed:p.jsx(Wi,{className:"h-5 w-5"}),cancelled:p.jsx($v,{className:"h-5 w-5"})};function Upt({type:t="buyer"}){const[e,n]=R.useState([]),[r,s]=R.useState(!0),[i,a]=R.useState(null);R.useEffect(()=>{o();const c=tt.channel("order_updates").on("postgres_changes",{event:"*",schema:"public",table:"orders"},u=>{u.eventType==="UPDATE"&&n(d=>d.map(h=>h.id===u.new.id?{...h,...u.new}:h))}).subscribe();return()=>{tt.removeChannel(c)}},[t]);const o=async()=>{try{const{data:{user:c}}=await tt.auth.getUser();if(!c){s(!1);return}let u=tt.from("orders").select("*, product:products(*), buyer:profiles!buyer_id(*), seller:profiles!seller_id(*)").order("created_at",{ascending:!1});t==="buyer"?u=u.eq("buyer_id",c.id):u=u.eq("seller_id",c.id);const{data:d,error:h}=await u;if(h)throw h;n(d||[])}catch(c){console.error("Error fetching orders:",c)}finally{s(!1)}},l=async(c,u)=>{try{a(c);const{error:d}=await tt.from("orders").update({status:u}).eq("id",c);if(d)throw d;n(h=>h.map(f=>f.id===c?{...f,status:u}:f))}catch(d){console.error("Error updating order status:",d)}finally{a(null)}};return r?p.jsx("div",{className:"flex justify-center items-center h-48",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"space-y-6",children:[e.map(c=>{var u,d,h,f,m,y;return p.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${Bpt[c.status]}`,children:[Wpt[c.status],p.jsx("span",{className:"ml-2 capitalize",children:c.status})]}),p.jsxs("span",{className:"text-sm text-gray-500",children:["Order #",c.id.slice(0,8)]})]}),p.jsx("span",{className:"text-sm text-gray-500",children:gi(new Date(c.created_at),"PPp")})]}),p.jsxs("div",{className:"flex items-start space-x-4",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("img",{src:(u=c.product)!=null&&u.images&&c.product.images.length>0?c.product.images[0]:"https://images.unsplash.com/photo-1526406915894-7bcd65f60845?w=800&auto=format&fit=crop&q=60",alt:((d=c.product)==null?void 0:d.title)||"Product",className:"w-24 h-24 object-cover rounded-lg"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"text-lg font-medium text-gray-900",children:((h=c.product)==null?void 0:h.title)||"Product"}),p.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[t==="buyer"?"Sold by":"Purchased by",": ",t==="buyer"?(f=c.seller)==null?void 0:f.full_name:(m=c.buyer)==null?void 0:m.full_name]}),p.jsxs("p",{className:"mt-1 text-lg font-medium text-emerald-600",children:["$",((y=c.product)==null?void 0:y.price)||"0.00"]})]})]}),p.jsx("div",{className:"mt-6 border-t border-gray-200 pt-4",children:p.jsxs("div",{className:"flex items-start",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"Shipping Address"}),p.jsx("p",{className:"mt-1 text-sm text-gray-600",children:c.shipping_address})]}),t==="seller"&&c.status!=="completed"&&c.status!=="cancelled"&&p.jsx("div",{className:"ml-4",children:p.jsxs("select",{value:c.status,onChange:v=>l(c.id,v.target.value),disabled:i===c.id,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 disabled:opacity-50",children:[p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"paid",children:"Paid"}),p.jsx("option",{value:"shipped",children:"Shipped"}),p.jsx("option",{value:"completed",children:"Completed"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]})})]})},c.id)}),e.length===0&&p.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[p.jsx(yo,{className:"mx-auto h-12 w-12 text-gray-400"}),p.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders found"}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t==="buyer"?"Start shopping in the marketplace to see your orders here.":"Your sold items will appear here."})]})]})}function Vpt(){const[t,e]=R.useState("purchases");return p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx("nav",{className:"bg-white shadow-sm",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(Qn,{to:"/marketplace",className:"flex items-center",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"E-Waste Manager"})]})}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs(Qn,{to:"/marketplace/sell",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700",children:[p.jsx(yo,{className:"h-4 w-4 mr-2"}),"Sell Item"]}),p.jsx(Qn,{to:"/login",className:"text-gray-600 hover:text-gray-900",children:p.jsx(Dx,{className:"h-5 w-5"})})]})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"px-4 sm:px-0",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Orders"}),p.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your purchases and sales"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("div",{className:"sm:hidden",children:p.jsxs("select",{value:t,onChange:n=>e(n.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",children:[p.jsx("option",{value:"purchases",children:"My Purchases"}),p.jsx("option",{value:"sales",children:"My Sales"})]})}),p.jsx("div",{className:"hidden sm:block",children:p.jsxs("nav",{className:"flex space-x-4 mb-6","aria-label":"Tabs",children:[p.jsx("button",{onClick:()=>e("purchases"),className:`${t==="purchases"?"bg-emerald-100 text-emerald-700":"text-gray-500 hover:text-gray-700"} px-3 py-2 font-medium text-sm rounded-md`,children:"My Purchases"}),p.jsx("button",{onClick:()=>e("sales"),className:`${t==="sales"?"bg-emerald-100 text-emerald-700":"text-gray-500 hover:text-gray-700"} px-3 py-2 font-medium text-sm rounded-md`,children:"My Sales"})]})}),p.jsx(Upt,{type:t==="purchases"?"buyer":"seller"})]})]})]})}function Hpt(){const t=Wc(),[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,a]=R.useState(!1),[o,l]=R.useState({type:"",text:""}),[c,u]=R.useState({full_name:"",email:"",phone:"",address:"",current_password:"",new_password:"",confirm_password:""}),[d,h]=R.useState("profile");R.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0);const{data:{user:b}}=await tt.auth.getUser();if(!b){t("/login");return}const{data:_,error:k}=await tt.from("profiles").select("*").eq("id",b.id).single();if(k)throw k;n({...b,..._}),u({full_name:_.full_name||"",email:_.email||b.email||"",phone:_.phone||"",address:_.address||"",current_password:"",new_password:"",confirm_password:""})}catch(b){console.error("Error fetching profile:",b),l({type:"error",text:"Failed to load profile information. Please try again."})}finally{s(!1)}},m=b=>{const{name:_,value:k}=b.target;u(N=>({...N,[_]:k}))},y=async b=>{b.preventDefault();try{a(!0),l({type:"",text:""});const{error:_}=await tt.from("profiles").update({full_name:c.full_name,phone:c.phone,address:c.address,updated_at:new Date().toISOString()}).eq("id",e.id);if(_)throw _;if(c.email!==e.email){const{error:k}=await tt.auth.updateUser({email:c.email});if(k)throw k}l({type:"success",text:"Profile updated successfully!"}),f()}catch(_){console.error("Error updating profile:",_),l({type:"error",text:_.message||"Failed to update profile. Please try again."})}finally{a(!1)}},v=async b=>{b.preventDefault();try{if(a(!0),l({type:"",text:""}),c.new_password!==c.confirm_password){l({type:"error",text:"New passwords do not match."});return}if(c.new_password.length<6){l({type:"error",text:"Password must be at least 6 characters long."});return}const{error:_}=await tt.auth.updateUser({password:c.new_password});if(_)throw _;l({type:"success",text:"Password updated successfully!"}),u(k=>({...k,current_password:"",new_password:"",confirm_password:""}))}catch(_){console.error("Error updating password:",_),l({type:"error",text:_.message||"Failed to update password. Please try again."})}finally{a(!1)}},x=async()=>{try{await tt.auth.signOut(),t("/login")}catch(b){console.error("Error signing out:",b),l({type:"error",text:"Failed to sign out. Please try again."})}};return r?p.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-emerald-600"})}):p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx("nav",{className:"bg-white shadow-sm",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between h-16 items-center",children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(Qn,{to:"/",className:"flex items-center",children:[p.jsx(Wa,{className:"h-8 w-8 text-emerald-600"}),p.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"E-Waste Manager"})]})}),p.jsx("div",{className:"flex items-center space-x-4",children:p.jsx("button",{onClick:x,className:"text-gray-600 hover:text-gray-900",children:p.jsx(Dx,{className:"h-5 w-5"})})})]})})}),p.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[p.jsx("div",{className:"mb-6",children:p.jsxs("button",{onClick:()=>t(`/dashboard/${e.role}`),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[p.jsx(ZY,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]})}),p.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[p.jsx("div",{className:"p-6 border-b border-gray-200",children:p.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"})}),p.jsxs("div",{className:"flex flex-col md:flex-row",children:[p.jsx("div",{className:"w-full md:w-64 bg-gray-50 p-6",children:p.jsxs("nav",{className:"space-y-1",children:[p.jsxs("button",{onClick:()=>h("profile"),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${d==="profile"?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[p.jsx(g0,{className:"h-5 w-5 mr-2"}),"Profile Information"]}),p.jsxs("button",{onClick:()=>h("security"),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${d==="security"?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[p.jsx(lZ,{className:"h-5 w-5 mr-2"}),"Security"]})]})}),p.jsxs("div",{className:"flex-1 p-6",children:[o.text&&p.jsxs("div",{className:`mb-6 p-4 rounded-md ${o.type==="error"?"bg-red-50 text-red-700":"bg-emerald-50 text-emerald-700"} flex items-start`,children:[o.type==="error"?p.jsx(Yd,{className:"h-5 w-5 mr-2 mt-0.5"}):p.jsx(Wi,{className:"h-5 w-5 mr-2 mt-0.5"}),p.jsx("span",{children:o.text})]}),d==="profile"&&p.jsxs("form",{onSubmit:y,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),p.jsx("input",{type:"text",id:"full_name",name:"full_name",value:c.full_name,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),p.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:p.jsx(aZ,{className:"h-4 w-4"})}),p.jsx("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:m,className:"flex-1 block w-full rounded-none rounded-r-md border-gray-300 focus:border-emerald-500 focus:ring-emerald-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:p.jsx(Zh,{className:"h-4 w-4"})}),p.jsx("textarea",{id:"address",name:"address",rows:3,value:c.address,onChange:m,className:"flex-1 block w-full rounded-none rounded-r-md border-gray-300 focus:border-emerald-500 focus:ring-emerald-500"})]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"submit",disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:i?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):p.jsxs(p.Fragment,{children:[p.jsx(r7,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})})]}),d==="security"&&p.jsxs("form",{onSubmit:v,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:p.jsx(t7,{className:"h-4 w-4"})}),p.jsx("input",{type:"password",id:"new_password",name:"new_password",value:c.new_password,onChange:m,className:"flex-1 block w-full rounded-none rounded-r-md border-gray-300 focus:border-emerald-500 focus:ring-emerald-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500",children:p.jsx(t7,{className:"h-4 w-4"})}),p.jsx("input",{type:"password",id:"confirm_password",name:"confirm_password",value:c.confirm_password,onChange:m,className:"flex-1 block w-full rounded-none rounded-r-md border-gray-300 focus:border-emerald-500 focus:ring-emerald-500"})]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"submit",disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50",children:i?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):p.jsxs(p.Fragment,{children:[p.jsx(r7,{className:"h-4 w-4 mr-2"}),"Update Password"]})})})]})]})]})]})]})]})}function qpt(){const[t,e]=R.useState(!1),[n,r]=R.useState(!1),[s,i]=R.useState(""),[a,o]=R.useState(""),l=Wc(),[c,u]=R.useState(null);R.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const f=window.SpeechRecognition||window.webkitSpeechRecognition,m=new f;m.continuous=!1,m.interimResults=!1,m.lang="en-US",m.onresult=y=>{const v=y.results[0][0].transcript;i(v),h(v),r(!1)},m.onerror=y=>{console.error("Speech recognition error",y.error),r(!1),o("Sorry, I didn't catch that.")},m.onend=()=>{r(!1)},u(m)}else o("Voice commands not supported in this browser.")},[]);const d=()=>{c&&(n?(c.stop(),r(!1)):(c.start(),r(!0),o("Listening..."),i("")))},h=f=>{const m=f.toLowerCase();m.includes("dashboard")||m.includes("home")?(l("/dashboard/user"),o("Navigating to Dashboard")):m.includes("pickup")||m.includes("schedule")?o("Opening Pickup Section"):m.includes("reward")||m.includes("points")?o("Showing Rewards"):m.includes("market")||m.includes("shop")?(l("/marketplace"),o("Navigating to Marketplace")):m.includes("profile")?(l("/profile"),o("Opening Profile")):o(`Command not recognized: "${f}"`),setTimeout(()=>{o(""),i("")},3e3)};return c?p.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2",children:[t&&p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 mb-2 animate-fade-in-up w-64",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsxs("h3",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[p.jsx(n7,{className:"h-4 w-4 text-emerald-500"}),"Voice Commands"]}),p.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:p.jsx(il,{className:"h-4 w-4"})})]}),p.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),'"Go to Dashboard"']}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),'"Open Marketplace"']}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),'"Schedule Pickup"']}),p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),'"Show Profile"']})]})]}),(a||s)&&p.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 mb-2 animate-fade-in-up max-w-xs",children:[s&&p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:['"',s,'"']}),a&&p.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:a})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>e(!t),className:"p-3 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400 rounded-full shadow-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",title:"Voice Commands Help",children:p.jsx("span",{className:"font-bold text-lg",children:"?"})}),p.jsx("button",{onClick:d,className:`p-4 rounded-full shadow-xl transition-all duration-300 transform hover:scale-105 ${n?"bg-red-500 text-white animate-pulse ring-4 ring-red-200":"bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:shadow-emerald-500/30"}`,children:n?p.jsx(f0e,{className:"h-6 w-6"}):p.jsx(n7,{className:"h-6 w-6"})})]})]}):null}function Gpt(){return p.jsxs(Fge,{basename:"/",children:[p.jsxs(Oge,{children:[p.jsx(Vo,{path:"/",element:p.jsx(A0e,{})}),p.jsx(Vo,{path:"/login",element:p.jsx(rxe,{})}),p.jsx(Vo,{path:"/register",element:p.jsx(ixe,{})}),p.jsx(Vo,{path:"/dashboard/user",element:p.jsx(I9e,{})}),p.jsx(Vo,{path:"/dashboard/recycler",element:p.jsx(R9e,{})}),p.jsx(Vo,{path:"/dashboard/technician",element:p.jsx(alt,{})}),p.jsx(Vo,{path:"/dashboard/educator",element:p.jsx(llt,{})}),p.jsx(Vo,{path:"/dashboard/admin",element:p.jsx(Ipt,{})}),p.jsx(Vo,{path:"/marketplace",element:p.jsx(Dpt,{})}),p.jsx(Vo,{path:"/marketplace/orders",element:p.jsx(Vpt,{})}),p.jsx(Vo,{path:"/marketplace/:id",element:p.jsx(Rpt,{})}),p.jsx(Vo,{path:"/marketplace/sell",element:p.jsx(zpt,{})}),p.jsx(Vo,{path:"/profile",element:p.jsx(Hpt,{})})]}),p.jsx(qpt,{})]})}f4.createRoot(document.getElementById("root")).render(p.jsx(Os.StrictMode,{children:p.jsx(axe,{children:p.jsx(Gpt,{})})}));export{fr as _,Ac as c,Bc as g};
